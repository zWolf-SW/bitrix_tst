(function(){"use strict";if(!!window.JCCatalogTopComponent)return;window.JCCatalogTopComponent=function(e){this.formPosting=false;this.siteId=e.siteId||"";this.ajaxId=e.ajaxId||"";this.template=e.template||"";this.componentPath=e.componentPath||"";this.parameters=e.parameters||"";this.bigData=e.bigData||{enabled:false};this.container=document.querySelector('[data-entity="'+e.container+'"]');if(this.bigData.enabled&&BX.util.object_keys(this.bigData.rows).length>0){BX.cookie_prefix=this.bigData.js.cookiePrefix||"";BX.cookie_domain=this.bigData.js.cookieDomain||"";BX.current_server_time=this.bigData.js.serverTime;BX.ready(BX.delegate(this.bigDataLoad,this))}if(e.initiallyShowHeader){BX.ready(BX.delegate(this.showHeader,this))}if(e.deferredLoad){BX.ready(BX.delegate(this.deferredLoad,this))}};window.JCCatalogTopComponent.prototype={bigDataLoad:function(){},deferredLoad:function(){this.sendRequest({action:"deferredLoad"})},sendRequest:function(e){var t={siteId:this.siteId,template:this.template,parameters:this.parameters};if(this.ajaxId){t.AJAX_ID=this.ajaxId}BX.ajax({url:this.componentPath+"/ajax.php"+(document.location.href.indexOf("clear_cache=Y")!==-1?"?clear_cache=Y":""),method:"POST",dataType:"json",timeout:60,data:BX.merge(t,e),onsuccess:BX.delegate((function(t){if(!t||!t.JS)return;BX.ajax.processScripts(BX.processHTML(t.JS).SCRIPT,false,BX.delegate((function(){this.showAction(t,e)}),this))}),this)})},showAction:function(e,t){if(!t)return;switch(t.action){case"deferredLoad":this.processDeferredLoadAction(e,t.bigData==="Y");break}},processDeferredLoadAction:function(e,t){if(!e)return;var a=t?this.bigData.rows:{};this.processItems(e.items,BX.util.array_keys(a))},processItems:function(e,t){if(!e)return;var a=BX.processHTML(e,false),i=BX.create("DIV");var s,o,r;i.innerHTML=a.HTML;s=i.querySelectorAll('[data-entity="items-row"]');if(s.length){this.showHeader(true);for(o in s){if(s.hasOwnProperty(o)){r=t?this.container.querySelectorAll('[data-entity="items-row"]'):false;s[o].style.opacity=0;if(r&&BX.type.isDomNode(r[t[o]])){r[t[o]].parentNode.insertBefore(s[o],r[t[o]])}else{this.container.appendChild(s[o])}}}new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(e){for(var t in s){if(s.hasOwnProperty(t)){s[t].style.opacity=e.opacity/100}}},complete:function(){for(var e in s){if(s.hasOwnProperty(e)){s[e].removeAttribute("style")}}}}).animate()}BX.ajax.processScripts(a.SCRIPT)},showHeader:function(e){var t=BX.findParent(this.container,{attr:{"data-entity":"parent-container"}}),a;if(t&&BX.type.isDomNode(t)){a=t.querySelector('[data-entity="header"]');if(a&&a.getAttribute("data-showed")!="true"){a.style.display="";if(e){new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(e){a.style.opacity=e.opacity/100},complete:function(){a.removeAttribute("style");a.setAttribute("data-showed","true")}}).animate()}else{a.style.opacity=100}}}}}})();
//# sourceMappingURL=script.map.js