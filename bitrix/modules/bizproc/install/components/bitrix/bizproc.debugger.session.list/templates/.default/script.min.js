(function(e,n,t,i){"use strict";var r=n.Reflection.namespace("BX.Bizproc.Component");var s=function(){function e(t){babelHelpers.classCallCheck(this,e);if(n.Type.isPlainObject(t)){this.gridId=t.gridId;this.createDebuggerSessionButton=t.createDebuggerSessionButton;this.errorsContainerDiv=t.errorsContainerDiv;this.documentSigned=t.documentSigned;this.signedParameters=t.signedParameters}}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;if(this.createDebuggerSessionButton){n.Event.bind(this.createDebuggerSessionButton,"click",(function(e){return t.createSession()}))}}},{key:"createSession",value:function e(){i.Manager.Instance.openDebuggerStartPage(this.documentSigned,{analyticsStartType:"session_list"}).then()}},{key:"showSession",value:function e(n){i.Manager.Instance.openSessionLog(n).then()}},{key:"renameSession",value:function e(n){var t=this.getGrid();if(!t){return}var i=t.getActionsPanel().getButtons().find((function(e){return e.id==="grid_edit_button_control"}));if(i){var r;(r=t.getRows().getById(n))===null||r===void 0?void 0:r.select();i.click();t.enableActionsPanel();t.getPinPanel().pinPanel(true)}}},{key:"deleteChosenSessions",value:function e(){var n=this.getGrid();if(n){this.deleteSessions(n.getRows().getSelectedIds())}}},{key:"deleteSessions",value:function e(t){var i=this;n.ajax.runComponentAction("bitrix:bizproc.debugger.session.list","deleteSessions",{mode:"class",signedParameters:this.signedParameters,data:{sessionIds:t}}).then((function(e){i.reloadGrid()}))["catch"]((function(e){i.showErrors(e.errors)}))}},{key:"showErrors",value:function e(n){var i=this;this.errorsContainerDiv.style.margin="10px";n.forEach((function(e){var n=new t.Alert({text:e.message,color:t.AlertColor.DANGER,closeBtn:true,animated:true});n.renderTo(i.errorsContainerDiv)}))}},{key:"reloadGrid",value:function e(){var n=this.getGrid();if(n){n.reload()}}},{key:"getGrid",value:function e(){if(this.gridId){return BX.Main.gridManager&&BX.Main.gridManager.getInstanceById(this.gridId)}return null}}]);return e}();r.DebuggerSessionList=s})(this.window=this.window||{},BX,BX.UI,BX.Bizproc.Debugger);
//# sourceMappingURL=script.map.js