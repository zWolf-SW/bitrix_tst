{"version":3,"file":"script.js","sources":["src/util.js","src/confidentialityselector.js","src/scrum.js","src/avatar.js","src/date.corrector.js","src/themepicker.js","src/tags.js","src/fields.js","src/buttons.js","src/typepresetselector.js","src/wizard.js","src/alert.js","src/team.js","src/features.js","src/uf.js","src/index.js"],"sourcesContent":["import {Loc, Type, Dom, Tag} from 'main.core';\n\nimport {WorkgroupForm} from './index';\n\nexport class Util\n{\n\tstatic cssClass = {\n\t\tselectorActive: '--active',\n\t\tselectorDisabled: '--disabled',\n\t};\n\n\tstatic initExpandSwitches()\n\t{\n\t\tconst expandSwitchers = document.querySelectorAll('[data-role=\"socialnetwork-group-create-ex__expandable\"]');\n\t\texpandSwitchers.forEach((switcher) => {\n\n\t\t\tswitcher.addEventListener('click', (e) => {\n\n\t\t\t\tconst targetId = e.currentTarget.getAttribute('for');\n\t\t\t\tconst target = document.getElementById(targetId);\n\t\t\t\tconst switcherWrapper = target.firstElementChild;\n\n\t\t\t\tif (target.offsetHeight === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.#sendAnalytics();\n\n\t\t\t\t\ttarget.style.height = switcherWrapper.offsetHeight + 'px';\n\t\t\t\t\ttarget.classList.add('--open');\n\n\t\t\t\t\tconst scrollToTarget = () => {\n\t\t\t\t\t\tlet elementRealTop = target.getBoundingClientRect().top / 100;\n\t\t\t\t\t\tlet time = 400;\n\t\t\t\t\t\tlet currentTime = 0;\n\t\t\t\t\t\tlet scrollBySvs = () => {\n\t\t\t\t\t\t\twindow.scrollBy(0, elementRealTop);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile (currentTime <= time)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.setTimeout(scrollBySvs, currentTime, elementRealTop);\n\t\t\t\t\t\t\tcurrentTime += time / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', scrollToTarget);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst adjustHeight = () => {\n\t\t\t\t\t\ttarget.style.height = 'auto';\n\t\t\t\t\t\ttarget.removeEventListener('transitionend', adjustHeight);\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget.addEventListener('transitionend', adjustHeight);\n\t\t\t\t\ttarget.addEventListener('transitionend', scrollToTarget);\n\t\t\t\t}\n\n\t\t\t\tif (target.offsetHeight > 0)\n\t\t\t\t{\n\t\t\t\t\ttarget.style.height = target.offsetHeight + 'px';\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\ttarget.style.removeProperty('height');\n\t\t\t\t\t\ttarget.classList.remove('--open');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #sendAnalytics()\n\t{\n\t\tconst workgroupForm = WorkgroupForm.getInstance();\n\t\tlet analyticsData = {};\n\n\t\tconst isScrumForm = workgroupForm.isScrumForm;\n\t\tif (isScrumForm)\n\t\t{\n\t\t\tconst isScrumTrialEnabled = workgroupForm.isScrumTrialEnabled;\n\n\t\t\tanalyticsData = {\n\t\t\t\tevent: 'scrum_edit_settings',\n\t\t\t\tcategory: 'scrum',\n\t\t\t\tc_section: 'scrum',\n\t\t\t\tc_sub_section: 'scrum_grid',\n\t\t\t\tc_element: 'settings_button',\n\t\t\t\ttool: 'tasks',\n\t\t\t\tstatus: 'success',\n\t\t\t\tp1: `isDemo_${isScrumTrialEnabled ? 'Y' : 'N'}`,\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst isProjectsTrialEnabled = workgroupForm.isProjectsTrialEnabled;\n\n\t\t\tanalyticsData = {\n\t\t\t\tevent: 'project_edit_settings',\n\t\t\t\tcategory: 'project',\n\t\t\t\tc_section: 'project',\n\t\t\t\tc_sub_section: 'project_grid',\n\t\t\t\tc_element: 'settings_button',\n\t\t\t\ttool: 'tasks',\n\t\t\t\tstatus: 'success',\n\t\t\t\tp1: `isDemo_${isProjectsTrialEnabled ? 'Y' : 'N'}`,\n\t\t\t};\n\t\t}\n\n\t\tif (BX.UI.Analytics)\n\t\t{\n\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tBX.Runtime.loadExtension('ui.analytics').then(() => {\n\t\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic initDropdowns()\n\t{\n\n\t\tconst dropdownAreaList = document.querySelectorAll('[data-role=\"soc-net-dropdown\"]');\n\n\t\tdropdownAreaList.forEach((dropdownArea) => {\n\n\t\t\tdropdownArea.addEventListener('click', (e) => {\n\n\t\t\t\tconst dropdownArea = e.currentTarget;\n\t\t\t\tconst dropdownItemsData = this.getDropdownItems(dropdownArea);\n\t\t\t\tconst items = [];\n\n\t\t\t\tObject.entries(dropdownItemsData).forEach(([key, value]) => {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: value,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tdropdownMenu.close();\n\n\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\tdropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tdropdownArea\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tlet neighbourDropdownArea = null;\n\t\t\t\t\t\t\tif (dropdownArea.classList.contains('--nonproject'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--project');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (dropdownArea.classList.contains('--project'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneighbourDropdownArea = dropdownArea.parentNode.querySelector('.--nonproject');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isDomNode(neighbourDropdownArea))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setDropdownValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('.ui-ctl-element'),\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.setInputValue(\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea.querySelector('input'),\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\tneighbourDropdownArea\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst dropdownMenu = new BX.PopupMenuWindow({\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: dropdownArea,\n\t\t\t\t\twidth: dropdownArea.offsetWidth,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\titems: items,\n\t\t\t\t});\n\n\t\t\t\tdropdownMenu.params.width = dropdownArea.offsetWidth;\n\t\t\t\tdropdownMenu.show();\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic setDropdownValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([, itemValue]) => {\n\t\t\tif (value === itemValue)\n\t\t\t{\n\t\t\t\tnode.innerText = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic setInputValue(node, value, containerNode)\n\t{\n\t\tconst dropdownItemsData = this.getDropdownItems(containerNode);\n\t\tObject.entries(dropdownItemsData).forEach(([itemKey]) => {\n\t\t\tif (value === itemKey)\n\t\t\t{\n\t\t\t\tnode.value = value;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getDropdownItems(node)\n\t{\n\t\tlet dropdownItemsData = {};\n\n\t\ttry\n\t\t{\n\t\t\tdropdownItemsData = JSON.parse(node.getAttribute('data-items'));\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tif (!Type.isPlainObject(dropdownItemsData))\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\treturn dropdownItemsData;\n\t}\n\n\tstatic recalcFormPartProject(isChecked)\n\t{\n\t\tisChecked = !!isChecked;\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (projectCheckboxNode)\n\t\t{\n\t\t\tthis.setCheckedValue(projectCheckboxNode, isChecked);\n\t\t}\n\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-project, .socialnetwork-group-create-ex__create--switch-nonproject').forEach((node) => {\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\tnode.classList.add('--project');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode.classList.remove('--project');\n\t\t\t}\n\t\t});\n\n\t\tthis.recalcNameInput();\n\t}\n\n\tstatic recalcNameInput()\n\t{\n\t\tconst inputNode = document.getElementById('GROUP_NAME_input');\n\t\tif (!inputNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet placeholderText = Loc.getMessage('SONET_GCE_T_NAME3');\n\n\t\tconst formInstance = WorkgroupForm.getInstance();\n\t\tif (Type.isPlainObject(formInstance.projectTypes[formInstance.selectedProjectType]))\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].SCRUM_PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_SCRUM');\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tType.isStringFilled(formInstance.projectTypes[formInstance.selectedProjectType].PROJECT)\n\t\t\t\t&& formInstance.projectTypes[formInstance.selectedProjectType].PROJECT === 'Y'\n\t\t\t)\n\t\t\t{\n\t\t\t\tplaceholderText = Loc.getMessage('SONET_GCE_T_NAME3_PROJECT');\n\t\t\t}\n\t\t}\n\n\t\tinputNode.placeholder = placeholderText;\n\t}\n\n\tstatic setCheckedValue(node, value)\n\t{\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue = !!value;\n\n\t\tif (node.type === 'checkbox')\n\t\t{\n\t\t\tnode.checked = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.value = (value ? 'Y' : 'N');\n\t\t}\n\t}\n\n\tstatic getCheckedValue(node)\n\t{\n\t\tlet result = false;\n\n\t\tif (!Type.isDomNode(node))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif (node.type == 'hidden')\n\t\t{\n\t\t\tresult = (node.value === 'Y');\n\t\t}\n\t\telse if (node.type == 'checkbox')\n\t\t{\n\t\t\tresult = node.checked;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic unselectAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorActive);\n\t\t});\n\t}\n\n\tstatic selectSelectorItem(node)\n\t{\n\t\tnode.classList.add(this.cssClass.selectorActive);\n\t}\n\n\tstatic disableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.add(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableAllSelectorItems(container, selectorClass)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.querySelectorAll(`.${selectorClass}`).forEach((selector) => {\n\t\t\tselector.classList.remove(this.cssClass.selectorDisabled);\n\t\t});\n\t}\n\n\tstatic enableSelectorItem(node)\n\t{\n\t\tnode.classList.remove(this.cssClass.selectorDisabled);\n\t}\n\n\tstatic recalcInputValue(params): void\n\t{\n\t\tconst selectedItems = params.selectedItems || [];\n\t\tconst multiple = Type.isBoolean(params.multiple) ? params.multiple : true;\n\t\tconst inputContainerNodeId = params.inputContainerNodeId || '';\n\n\t\tlet inputNodeName = params.inputNodeName || '';\n\n\t\tif (\n\t\t\t!Type.isArray(selectedItems)\n\t\t\t|| !Type.isStringFilled(inputNodeName)\n\t\t\t|| !Type.isStringFilled(inputContainerNodeId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputContainerNode = document.getElementById(inputContainerNodeId);\n\t\tif (!inputContainerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (multiple)\n\t\t{\n\t\t\tinputNodeName = `${inputNodeName}[]`;\n\t\t}\n\n\t\tinputContainerNode.querySelectorAll(`input[name=\"${inputNodeName}\"]`).forEach((node) => {\n\t\t\tDom.remove(node);\n\t\t});\n\n\t\tselectedItems.forEach((item) => {\n\n\t\t\tlet prefix = null;\n\n\t\t\tswitch (item.entityId)\n\t\t\t{\n\t\t\t\tcase 'department':\n\t\t\t\t\tprefix = 'DR';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user':\n\t\t\t\t\tprefix = 'U';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\n\t\t\tif (prefix)\n\t\t\t{\n\t\t\t\tinputContainerNode.appendChild(Tag.render`<input type=\"hidden\" name=\"${inputNodeName}\" value=\"${prefix}${item.id}\" \\>`);\n\t\t\t}\n\t\t});\n\t};\n\n}\n","import {Type} from 'main.core';\nimport {Util} from './util';\n\nimport {WorkgroupForm} from './index';\n\nexport class ConfidentialitySelector\n{\n\tstatic cssClass = {\n\t\tcontainer: 'socialnetwork-group-create-ex__type-confidentiality-wrapper',\n\t\tselector: 'socialnetwork-group-create-ex__group-selector',\n\t};\n\n\tconstructor()\n\t{\n\t\tlet firstItemSelected = false;\n\n\t\tConfidentialitySelector.getItems().forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(ConfidentialitySelector.getContainer(), ConfidentialitySelector.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst confidentialityType = selector.getAttribute('data-bx-confidentiality-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedConfidentialityType === confidentialityType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents()\n\t{\n\t\tWorkgroupForm.getInstance().subscribe('onSwitchExtranet', ConfidentialitySelector.onSwitchExtranet);\n\t}\n\n\tstatic onSwitchExtranet(event)\n\t{\n\t\tconst data = event.getData();\n\t\tif (!Type.isBoolean(data.isChecked))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.isChecked)\n\t\t{\n\t\t\tConfidentialitySelector.unselectAll();\n\t\t\tConfidentialitySelector.select('secret')\n\t\t\tConfidentialitySelector.disableAll();\n\t\t\tConfidentialitySelector.enable('secret')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tConfidentialitySelector.enableAll();\n\t\t}\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedConfidentialityType: selector.getAttribute('data-bx-confidentiality-type'),\n\t\t});\n\t}\n\n\tstatic getContainer()\n\t{\n\t\treturn document.querySelector(`.${this.cssClass.container}`);\n\t}\n\n\tstatic getItems()\n\t{\n\t\tconst container = this.getContainer();\n\t\tif (!container)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn container.querySelectorAll(`.${this.cssClass.selector}`);\n\t}\n\n\tstatic unselectAll()\n\t{\n\t\tUtil.unselectAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic select(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.selectSelectorItem(selector);\n\t\t});\n\t}\n\n\tstatic disableAll()\n\t{\n\t\tUtil.disableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enableAll()\n\t{\n\t\tUtil.enableAllSelectorItems(this.getContainer(), this.cssClass.selector);\n\t}\n\n\tstatic enable(accessCode)\n\t{\n\t\tthis.getItems().forEach((selector) => {\n\t\t\tif (selector.getAttribute('data-bx-confidentiality-type') !== accessCode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtil.enableSelectorItem(selector);\n\t\t});\n\t}\n}\n","import {Dom, Type} from 'main.core';\n\nimport {ConfidentialitySelector} from './confidentialityselector';\nimport {WorkgroupForm} from './index';\nimport {Util} from './util';\n\nexport class Scrum\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tisScrumProject: boolean,\n\t\t}\n\t)\n\t{\n\t\tthis.isScrumProject = params.isScrumProject;\n\t}\n\n\tmakeAdditionalCustomizationForm()\n\t{\n\t\tif (this.isScrumProject)\n\t\t{\n\t\t\tthis.createHiddenInputs();\n\t\t\tthis.showScrumBlocks();\n\t\t\tif (!Type.isStringFilled(WorkgroupForm.getInstance().selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tConfidentialitySelector.unselectAll();\n\t\t\t\tConfidentialitySelector.select('open');\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedConfidentialityType: 'open',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = true;\n\t\t\t\tlandingCheckbox.checked = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeHiddenInputs();\n\t\t\tthis.hideScrumBlocks();\n\n\t\t\tconst landingCheckbox = document.getElementById('GROUP_LANDING');\n\t\t\tif (landingCheckbox)\n\t\t\t{\n\t\t\t\tlandingCheckbox.disabled = false;\n\t\t\t}\n\n\t\t\tthis.toggleFeatures(false);\n\t\t}\n\n\t\tUtil.recalcNameInput();\n\t}\n\n\thideScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.remove('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.add('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.add('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.remove('--space-bottom');\n\t\t}\n \t}\n\n\tshowScrumBlocks()\n\t{\n\t\tdocument.querySelectorAll('.socialnetwork-group-create-ex__create--switch-scrum, .socialnetwork-group-create-ex__create--switch-nonscrum').forEach((scrumBlock) => {\n\t\t\tscrumBlock.classList.add('--scrum');\n\t\t});\n\n\t\tconst moderatorsBlock = document.getElementById('expandable-moderator-block');\n\t\tif (moderatorsBlock)\n\t\t{\n\t\t\tmoderatorsBlock.classList.remove('socialnetwork-group-create-ex__content-expandable');\n\t\t}\n\n\t\tconst moderatorsSwitch = document.getElementById('GROUP_MODERATORS_PROJECT_switch');\n\t\tif (moderatorsSwitch)\n\t\t{\n\t\t\tmoderatorsSwitch.classList.remove('ui-ctl-file-link');\n\t\t}\n\n\t\tconst ownerBlock = document.getElementById('GROUP_OWNER_block');\n\t\tif (ownerBlock)\n\t\t{\n\t\t\townerBlock.classList.add('--space-bottom');\n\t\t}\n\t}\n\n\tcreateHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].appendChild(\n\t\t\tDom.create('input', {\n\t\t\t\tattrs: {\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tname: 'SCRUM_PROJECT',\n\t\t\t\t\tvalue: 'Y',\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tremoveHiddenInputs()\n\t{\n\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll('input[name=\"SCRUM_PROJECT\"]')\n\t\t\t.forEach((input) => {\n\t\t\t\tDom.remove(input);\n\t\t\t})\n\t\t;\n\t}\n\n\ttoggleFeatures(isScrum: boolean)\n\t{\n\t\tconst featuresNode = document.querySelector('.socialnetwork-group-create-ex__project-instruments');\n\t\tif (featuresNode)\n\t\t{\n\t\t\tfeaturesNode.querySelectorAll('input[type=\"checkbox\"][name=\"tasks_active\"], input[type=\"checkbox\"][name=\"calendar_active\"]').forEach((featuresCheckboxNode) => {\n\t\t\t\tif (isScrum)\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = true;\n\t\t\t\t\tfeaturesCheckboxNode.checked = true;\n\n\t\t\t\t\tfeaturesCheckboxNode.parentNode.insertBefore(Dom.create('input', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\tname: featuresCheckboxNode.name,\n\t\t\t\t\t\t\tvalue: 'Y',\n\t\t\t\t\t\t}\n\t\t\t\t\t}), featuresCheckboxNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfeaturesCheckboxNode.disabled = false;\n\n\t\t\t\t\tdocument.forms['sonet_group_create_popup_form'].querySelectorAll(`input[type=\"hidden\"][name=\"${featuresCheckboxNode.name}\"]`)\n\t\t\t\t\t\t.forEach((hiddenInput) => {\n\t\t\t\t\t\t\tDom.remove(hiddenInput);\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Type, Loc, Dom, ajax } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Button } from 'ui.buttons';\n\nexport class Avatar\n{\n\tstatic classList = {\n\t\thidden: '--hidden',\n\t\tselected: '--selected',\n\t};\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tgroupId: number,\n\t\t}\n\t)\n\t{\n\t\tthis.confirmPopup = null;\n\n\t\tif (\n\t\t\t!Type.isStringFilled(params.componentName)\n\t\t\t|| Type.isUndefined(params.signedParameters)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.groupId = (!Type.isUndefined(params.groupId) ? parseInt(params.groupId) : 0);\n\n\t\tconst container = document.querySelector('[data-role=\"group-avatar-cont\"]');\n\t\tif (!container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectorNode = container.querySelector('[data-role=\"group-avatar-selector\"]');\n\t\tthis.imageNode = container.querySelector('[data-role=\"group-avatar-image\"]');\n\t\tthis.inputNode = container.querySelector('[data-role=\"group-avatar-input\"]');\n\t\tthis.typeInputNode = container.querySelector('[data-role=\"group-avatar-type-input\"]');\n\t\tthis.removeNode = container.querySelector('[data-role=\"group-avatar-remove\"]');\n\n\t\tif (\n\t\t\t!Type.isDomNode(this.imageNode)\n\t\t\t|| !Type.isDomNode(this.inputNode)\n\t\t\t|| !Type.isDomNode(this.typeInputNode)\n\t\t\t|| !Type.isDomNode(this.removeNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.recalc();\n\n\t\tconst avatarEditor = new BX.AvatarEditor({\n\t\t\tenableCamera: false,\n\t\t});\n\n\t\tthis.selectorNode.addEventListener('click', (e) => {\n\n\t\t\tif (\n\t\t\t\te.target.getAttribute('data-role') === 'group-avatar-remove'\n\t\t\t\t&& this.imageNode.style.backgroundImage !== ''\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.showConfirmPopup(Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM'), this.deletePhoto.bind(this));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-type')\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.setType(e.target.getAttribute('data-avatar-type'));\n\t\t\t}\n\t\t\telse if (e.target.getAttribute('data-role') === 'group-avatar-image')\n\t\t\t{\n\t\t\t\tavatarEditor.show('file');\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onApply', (event: BaseEvent) => {\n\t\t\tconst [ file ] = event.getCompatData();\n\n\t\t\tconst formData = new FormData();\n\t\t\tif (!file.name)\n\t\t\t{\n\t\t\t\tfile.name = 'tmp.png';\n\t\t\t}\n\t\t\tformData.append('newPhoto', file, file.name);\n\n\t\t\tthis.changePhoto(formData);\n\t\t});\n\t}\n\n\trecalc()\n\t{\n\t\tif (this.getFileId() <= 0)\n\t\t{\n\t\t\tthis.removeNode.classList.add(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.removeNode.classList.remove(Avatar.classList.hidden);\n\t\t\tthis.imageNode.classList.add(Avatar.classList.selected);\n\t\t}\n\t}\n\n\tchangePhoto(formData)\n\t{\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'loadPhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: formData,\n\t\t}).then((response) => {\n\n\t\t\tif (\n\t\t\t\tType.isPlainObject(response.data)\n\t\t\t\t&& parseInt(response.data.fileId) > 0\n\t\t\t\t&& Type.isStringFilled(response.data.fileUri)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.clearType();\n\t\t\t\tthis.inputNode.value = parseInt(response.data.fileId);\n\t\t\t\tthis.typeInputNode.value = '';\n\t\t\t\tthis.imageNode.style = `background-image: url('${encodeURI(response.data.fileUri)}'); background-size: cover;`;\n\t\t\t\tthis.recalc();\n\t\t\t}\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({loader: loader});\n\t\t\tthis.showErrorPopup(response[\"errors\"][0].message);\n\t\t});\n\t}\n\n\tdeletePhoto()\n\t{\n\t\tconst fileId = this.getFileId();\n\t\tif (fileId < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst loader = this.showLoader({\n\t\t\tnode: this.imageNode,\n\t\t\tloader: null,\n\t\t\tsize: 78,\n\t\t});\n\n\t\tajax.runComponentAction(this.componentName, 'deletePhoto', {\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: {\n\t\t\t\tfileId: fileId,\n\t\t\t\tgroupId: this.groupId,\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tthis.imageNode.style = '';\n\t\t\tthis.inputNode.value = '';\n\t\t\tthis.recalc();\n\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\tthis.hideLoader({\n\t\t\t\tloader: loader,\n\t\t\t});\n\t\t\tthis.showErrorPopup(response.errors[0].message);\n\t\t});\n\t}\n\n\tclearType()\n\t{\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\ttypeItemNode.classList.remove(Avatar.classList.selected);\n\t\t});\n\t}\n\n\tsetType(avatarType)\n\t{\n\t\tthis.inputNode.value = '';\n\t\tthis.imageNode.style = '';\n\t\tthis.typeInputNode.value = avatarType;\n\n\t\tthis.imageNode.classList.remove(Avatar.classList.selected);\n\n\t\tthis.selectorNode.querySelectorAll('[data-role=\"group-avatar-type\"]').forEach((typeItemNode) => {\n\t\t\tif (typeItemNode.getAttribute('data-avatar-type') !== avatarType)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttypeItemNode.classList.add(Avatar.classList.selected);\n\t\t});\n\n\n\t\tthis.recalc();\n\t}\n\n\tgetFileId()\n\t{\n\t\treturn (Type.isStringFilled(this.inputNode.value) ? parseInt(this.inputNode.value) : 0);\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tlet loader = null;\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tif (Type.isNull(params.loader))\n\t\t\t{\n\t\t\t\tloader = new BX.Loader({\n\t\t\t\t\ttarget: params.node,\n\t\t\t\t\tsize: params.hasOwnProperty('size') ? params.size : 40,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tloader = params.loader;\n\t\t\t}\n\n\t\t\tloader.show();\n\t\t}\n\n\t\treturn loader;\n\t}\n\n\thideLoader(params)\n\t{\n\t\tif (!Type.isNull(params.loader))\n\t\t{\n\t\t\tparams.loader.hide();\n\t\t\tparams.loader = null;\n\t\t}\n\n\t\tif (Type.isDomNode(params.node))\n\t\t{\n\t\t\tDom.clean(params.node)\n\t\t}\n\t}\n\n\tshowErrorPopup(error)\n\t{\n\t\tif (!error)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew Popup('gce-image-upload-error', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: error,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t}).show();\n\t}\n\n\tshowConfirmPopup(text, confirmCallback)\n\t{\n\t\tthis.confirmPopup = new Popup('gce-image-delete-confirm', null, {\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: text,\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tthis.confirmPopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_YES'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t\tconfirmCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\ttext: Loc.getMessage('SONET_GCE_T_IMAGE_DELETE_CONFIRM_NO'),\n\t\t\t\t\tevents : {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.confirmPopup.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tthis.confirmPopup.show();\n\t}\n}\n","import {Event} from 'main.core';\n\ntype Params = {\n\tculture: CultureData\n}\n\ntype CultureData = {\n\tshortDateFormat: string\n}\n\nexport class DateCorrector\n{\n\t#dateStartInput;\n\t#dateEndInput;\n\t#culture: CultureData;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#dateStartInput = this.#getDateInput('PROJECT_DATE_START');\n\t\tthis.#dateEndInput = this.#getDateInput('PROJECT_DATE_FINISH');\n\n\t\tthis.#culture = params.culture;\n\n\t\tthis.#bindHandlers();\n\t}\n\n\t#getDateInput(name: string): ?HTMLElement\n\t{\n\t\tif (document.getElementsByName(name)[0])\n\t\t{\n\t\t\treturn document.getElementsByName(name)[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#bindHandlers()\n\t{\n\t\tif (this.#dateStartInput)\n\t\t{\n\t\t\tEvent.bind(this.#dateStartInput, 'change', this.#adjustDates.bind(this, true));\n\t\t}\n\n\t\tif (this.#dateEndInput)\n\t\t{\n\t\t\tEvent.bind(this.#dateEndInput, 'change', this.#adjustDates.bind(this, false));\n\t\t}\n\t}\n\n\t#adjustDates(startChanged: boolean)\n\t{\n\t\tconst start = this.#getTimeStamp(this.#dateStartInput.value);\n\t\tconst end = this.#getTimeStamp(this.#dateEndInput.value);\n\n\t\tconst startDate = start ? new Date(start * 1000) : null;\n\t\tconst endDate = end ? new Date(end * 1000) : null;\n\n\t\tif (startDate && endDate)\n\t\t{\n\t\t\tif (startDate >= endDate)\n\t\t\t{\n\t\t\t\tconst defaultOffset = 86400 * 1000;\n\n\t\t\t\tif (startChanged)\n\t\t\t\t{\n\t\t\t\t\tconst newEndDate = new Date(startDate.getTime() + defaultOffset);\n\n\t\t\t\t\tthis.#dateEndInput.value = this.#getFormatDate(newEndDate.getTime() / 1000);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst newStartDate = new Date(endDate.getTime() - defaultOffset);\n\n\t\t\t\t\tthis.#dateStartInput.value = this.#getFormatDate(newStartDate.getTime() / 1000);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#getTimeStamp(date: string): ?number\n\t{\n\t\tif (date.toString().length > 0)\n\t\t{\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tconst parsedValue = BX.parseDate(date, true);\n\t\t\tif (parsedValue === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.#convertToSeconds(parsedValue.getTime());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#convertToSeconds(value: number): number\n\t{\n\t\treturn Math.floor((parseInt(value) / 1000));\n\t}\n\n\t#getFormatDate(timeStamp: number): string\n\t{\n\t\tconst date = new Date(timeStamp * 1000);\n\n\t\treturn BX.date.format(this.#culture.shortDateFormat, date)\n\t}\n}","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class ThemePicker\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tcontainer: Element,\n\t\t\ttheme: object,\n\t\t}\n\t)\n\t{\n\t\tthis.container = params.container;\n\t\tthis.theme = params.theme;\n\t\tthis.draw(this.theme);\n\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.addEventListener('click', this.open);\n\t\t}\n\n\t\tconst deleteNode = this.getNode('delete');\n\t\tif (deleteNode)\n\t\t{\n\t\t\tdeleteNode.addEventListener('click', () => {\n\t\t\t\tthis.select({});\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe('Intranet.ThemePicker:onSave', (event: BaseEvent) => {\n\t\t\tconst [ data ] = event.getData();\n\t\t\tthis.select(data);\n\t\t});\n\t}\n\n\tselect(data)\n\t{\n\t\tconst theme = (Type.isPlainObject(data.theme) ? data.theme : {});\n\t\tthis.draw(theme);\n\t}\n\n\tdraw(theme)\n\t{\n\t\tconst previewImageNode = this.getNode('image');\n\t\tif (previewImageNode)\n\t\t{\n\t\t\tpreviewImageNode.style.backgroundImage = (Type.isStringFilled(theme.previewImage) ? `url('${theme.previewImage}')` : '');\n\t\t\tpreviewImageNode.style.backgroundColor = (Type.isStringFilled(theme.previewColor) ? theme.previewColor : 'transparent');\n\t\t}\n\n\t\tconst titleNode = this.getNode('title');\n\t\tif (titleNode)\n\t\t{\n\t\t\ttitleNode.innerHTML = (Type.isStringFilled(theme.title) ? theme.title : '');\n\t\t}\n\n\t\tconst inputNode = this.getNode('id');\n\t\tif (inputNode)\n\t\t{\n\t\t\tinputNode.value = (Type.isStringFilled(theme.id) ? theme.id : '');\n\t\t}\n\t}\n\n\topen(event)\n\t{\n\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(true);\n\n\t\tevent.preventDefault();\n\t}\n\n\tgetNode(name)\n\t{\n\t\tconst result = null;\n\t\tif (!Type.isStringFilled(name))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\treturn this.container.querySelector(`[bx-group-edit-theme-node=\"${name}\"]`);\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport { TagSelector as EntityTagSelector } from 'ui.entity-selector';\nimport { BaseEvent } from 'main.core.events';\n\nexport class Tags\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tgroupId: number,\n\t\t\tcontainerNodeId: string,\n\t\t\thiddenFieldId: string,\n\t\t}\n\t)\n\t{\n\t\tconst containerNode = document.getElementById(params.containerNodeId);\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hiddenFieldNode = document.getElementById(params.hiddenFieldId);\n\n\t\tconst tagSelector = new EntityTagSelector({\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_TAG_ADD'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_KEYWORDS_ADD_TAG'),\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 350,\n\t\t\t\theight: 300,\n\t\t\t\toffsetLeft: 50,\n\t\t\t\tcompactView: true,\n\t\t\t\tpreload: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_FAILED'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_HINT'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: params.groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('SONET_GCE_T_TAG_SEARCH_ADD_FOOTER_LABEL'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\tthis.recalcinputValue(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\n\t\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst tagsList = name.split(',');\n\n\t\t\t\t\t\t\t\ttagsList.forEach((tag) => {\n\t\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\t\tid: tag,\n\t\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\t\ttitle: tag,\n\t\t\t\t\t\t\t\t\t\ttabs: [ 'all', 'recents' ],\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(containerNode);\n\t}\n\n\trecalcinputValue(items)\n\t{\n\t\tif (\n\t\t\t!Type.isArray(items)\n\t\t\t|| !Type.isDomNode(this.hiddenFieldNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagsList = [];\n\n\n\t\titems.forEach((item) => {\n\t\t\ttagsList.push(item.id);\n\t\t});\n\n\t\tthis.hiddenFieldNode.value = tagsList.join(',');\n\t}\n}\n","import { Type, Loc, ajax } from 'main.core';\nimport { WorkgroupForm } from './index';\n\nexport class FieldsManager\n{\n\tstatic mandatoryFieldsByStep = {\n\t\t2: [\n\t\t\t{\n\t\t\t\tid: 'GROUP_NAME_input',\n\t\t\t\ttype: 'string',\n\t\t\t\tbindNodeId: 'GROUP_NAME_input',\n\t\t\t},\n\t\t],\n\t\t4: [\n\t\t\t{\n\t\t\t\tid: 'SCRUM_MASTER_CODE_container',\n\t\t\t\ttype: 'input_hidden_container',\n\t\t\t\tbindNodeId: 'SCRUM_MASTER_selector',\n\t\t\t\tcondition: () => {\n\t\t\t\t\treturn !!WorkgroupForm.getInstance().scrumManager.isScrumProject;\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t};\n\n\tstatic async check()\n\t{\n\t\tif (WorkgroupForm.getInstance().wizardManager.stepsCount === 1)\n\t\t{\n\t\t\treturn await this.checkAll();\n\t\t}\n\n\t\treturn await this.checkStep(WorkgroupForm.getInstance().wizardManager.currentStep);\n\t}\n\n\tstatic async checkStep(step)\n\t{\n\t\tstep = parseInt(step);\n\n\t\tconst errorDataList = [];\n\n\t\tif (Type.isArray(this.mandatoryFieldsByStep[step]))\n\t\t{\n\t\t\tfor (const fieldData of this.mandatoryFieldsByStep[step])\n\t\t\t{\n\n\t\t\t\tlet fieldNode = document.getElementById(fieldData.id);\n\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (fieldNode.tagName.toLowerCase() !== 'input')\n\t\t\t\t{\n\t\t\t\t\tif (fieldData.type === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldNode = fieldNode.querySelector('input[type=\"text\"]');\n\t\t\t\t\t\tif (!Type.isDomNode(fieldNode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfieldData.fieldNode = fieldNode;\n\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\tconst errorText = await this.checkField(fieldData);\n\t\t\t\tif (Type.isStringFilled(errorText))\n\t\t\t\t{\n\t\t\t\t\tconst bindNode = document.getElementById(fieldData.bindNodeId)\n\t\t\t\t\terrorDataList.push({\n\t\t\t\t\t\tbindNode: (Type.isDomNode(bindNode) ? bindNode : fieldNode),\n\t\t\t\t\t\tmessage: errorText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic async checkAll()\n\t{\n\t\tlet errorDataList = [];\n\t\tfor (const stepData of Object.entries(this.mandatoryFieldsByStep))\n\t\t{\n\t\t\terrorDataList = errorDataList.concat(await this.checkStep(parseInt(stepData[0])));\n\t\t}\n\n\t\treturn errorDataList;\n\t}\n\n\tstatic async checkField(fieldData)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (\n\t\t\t!Type.isPlainObject(fieldData)\n\t\t\t&& !Type.isDomNode(fieldData.fieldNode)\n\t\t)\n\t\t{\n\t\t\treturn errorText;\n\t\t}\n\n\t\tif (Type.isFunction(fieldData.condition))\n\t\t{\n\t\t\tif (!fieldData.condition())\n\t\t\t{\n\t\t\t\treturn errorText;\n\t\t\t}\n\t\t}\n\n\t\tconst fieldNode = fieldData.fieldNode;\n\t\tconst fieldType = (Type.isStringFilled(fieldData.type) ? fieldData.type : 'string');\n\t\tconst fieldId = fieldData.id;\n\t\tconst groupId = WorkgroupForm.getInstance()?.groupId;\n\t\tconst type = WorkgroupForm.getInstance()?.selectedProjectType;\n\n\t\tswitch (fieldType)\n\t\t{\n\t\t\tcase 'string':\n\t\t\t\tif (fieldNode.value.trim() === '')\n\t\t\t\t{\n\t\t\t\t\terrorText = Loc.getMessage('SONET_GCE_T_STRING_FIELD_ERROR');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (groupId <= 0 && fieldId === 'GROUP_NAME_input')\n\t\t\t\t{\n\t\t\t\t\tconst exists = await FieldsManager.checkSameGroupExists(fieldNode.value);\n\t\t\t\t\tif (exists)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorText = type === 'project'\n\t\t\t\t\t\t\t? Loc.getMessage('SONET_GCE_T_GROUP_NAME_EXISTS_PROJECT')\n\t\t\t\t\t\t\t: Loc.getMessage('SONET_GCE_T_GROUP_NAME_EXISTS');\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\terrorText = '';\n\t\t\t\tbreak;\n\n\t\t\tcase 'input_hidden_container':\n\t\t\t\tlet empty = true;\n\t\t\t\tfieldNode.querySelectorAll('input[type=\"hidden\"]').forEach((hiddenNode) => {\n\t\t\t\t\tif (!empty)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isStringFilled(hiddenNode.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tempty = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\terrorText = (empty ? Loc.getMessage('SONET_GCE_T_STRING_FIELD_ERROR') : '');\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\terrorText = '';\n\t\t}\n\n\t\treturn errorText;\n\t}\n\n\tstatic showError(errorData)\n\t{\n\t\tif (\n\t\t\t!Type.isPlainObject(errorData)\n\t\t\t|| !Type.isStringFilled(errorData.message)\n\t\t\t|| !Type.isDomNode(errorData.bindNode)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorkgroupForm.getInstance().alertManager.showAlert(errorData.message, errorData.bindNode.parentNode);\n\t}\n\n\tstatic async checkSameGroupExists(groupName: string)\n\t{\n\t\tconst response = await ajax.runAction(\n\t\t\t'socialnetwork.api.workgroup.isExistingGroup',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tname: groupName,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\treturn response?.data?.exists;\n\t}\n}\n","import { Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ButtonManager } from 'ui.buttons';\nimport { Messenger } from 'im.public.iframe';\n\nimport { WorkgroupForm } from './index';\nimport { FieldsManager } from './fields';\n\nexport class Buttons\n{\n\tstatic cssClass = {\n\t\thidden: 'socialnetwork-group-create-ex__button-invisible',\n\t};\n\n\tconstructor()\n\t{\n\t\tthis.submitButton = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!this.submitButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initCollabCreateButton();\n\n\t\tthis.submitButtonClickHandler = this.submitButtonClickHandler.bind(this);\n\t\tthis.submitButton.addEventListener('click', this.submitButtonClickHandler);\n\n\t\tthis.backButton = document.getElementById('sonet_group_create_popup_form_button_step_2_back');\n\t\tif (this.backButton)\n\t\t{\n\t\t\tthis.backButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (WorkgroupForm.getInstance().wizardManager.currentStep > 1)\n\t\t\t\t{\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\tif (\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t\t\t) // skip confidentiality step\n\t\t\t\t\t{\n\t\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep--;\n\t\t\t\t\t}\n\n\t\t\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t\t\t}\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t});\n\t\t}\n\n\t\tthis.cancelButton = document.getElementById('sonet_group_create_popup_form_button_step_2_cancel');\n\n\t\tif (this.cancelButton)\n\t\t{\n\t\t\tthis.cancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\t\t\tif (\n\t\t\t\t\tbutton\n\t\t\t\t\t&& button.isDisabled()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\n\t\t\t\tif (currentSlider)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t});\n\n\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst url = e.currentTarget.getAttribute('bx-url');\n\t\t\t\t\tif (Type.isStringFilled(url))\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location = url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\tcompatData: [ false ],\n\t\t\t\t\tdata: false,\n\t\t\t\t});\n\n\t\t\t\tEventEmitter.emit(window.top, 'BX.Bitrix24.PageSlider:close', event);\n\n\t\t\t\tEventEmitter.emit(window.top, 'onSonetIframeCancelClick');\n\n\t\t\t\treturn e.preventDefault();\n\t\t\t})\n\t\t}\n\t}\n\n\tasync submitButtonClickHandler(e)\n\t{\n\t\te.preventDefault();\n\n\t\tconst button = ButtonManager.createFromNode(e.currentTarget);\n\t\tif (\n\t\t\tbutton\n\t\t\t&& button.isDisabled()\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorkgroupForm.getInstance().alertManager.hideAllAlerts();\n\n\t\tconst errorDataList = (await FieldsManager.check()).filter((errorData) => {\n\t\t\treturn (\n\t\t\t\tType.isPlainObject(errorData)\n\t\t\t\t&& Type.isStringFilled(errorData.message)\n\t\t\t\t&& Type.isDomNode(errorData.bindNode)\n\t\t\t);\n\t\t});\n\n\t\tif (errorDataList.length > 0)\n\t\t{\n\t\t\terrorDataList.forEach((errorData) => {\n\t\t\t\tFieldsManager.showError(errorData);\n\t\t\t});\n\t\t}\n\t\telse if (WorkgroupForm.getInstance().wizardManager.currentStep < WorkgroupForm.getInstance().wizardManager.stepsCount)\n\t\t{\n\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\tif (\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep === 3\n\t\t\t\t&& Object.entries(WorkgroupForm.getInstance().confidentialityTypes) <= 1\n\t\t\t) // skip confidentiality step\n\t\t\t{\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.currentStep++;\n\t\t\t}\n\n\t\t\tWorkgroupForm.getInstance().wizardManager.showCurrentStep();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst submitFunction = function(event) {\n\t\t\t\tWorkgroupForm.getInstance().submitForm(event)\n\t\t\t}.bind(WorkgroupForm.getInstance());\n\n\t\t\tsubmitFunction(e);\n\t\t}\n\n\t\treturn e.preventDefault();\n\t}\n\n\tstatic showWaitSubmitButton(disable)\n\t{\n\t\tdisable = !!disable;\n\n\t\tconst buttonNode = document.getElementById('sonet_group_create_popup_form_button_submit');\n\t\tif (!buttonNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\n\t\tif (disable)\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(true);\n\t\t\t}\n\t\t\tbuttonNode.removeEventListener('click', WorkgroupForm.getInstance().submitButtonClickHandler);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t}\n\t\t\tbuttonNode.addEventListener('click', WorkgroupForm.getInstance().submitButtonClickHandler);\n\t\t}\n\t}\n\n\tstatic disableButton(buttonNode, disable)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst button = ButtonManager.createFromNode(buttonNode);\n\t\tif (!button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbutton.setDisabled(disable);\n\t}\n\n\tstatic showButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.remove(this.cssClass.hidden);\n\t}\n\n\tstatic hideButton(buttonNode)\n\t{\n\t\tif (!Type.isDomNode(buttonNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tbuttonNode.classList.add(this.cssClass.hidden);\n\t}\n\n\tinitCollabCreateButton()\n\t{\n\t\tthis.collabCreateButton = document.getElementById('sonet_group_create_popup_form_button_collab');\n\n\t\tif (!this.collabCreateButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.collabCreateButton.onclick = (e) => {\n\t\t\te.preventDefault();\n\n\t\t\tthis.#sendCollabCreateButtonAnalytics();\n\t\t\tMessenger.openChatCreation('collab');\n\t\t};\n\t}\n\n\t#sendCollabCreateButtonAnalytics()\n\t{\n\t\tconst analyticsData = {\n\t\t\tevent: 'click_create_new',\n\t\t\tcategory: 'collab',\n\t\t\tc_section: 'project',\n\t\t\ttool: 'im',\n\t\t\tp2: `user_${WorkgroupForm.getInstance().currentUserType}`,\n\t\t};\n\n\t\tif (BX.UI.Analytics)\n\t\t{\n\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tBX.Runtime.loadExtension('ui.analytics').then(() => {\n\t\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateButtonsByProject(projectType: string)\n\t{\n\t\tif (projectType === 'collab')\n\t\t{\n\t\t\tButtons.hideButton(this.submitButton);\n\t\t\tButtons.showButton(this.collabCreateButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tButtons.hideButton(this.collabCreateButton);\n\t\t\tButtons.showButton(this.submitButton);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport { Limit } from 'socialnetwork.limit';\nimport { Util } from './util';\nimport { Buttons } from './buttons';\n\nimport { WorkgroupForm } from './index';\n\nexport class TypePresetSelector\n{\n\tbuttonsInstance: ?Buttons;\n\n\tconstructor(buttonsInstance = null)\n\t{\n\t\tthis.cssClass = {\n\t\t\tcontainer: 'socialnetwork-group-create-ex__type-preset-wrapper',\n\t\t\tselector: 'socialnetwork-group-create-ex__type-preset-selector',\n\t\t};\n\n\t\tthis.buttonsInstance = buttonsInstance;\n\n\t\tthis.container = document.querySelector(`.${this.cssClass.container}`);\n\t\tif (!this.container)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet firstItemSelected = false;\n\n\t\tconst selectors = this.container.querySelectorAll(`.${this.cssClass.selector}`);\n\t\tselectors.forEach((selector) => {\n\t\t\tselector.addEventListener('click', (e) => {\n\n\t\t\t\tconst selector = e.currentTarget;\n\t\t\t\tif (selector.classList.contains(Util.cssClass.selectorDisabled))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst limitFeature = selector.getAttribute('data-bx-project-limit');\n\t\t\t\tif (limitFeature?.length > 0)\n\t\t\t\t{\n\t\t\t\t\tLimit.showInstance({ featureId: limitFeature });\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tUtil.unselectAllSelectorItems(this.container, this.cssClass.selector);\n\t\t\t\tUtil.selectSelectorItem(selector);\n\n\t\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\t\t\tselectedProjectType: projectType,\n\t\t\t\t});\n\n\t\t\t\tthis.buttonsInstance?.updateButtonsByProject(projectType);\n\n\t\t\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t\t\t});\n\n\t\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\n\t\t\tif (Type.isStringFilled(WorkgroupForm.getInstance().selectedProjectType))\n\t\t\t{\n\t\t\t\tif (WorkgroupForm.getInstance().selectedProjectType === projectType)\n\t\t\t\t{\n\t\t\t\t\tthis.selectItem(selector);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!firstItemSelected)\n\t\t\t{\n\t\t\t\tthis.selectItem(selector);\n\t\t\t\tfirstItemSelected = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tselectItem(selector: Element)\n\t{\n\t\tconst projectType = selector.getAttribute('data-bx-project-type');\n\t\tUtil.selectSelectorItem(selector);\n\t\tWorkgroupForm.getInstance().recalcForm({\n\t\t\tselectedProjectType: projectType,\n\t\t});\n\t\tWorkgroupForm.getInstance().wizardManager.setProjectType(projectType);\n\t}\n}\n","import { Type } from 'main.core';\nimport { WorkgroupForm } from './index';\nimport { Buttons } from './buttons';\n\nexport class Wizard\n{\n\tstatic cssClass = {\n\t\tstep1Backgroud: 'socialnetwork-group-create-ex__background-gif',\n\t\tbreadcrumbsContainer: 'socialnetwork-group-create-ex__breadcrumbs',\n\t\tbreadcrumbsItem: 'socialnetwork-group-create-ex__breadcrumbs-item',\n\t\tbodyContainer: 'socialnetwork-group-create-ex__content',\n\t\tbodyItem: 'socialnetwork-group-create-ex__content-body',\n\t\tactiveBodyItem: '--active',\n\t\tactiveBreadcrumbsItem: '--active',\n\t};\n\n\tstatic getFirstStepNumber()\n\t{\n\t\treturn (Object.entries(WorkgroupForm.getInstance().projectTypes).length > 1 ? 1 : 2);\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcurrentStep: number,\n\t\t\tstepsCount: number,\n\t\t}\n\t)\n\t{\n\t\tthis.processedStep = 0;\n\t\tthis.currentStep = params.currentStep;\n\t\tthis.stepsCount = params.stepsCount;\n\n\t\tthis.step1BackgroudNode = document.querySelector(`.${Wizard.cssClass.step1Backgroud}`);\n\t\tthis.bodyContainer = document.querySelector(`.${Wizard.cssClass.bodyContainer}`);\n\t\tthis.breadcrumbsContainer = document.querySelector(`.${Wizard.cssClass.breadcrumbsContainer}`);\n\t}\n\n\tshowCurrentStep()\n\t{\n\t\tif (Type.isDomNode(this.bodyContainer))\n\t\t{\n\t\t\tthis.bodyContainer.querySelectorAll(`.${Wizard.cssClass.bodyItem}`).forEach((bodyItem) => {\n\t\t\t\tif (bodyItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.add(Wizard.cssClass.activeBodyItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbodyItem.classList.remove(Wizard.cssClass.activeBodyItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (Type.isDomNode(this.breadcrumbsContainer))\n\t\t{\n\t\t\tthis.breadcrumbsContainer.querySelectorAll(`.${Wizard.cssClass.breadcrumbsItem}`).forEach((breadcrumbsItem) => {\n\t\t\t\tif (breadcrumbsItem.classList.contains(`--step-${this.currentStep}`))\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.add(Wizard.cssClass.activeBreadcrumbsItem)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreadcrumbsItem.classList.remove(Wizard.cssClass.activeBreadcrumbsItem);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tthis.currentStep === Wizard.getFirstStepNumber()\n\t\t\t|| this.currentStep <= this.processedStep + 1\n\t\t)\n\t\t{\n\t\t\tButtons.hideButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t\t{\n\t\t\t\tthis.step1BackgroudNode.classList.add(`--stop`);\n\t\t\t}\n\t\t\tButtons.showButton(WorkgroupForm.getInstance().buttonsInstance.backButton);\n\t\t}\n\n\t\tthis.#sendAnalytics();\n\t}\n\n\tsetProjectType(projectType)\n\t{\n\t\tif (Type.isDomNode(this.step1BackgroudNode))\n\t\t{\n\t\t\t[ 'project', 'scrum', 'group', 'collab' ].forEach(projectType => {\n\t\t\t\tthis.step1BackgroudNode.classList.remove(`--${projectType}`);\n\t\t\t})\n\t\t\tthis.step1BackgroudNode.classList.remove('--stop');\n\t\t\tthis.step1BackgroudNode.classList.add(`--${projectType}`);\n\t\t}\n\t}\n\n\trecalcAfterSubmit(params)\n\t{\n\t\tconst processedStep = (Type.isStringFilled(params.processedStep) ? params.processedStep : '');\n\t\tconst createdGroupId = parseInt(!Type.isUndefined(params.createdGroupId) ? params.createdGroupId : 0);\n\t\tconst tabInputNode = document.getElementById('TAB');\n\t\tconst tabGroupIdNode = document.getElementById('SONET_GROUP_ID');\n\n\t\tif (\n\t\t\t!tabInputNode\n\t\t\t|| !Type.isStringFilled(processedStep)\n\t\t\t|| createdGroupId <= 0\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttabGroupIdNode.value = createdGroupId;\n\n\t\tif (processedStep === 'create')\n\t\t{\n\t\t\tthis.processedStep = 1;\n\t\t\ttabInputNode.value = 'edit';\n\t\t}\n\t\telse if (processedStep === 'edit')\n\t\t{\n\t\t\tthis.processedStep = 3;\n\t\t\ttabInputNode.value = 'invite';\n\t\t\tthis.bodyContainer.querySelectorAll('.socialnetwork-group-create-ex__create--switch-notinviteonly').forEach((selector) => {\n\t\t\t\tselector.classList.add('--inviteonly');\n\t\t\t});\n\t\t}\n\n\t\tthis.showCurrentStep();\n\t}\n\n\t#sendAnalytics()\n\t{\n\t\tlet event = '';\n\t\tlet analyticsData = {};\n\n\t\tif (this.currentStep === 3)\n\t\t{\n\t\t\tif (WorkgroupForm.getInstance().isScrumForm)\n\t\t\t{\n\t\t\t\tevent = 'scrum_create_step2';\n\t\t\t\tanalyticsData = {\n\t\t\t\t\tevent,\n\t\t\t\t\tcategory: 'scrum',\n\t\t\t\t\tc_section: 'scrum',\n\t\t\t\t\tc_sub_section: 'scrum_grid',\n\t\t\t\t\tc_element: 'continue_button',\n\t\t\t\t\ttool: 'tasks',\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\tp1: `isDemo_${WorkgroupForm.getInstance().isScrumTrialEnabled ? 'Y' : 'N'}`,\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tevent = 'project_create_step2';\n\t\t\t\tanalyticsData = {\n\t\t\t\t\tevent,\n\t\t\t\t\tcategory: 'project',\n\t\t\t\t\tc_section: 'project',\n\t\t\t\t\tc_sub_section: 'project_grid',\n\t\t\t\t\tc_element: 'continue_button',\n\t\t\t\t\ttool: 'tasks',\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\tp1: `isDemo_${WorkgroupForm.getInstance().isProjectsTrialEnabled ? 'Y' : 'N'}`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isStringFilled(event))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (BX.UI.Analytics)\n\t\t{\n\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tBX.Runtime.loadExtension('ui.analytics').then(() => {\n\t\t\t\tBX.UI.Analytics.sendData(analyticsData);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Type, Dom } from 'main.core';\nimport { Alert } from 'ui.alerts';\n\nexport class AlertManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\terrorContainerId: string,\n\t\t}\n\t)\n\t{\n\t\tif (!Type.isStringFilled(params.errorContainerId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.globalErrorContainer = document.getElementById(params.errorContainerId);\n\n\t\tthis.nodeAlerts = new Map();\n\t}\n\n\tshowAlert(text, targetNode)\n\t{\n\t\tif (Type.isDomNode(targetNode))\n\t\t{\n\t\t\ttargetNode.classList.add('ui-ctl-danger');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttargetNode = this.globalErrorContainer;\n\t\t}\n\n\n\t\tconst textAlert = new Alert({\n\t\t\tcolor: Alert.Color.DANGER,\n\t\t\tanimate: true,\n\t\t});\n\n\t\tthis.nodeAlerts.set(targetNode, textAlert);\n\n\t\tsetTimeout(() => {\n\t\t\ttargetNode.parentNode.insertBefore(textAlert.getContainer(), targetNode.nextSibling);\n\t\t\ttextAlert.setText(text);\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: Dom.getPosition(targetNode).top,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t}, 500);\n\n\t}\n\n\thideAllAlerts()\n\t{\n\t\tthis.nodeAlerts.forEach((textAlert, targetNode) => {\n\t\t\ttextAlert.hide();\n\n\t\t\tif (Type.isDomNode(targetNode))\n\t\t\t{\n\t\t\t\ttargetNode.classList.remove('ui-ctl-danger');\n\t\t\t}\n\t\t});\n\n\t\tthis.nodeAlerts.clear();\n\t}\n}\n","import {Loc, Type, Dom} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {TagSelector} from 'ui.entity-selector';\n\nimport {WorkgroupForm} from './index';\nimport {Util} from './util';\n\nexport class TeamManager\n{\n\tstatic instance = null;\n\n\tstatic contextList = {\n\t\towner: 'GROUP_INVITE_OWNER',\n\t\tscrumMaster: 'GROUP_INVITE_SCRUM_MASTER',\n\t\tmoderators: 'GROUP_INVITE_MODERATORS',\n\t\tusers: 'GROUP_INVITE',\n\t};\n\n\tstatic getInstance()\n\t{\n\t\treturn TeamManager.instance;\n\t}\n\n\tconstructor(params)\n\t{\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\n\t\tthis.ownerSelector = null;\n\t\tthis.scrumMasterSelector = null;\n\t\tthis.moderatorsSelector = null;\n\t\tthis.usersSelector = null;\n\n\t\tthis.ownerOptions = params.ownerOptions || {};\n\t\tthis.scrumMasterOptions = params.scrumMasterOptions || {};\n\t\tthis.moderatorsOptions = params.moderatorsOptions || {};\n\t\tthis.usersOptions = params.usersOptions || {};\n\n\t\tthis.ownerContainerNode = document.getElementById('GROUP_OWNER_selector');\n\t\tthis.scrumMasterContainerNode = document.getElementById('SCRUM_MASTER_selector');\n\t\tthis.moderatorsContainerNode = document.getElementById('GROUP_MODERATORS_selector');\n\t\tthis.usersContainerNode = document.getElementById('GROUP_USERS_selector');\n\n\t\tthis.isCurrentUserAdmin = (Type.isBoolean(params.isCurrentUserAdmin) ? params.isCurrentUserAdmin : false);\n\t\tthis.extranetInstalled = (Type.isBoolean(params.extranetInstalled) ? params.extranetInstalled : false);\n\t\tthis.allowExtranet = (Type.isBoolean(params.allowExtranet) ? params.allowExtranet : false);\n\n\t\tTeamManager.instance = this;\n\n\t\tthis.buildOwnerSelector();\n\t\tthis.buildScrumMasterSelector();\n\t\tthis.buildModeratorsSelector();\n\t\tthis.buildUsersSelector();\n\n\t\tthis.bindEvents();\n\t}\n\n\tbuildOwnerSelector()\n\t{\n\t\tif (!Type.isDomNode(this.ownerContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.ownerContainerNode);\n\n\t\tconst selectorOptions = this.ownerOptions;\n\t\tthis.ownerSelector = new TagSelector({\n\n\t\t\tid: selectorOptions.selectorId || 'group_create_owner',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_owner',\n\t\t\t\toffsetLeft: 78,\n\t\t\t\tcontext: TeamManager.contextList.owner,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onOwnerSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onOwnerSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\tinviteExtranetLink: true,\n\t\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: true,\n\t\t\t\t\t\t\tfooterInviteIntranetOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tcollabers: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_OWNER'),\n\t\t});\n\n\t\tthis.ownerSelector.renderTo(this.ownerContainerNode);\n\t}\n\n\tbuildScrumMasterSelector()\n\t{\n\t\tif (!Type.isDomNode(this.scrumMasterContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.scrumMasterContainerNode);\n\n\t\tconst selectorOptions = this.scrumMasterOptions;\n\n\t\tthis.scrumMasterSelector = new TagSelector({\n\n\t\t\tid: selectorOptions.selectorId || 'group_create_scrum_master',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_scrum_master',\n\t\t\t\toffsetLeft: 78,\n\t\t\t\tcontext: TeamManager.contextList.scrumMaster,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onScrumMasterSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onScrumMasterSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\tfooterInviteIntranetOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tcollabers: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_CHANGE_SCRUM_MASTER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_CHANGE_SCRUM_MASTER_MORE'),\n\t\t});\n\n\t\tthis.scrumMasterSelector.renderTo(this.scrumMasterContainerNode);\n\t}\n\n\tbuildModeratorsSelector()\n\t{\n\t\tif (!Type.isDomNode(this.moderatorsContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.moderatorsContainerNode);\n\n\t\tconst selectorOptions = this.moderatorsOptions;\n\n\t\tthis.moderatorsSelector = new TagSelector({\n\t\t\tid: selectorOptions.selectorId || 'group_create_moderators',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_moderators',\n\t\t\t\toffsetLeft: 78,\n\t\t\t\tcontext: TeamManager.contextList.moderators,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onModeratorsSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onModeratorsSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: true,\n\t\t\t\t\t\t\tfooterInviteIntranetOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tcollabers: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: true,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_USER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_ADD_USER_MORE'),\n\t\t});\n\n\t\tthis.moderatorsSelector.renderTo(this.moderatorsContainerNode);\n\t}\n\n\tbuildUsersSelector()\n\t{\n\t\tif (!Type.isDomNode(this.usersContainerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.usersContainerNode);\n\n\t\tconst selectorOptions = this.usersOptions;\n\n\t\tthis.usersSelector = new TagSelector({\n\t\t\tid: selectorOptions.selectorId || 'group_create_users',\n\t\t\tdialogOptions: {\n\t\t\t\tid: selectorOptions.selectorId || 'group_create_users',\n\t\t\t\toffsetLeft: 78,\n\t\t\t\tcontext: TeamManager.contextList.users,\n\t\t\t\tpreselectedItems: selectorOptions.value,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoad.bind(this),\n\t\t\t\t\t'Item:onSelect': TeamManager.onUsersSelect,\n\t\t\t\t\t'Item:onDeselect': TeamManager.onUsersSelect,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tinviteEmployeeLink: true,\n\t\t\t\t\t\t\t'!userId': (this.isCurrentUserAdmin ? [ parseInt(Loc.getMessage('USER_ID')) ] : []),\n\t\t\t\t\t\t\tintranetUsersOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\t\tcheckWorkgroupWhenInvite: true,\n\t\t\t\t\t\t\tfooterInviteIntranetOnly: !this.allowExtranet,\n\t\t\t\t\t\t\tcollabers: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: (selectorOptions.enableSelectDepartment ? 'usersAndDepartments' : 'usersOnly'),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tmultiple: true,\n\t\t\taddButtonCaption: Loc.getMessage('SONET_GCE_T_ADD_USER'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SONET_GCE_T_ADD_USER_MORE'),\n\t\t});\n\n\t\tthis.usersSelector.renderTo(this.usersContainerNode);\n\t}\n\n\tbindEvents()\n\t{\n\t\tWorkgroupForm.getInstance().subscribe('onSwitchExtranet', this.onSwitchExtranet.bind(this));\n\t\tEventEmitter.emit('BX.Socialnetwork.WorkgroupFormTeamManager::onEventsBinded');\n\t}\n\n\tonSwitchExtranet(event)\n\t{\n\t\tconst data = event.getData();\n\t\tif (!Type.isBoolean(data.isChecked))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.allowExtranet = this.extranetInstalled && data.isChecked;\n\n\t\tif (\n\t\t\tthis.ownerSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.ownerSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.ownerSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.ownerOptions,\n\t\t\t});\n\t\t\tthis.buildOwnerSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.scrumMasterSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.scrumMasterSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.scrumMasterSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.scrumMasterOptions,\n\t\t\t});\n\n\t\t\tthis.buildScrumMasterSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.moderatorsSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.moderatorsSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.moderatorsSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.moderatorsOptions,\n\t\t\t});\n\n\t\t\tthis.buildModeratorsSelector();\n\t\t}\n\n\t\tif (\n\t\t\tthis.usersSelector\n\t\t\t&& [ 'DONE', 'UNSENT' ].includes(this.usersSelector.getDialog().loadState)\n\t\t)\n\t\t{\n\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\tselector: this.usersSelector,\n\t\t\t\tisChecked: data.isChecked,\n\t\t\t\toptions: this.usersOptions,\n\t\t\t});\n\n\t\t\tthis.buildUsersSelector();\n\t\t}\n\t}\n\n\trecalcSelectorByExtranetSwitched(params)\n\t{\n\t\tconst selector = params.selector;\n\t\tconst isChecked = params.isChecked;\n\n\t\tconst context = selector.getDialog().getContext();\n\t\tlet selectedItems = selector.getDialog().getSelectedItems();\n\n\t\tif (\n\t\t\tthis.extranetInstalled && !isChecked\n\t\t\t&& Type.isArray(selectedItems)\n\t\t)\n\t\t{\n\t\t\tselectedItems = selectedItems.filter((item) => {\n\t\t\t\treturn !(item.getEntityId() === 'user' && item.getEntityType() === 'extranet');\n\t\t\t});\n\n\t\t\tswitch (context)\n\t\t\t{\n\t\t\t\tcase TeamManager.contextList.owner:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'OWNER_CODE',\n\t\t\t\t\t\tinputContainerNodeId: 'OWNER_CODE_container',\n\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.scrumMaster:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'SCRUM_MASTER_CODE',\n\t\t\t\t\t\tinputContainerNodeId: 'SCRUM_MASTER_CODE_container',\n\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.moderators:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'MODERATOR_CODES',\n\t\t\t\t\t\tinputContainerNodeId: 'MODERATOR_CODES_container',\n\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase TeamManager.contextList.users:\n\t\t\t\t\tUtil.recalcInputValue({\n\t\t\t\t\t\tselectedItems: selectedItems,\n\t\t\t\t\t\tinputNodeName: 'USER_CODES',\n\t\t\t\t\t\tinputContainerNodeId: 'USER_CODES_container',\n\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\n\t\tparams.options.value = selectedItems.map((item) => {\n\t\t\treturn [ item.getEntityId(), item.getId() ];\n\t\t});\n\t}\n\n\tonLoad(event: BaseEvent)\n\t{\n\t\tswitch (event.getTarget().context)\n\t\t{\n\t\t\tcase TeamManager.contextList.owner:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.ownerSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.ownerOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.scrumMaster:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.scrumMasterSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.scrumMasterOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.moderators:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.moderatorsSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.moderatorsOptions,\n\t\t\t\t});\n\n\t\t\t\tif (WorkgroupForm.getInstance().initialFocus === 'addModerator')\n\t\t\t\t{\n\t\t\t\t\tthis.moderatorsSelector.getAddButtonLink().click();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase TeamManager.contextList.users:\n\t\t\t\tthis.recalcSelectorByExtranetSwitched({\n\t\t\t\t\tselector: this.usersSelector,\n\t\t\t\t\tisChecked: this.allowExtranet,\n\t\t\t\t\toptions: this.usersOptions,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n\tstatic onOwnerSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'OWNER_CODE',\n\t\t\tinputContainerNodeId: 'OWNER_CODE_container',\n\t\t\tmultiple: false,\n\t\t});\n\t}\n\n\tstatic onScrumMasterSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'SCRUM_MASTER_CODE',\n\t\t\tinputContainerNodeId: 'SCRUM_MASTER_CODE_container',\n\t\t\tmultiple: false,\n\t\t});\n\t}\n\n\tstatic onModeratorsSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'MODERATOR_CODES',\n\t\t\tinputContainerNodeId: 'MODERATOR_CODES_container',\n\t\t\tmultiple: true,\n\t\t});\n\t}\n\n\tstatic onUsersSelect(event: BaseEvent)\n\t{\n\t\tUtil.recalcInputValue({\n\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\tinputNodeName: 'USER_CODES',\n\t\t\tinputContainerNodeId: 'USER_CODES_container',\n\t\t\tmultiple: true,\n\t\t});\n\n\t\tconst hintNode = document.getElementById('GROUP_ADD_DEPT_HINT_block');\n\t\tif (hintNode)\n\t\t{\n\t\t\tTeamManager.showDepartmentHint({\n\t\t\t\tselectedItems: event.getTarget().getSelectedItems(),\n\t\t\t\thintNode: hintNode,\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showDepartmentHint(params)\n\t{\n\t\tconst selectedItems = params.selectedItems || {};\n\t\tconst hintNode = params.hintNode || null;\n\t\tif (!Type.isDomNode(hintNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isArray(selectedItems))\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t\treturn;\n\t\t}\n\n\t\tconst departmentFound = !Type.isUndefined(selectedItems.find((item) => {\n\t\t\treturn (item.entityId === 'department');\n\t\t}));\n\n\t\tif (departmentFound)\n\t\t{\n\t\t\thintNode.classList.add('visible');\n\t\t}\n\t\telse\n\t\t{\n\t\t\thintNode.classList.remove('visible');\n\t\t}\n\t}\n}\n","export class FeaturesManager\n{\n\tconstructor()\n\t{\n\t\tconst containerNode = document.getElementById('additional-block-features');\n\t\tif (!containerNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--edit').forEach((editButton) => {\n\n\t\t\teditButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.add('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tconst textNode = featureNode.querySelector('[data-role=\"feature-label\"]');\n\t\t\t\t\tif (\n\t\t\t\t\t\tinputNode\n\t\t\t\t\t\t&& textNode\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = textNode.innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\n\t\tcontainerNode.querySelectorAll('.socialnetwork-group-create-ex__project-instruments--icon-action.--revert').forEach((cancelButton) => {\n\n\t\t\tcancelButton.addEventListener('click', (e) => {\n\n\t\t\t\tconst editButton = e.currentTarget;\n\t\t\t\tconst featureNode = editButton.closest('.socialnetwork-group-create-ex__project-instruments--item');\n\t\t\t\tif (featureNode)\n\t\t\t\t{\n\t\t\t\t\tfeatureNode.classList.remove('--custom-value');\n\n\t\t\t\t\tconst inputNode = featureNode.querySelector('[data-role=\"feature-input-text\"]');\n\t\t\t\t\tif (inputNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tinputNode.value = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t});\n\t}\n}\n","import { Type } from 'main.core';\nimport { FieldsManager } from './fields';\n\nexport class UFManager\n{\n\tconstructor(\n\t\tparams: {\n\t\t\tmandatoryUFList: object,\n\t\t}\n\t)\n\t{\n\t\tif (\n\t\t\tType.isPlainObject(FieldsManager.mandatoryFieldsByStep)\n\t\t\t&& Type.isArray(FieldsManager.mandatoryFieldsByStep[2])\n\t\t\t&& Type.isArray(params.mandatoryUFList)\n\t\t)\n\t\t{\n\t\t\tparams.mandatoryUFList.forEach((ufData) => {\n\t\t\t\tif (\n\t\t\t\t\t!Type.isStringFilled(ufData.id)\n\t\t\t\t\t|| !Type.isStringFilled(ufData.type)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tFieldsManager.mandatoryFieldsByStep[2].push(ufData);\n\t\t\t});\n\t\t}\n\t}\n\n}\n","import { Type, Loc, Tag, ajax, Uri, Text, Event } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Scrum } from './scrum';\nimport { Avatar } from './avatar';\nimport { DateCorrector } from './date.corrector';\nimport { ThemePicker } from './themepicker';\nimport { Tags } from './tags';\nimport { Util } from './util';\nimport { TypePresetSelector } from './typepresetselector';\nimport { ConfidentialitySelector } from './confidentialityselector';\nimport { Buttons } from './buttons';\nimport { Wizard } from './wizard';\nimport { AlertManager } from './alert';\nimport { TeamManager } from './team';\nimport { FeaturesManager } from './features';\nimport { UFManager } from './uf';\nimport { Lottie } from 'ui.lottie';\nimport projectLottieIconInfo from '../lottie/project-info-icon.json';\nimport scrumLottieIconInfo from '../lottie/scrum-info-icon.json';\n\n\nclass WorkgroupForm extends EventEmitter\n{\n\tstatic instance = null;\n\n\t#projectLottieAnimation: any = null;\n\t#projectLottieIconContainer: HTMLElement;\n\t#scrumLottieAnimation: any = null;\n\t#scrumLottieIconContainer: HTMLElement;\n\n\tstatic PATH_TO_CSS = '/bitrix/components/bitrix/socialnetwork.group_create.ex/templates/.default/style.css';\n\n\tstatic getInstance()\n\t{\n\t\treturn WorkgroupForm.instance;\n\t}\n\n\tconstructor(\n\t\tparams: {\n\t\t\tcomponentName: string,\n\t\t\tsignedParameters: string,\n\t\t\tselectedProjectType: string,\n\t\t\tselectedConfidentialityType: string,\n\t\t\tgroupId: number,\n\t\t\tisScrumProject: boolean,\n\t\t\tconfig: Object,\n\t\t\tavatarUploaderId: string,\n\t\t\tthemePickerData: Object,\n\t\t\tprojectOptions: Object,\n\t\t\tprojectTypes: Object,\n\t\t\tconfidentialityTypes: Object,\n\t\t\tstepsCount: number,\n\t\t\tfocus: string,\n\t\t\tculture: Object,\n\t\t\tcurrentUserType: string,\n\t\t\tisScrumForm: boolean,\n\t\t\tisScrumTrialEnabled: boolean,\n\t\t\tisProjectsTrialEnabled: boolean,\n\t\t}\n\t)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.WorkgroupForm');\n\n\t\tthis.componentName = params.componentName;\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.userSelector = '';\n\t\tthis.lastAction = 'invite';\n\t\tthis.animationList = {};\n\t\tthis.selectedTypeCode = false;\n\t\tthis.#projectLottieAnimation = null;\n\t\tthis.#projectLottieIconContainer = null;\n\t\tthis.#scrumLottieAnimation = null;\n\t\tthis.#scrumLottieIconContainer = null;\n\n\t\tthis.groupId = parseInt(params.groupId);\n\t\tthis.isScrumProject = params.isScrumProject;\n\t\tthis.config = params.config;\n\t\tthis.avatarUploaderId = params.avatarUploaderId;\n\t\tthis.themePickerData = params.themePickerData;\n\t\tthis.projectOptions = params.projectOptions;\n\t\tthis.isScrumForm = params.isScrumForm;\n\t\tthis.isScrumTrialEnabled = params.isScrumTrialEnabled;\n\t\tthis.isProjectsTrialEnabled = params.isProjectsTrialEnabled;\n\n\t\tthis.projectTypes = params.projectTypes;\n\t\tthis.confidentialityTypes = params.confidentialityTypes;\n\t\tthis.selectedProjectType = params.selectedProjectType;\n\t\tthis.selectedConfidentialityType = params.selectedConfidentialityType;\n\t\tthis.initialFocus = (Type.isStringFilled(params.focus) ? params.focus : '');\n\t\tthis.culture = params.culture ? params.culture : {};\n\t\tthis.currentUserType = params.currentUserType;\n\n\t\tthis.demoInfoAlreadyBeenShown = false;\n\n\t\tthis.scrumManager = new Scrum({\n\t\t\tisScrumProject: this.isScrumProject,\n\t\t});\n\n\t\tthis.wizardManager = new Wizard({\n\t\t\tcurrentStep: Object.entries(this.projectTypes).length > 1 ? 1 : 2,\n\t\t\tstepsCount: (params.stepsCount > 1 ? params.stepsCount : 1),\n\t\t});\n\n\t\tthis.alertManager = new AlertManager({\n\t\t\terrorContainerId: 'sonet_group_create_error_block',\n\t\t});\n\n\t\tWorkgroupForm.instance = this;\n\t\tthis.buttonsInstance = new Buttons();\n\n\t\tthis.init(params);\n\t}\n\n\tinit(params)\n\t{\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.recalcForm();\n\t\t}\n\n\t\tnew Avatar({\n\t\t\tcomponentName: this.componentName,\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tgroupId: this.groupId,\n\t\t});\n\n\t\tif (\n\t\t\tType.isPlainObject(params.themePickerData)\n\t\t\t&& document.getElementById('GROUP_THEME_container')\n\t\t)\n\t\t{\n\t\t\tnew ThemePicker({\n\t\t\t\tcontainer: document.getElementById('GROUP_THEME_container'),\n\t\t\t\ttheme: params.themePickerData,\n\t\t\t});\n\t\t}\n\n\t\tnew DateCorrector({\n\t\t\tculture: this.culture\n\t\t});\n\n\t\tif (document.getElementById('group-tags-bind-node'))\n\t\t{\n\t\t\tnew Tags({\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tcontainerNodeId: 'group-tags-bind-node',\n\t\t\t\thiddenFieldId: 'GROUP_KEYWORDS',\n\t\t\t});\n\t\t}\n\n\t\tnew TypePresetSelector(this.buttonsInstance);\n\t\tnew ConfidentialitySelector();\n\t\tnew FeaturesManager();\n\n\t\tif (Type.isStringFilled(this.initialFocus))\n\t\t{\n\t\t\tif (this.initialFocus === 'description')\n\t\t\t{\n\t\t\t\tconst groupDescriptionNode = document.getElementById('GROUP_DESCRIPTION_input');\n\t\t\t\tif (groupDescriptionNode)\n\t\t\t\t{\n\t\t\t\t\tgroupDescriptionNode.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst groupNameNode = document.getElementById('GROUP_NAME_input');\n\t\t\tif (groupNameNode)\n\t\t\t{\n\t\t\t\tgroupNameNode.focus();\n\t\t\t}\n\t\t}\n\n\t\tthis.bindEvents();\n\n\t\tUtil.initExpandSwitches();\n\t\tUtil.initDropdowns();\n\n\t\tif (Type.isStringFilled(params.expandableSettingsNodeId))\n\t\t{\n\t\t\tBX.UI.Hint.init(document.getElementById(params.expandableSettingsNodeId));\n\t\t}\n\n\t\tif (this.groupId <= 0 && this.selectedProjectType === 'scrum')\n\t\t{\n\t\t\tthis.saveScrumAnalyticData();\n\t\t}\n\t}\n\n\tbindEvents()\n\t{\n\t\tif (BX.SidePanel.Instance.getTopSlider())\n\t\t{\n\t\t\tEventEmitter.subscribe(BX.SidePanel.Instance.getTopSlider().getWindow(), 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst sliderInstance = event.getTarget();\n\t\t\t\t\tif (!sliderInstance)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.SidePanel.Instance.destroy(sliderInstance.getUrl());\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t}\n\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (\n\t\t\textranetCheckboxNode\n\t\t\t&& extranetCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\textranetCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchExtranet(extranetCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tif (\n\t\t\tvisibleCheckboxNode\n\t\t\t&& visibleCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tvisibleCheckboxNode.addEventListener('click', () => {\n\t\t\t\tthis.switchNotVisible(visibleCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tconst projectCheckboxNode = document.getElementById('GROUP_PROJECT');\n\t\tif (\n\t\t\tprojectCheckboxNode\n\t\t\t&& projectCheckboxNode.type === 'checkbox'\n\t\t)\n\t\t{\n\t\t\tprojectCheckboxNode.addEventListener('click', () => {\n\t\t\t\tUtil.recalcFormPartProject(projectCheckboxNode.checked);\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Socialnetwork.WorkgroupFormTeamManager::onEventsBinded',\n\t\t\tthis.recalcFormDependencies.bind(this)\n\t\t);\n\t}\n\n\trecalcForm(params)\n\t{\n\t\tif (Type.isPlainObject(params))\n\t\t{\n\t\t\tif (!Type.isUndefined(params.selectedProjectType))\n\t\t\t{\n\t\t\t\tthis.selectedProjectType = (Type.isStringFilled(params.selectedProjectType) ? params.selectedProjectType : '');\n\t\t\t}\n\t\t\tif (!Type.isUndefined(params.selectedConfidentialityType))\n\t\t\t{\n\t\t\t\tthis.selectedConfidentialityType = (Type.isStringFilled(params.selectedConfidentialityType) ? params.selectedConfidentialityType : '');\n\t\t\t}\n\t\t}\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tthis.scrumManager.isScrumProject = (\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'])\n\t\t\t\t&& this.projectTypes[this.selectedProjectType]['SCRUM_PROJECT'] === 'Y'\n\t\t\t);\n\n\t\t\tUtil.recalcFormPartProject(\n\t\t\t\tType.isPlainObject(this.projectTypes[this.selectedProjectType])\n\t\t\t\t&& Type.isStringFilled(this.projectTypes[this.selectedProjectType].PROJECT)\n\t\t\t\t&& this.projectTypes[this.selectedProjectType].PROJECT === 'Y'\n\t\t\t);\n\t\t}\n\n\t\tthis.scrumManager.makeAdditionalCustomizationForm();\n\n\t\tif (this.groupId <= 0)\n\t\t{\n\t\t\tconst openedCheckboxNode = document.getElementById('GROUP_OPENED');\n\t\t\tif (openedCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(openedCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].OPENED)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].OPENED === 'Y'\n\t\t\t\t));\n\t\t\t}\n\n\t\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\t\tif (visibleCheckboxNode)\n\t\t\t{\n\t\t\t\tUtil.setCheckedValue(visibleCheckboxNode, (\n\t\t\t\t\tType.isPlainObject(this.confidentialityTypes[this.selectedConfidentialityType])\n\t\t\t\t\t&& Type.isStringFilled(this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE)\n\t\t\t\t\t&& this.confidentialityTypes[this.selectedConfidentialityType].VISIBLE === 'Y'\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tthis.recalcFormDependencies();\n\t};\n\n\trecalcFormDependencies()\n\t{\n\t\tconst extranetCheckboxNode = document.getElementById('IS_EXTRANET_GROUP');\n\t\tif (extranetCheckboxNode)\n\t\t{\n\t\t\tthis.switchExtranet(Util.getCheckedValue(extranetCheckboxNode));\n\t\t}\n\n\t\tconst visibleCheckboxNode = document.getElementById('GROUP_VISIBLE');\n\t\tif (visibleCheckboxNode)\n\t\t{\n\t\t\tthis.switchNotVisible(visibleCheckboxNode.checked)\n\t\t}\n\t}\n\n\tswitchExtranet(isChecked)\n\t{\n\t\tthis.emit('onSwitchExtranet', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tisChecked,\n\t\t\t},\n\t\t}));\n\n\t\tconst openedBlock = document.getElementById('GROUP_OPENED');\n\t\tif (openedBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (openedBlock.type === 'checkbox')\n\t\t\t\t{\n\t\t\t\t\topenedBlock.disabled = true;\n\t\t\t\t\topenedBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\topenedBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst visibleBlock = document.getElementById('GROUP_VISIBLE');\n\t\tif (visibleBlock)\n\t\t{\n\t\t\tif (!isChecked)\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (visibleBlock.type == 'checkbox')\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.disabled = true;\n\t\t\t\t\tvisibleBlock.checked = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvisibleBlock.value = 'N';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.switchNotVisible(visibleBlock.checked)\n\t\t}\n\t}\n\n\tswitchNotVisible(isChecked)\n\t{\n\t\tconst openedNode = document.getElementById('GROUP_OPENED')\n\t\tif (\n\t\t\topenedNode\n\t\t\t&& openedNode.type == 'checkbox'\n\t\t)\n\t\t{\n\t\t\tif (isChecked)\n\t\t\t{\n\t\t\t\topenedNode.disabled = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\topenedNode.disabled = true;\n\t\t\t\topenedNode.checked = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tsubmitForm(e)\n\t{\n\t\tlet actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tif (actionUrl)\n\t\t{\n\t\t\tconst groupIdNode = document.getElementById('SONET_GROUP_ID');\n\t\t\tlet b24statAction = 'addSonetGroup';\n\n\t\t\tif (groupIdNode)\n\t\t\t{\n\t\t\t\tif (parseInt(groupIdNode.value) <= 0)\n\t\t\t\t{\n\t\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\t\taction: 'createGroup',\n\t\t\t\t\t\tgroupType: this.selectedTypeCode,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statAction = 'editSonetGroup';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\tb24statAction: b24statAction,\n\t\t\t});\n\n\t\t\tconst formElements = document.forms['sonet_group_create_popup_form'].elements;\n\t\t\tif (\n\t\t\t\tformElements.GROUP_PROJECT\n\t\t\t\t&& (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t|| formElements.GROUP_OPENED\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet b24statType = (formElements.GROUP_PROJECT.checked ? 'project-' : 'group-');\n\t\t\t\tif (\n\t\t\t\t\tformElements.IS_EXTRANET_GROUP\n\t\t\t\t\t&& formElements.IS_EXTRANET_GROUP.checked\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tb24statType += 'external';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tb24statType += (formElements.GROUP_OPENED.checked ? 'open' : 'closed');\n\t\t\t\t}\n\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tb24statType: b24statType,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tformElements.SCRUM_PROJECT\n\t\t\t\t&& b24statAction === 'addSonetGroup'\n\t\t\t)\n\t\t\t{\n\t\t\t\tactionUrl = Uri.addParam(actionUrl, {\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_create',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tButtons.showWaitSubmitButton(true);\n\n\t\t\tajax.submitAjax(\n\t\t\t\tdocument.forms['sonet_group_create_popup_form'],\n\t\t\t\t{\n\t\t\t\t\turl: actionUrl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tPROJECT_OPTIONS: this.projectOptions,\n\t\t\t\t\t},\n\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\tif (Type.isStringFilled(response.ERROR))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst warningText = (\n\t\t\t\t\t\t\t\tType.isStringFilled(response.WARNING)\n\t\t\t\t\t\t\t\t\t? `${response.WARNING}<br>`\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.alertManager.showAlert(`${warningText}${response.ERROR}`);\n\n\t\t\t\t\t\t\tif (Type.isStringFilled(response.WIZARD_STEP_PROCESSED))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.wizardManager.recalcAfterSubmit({\n\t\t\t\t\t\t\t\t\tprocessedStep: response.WIZARD_STEP_PROCESSED.toLowerCase(),\n\t\t\t\t\t\t\t\t\tcreatedGroupId: parseInt(!Type.isUndefined(response.CREATED_GROUP_ID) ? response.CREATED_GROUP_ID : 0),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isArray(response.SUCCESSFULL_USERS_ID)\n\t\t\t\t\t\t\t\t&& response.SUCCESSFULL_USERS_ID.length > 0\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.SUCCESSFULL_USERS_ID = response.SUCCESSFULL_USERS_ID.map((userId) => {\n\t\t\t\t\t\t\t\t\treturn Number(userId);\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\tconst usersSelector = TeamManager.getInstance().usersSelector;\n\t\t\t\t\t\t\t\tconst usersSelectorDialog = (usersSelector ? usersSelector.getDialog() : null);\n\t\t\t\t\t\t\t\tif (usersSelectorDialog)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tusersSelectorDialog.getSelectedItems().forEach((item) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\titem.entityId === 'user'\n\t\t\t\t\t\t\t\t\t\t\t&& response.SUCCESSFULL_USERS_ID.includes(item.id)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\titem.deselect();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', {\n\t\t\t\t\t\t\t\t\tcode: 'afterInvite',\n\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.MESSAGE === 'SUCCESS')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst currentSlider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst event = new BaseEvent({\n\t\t\t\t\t\t\t\t\tcompatData: [ currentSlider.getEvent('onClose') ],\n\t\t\t\t\t\t\t\t\tdata: currentSlider.getEvent('onClose'),\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tEventEmitter.emit(window.top, 'SidePanel.Slider:onClose', event);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (window === top.window) // not frame\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (Type.isStringFilled(response.URL))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttop.location.href = response.URL;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (Type.isStringFilled(response.ACTION))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet eventData = null;\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t[ 'create', 'edit' ].includes(response.ACTION)\n\t\t\t\t\t\t\t\t\t&& !Type.isUndefined(response.GROUP)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: (response.ACTION == 'create' ? 'afterCreate' : 'afterEdit'),\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tgroup: response.GROUP,\n\t\t\t\t\t\t\t\t\t\t\tprojectOptions: this.projectOptions,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (response.ACTION === 'invite')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\teventData = {\n\t\t\t\t\t\t\t\t\t\tcode: 'afterInvite',\n\t\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (eventData)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst groupWillBeShown = (\n\t\t\t\t\t\t\t\t\t\tresponse.ACTION === 'create'\n\t\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(response.URL)\n\t\t\t\t\t\t\t\t\t\t&& (\n\t\t\t\t\t\t\t\t\t\t\t!Type.isStringFilled(this.config.refresh)\n\t\t\t\t\t\t\t\t\t\t\t|| this.config.refresh === 'Y'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(window, 'sonetGroupEvent', eventData);\n\t\t\t\t\t\t\t\t\tif (response.ACTION === 'create')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconst createdGroupsData = JSON.parse(response.SELECTOR_GROUPS);\n\t\t\t\t\t\t\t\t\t\tif (Type.isArray(createdGroupsData))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\twindow.top.BX.SidePanel.Instance.postMessageAll(\n\t\t\t\t\t\t\t\t\t\t\t\twindow,\n\t\t\t\t\t\t\t\t\t\t\t\t'BX.Socialnetwork.Workgroup:onAdd',\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tprojects: createdGroupsData,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t\tif (!groupWillBeShown)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tthis.showDemoInfo(response);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (currentSlider)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close(false, () => {\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.destroy(currentSlider.getUrl());\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (groupWillBeShown)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlet bindingFound = false;\n\n\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.anchorRules.find((rule) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tbindingFound\n\t\t\t\t\t\t\t\t\t\t\t\t|| !Type.isArray(rule.condition)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\trule.condition.forEach((condition) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (response.URL.match(condition))\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbindingFound = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\n\n\t\t\t\t\t\t\t\t\t\tif (bindingFound)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\t\t\t\tresponse.URL,\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonLoad: () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.showDemoInfo(response);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttop.window.location.href = response.URL;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonfailure: (errorData) => {\n\t\t\t\t\t\tButtons.showWaitSubmitButton(false);\n\t\t\t\t\t\tthis.alertManager.showAlert(Loc.getMessage('SONET_GCE_T_AJAX_ERROR'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\te.preventDefault();\n\t}\n\n\tsaveScrumAnalyticData()\n\t{\n\t\tconst actionUrl = document.getElementById('sonet_group_create_popup_form').action;\n\n\t\tconst source = new Uri(actionUrl).getQueryParam('source');\n\t\tconst availableSources = new Set([\n\t\t\t'guide_adv',\n\t\t\t'guide_direct',\n\t\t\t'guide_portal'\n\t\t]);\n\t\tif (availableSources.has(source))\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.info.saveScrumStart',\n\t\t\t\t{\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tscrum: 'Y',\n\t\t\t\t\t\taction: 'scrum_start',\n\t\t\t\t\t\tsource: source\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tshowHideBlock(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst containerNode = params.container;\n\t\tconst blockNode = params.block;\n\t\tconst show = !!params.show;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isDomNode(blockNode)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t!Type.isUndefined(this.animationList[blockNode.id])\n\t\t\t&& !Type.isNull(this.animationList[blockNode.id])\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.animationList[blockNode.id] = null;\n\n\t\tconst maxHeight = parseInt(blockNode.offsetHeight);\n\t\tconst duration = (!Type.isUndefined(params.duration) && parseInt(params.duration) > 0 ? parseInt(params.duration) : 0);\n\n\t\tif (show)\n\t\t{\n\t\t\tcontainerNode.style.display = 'block';\n\t\t}\n\n\t\tif (duration > 0)\n\t\t{\n\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t{\n\t\t\t\tthis.animationList[blockNode.id] = true;\n\t\t\t}\n\n\t\t\tBX.delegate((new BX.easing({\n\t\t\t\tduration: duration,\n\t\t\t\tstart: {\n\t\t\t\t\theight: (show ? 0 : maxHeight),\n\t\t\t\t\topacity: (show ? 0 : 100),\n\t\t\t\t},\n\t\t\t\tfinish: {\n\t\t\t\t\theight: (show ? maxHeight : 0),\n\t\t\t\t\topacity: (show ? 100 : 0),\n\t\t\t\t},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tcontainerNode.style.maxHeight = `${state.height}px`;\n\t\t\t\t\tcontainerNode.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tif (Type.isStringFilled(blockNode.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.animationList[blockNode.id] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!Type.isUndefined(params.callback)\n\t\t\t\t\t\t&& Type.isFunction(params.callback.complete)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainerNode.style.maxHeight = '';\n\t\t\t\t\t\tcontainerNode.style.opacity = '';\n\t\t\t\t\t\tparams.callback.complete();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})).animate(), this);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams.callback.complete();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tshowDemoInfo(response): void\n\t{\n\t\tif (this.demoInfoAlreadyBeenShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t'trialEnabled' in response\n\t\t\t&& Type.isPlainObject(response.trialEnabled)\n\t\t)\n\t\t{\n\t\t\tif (\n\t\t\t\t'scrum' in response.trialEnabled\n\t\t\t\t&& response.trialEnabled.scrum === true\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.showScrumDemoInfo();\n\n\t\t\t\tthis.demoInfoAlreadyBeenShown = true;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\t'project' in response.trialEnabled\n\t\t\t\t&& response.trialEnabled.project === true\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.showProjectDemoInfo();\n\n\t\t\t\tthis.demoInfoAlreadyBeenShown = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowScrumDemoInfo(): void\n\t{\n\t\tconst popup: Popup = new top.BX.PopupWindow({\n\t\t\tid: `socialnetwork-scrum-demo-info-${Text.getRandom()}`,\n\t\t\tclassName: 'socialnetwork__demo-info --scrum',\n\t\t\twidth: 620,\n\t\t\toverlay: true,\n\t\t\tpadding: 48,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: this.#renderScrumDemoInfoContent(),\n\t\t\tevents: {\n\t\t\t\tonFirstShow: (baseEvent: BaseEvent) => {\n\t\t\t\t\ttop.BX.loadCSS(WorkgroupForm.PATH_TO_CSS);\n\t\t\t\t\tthis.#bindStartWorkBtn(baseEvent.getTarget());\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\tshowProjectDemoInfo(): void\n\t{\n\t\tconst popup: Popup = new top.BX.PopupWindow({\n\t\t\tid: `socialnetwork-project-demo-info-${Text.getRandom()}`,\n\t\t\tclassName: 'socialnetwork__demo-info --project',\n\t\t\twidth: 620,\n\t\t\toverlay: true,\n\t\t\tpadding: 48,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: this.#renderProjectDemoInfoContent(),\n\t\t\tevents: {\n\t\t\t\tonFirstShow: (baseEvent: BaseEvent) => {\n\t\t\t\t\ttop.BX.loadCSS(WorkgroupForm.PATH_TO_CSS);\n\t\t\t\t\tthis.#bindStartWorkBtn(baseEvent.getTarget());\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\t#renderScrumDemoInfoContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"socialnetwork__demo-info_wrapper\">\n\t\t\t\t<div class=\"socialnetwork__demo-info_content\">\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_title\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TITLE_SCRUM_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_text\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TEXT_SCRUM_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_text-trial\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TEXT_TRIAL_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-btn ui-btn-sm ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_BTN_1')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#getLottieScrum()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderProjectDemoInfoContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"socialnetwork__demo-info_wrapper\">\n\t\t\t\t<div class=\"socialnetwork__demo-info_content\">\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_title\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TITLE_PROJECT_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_text\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TEXT_PROJECT_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"socialnetwork__demo-info_text-trial\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_TEXT_TRIAL_1')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-btn ui-btn-sm ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t\t\t${Loc.getMessage('SONET_GCE_T_DEMO_INFO_BTN_1')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#getLottieProject()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getLottieScrum(): HTMLElement\n\t{\n\t\tif (!this.#scrumLottieIconContainer)\n\t\t{\n\t\t\tthis.#scrumLottieIconContainer = Tag.render`\n\t\t\t\t<div class=\"socialnetwork__demo-info_image\"></div>\n\t\t\t`;\n\n\t\t\tthis.#scrumLottieAnimation = Lottie.loadAnimation({\n\t\t\t\tcontainer: this.#scrumLottieIconContainer,\n\t\t\t\trenderer: 'svg',\n\t\t\t\tloop: false,\n\t\t\t\tanimationData: scrumLottieIconInfo,\n\t\t\t});\n\t\t}\n\n\t\treturn this.#scrumLottieIconContainer;\n\t}\n\n\t#getLottieProject(): HTMLElement\n\t{\n\t\tif (!this.#projectLottieIconContainer)\n\t\t{\n\t\t\tthis.#projectLottieIconContainer = Tag.render`\n\t\t\t\t<div class=\"socialnetwork__demo-info_image\"></div>\n\t\t\t`;\n\n\t\t\tthis.#projectLottieAnimation = Lottie.loadAnimation({\n\t\t\t\tcontainer: this.#projectLottieIconContainer,\n\t\t\t\trenderer: 'svg',\n\t\t\t\tloop: false,\n\t\t\t\tanimationData: projectLottieIconInfo,\n\t\t\t});\n\t\t}\n\n\t\treturn this.#projectLottieIconContainer;\n\t}\n\n\t#bindStartWorkBtn(popup: Popup)\n\t{\n\t\tconst popupContainer = popup.getContentContainer();\n\t\tif (Type.isDomNode(popupContainer))\n\t\t{\n\t\t\tconst btnNode = popup.getContentContainer().querySelector('.ui-btn');\n\t\t\tif (Type.isDomNode(popupContainer))\n\t\t\t{\n\t\t\t\tEvent.bind(btnNode, 'click', () => popup.close());\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {\n\tWorkgroupForm,\n\tTeamManager as WorkgroupFormTeamManager,\n\tUFManager as WorkgroupFormUFManager,\n};\n"],"names":["Util","expandSwitchers","document","querySelectorAll","forEach","switcher","addEventListener","e","targetId","currentTarget","getAttribute","target","getElementById","switcherWrapper","firstElementChild","offsetHeight","style","height","classList","add","scrollToTarget","elementRealTop","getBoundingClientRect","top","time","currentTime","scrollBySvs","window","scrollBy","setTimeout","removeEventListener","adjustHeight","removeProperty","remove","dropdownAreaList","dropdownArea","dropdownItemsData","getDropdownItems","items","Object","entries","key","value","push","text","onclick","dropdownMenu","close","setDropdownValue","querySelector","setInputValue","neighbourDropdownArea","contains","parentNode","Type","isDomNode","BX","PopupMenuWindow","autoHide","cacheable","bindElement","width","offsetWidth","closeByEsc","animation","params","show","node","containerNode","itemValue","innerText","itemKey","JSON","parse","isPlainObject","isChecked","projectCheckboxNode","setCheckedValue","recalcNameInput","inputNode","placeholderText","Loc","getMessage","formInstance","WorkgroupForm","getInstance","projectTypes","selectedProjectType","isStringFilled","SCRUM_PROJECT","PROJECT","placeholder","type","checked","result","container","selectorClass","selector","cssClass","selectorActive","selectorDisabled","selectedItems","multiple","isBoolean","inputContainerNodeId","inputNodeName","isArray","inputContainerNode","Dom","item","prefix","entityId","appendChild","Tag","render","id","workgroupForm","analyticsData","isScrumForm","isScrumTrialEnabled","event","category","c_section","c_sub_section","c_element","tool","status","p1","isProjectsTrialEnabled","UI","Analytics","sendData","Runtime","loadExtension","then","ConfidentialitySelector","firstItemSelected","getItems","unselectAllSelectorItems","getContainer","selectSelectorItem","recalcForm","selectedConfidentialityType","confidentialityType","selectItem","bindEvents","subscribe","onSwitchExtranet","data","getData","unselectAll","select","disableAll","enable","enableAll","accessCode","disableAllSelectorItems","enableAllSelectorItems","enableSelectorItem","Scrum","isScrumProject","createHiddenInputs","showScrumBlocks","landingCheckbox","disabled","toggleFeatures","removeHiddenInputs","hideScrumBlocks","scrumBlock","moderatorsBlock","moderatorsSwitch","ownerBlock","forms","create","attrs","name","input","isScrum","featuresNode","featuresCheckboxNode","insertBefore","hiddenInput","Avatar","confirmPopup","componentName","isUndefined","signedParameters","groupId","parseInt","selectorNode","imageNode","typeInputNode","removeNode","recalc","avatarEditor","AvatarEditor","enableCamera","backgroundImage","showConfirmPopup","deletePhoto","bind","clearType","setType","EventEmitter","getCompatData","file","formData","FormData","append","changePhoto","getFileId","hidden","selected","loader","showLoader","size","ajax","runComponentAction","mode","response","fileId","fileUri","encodeURI","hideLoader","showErrorPopup","message","errors","typeItemNode","avatarType","isNull","Loader","hasOwnProperty","hide","clean","error","Popup","offsetLeft","offsetTop","draggable","bindOnResize","closeIcon","content","events","confirmCallback","onPopupClose","destroy","buttons","Button","click","button","setWaiting","DateCorrector","culture","getElementsByName","Event","startChanged","start","end","startDate","Date","endDate","defaultOffset","newEndDate","getTime","newStartDate","date","toString","length","parsedValue","parseDate","Math","floor","timeStamp","format","shortDateFormat","ThemePicker","theme","draw","previewImageNode","getNode","open","titleNode","deleteNode","previewImage","backgroundColor","previewColor","innerHTML","title","Intranet","Bitrix24","Singleton","showDialog","preventDefault","Tags","containerNodeId","hiddenFieldNode","hiddenFieldId","tagSelector","EntityTagSelector","addButtonCaption","addButtonCaptionMore","dialogOptions","compactView","preload","context","searchTabOptions","stubOptions","subtitle","arrow","entities","options","searchOptions","allowCreateItem","footerOptions","label","recalcinputValue","getTarget","getSelectedItems","Promise","resolve","searchQuery","getQuery","toLowerCase","dialog","tagsList","split","tag","addItem","tabs","renderTo","join","FieldsManager","wizardManager","stepsCount","checkAll","checkStep","currentStep","step","errorDataList","mandatoryFieldsByStep","fieldData","fieldNode","tagName","checkField","errorText","bindNode","bindNodeId","stepData","concat","isFunction","condition","fieldType","fieldId","trim","checkSameGroupExists","exists","empty","hiddenNode","errorData","alertManager","showAlert","groupName","runAction","scrumManager","Buttons","_classPrivateMethodInitSpec","submitButton","initCollabCreateButton","submitButtonClickHandler","backButton","ButtonManager","createFromNode","isDisabled","confidentialityTypes","showCurrentStep","cancelButton","currentSlider","SidePanel","Instance","getSliderByWindow","BaseEvent","compatData","getEvent","emit","url","location","hideAllAlerts","check","filter","showError","submitFunction","submitForm","collabCreateButton","_classPrivateMethodGet","Messenger","openChatCreation","projectType","hideButton","showButton","disable","buttonNode","setDisabled","p2","currentUserType","TypePresetSelector","buttonsInstance","selectors","limitFeature","Limit","showInstance","featureId","updateButtonsByProject","setProjectType","Wizard","processedStep","step1BackgroudNode","step1Backgroud","bodyContainer","breadcrumbsContainer","bodyItem","activeBodyItem","breadcrumbsItem","activeBreadcrumbsItem","getFirstStepNumber","createdGroupId","tabInputNode","tabGroupIdNode","AlertManager","errorContainerId","globalErrorContainer","nodeAlerts","Map","targetNode","textAlert","Alert","color","Color","DANGER","animate","set","nextSibling","setText","scrollTo","getPosition","behavior","clear","TeamManager","instance","ownerSelector","scrumMasterSelector","moderatorsSelector","usersSelector","ownerOptions","scrumMasterOptions","moderatorsOptions","usersOptions","ownerContainerNode","scrumMasterContainerNode","moderatorsContainerNode","usersContainerNode","isCurrentUserAdmin","extranetInstalled","allowExtranet","buildOwnerSelector","buildScrumMasterSelector","buildModeratorsSelector","buildUsersSelector","selectorOptions","TagSelector","selectorId","contextList","owner","preselectedItems","onLoad","onOwnerSelect","intranetUsersOnly","inviteEmployeeLink","inviteExtranetLink","checkWorkgroupWhenInvite","footerInviteIntranetOnly","collabers","selectMode","scrumMaster","onScrumMasterSelect","moderators","onModeratorsSelect","users","onUsersSelect","enableSelectDepartment","includes","getDialog","loadState","recalcSelectorByExtranetSwitched","getContext","getEntityId","getEntityType","recalcInputValue","map","getId","initialFocus","getAddButtonLink","hintNode","showDepartmentHint","departmentFound","find","FeaturesManager","editButton","featureNode","closest","textNode","UFManager","mandatoryUFList","ufData","_classPrivateFieldInitSpec","setEventNamespace","userSelector","lastAction","animationList","selectedTypeCode","config","avatarUploaderId","themePickerData","projectOptions","focus","demoInfoAlreadyBeenShown","init","makeAdditionalCustomizationForm","groupDescriptionNode","groupNameNode","initExpandSwitches","initDropdowns","expandableSettingsNodeId","Hint","saveScrumAnalyticData","getTopSlider","getWindow","sliderInstance","getUrl","extranetCheckboxNode","switchExtranet","visibleCheckboxNode","switchNotVisible","recalcFormPartProject","recalcFormDependencies","openedCheckboxNode","OPENED","VISIBLE","getCheckedValue","openedBlock","visibleBlock","openedNode","actionUrl","action","groupIdNode","b24statAction","Uri","addParam","groupType","formElements","elements","GROUP_PROJECT","IS_EXTRANET_GROUP","GROUP_OPENED","b24statType","analyticsLabel","scrum","showWaitSubmitButton","submitAjax","method","dataType","PROJECT_OPTIONS","onsuccess","ERROR","warningText","WARNING","WIZARD_STEP_PROCESSED","recalcAfterSubmit","CREATED_GROUP_ID","SUCCESSFULL_USERS_ID","userId","Number","usersSelectorDialog","deselect","postMessageAll","code","MESSAGE","URL","href","ACTION","eventData","GROUP","group","groupWillBeShown","refresh","createdGroupsData","SELECTOR_GROUPS","projects","showDemoInfo","bindingFound","anchorRules","rule","match","onfailure","source","getQueryParam","availableSources","Set","has","blockNode","block","maxHeight","duration","display","delegate","easing","opacity","finish","transition","makeEaseOut","transitions","quart","state","complete","callback","trialEnabled","showScrumDemoInfo","project","showProjectDemoInfo","popup","PopupWindow","Text","getRandom","className","overlay","padding","onFirstShow","baseEvent","loadCSS","PATH_TO_CSS","Lottie","loadAnimation","renderer","loop","animationData","scrumLottieIconInfo","projectLottieIconInfo","popupContainer","getContentContainer","btnNode"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BF,CAmBiE;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAAA,KAG3D5a,aAAa;GAAA;GAAA;KAAA;KAAA,8BAYlB;OACC,OAAOA,aAAa,CAAC2W,QAAQ;;;GAG9B,uBACC9X,MAoBC,EAEF;KAAA;KAAA;KACC;KAAQ4S;KAAAA;KAAAA;KAAAA;KAAAA;KAAAoJ;OAAA;OAAA,OApCsB;;KAAIA;OAAA;OAAA;;KAAAA;OAAA;OAAA,OAEN;;KAAIA;OAAA;OAAA;;KAoChC,MAAKC,iBAAiB,CAAC,gCAAgC,CAAC;KAExD,MAAK1U,aAAa,GAAGvH,MAAM,CAACuH,aAAa;KACzC,MAAKE,gBAAgB,GAAGzH,MAAM,CAACyH,gBAAgB;KAC/C,MAAKyU,YAAY,GAAG,EAAE;KACtB,MAAKC,UAAU,GAAG,QAAQ;KAC1B,MAAKC,aAAa,GAAG,EAAE;KACvB,MAAKC,gBAAgB,GAAG,KAAK;KAC7B,sGAA+B,IAAI;KACnC,0GAAmC,IAAI;KACvC,oGAA6B,IAAI;KACjC,wGAAiC,IAAI;KAErC,MAAK3U,OAAO,GAAGC,QAAQ,CAAC3H,MAAM,CAAC0H,OAAO,CAAC;KACvC,MAAK3B,cAAc,GAAG/F,MAAM,CAAC+F,cAAc;KAC3C,MAAKuW,MAAM,GAAGtc,MAAM,CAACsc,MAAM;KAC3B,MAAKC,gBAAgB,GAAGvc,MAAM,CAACuc,gBAAgB;KAC/C,MAAKC,eAAe,GAAGxc,MAAM,CAACwc,eAAe;KAC7C,MAAKC,cAAc,GAAGzc,MAAM,CAACyc,cAAc;KAC3C,MAAKpZ,WAAW,GAAGrD,MAAM,CAACqD,WAAW;KACrC,MAAKC,mBAAmB,GAAGtD,MAAM,CAACsD,mBAAmB;KACrD,MAAKS,sBAAsB,GAAG/D,MAAM,CAAC+D,sBAAsB;KAE3D,MAAK1C,YAAY,GAAGrB,MAAM,CAACqB,YAAY;KACvC,MAAK+R,oBAAoB,GAAGpT,MAAM,CAACoT,oBAAoB;KACvD,MAAK9R,mBAAmB,GAAGtB,MAAM,CAACsB,mBAAmB;KACrD,MAAKuD,2BAA2B,GAAG7E,MAAM,CAAC6E,2BAA2B;KACrE,MAAKqW,YAAY,GAAI7b,cAAI,CAACkC,cAAc,CAACvB,MAAM,CAAC0c,KAAK,CAAC,GAAG1c,MAAM,CAAC0c,KAAK,GAAG,EAAG;KAC3E,MAAK/Q,OAAO,GAAG3L,MAAM,CAAC2L,OAAO,GAAG3L,MAAM,CAAC2L,OAAO,GAAG,EAAE;KACnD,MAAKuJ,eAAe,GAAGlV,MAAM,CAACkV,eAAe;KAE7C,MAAKyH,wBAAwB,GAAG,KAAK;KAErC,MAAKjK,YAAY,GAAG,IAAI5M,KAAK,CAAC;OAC7BC,cAAc,EAAE,MAAKA;MACrB,CAAC;KAEF,MAAK4K,aAAa,GAAG,IAAIiF,MAAM,CAAC;OAC/B7E,WAAW,EAAEzS,MAAM,CAACC,OAAO,CAAC,MAAK8C,YAAY,CAAC,CAACqL,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;OACjEkE,UAAU,EAAG5Q,MAAM,CAAC4Q,UAAU,GAAG,CAAC,GAAG5Q,MAAM,CAAC4Q,UAAU,GAAG;MACzD,CAAC;KAEF,MAAK0B,YAAY,GAAG,IAAIoE,YAAY,CAAC;OACpCC,gBAAgB,EAAE;MAClB,CAAC;KAEFxV,aAAa,CAAC2W,QAAQ,4CAAO;KAC7B,MAAK1C,eAAe,GAAG,IAAIzC,OAAO,EAAE;KAEpC,MAAKiK,IAAI,CAAC5c,MAAM,CAAC;KAAC;;GAClB;KAAA;KAAA,qBAEIA,MAAM,EACX;OACC,IAAI,CAAC0S,YAAY,CAACmK,+BAA+B,EAAE;OAEnD,IAAI,IAAI,CAACnV,OAAO,IAAI,CAAC,EACrB;SACC,IAAI,CAAC9C,UAAU,EAAE;;OAGlB,IAAIyC,MAAM,CAAC;SACVE,aAAa,EAAE,IAAI,CAACA,aAAa;SACjCE,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;SACvCC,OAAO,EAAE,IAAI,CAACA;QACd,CAAC;OAEF,IACCrI,cAAI,CAACoB,aAAa,CAACT,MAAM,CAACwc,eAAe,CAAC,IACvCvgB,QAAQ,CAACU,cAAc,CAAC,uBAAuB,CAAC,EAEpD;SACC,IAAIuQ,WAAW,CAAC;WACfpL,SAAS,EAAE7F,QAAQ,CAACU,cAAc,CAAC,uBAAuB,CAAC;WAC3DwQ,KAAK,EAAEnN,MAAM,CAACwc;UACd,CAAC;;OAGH,IAAI9Q,aAAa,CAAC;SACjBC,OAAO,EAAE,IAAI,CAACA;QACd,CAAC;OAEF,IAAI1P,QAAQ,CAACU,cAAc,CAAC,sBAAsB,CAAC,EACnD;SACC,IAAIyR,IAAI,CAAC;WACR1G,OAAO,EAAE,IAAI,CAACA,OAAO;WACrB2G,eAAe,EAAE,sBAAsB;WACvCE,aAAa,EAAE;UACf,CAAC;;OAGH,IAAI4G,kBAAkB,CAAC,IAAI,CAACC,eAAe,CAAC;OAC5C,IAAI9Q,uBAAuB,EAAE;OAC7B,IAAIkX,eAAe,EAAE;OAErB,IAAInc,cAAI,CAACkC,cAAc,CAAC,IAAI,CAAC2Z,YAAY,CAAC,EAC1C;SACC,IAAI,IAAI,CAACA,YAAY,KAAK,aAAa,EACvC;WACC,IAAM4B,oBAAoB,GAAG7gB,QAAQ,CAACU,cAAc,CAAC,yBAAyB,CAAC;WAC/E,IAAImgB,oBAAoB,EACxB;aACCA,oBAAoB,CAACJ,KAAK,EAAE;;;QAG9B,MAED;SACC,IAAMK,aAAa,GAAG9gB,QAAQ,CAACU,cAAc,CAAC,kBAAkB,CAAC;SACjE,IAAIogB,aAAa,EACjB;WACCA,aAAa,CAACL,KAAK,EAAE;;;OAIvB,IAAI,CAAC1X,UAAU,EAAE;OAEjBjJ,IAAI,CAACihB,kBAAkB,EAAE;OACzBjhB,IAAI,CAACkhB,aAAa,EAAE;OAEpB,IAAI5d,cAAI,CAACkC,cAAc,CAACvB,MAAM,CAACkd,wBAAwB,CAAC,EACxD;SACC3d,EAAE,CAACyE,EAAE,CAACmZ,IAAI,CAACP,IAAI,CAAC3gB,QAAQ,CAACU,cAAc,CAACqD,MAAM,CAACkd,wBAAwB,CAAC,CAAC;;OAG1E,IAAI,IAAI,CAACxV,OAAO,IAAI,CAAC,IAAI,IAAI,CAACpG,mBAAmB,KAAK,OAAO,EAC7D;SACC,IAAI,CAAC8b,qBAAqB,EAAE;;;;KAE7B;KAAA,6BAGD;OAAA;OACC,IAAI7d,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC4J,YAAY,EAAE,EACxC;SACC3U,6BAAY,CAACzD,SAAS,CAAC1F,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC4J,YAAY,EAAE,CAACC,SAAS,EAAE,EAAE,0BAA0B,EAAE,UAAC/Z,KAAK,EAAK;WAC/G3F,UAAU,CAAC,YAAM;aAChB,IAAM2f,cAAc,GAAGha,KAAK,CAACoM,SAAS,EAAE;aACxC,IAAI,CAAC4N,cAAc,EACnB;eACC;;aAGDhe,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAACrI,OAAO,CAACmS,cAAc,CAACC,MAAM,EAAE,CAAC;YACtD,EAAE,GAAG,CAAC;UACP,CAAC;;OAGH,IAAMC,oBAAoB,GAAGxhB,QAAQ,CAACU,cAAc,CAAC,mBAAmB,CAAC;OACzE,IACC8gB,oBAAoB,IACjBA,oBAAoB,CAAC9b,IAAI,KAAK,UAAU,EAE5C;SACC8b,oBAAoB,CAACphB,gBAAgB,CAAC,OAAO,EAAE,YAAM;WACpD,MAAI,CAACqhB,cAAc,CAACD,oBAAoB,CAAC7b,OAAO,CAAC;UACjD,CAAC;;OAGH,IAAM+b,mBAAmB,GAAG1hB,QAAQ,CAACU,cAAc,CAAC,eAAe,CAAC;OACpE,IACCghB,mBAAmB,IAChBA,mBAAmB,CAAChc,IAAI,KAAK,UAAU,EAE3C;SACCgc,mBAAmB,CAACthB,gBAAgB,CAAC,OAAO,EAAE,YAAM;WACnD,MAAI,CAACuhB,gBAAgB,CAACD,mBAAmB,CAAC/b,OAAO,CAAC;UAClD,CAAC;;OAGH,IAAMjB,mBAAmB,GAAG1E,QAAQ,CAACU,cAAc,CAAC,eAAe,CAAC;OACpE,IACCgE,mBAAmB,IAChBA,mBAAmB,CAACgB,IAAI,KAAK,UAAU,EAE3C;SACChB,mBAAmB,CAACtE,gBAAgB,CAAC,OAAO,EAAE,YAAM;WACnDN,IAAI,CAAC8hB,qBAAqB,CAACld,mBAAmB,CAACiB,OAAO,CAAC;UACvD,CAAC;;OAGH8G,6BAAY,CAACzD,SAAS,CACrB,2DAA2D,EAC3D,IAAI,CAAC6Y,sBAAsB,CAACvV,IAAI,CAAC,IAAI,CAAC,CACtC;;;KACD;KAAA,2BAEUvI,MAAM,EACjB;OACC,IAAIX,cAAI,CAACoB,aAAa,CAACT,MAAM,CAAC,EAC9B;SACC,IAAI,CAACX,cAAI,CAACmI,WAAW,CAACxH,MAAM,CAACsB,mBAAmB,CAAC,EACjD;WACC,IAAI,CAACA,mBAAmB,GAAIjC,cAAI,CAACkC,cAAc,CAACvB,MAAM,CAACsB,mBAAmB,CAAC,GAAGtB,MAAM,CAACsB,mBAAmB,GAAG,EAAG;;SAE/G,IAAI,CAACjC,cAAI,CAACmI,WAAW,CAACxH,MAAM,CAAC6E,2BAA2B,CAAC,EACzD;WACC,IAAI,CAACA,2BAA2B,GAAIxF,cAAI,CAACkC,cAAc,CAACvB,MAAM,CAAC6E,2BAA2B,CAAC,GAAG7E,MAAM,CAAC6E,2BAA2B,GAAG,EAAG;;;OAIxI,IAAI,IAAI,CAAC6C,OAAO,IAAI,CAAC,EACrB;SACC,IAAI,CAACgL,YAAY,CAAC3M,cAAc,GAC/B1G,cAAI,CAACoB,aAAa,CAAC,IAAI,CAACY,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAAC,IAC5DjC,cAAI,CAACkC,cAAc,CAAC,IAAI,CAACF,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAAC,eAAe,CAAC,CAAC,IACjF,IAAI,CAACD,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAAC,eAAe,CAAC,KAAK,GACpE;SAEDvF,IAAI,CAAC8hB,qBAAqB,CACzBxe,cAAI,CAACoB,aAAa,CAAC,IAAI,CAACY,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAAC,IAC5DjC,cAAI,CAACkC,cAAc,CAAC,IAAI,CAACF,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAACG,OAAO,CAAC,IACxE,IAAI,CAACJ,YAAY,CAAC,IAAI,CAACC,mBAAmB,CAAC,CAACG,OAAO,KAAK,GAAG,CAC9D;;OAGF,IAAI,CAACiR,YAAY,CAACmK,+BAA+B,EAAE;OAEnD,IAAI,IAAI,CAACnV,OAAO,IAAI,CAAC,EACrB;SACC,IAAMqW,kBAAkB,GAAG9hB,QAAQ,CAACU,cAAc,CAAC,cAAc,CAAC;SAClE,IAAIohB,kBAAkB,EACtB;WACChiB,IAAI,CAAC6E,eAAe,CAACmd,kBAAkB,EACtC1e,cAAI,CAACoB,aAAa,CAAC,IAAI,CAAC2S,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAAC,IAC5ExF,cAAI,CAACkC,cAAc,CAAC,IAAI,CAAC6R,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAACmZ,MAAM,CAAC,IACvF,IAAI,CAAC5K,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAACmZ,MAAM,KAAK,GAAG,CAC5E;;SAGH,IAAML,mBAAmB,GAAG1hB,QAAQ,CAACU,cAAc,CAAC,eAAe,CAAC;SACpE,IAAIghB,mBAAmB,EACvB;WACC5hB,IAAI,CAAC6E,eAAe,CAAC+c,mBAAmB,EACvCte,cAAI,CAACoB,aAAa,CAAC,IAAI,CAAC2S,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAAC,IAC5ExF,cAAI,CAACkC,cAAc,CAAC,IAAI,CAAC6R,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAACoZ,OAAO,CAAC,IACxF,IAAI,CAAC7K,oBAAoB,CAAC,IAAI,CAACvO,2BAA2B,CAAC,CAACoZ,OAAO,KAAK,GAAG,CAC7E;;;OAIJ,IAAI,CAACH,sBAAsB,EAAE;;;KAC7B;KAAA,yCAGD;OACC,IAAML,oBAAoB,GAAGxhB,QAAQ,CAACU,cAAc,CAAC,mBAAmB,CAAC;OACzE,IAAI8gB,oBAAoB,EACxB;SACC,IAAI,CAACC,cAAc,CAAC3hB,IAAI,CAACmiB,eAAe,CAACT,oBAAoB,CAAC,CAAC;;OAGhE,IAAME,mBAAmB,GAAG1hB,QAAQ,CAACU,cAAc,CAAC,eAAe,CAAC;OACpE,IAAIghB,mBAAmB,EACvB;SACC,IAAI,CAACC,gBAAgB,CAACD,mBAAmB,CAAC/b,OAAO,CAAC;;;;KAEnD;KAAA,+BAEclB,SAAS,EACxB;OACC,IAAI,CAACoT,IAAI,CAAC,kBAAkB,EAAE,IAAIH,0BAAS,CAAC;SAC3CxO,IAAI,EAAE;WACLzE,SAAS,EAATA;;QAED,CAAC,CAAC;OAEH,IAAMyd,WAAW,GAAGliB,QAAQ,CAACU,cAAc,CAAC,cAAc,CAAC;OAC3D,IAAIwhB,WAAW,EACf;SACC,IAAI,CAACzd,SAAS,EACd;WACC,IAAIyd,WAAW,CAACxc,IAAI,KAAK,UAAU,EACnC;aACCwc,WAAW,CAAChY,QAAQ,GAAG,KAAK;;UAE7B,MAED;WACC,IAAIgY,WAAW,CAACxc,IAAI,KAAK,UAAU,EACnC;aACCwc,WAAW,CAAChY,QAAQ,GAAG,IAAI;aAC3BgY,WAAW,CAACvc,OAAO,GAAG,KAAK;YAC3B,MAED;aACCuc,WAAW,CAAC1f,KAAK,GAAG,GAAG;;;;OAK1B,IAAM2f,YAAY,GAAGniB,QAAQ,CAACU,cAAc,CAAC,eAAe,CAAC;OAC7D,IAAIyhB,YAAY,EAChB;SACC,IAAI,CAAC1d,SAAS,EACd;WACC,IAAI0d,YAAY,CAACzc,IAAI,IAAI,UAAU,EACnC;aACCyc,YAAY,CAACjY,QAAQ,GAAG,KAAK;;UAE9B,MAED;WACC,IAAIiY,YAAY,CAACzc,IAAI,IAAI,UAAU,EACnC;aACCyc,YAAY,CAACjY,QAAQ,GAAG,IAAI;aAC5BiY,YAAY,CAACxc,OAAO,GAAG,KAAK;YAC5B,MAED;aACCwc,YAAY,CAAC3f,KAAK,GAAG,GAAG;;;SAI1B,IAAI,CAACmf,gBAAgB,CAACQ,YAAY,CAACxc,OAAO,CAAC;;;;KAE5C;KAAA,iCAEgBlB,SAAS,EAC1B;OACC,IAAM2d,UAAU,GAAGpiB,QAAQ,CAACU,cAAc,CAAC,cAAc,CAAC;OAC1D,IACC0hB,UAAU,IACPA,UAAU,CAAC1c,IAAI,IAAI,UAAU,EAEjC;SACC,IAAIjB,SAAS,EACb;WACC2d,UAAU,CAAClY,QAAQ,GAAG,KAAK;UAC3B,MAED;WACCkY,UAAU,CAAClY,QAAQ,GAAG,IAAI;WAC1BkY,UAAU,CAACzc,OAAO,GAAG,KAAK;;;;;KAG5B;KAAA,2BAEUtF,CAAC,EACZ;OAAA;OACC,IAAIgiB,SAAS,GAAGriB,QAAQ,CAACU,cAAc,CAAC,+BAA+B,CAAC,CAAC4hB,MAAM;OAE/E,IAAID,SAAS,EACb;SACC,IAAME,WAAW,GAAGviB,QAAQ,CAACU,cAAc,CAAC,gBAAgB,CAAC;SAC7D,IAAI8hB,aAAa,GAAG,eAAe;SAEnC,IAAID,WAAW,EACf;WACC,IAAI7W,QAAQ,CAAC6W,WAAW,CAAC/f,KAAK,CAAC,IAAI,CAAC,EACpC;aACC6f,SAAS,GAAGI,aAAG,CAACC,QAAQ,CAACL,SAAS,EAAE;eACnCC,MAAM,EAAE,aAAa;eACrBK,SAAS,EAAE,IAAI,CAACvC;cAChB,CAAC;YACF,MAED;aACCoC,aAAa,GAAG,gBAAgB;;;SAIlCH,SAAS,GAAGI,aAAG,CAACC,QAAQ,CAACL,SAAS,EAAE;WACnCG,aAAa,EAAEA;UACf,CAAC;SAEF,IAAMI,YAAY,GAAG5iB,QAAQ,CAAC0K,KAAK,CAAC,+BAA+B,CAAC,CAACmY,QAAQ;SAC7E,IACCD,YAAY,CAACE,aAAa,KAEzBF,YAAY,CAACG,iBAAiB,IAC3BH,YAAY,CAACI,YAAY,CAC5B,EAEF;WACC,IAAIC,WAAW,GAAIL,YAAY,CAACE,aAAa,CAACnd,OAAO,GAAG,UAAU,GAAG,QAAS;WAC9E,IACCid,YAAY,CAACG,iBAAiB,IAC3BH,YAAY,CAACG,iBAAiB,CAACpd,OAAO,EAE1C;aACCsd,WAAW,IAAI,UAAU;YACzB,MAED;aACCA,WAAW,IAAKL,YAAY,CAACI,YAAY,CAACrd,OAAO,GAAG,MAAM,GAAG,QAAS;;WAGvE0c,SAAS,GAAGI,aAAG,CAACC,QAAQ,CAACL,SAAS,EAAE;aACnCY,WAAW,EAAEA;YACb,CAAC;;SAGH,IACCL,YAAY,CAACrd,aAAa,IACvBid,aAAa,KAAK,eAAe,EAErC;WACCH,SAAS,GAAGI,aAAG,CAACC,QAAQ,CAACL,SAAS,EAAE;aACnCa,cAAc,EAAE;eACfC,KAAK,EAAE,GAAG;eACVb,MAAM,EAAE;;YAET,CAAC;;SAGH5L,OAAO,CAAC0M,oBAAoB,CAAC,IAAI,CAAC;SAElC9V,cAAI,CAAC+V,UAAU,CACdrjB,QAAQ,CAAC0K,KAAK,CAAC,+BAA+B,CAAC,EAC/C;WACCoN,GAAG,EAAEuK,SAAS;WACdiB,MAAM,EAAE,MAAM;WACdC,QAAQ,EAAE,MAAM;WAChBra,IAAI,EAAE;aACLsa,eAAe,EAAE,IAAI,CAAChD;YACtB;WACDiD,SAAS,EAAE,mBAAChW,QAAQ,EAAK;aACxB,IAAIrK,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAACiW,KAAK,CAAC,EACvC;eACC,IAAMC,WAAW,GAChBvgB,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAACmW,OAAO,CAAC,aAC/BnW,QAAQ,CAACmW,OAAO,YACnB,EACH;eAED,MAAI,CAACvN,YAAY,CAACC,SAAS,WAAIqN,WAAW,SAAGlW,QAAQ,CAACiW,KAAK,EAAG;eAE9D,IAAItgB,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAACoW,qBAAqB,CAAC,EACvD;iBACC,MAAI,CAACnP,aAAa,CAACoP,iBAAiB,CAAC;mBACpClK,aAAa,EAAEnM,QAAQ,CAACoW,qBAAqB,CAAC7P,WAAW,EAAE;mBAC3DsG,cAAc,EAAE5O,QAAQ,CAAC,CAACtI,cAAI,CAACmI,WAAW,CAACkC,QAAQ,CAACsW,gBAAgB,CAAC,GAAGtW,QAAQ,CAACsW,gBAAgB,GAAG,CAAC;kBACrG,CAAC;;eAGH,IACC3gB,cAAI,CAACoD,OAAO,CAACiH,QAAQ,CAACuW,oBAAoB,CAAC,IACxCvW,QAAQ,CAACuW,oBAAoB,CAACvT,MAAM,GAAG,CAAC,EAE5C;iBACChD,QAAQ,CAACuW,oBAAoB,GAAGvW,QAAQ,CAACuW,oBAAoB,CAACjF,GAAG,CAAC,UAACkF,MAAM,EAAK;mBAC7E,OAAOC,MAAM,CAACD,MAAM,CAAC;kBACrB,CAAC;iBAEF,IAAMhI,aAAa,GAAGL,cAAW,CAACzW,WAAW,EAAE,CAAC8W,aAAa;iBAC7D,IAAMkI,mBAAmB,GAAIlI,aAAa,GAAGA,aAAa,CAACuC,SAAS,EAAE,GAAG,IAAK;iBAC9E,IAAI2F,mBAAmB,EACvB;mBACCA,mBAAmB,CAACxQ,gBAAgB,EAAE,CAACzT,OAAO,CAAC,UAACyG,IAAI,EAAK;qBACxD,IACCA,IAAI,CAACE,QAAQ,KAAK,MAAM,IACrB4G,QAAQ,CAACuW,oBAAoB,CAACzF,QAAQ,CAAC5X,IAAI,CAACM,EAAE,CAAC,EAEnD;uBACCN,IAAI,CAACyd,QAAQ,EAAE;;oBAEhB,CAAC;;iBAGH3iB,MAAM,CAACJ,GAAG,CAACiC,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC6M,cAAc,CAAC5iB,MAAM,EAAE,iBAAiB,EAAE;mBAC1E6iB,IAAI,EAAE,aAAa;mBACnBpb,IAAI,EAAE;kBACN,CAAC;;eAGHwN,OAAO,CAAC0M,oBAAoB,CAAC,KAAK,CAAC;cACnC,MACI,IAAI3V,QAAQ,CAAC8W,OAAO,KAAK,SAAS,EACvC;eACC,IAAMjN,aAAa,GAAGhU,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAACC,iBAAiB,CAAChW,MAAM,CAAC;eACrE,IAAI6V,aAAa,EACjB;iBACC,IAAMhQ,KAAK,GAAG,IAAIoQ,0BAAS,CAAC;mBAC3BC,UAAU,EAAE,CAAEL,aAAa,CAACM,QAAQ,CAAC,SAAS,CAAC,CAAE;mBACjD1O,IAAI,EAAEoO,aAAa,CAACM,QAAQ,CAAC,SAAS;kBACtC,CAAC;iBAEFnL,6BAAY,CAACoL,IAAI,CAACpW,MAAM,CAACJ,GAAG,EAAE,0BAA0B,EAAEiG,KAAK,CAAC;;eAGjE,IAAI7F,MAAM,KAAKJ,GAAG,CAACI,MAAM;;iBACzB;mBACC,IAAI2B,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAAC+W,GAAG,CAAC,EACrC;qBACCnjB,GAAG,CAAC0W,QAAQ,CAAC0M,IAAI,GAAGhX,QAAQ,CAAC+W,GAAG;;kBAEjC,MACI,IAAIphB,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAACiX,MAAM,CAAC,EAC7C;iBACC,IAAIC,SAAS,GAAG,IAAI;iBAEpB,IACC,CAAE,QAAQ,EAAE,MAAM,CAAE,CAACpG,QAAQ,CAAC9Q,QAAQ,CAACiX,MAAM,CAAC,IAC3C,CAACthB,cAAI,CAACmI,WAAW,CAACkC,QAAQ,CAACmX,KAAK,CAAC,EAErC;mBACCD,SAAS,GAAG;qBACXL,IAAI,EAAG7W,QAAQ,CAACiX,MAAM,IAAI,QAAQ,GAAG,aAAa,GAAG,WAAY;qBACjExb,IAAI,EAAE;uBACL2b,KAAK,EAAEpX,QAAQ,CAACmX,KAAK;uBACrBpE,cAAc,EAAE,MAAI,CAACA;;oBAEtB;kBACD,MACI,IAAI/S,QAAQ,CAACiX,MAAM,KAAK,QAAQ,EACrC;mBACCC,SAAS,GAAG;qBACXL,IAAI,EAAE,aAAa;qBACnBpb,IAAI,EAAE;oBACN;;iBAGF,IAAIyb,SAAS,EACb;mBACC,IAAMG,gBAAgB,GACrBrX,QAAQ,CAACiX,MAAM,KAAK,QAAQ,IACzBthB,cAAI,CAACkC,cAAc,CAACmI,QAAQ,CAAC+W,GAAG,CAAC,KAEnC,CAACphB,cAAI,CAACkC,cAAc,CAAC,MAAI,CAAC+a,MAAM,CAAC0E,OAAO,CAAC,IACtC,MAAI,CAAC1E,MAAM,CAAC0E,OAAO,KAAK,GAAG,CAE/B;mBAEDtjB,MAAM,CAACJ,GAAG,CAACiC,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC6M,cAAc,CAAC5iB,MAAM,EAAE,iBAAiB,EAAEkjB,SAAS,CAAC;mBACrF,IAAIlX,QAAQ,CAACiX,MAAM,KAAK,QAAQ,EAChC;qBACC,IAAMM,iBAAiB,GAAG1gB,IAAI,CAACC,KAAK,CAACkJ,QAAQ,CAACwX,eAAe,CAAC;qBAC9D,IAAI7hB,cAAI,CAACoD,OAAO,CAACwe,iBAAiB,CAAC,EACnC;uBACCvjB,MAAM,CAACJ,GAAG,CAACiC,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC6M,cAAc,CAC9C5iB,MAAM,EACN,kCAAkC,EAClC;yBACCyjB,QAAQ,EAAEF;wBACV,CACD;uBAED,IAAI,CAACF,gBAAgB,EACrB;yBACC,MAAI,CAACK,YAAY,CAAC1X,QAAQ,CAAC;;;;mBAK9B,IAAI6J,aAAa,EACjB;qBACChU,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC3U,KAAK,CAAC,KAAK,EAAE,YAAM;uBACxCS,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAACrI,OAAO,CAACmI,aAAa,CAACiK,MAAM,EAAE,CAAC;sBACrD,CAAC;;mBAGH,IAAIuD,gBAAgB,EACpB;qBACC,IAAIM,YAAY,GAAG,KAAK;qBAExB9hB,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAC6N,WAAW,CAAC/F,IAAI,CAAC,UAACgG,IAAI,EAAK;uBAChD,IACCF,YAAY,IACT,CAAChiB,cAAI,CAACoD,OAAO,CAAC8e,IAAI,CAAC1P,SAAS,CAAC,EAEjC;yBACC;;uBAGD0P,IAAI,CAAC1P,SAAS,CAAC1V,OAAO,CAAC,UAAC0V,SAAS,EAAK;yBACrC,IAAIwP,YAAY,EAChB;2BACC;;yBAGD,IAAI3X,QAAQ,CAAC+W,GAAG,CAACe,KAAK,CAAC3P,SAAS,CAAC,EACjC;2BACCwP,YAAY,GAAG,IAAI;;wBAEpB,CAAC;sBACF,CAAC;qBAGF,IAAIA,YAAY,EAChB;uBACC9hB,EAAE,CAACiU,SAAS,CAACC,QAAQ,CAAClG,IAAI,CACzB7D,QAAQ,CAAC+W,GAAG,EACZ;yBACCxV,MAAM,EAAE;2BACPuO,MAAM,EAAE,kBAAM;6BACb,MAAI,CAAC4H,YAAY,CAAC1X,QAAQ,CAAC;;;wBAG7B,CACD;sBACD,MAED;uBACCpM,GAAG,CAACI,MAAM,CAACsW,QAAQ,CAAC0M,IAAI,GAAGhX,QAAQ,CAAC+W,GAAG;;;;;;YAM5C;WACDgB,SAAS,EAAE,mBAACpP,SAAS,EAAK;aACzBM,OAAO,CAAC0M,oBAAoB,CAAC,KAAK,CAAC;aACnC,MAAI,CAAC/M,YAAY,CAACC,SAAS,CAACvR,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAAC;;UAEtE,CACD;;OAGF3E,CAAC,CAAC6R,cAAc,EAAE;;;KAClB;KAAA,wCAGD;OACC,IAAMmQ,SAAS,GAAGriB,QAAQ,CAACU,cAAc,CAAC,+BAA+B,CAAC,CAAC4hB,MAAM;OAEjF,IAAMmD,MAAM,GAAG,IAAIhD,aAAG,CAACJ,SAAS,CAAC,CAACqD,aAAa,CAAC,QAAQ,CAAC;OACzD,IAAMC,gBAAgB,GAAG,IAAIC,GAAG,CAAC,CAChC,WAAW,EACX,cAAc,EACd,cAAc,CACd,CAAC;OACF,IAAID,gBAAgB,CAACE,GAAG,CAACJ,MAAM,CAAC,EAChC;SACCnY,cAAI,CAACkJ,SAAS,CACb,wCAAwC,EACxC;WACCtN,IAAI,EAAE,EAAE;WACRga,cAAc,EAAE;aACfC,KAAK,EAAE,GAAG;aACVb,MAAM,EAAE,aAAa;aACrBmD,MAAM,EAAEA;;UAET,CACD;;;;KAEF;KAAA,8BAEa1hB,MAAM,EACpB;OAAA;OACC,IAAI,CAACX,cAAI,CAACoB,aAAa,CAACT,MAAM,CAAC,EAC/B;SACC,OAAO,KAAK;;OAGb,IAAMG,aAAa,GAAGH,MAAM,CAAC8B,SAAS;OACtC,IAAMigB,SAAS,GAAG/hB,MAAM,CAACgiB,KAAK;OAC9B,IAAM/hB,IAAI,GAAG,CAAC,CAACD,MAAM,CAACC,IAAI;OAE1B,IACC,CAACZ,cAAI,CAACC,SAAS,CAACa,aAAa,CAAC,IAC3B,CAACd,cAAI,CAACC,SAAS,CAACyiB,SAAS,CAAC,EAE9B;SACC,OAAO,KAAK;;OAGb,IACC,CAAC1iB,cAAI,CAACmI,WAAW,CAAC,IAAI,CAAC4U,aAAa,CAAC2F,SAAS,CAAC7e,EAAE,CAAC,CAAC,IAChD,CAAC7D,cAAI,CAAC+K,MAAM,CAAC,IAAI,CAACgS,aAAa,CAAC2F,SAAS,CAAC7e,EAAE,CAAC,CAAC,EAElD;SACC,OAAO,KAAK;;OAGb,IAAI,CAACkZ,aAAa,CAAC2F,SAAS,CAAC7e,EAAE,CAAC,GAAG,IAAI;OAEvC,IAAM+e,SAAS,GAAGta,QAAQ,CAACoa,SAAS,CAACjlB,YAAY,CAAC;OAClD,IAAMolB,QAAQ,GAAI,CAAC7iB,cAAI,CAACmI,WAAW,CAACxH,MAAM,CAACkiB,QAAQ,CAAC,IAAIva,QAAQ,CAAC3H,MAAM,CAACkiB,QAAQ,CAAC,GAAG,CAAC,GAAGva,QAAQ,CAAC3H,MAAM,CAACkiB,QAAQ,CAAC,GAAG,CAAE;OAEtH,IAAIjiB,IAAI,EACR;SACCE,aAAa,CAACpD,KAAK,CAAColB,OAAO,GAAG,OAAO;;OAGtC,IAAID,QAAQ,GAAG,CAAC,EAChB;SACC,IAAI7iB,cAAI,CAACkC,cAAc,CAACwgB,SAAS,CAAC7e,EAAE,CAAC,EACrC;WACC,IAAI,CAACkZ,aAAa,CAAC2F,SAAS,CAAC7e,EAAE,CAAC,GAAG,IAAI;;SAGxC3D,EAAE,CAAC6iB,QAAQ,CAAE,IAAI7iB,EAAE,CAAC8iB,MAAM,CAAC;WAC1BH,QAAQ,EAAEA,QAAQ;WAClBnW,KAAK,EAAE;aACN/O,MAAM,EAAGiD,IAAI,GAAG,CAAC,GAAGgiB,SAAU;aAC9BK,OAAO,EAAGriB,IAAI,GAAG,CAAC,GAAG;YACrB;WACDsiB,MAAM,EAAE;aACPvlB,MAAM,EAAGiD,IAAI,GAAGgiB,SAAS,GAAG,CAAE;aAC9BK,OAAO,EAAGriB,IAAI,GAAG,GAAG,GAAG;YACvB;WACDuiB,UAAU,EAAEjjB,EAAE,CAAC8iB,MAAM,CAACI,WAAW,CAACljB,EAAE,CAAC8iB,MAAM,CAACK,WAAW,CAACC,KAAK,CAAC;WAC9D3R,IAAI,EAAE,cAAC4R,KAAK,EAAK;aAChBziB,aAAa,CAACpD,KAAK,CAACklB,SAAS,aAAMW,KAAK,CAAC5lB,MAAM,OAAI;aACnDmD,aAAa,CAACpD,KAAK,CAACulB,OAAO,GAAGM,KAAK,CAACN,OAAO,GAAG,GAAG;YACjD;WACDO,QAAQ,EAAE,oBAAM;aACf,IAAIxjB,cAAI,CAACkC,cAAc,CAACwgB,SAAS,CAAC7e,EAAE,CAAC,EACrC;eACC,MAAI,CAACkZ,aAAa,CAAC2F,SAAS,CAAC7e,EAAE,CAAC,GAAG,IAAI;;aAGxC,IACC,CAAC7D,cAAI,CAACmI,WAAW,CAACxH,MAAM,CAAC8iB,QAAQ,CAAC,IAC/BzjB,cAAI,CAACuS,UAAU,CAAC5R,MAAM,CAAC8iB,QAAQ,CAACD,QAAQ,CAAC,EAE7C;eACC1iB,aAAa,CAACpD,KAAK,CAACklB,SAAS,GAAG,EAAE;eAClC9hB,aAAa,CAACpD,KAAK,CAACulB,OAAO,GAAG,EAAE;eAChCtiB,MAAM,CAAC8iB,QAAQ,CAACD,QAAQ,EAAE;;;UAG5B,CAAC,CAAExL,OAAO,EAAE,EAAE,IAAI,CAAC;QAEpB,MAED;SACCrX,MAAM,CAAC8iB,QAAQ,CAACD,QAAQ,EAAE;;OAG3B,OAAO,IAAI;;;KACX;KAAA,6BAEYnZ,QAAQ,EACrB;OACC,IAAI,IAAI,CAACiT,wBAAwB,EACjC;SACC;;OAGD,IACC,cAAc,IAAIjT,QAAQ,IACvBrK,cAAI,CAACoB,aAAa,CAACiJ,QAAQ,CAACqZ,YAAY,CAAC,EAE7C;SACC,IACC,OAAO,IAAIrZ,QAAQ,CAACqZ,YAAY,IAC7BrZ,QAAQ,CAACqZ,YAAY,CAAC3D,KAAK,KAAK,IAAI,EAExC;WACC,IAAI,CAAC4D,iBAAiB,EAAE;WAExB,IAAI,CAACrG,wBAAwB,GAAG,IAAI;UACpC,MACI,IACJ,SAAS,IAAIjT,QAAQ,CAACqZ,YAAY,IAC/BrZ,QAAQ,CAACqZ,YAAY,CAACE,OAAO,KAAK,IAAI,EAE1C;WACC,IAAI,CAACC,mBAAmB,EAAE;WAE1B,IAAI,CAACvG,wBAAwB,GAAG,IAAI;;;;;KAGtC;KAAA,oCAGD;OAAA;OACC,IAAMwG,KAAY,GAAG,IAAI7lB,GAAG,CAACiC,EAAE,CAAC6jB,WAAW,CAAC;SAC3ClgB,EAAE,0CAAmCmgB,cAAI,CAACC,SAAS,EAAE,CAAE;SACvDC,SAAS,EAAE,kCAAkC;SAC7C3jB,KAAK,EAAE,GAAG;SACV4jB,OAAO,EAAE,IAAI;SACbC,OAAO,EAAE,EAAE;SACX1Y,SAAS,EAAE,IAAI;SACfC,OAAO,2BAAE,IAAI,kEAAJ,IAAI,CAA8B;SAC3CC,MAAM,EAAE;WACPyY,WAAW,EAAE,qBAACC,SAAoB,EAAK;aACtCrmB,GAAG,CAACiC,EAAE,CAACqkB,OAAO,CAACziB,aAAa,CAAC0iB,WAAW,CAAC;aACzCrP,+BAAI,8CAAJ,MAAI,EAAmBmP,SAAS,CAAChU,SAAS,EAAE;;;QAG9C,CAAC;OAEFwT,KAAK,CAACljB,IAAI,EAAE;;;KACZ;KAAA,sCAGD;OAAA;OACC,IAAMkjB,KAAY,GAAG,IAAI7lB,GAAG,CAACiC,EAAE,CAAC6jB,WAAW,CAAC;SAC3ClgB,EAAE,4CAAqCmgB,cAAI,CAACC,SAAS,EAAE,CAAE;SACzDC,SAAS,EAAE,oCAAoC;SAC/C3jB,KAAK,EAAE,GAAG;SACV4jB,OAAO,EAAE,IAAI;SACbC,OAAO,EAAE,EAAE;SACX1Y,SAAS,EAAE,IAAI;SACfC,OAAO,2BAAE,IAAI,sEAAJ,IAAI,CAAgC;SAC7CC,MAAM,EAAE;WACPyY,WAAW,EAAE,qBAACC,SAAoB,EAAK;aACtCrmB,GAAG,CAACiC,EAAE,CAACqkB,OAAO,CAACziB,aAAa,CAAC0iB,WAAW,CAAC;aACzCrP,+BAAI,8CAAJ,MAAI,EAAmBmP,SAAS,CAAChU,SAAS,EAAE;;;QAG9C,CAAC;OAEFwT,KAAK,CAACljB,IAAI,EAAE;;;GACZ;CAAA,EAv0B0ByI,6BAAY;CAAA,wCA00BvC;GACC,OAAO1F,aAAG,CAACC,MAAM,mpBAIXjC,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,EAGrDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAGpDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAGpDD,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,2BAG/C,IAAI,0CAAJ,IAAI;CAGT;CAAC,0CAGD;GACC,OAAO+B,aAAG,CAACC,MAAM,ipBAIXjC,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC,EAGvDD,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,EAGtDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAGpDD,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,2BAG/C,IAAI,8CAAJ,IAAI;CAGT;CAAC,4BAGD;GACC,IAAI,mCAAC,IAAI,4BAA0B,EACnC;KACC,sCAAI,6BAA6B+B,aAAG,CAACC,MAAM;KAI3C,sCAAI,yBAAyB6gB,gBAAM,CAACC,aAAa,CAAC;OACjDjiB,SAAS,oCAAE,IAAI,4BAA0B;OACzCkiB,QAAQ,EAAE,KAAK;OACfC,IAAI,EAAE,KAAK;OACXC,aAAa,EAAEC;MACf,CAAC;;GAGH,yCAAO,IAAI;CACZ;CAAC,8BAGD;GACC,IAAI,mCAAC,IAAI,8BAA4B,EACrC;KACC,sCAAI,+BAA+BnhB,aAAG,CAACC,MAAM;KAI7C,sCAAI,2BAA2B6gB,gBAAM,CAACC,aAAa,CAAC;OACnDjiB,SAAS,oCAAE,IAAI,8BAA4B;OAC3CkiB,QAAQ,EAAE,KAAK;OACfC,IAAI,EAAE,KAAK;OACXC,aAAa,EAAEE;MACf,CAAC;;GAGH,yCAAO,IAAI;CACZ;CAAC,4BAEiBjB,KAAY,EAC9B;GACC,IAAMkB,cAAc,GAAGlB,KAAK,CAACmB,mBAAmB,EAAE;GAClD,IAAIjlB,cAAI,CAACC,SAAS,CAAC+kB,cAAc,CAAC,EAClC;KACC,IAAME,OAAO,GAAGpB,KAAK,CAACmB,mBAAmB,EAAE,CAACtlB,aAAa,CAAC,SAAS,CAAC;KACpE,IAAIK,cAAI,CAACC,SAAS,CAAC+kB,cAAc,CAAC,EAClC;OACCxY,eAAK,CAACtD,IAAI,CAACgc,OAAO,EAAE,OAAO,EAAE;SAAA,OAAMpB,KAAK,CAACrkB,KAAK,EAAE;SAAC;;;CAGpD;CAAC,4BAx6BIqC,aAAa,cAEA,IAAI;CAAA,4BAFjBA,aAAa,iBASG,sFAAsF;;;;;;;;;;"}