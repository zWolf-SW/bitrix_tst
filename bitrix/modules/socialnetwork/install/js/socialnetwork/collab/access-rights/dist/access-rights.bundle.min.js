this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,r,n,i,a){"use strict";var o,s;function l(e,t){u(e,t);t.add(e)}function c(e,t,r){u(e,t);t.set(e,r)}function u(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var d=new WeakMap;var f=new WeakMap;var p=new WeakMap;var v=new WeakMap;var b=new WeakSet;var g=new WeakSet;var y=new WeakSet;var m=new WeakSet;var w=new WeakSet;var L=new WeakSet;var _=new WeakSet;var S=new WeakSet;var H=new WeakSet;var E=new WeakSet;var T=new WeakSet;var k=new WeakSet;var O=new WeakSet;var P=new WeakSet;var C=new WeakSet;var F=new WeakSet;var I=new WeakSet;var G=new WeakSet;var x=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));l(babelHelpers.assertThisInitialized(r),G);l(babelHelpers.assertThisInitialized(r),I);l(babelHelpers.assertThisInitialized(r),F);l(babelHelpers.assertThisInitialized(r),C);l(babelHelpers.assertThisInitialized(r),P);l(babelHelpers.assertThisInitialized(r),O);l(babelHelpers.assertThisInitialized(r),k);l(babelHelpers.assertThisInitialized(r),T);l(babelHelpers.assertThisInitialized(r),E);l(babelHelpers.assertThisInitialized(r),H);l(babelHelpers.assertThisInitialized(r),S);l(babelHelpers.assertThisInitialized(r),_);l(babelHelpers.assertThisInitialized(r),L);l(babelHelpers.assertThisInitialized(r),w);l(babelHelpers.assertThisInitialized(r),m);l(babelHelpers.assertThisInitialized(r),y);l(babelHelpers.assertThisInitialized(r),g);l(babelHelpers.assertThisInitialized(r),b);c(babelHelpers.assertThisInitialized(r),d,{writable:true,value:void 0});c(babelHelpers.assertThisInitialized(r),f,{writable:true,value:void 0});c(babelHelpers.assertThisInitialized(r),p,{writable:true,value:null});c(babelHelpers.assertThisInitialized(r),v,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),d,e);r.setEventNamespace("BX.Socialnetwork.Collab.Form");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),f,{});r.sidePanelId="sn-collab-access-rights";return r}babelHelpers.createClass(t,[{key:"open",value:function e(){}},{key:"prepareFormData",value:function e(t){return{id:Number(t.id),ownerId:Number(t.ownerId),moderators:a.Type.isArray(t.moderatorMembers)?t.moderatorMembers:[],permissions:a.Type.isPlainObject(t.permissions)?t.permissions:{},options:a.Type.isPlainObject(t.options)?t.options:{},permissionsLabels:a.Type.isPlainObject(t.permissionsLabels)?t.permissionsLabels:{},rightsPermissionsLabels:a.Type.isPlainObject(t.rightsPermissionsLabels)?t.rightsPermissionsLabels:{},optionsLabels:a.Type.isPlainObject(t.optionsLabels)?t.optionsLabels:{}}}},{key:"render",value:function e(t){var r=this;var n="ui-sidepanel-layout-content ui-sidepanel-layout-content-margin";h(this,m,B).call(this,t);var i=a.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div ref="content" class="sn-collab__access-right-side-panel ui-sidepanel-layout">\n\t\t\t\t<div class="ui-sidepanel-layout-header">\n\t\t\t\t\t<div class="ui-sidepanel-layout-title">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<form ref="form" class="',' sn-collab__access-right-form">\n\t\t\t\t\t<div class="sn-collab__access-right-form-box">\n\t\t\t\t\t\t<div class="sn-collab__access-right-form-box-label">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sn-collab__access-right-form-box --selectors">\n\t\t\t\t\t\t<div class="sn-collab__access-right-form-box-label">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<div class="ui-sidepanel-layout-footer-anchor"></div>\n\t\t\t\t<div class="ui-sidepanel-layout-footer">\n\t\t\t\t<div class="ui-sidepanel-layout-buttons">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),n,a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MANAGEMENT_LABEL_MSGVER_1"),babelHelpers.classPrivateFieldGet(this,f).ownerField.render(),babelHelpers.classPrivateFieldGet(this,f).moderatorsField.render(),babelHelpers.classPrivateFieldGet(this,f).showHistory.render(),babelHelpers.classPrivateFieldGet(this,f).whoCanInvite.render(),babelHelpers.classPrivateFieldGet(this,f).manageMessages.render(),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TASKS_LABEL"),babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField.render(),h(this,b,A).call(this,t)),s=i.content,l=i.form;a.Event.bind(l,"change",(function(){h(r,g,j).call(r)}));return s}},{key:"onLoad",value:function e(t){babelHelpers.classPrivateFieldSet(this,p,BX.UI.Hint.createInstance({id:this.sidePanelId,popupParameters:{targetContainer:window.top.document.body}}));babelHelpers.classPrivateFieldGet(this,p).init(t.slider.getContainer());babelHelpers.classPrivateFieldSet(this,v,t.slider)}},{key:"onClose",value:function e(){babelHelpers.classPrivateFieldGet(this,p).hide()}}]);return t}(t.EventEmitter);function A(e){var t=this;var r=a.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div ref="buttons">\n\t\t\t\t<button ref="save" class="ui-btn ui-btn-success">\n\t\t\t\t\t','\n\t\t\t\t</button>\n\t\t\t\t<button ref="cancel" class="ui-btn ui-btn-link">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t"])),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_BUTTON_SAVE"),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_BUTTON_CANCEL")),n=r.buttons,i=r.save,o=r.cancel;a.Event.bind(i,"click",(function(){if(h(t,g,j).call(t)){if(babelHelpers.classPrivateFieldGet(t,d).enableServerSave===true){a.ajax.runAction("socialnetwork.collab.AccessRights.saveRights",{data:h(t,y,N).call(t,e)}).then((function(){babelHelpers.classPrivateFieldGet(t,v).close()}))["catch"]((function(e){console.error(e)}))}else{t.emit("save",h(t,y,N).call(t,e));babelHelpers.classPrivateFieldGet(t,v).close()}}}));a.Event.bind(o,"click",(function(){t.emit("cancel");babelHelpers.classPrivateFieldGet(t,v).close()}));return n}function j(){var e;var t=(e=babelHelpers.classPrivateFieldGet(this,f).ownerField)===null||e===void 0?void 0:e.getSelector().getTags().map((function(e){return e.id}));if(t.length===0){babelHelpers.classPrivateFieldGet(this,f).ownerField.setErrors([a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_ERROR_REQUIRED_OWNER")]);return false}babelHelpers.classPrivateFieldGet(this,f).ownerField.cleanError();return true}function N(e){var t,r;var n=e.ownerId;if((t=babelHelpers.classPrivateFieldGet(this,f).ownerField)!==null&&t!==void 0&&t.getSelector().getDialog().isLoaded()){var i;n=(i=babelHelpers.classPrivateFieldGet(this,f).ownerField)===null||i===void 0?void 0:i.getSelector().getTags().map((function(e){return e.id}))}var a=e.moderators;if((r=babelHelpers.classPrivateFieldGet(this,f).moderatorsField)!==null&&r!==void 0&&r.getSelector().getDialog().isLoaded()){var o;a=(o=babelHelpers.classPrivateFieldGet(this,f).moderatorsField)===null||o===void 0?void 0:o.getSelector().getTags().map((function(e){return e.id}))}return{id:e.id,ownerId:n[0],moderators:a,options:{showHistory:babelHelpers.classPrivateFieldGet(this,f).showHistory.getValue(),manageMessages:babelHelpers.classPrivateFieldGet(this,f).manageMessages.getValue(),whoCanInvite:babelHelpers.classPrivateFieldGet(this,f).whoCanInvite.getValue()},permissions:{tasks:{view_all:babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField.getValue(),sort:babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField.getValue(),create_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField.getValue(),edit_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField.getValue(),delete_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField.getValue()}}}}function B(e){h(this,w,R).call(this,e);h(this,L,M).call(this,e)}function R(e){var t,r,n;babelHelpers.classPrivateFieldGet(this,f).ownerField=h(this,_,z).call(this,e.ownerId);babelHelpers.classPrivateFieldGet(this,f).moderatorsField=h(this,S,W).call(this,e.moderators);babelHelpers.classPrivateFieldGet(this,f).showHistory=h(this,H,D).call(this,e.optionsLabels,(t=e.options)===null||t===void 0?void 0:t.showHistory);babelHelpers.classPrivateFieldGet(this,f).whoCanInvite=h(this,E,X).call(this,e.permissionsLabels,(r=e.options)===null||r===void 0?void 0:r.whoCanInvite);babelHelpers.classPrivateFieldGet(this,f).manageMessages=h(this,T,V).call(this,e.permissionsLabels,(n=e.options)===null||n===void 0?void 0:n.manageMessages)}function M(e){var t;var r=a.Type.isPlainObject((t=e.permissions)===null||t===void 0?void 0:t.tasks)?e.permissions.tasks:{};babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField=h(this,k,U).call(this,e.rightsPermissionsLabels,r===null||r===void 0?void 0:r.view_all);babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField=h(this,O,Y).call(this,e.rightsPermissionsLabels,r===null||r===void 0?void 0:r.sort);babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField=h(this,P,K).call(this,e.rightsPermissionsLabels,r===null||r===void 0?void 0:r.create_tasks);babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField=h(this,C,q).call(this,e.rightsPermissionsLabels,r===null||r===void 0?void 0:r.edit_tasks);babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField=h(this,F,Q).call(this,e.rightsPermissionsLabels,r===null||r===void 0?void 0:r.delete_tasks)}function z(e){var t=h(this,I,J).call(this,"OwnerHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_OWNER_LABEL"),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_OWNER_LABEL_HINT"));return new r.UserSelector({id:"sn-collab-form-field-owner",label:t,enableAll:false,enableDepartments:false,multiple:false,values:[["user",e]]})}function W(e){var t=h(this,I,J).call(this,"ModeratorsHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MODERATORS_LABEL"),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MODERATORS_LABEL_HINT"));return new r.UserSelector({id:"sn-collab-form-field-moderators",label:t,enableAll:false,enableDepartments:false,multiple:true,values:e.map((function(e){return["user",e]}))})}function D(e,t){var r=h(this,I,J).call(this,"ShowHistoryHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_SHOW_HISTORY_LABEL"));return h(this,G,Z).call(this,"showHistory",r,e,t)}function X(e,t){var r=h(this,I,J).call(this,"InitiateHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_INITIATE_LABEL"),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_INITIATE_LABEL_HINT"));return h(this,G,Z).call(this,"whoCanInvite",r,e,t)}function V(e,t){var r=h(this,I,J).call(this,"ChatHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_CHAT_LABEL"),a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_CHAT_LABEL_HINT"));return h(this,G,Z).call(this,"manageMessages",r,e,t)}function U(e,t){var r=h(this,I,J).call(this,"TasksViewUsersHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TVU_LABEL"));return h(this,G,Z).call(this,"initiate",r,e,t)}function Y(e,t){var r=h(this,I,J).call(this,"TasksSortTasksHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TST_LABEL"));return h(this,G,Z).call(this,"initiate",r,e,t)}function K(e,t){var r=h(this,I,J).call(this,"TasksCreateTasksHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TCT_LABEL"));return h(this,G,Z).call(this,"initiate",r,e,t)}function q(e,t){var r=h(this,I,J).call(this,"TasksEditTasksHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TET_LABEL"));return h(this,G,Z).call(this,"initiate",r,e,t)}function Q(e,t){var r=h(this,I,J).call(this,"TasksDeleteTasksHint",a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TDT_LABEL"));return h(this,G,Z).call(this,"initiate",r,e,t)}function J(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(r===null){return'\n\t\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t\t'.concat(t,"\n\t\t\t\t</div>\n\t\t\t")}return'\n\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t'.concat(t,'\n\t\t\t\t<span\n\t\t\t\t\tdata-id="').concat(e,'"\n\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\tdata-hint="').concat(r,'" \n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t><span class="ui-hint-icon"></span></span>\n\t\t\t</div>\n\t\t')}function Z(e,t,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"K";var a=[];Object.entries(n).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),r=t[0],n=t[1];a.push({value:r,name:n,selected:r===i})}));return new r.Selector({id:"sn-collab-form-field-".concat(e),label:t,items:a,current:i})}function $(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,r,n){return t[r]=n}}function c(e,t,r,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new E(i||[]);return n(o,"_invoke",{value:L(e,r,s)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==t&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,a,o,s){var l=u(e[n],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;n(this,"_invoke",{value:function e(r,n){function o(){return new t((function(e,t){i(r,n,e,t)}))}return a=a?a.then(o,o):o()}})}function L(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,_(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new w(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(y),l(y,s,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function i(e,r){return s.type="throw",s.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function e(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},e}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){ne(e,t);t.set(e,r)}function ne(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ie=new WeakMap;var ae=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));re(babelHelpers.assertThisInitialized(r),ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),ie,e);return r}babelHelpers.createClass(t,[{key:"open",value:function e(){var t=this;var r=BX.SidePanel.Instance.getSlider(this.sidePanelId);if(r!==null&&r!==void 0&&r.isOpen()){return}BX.SidePanel.Instance.open(this.sidePanelId,{cacheable:false,title:a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),contentCallback:function(){var e=babelHelpers.asyncToGenerator($().mark((function e(r){var n,i,o,s,l;return $().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return a.ajax.runAction("socialnetwork.collab.AccessRights.getAddForm",{data:{}});case 3:o=r.sent;s=o.data;l=(n=(i=babelHelpers.classPrivateFieldGet(t,ie))===null||i===void 0?void 0:i.formData)!==null&&n!==void 0?n:{};return r.abrupt("return",t.render(te(te({},t.prepareFormData(s)),l)));case 9:r.prev=9;r.t0=r["catch"](0);console.error(r.t0);return r.abrupt("return",Promise.reject());case 13:case"end":return r.stop()}}),e,null,[[0,9]])})));function r(t){return e.apply(this,arguments)}return r}(),width:661,events:{onLoad:this.onLoad.bind(this),onClose:this.onClose.bind(this)}})}}]);return t}(x);function oe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */oe=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,r,n){return t[r]=n}}function c(e,t,r,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new E(i||[]);return n(o,"_invoke",{value:L(e,r,s)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==t&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,a,o,s){var l=u(e[n],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;n(this,"_invoke",{value:function e(r,n){function o(){return new t((function(e,t){i(r,n,e,t)}))}return a=a?a.then(o,o):o()}})}function L(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,_(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new w(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(y),l(y,s,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function i(e,r){return s.type="throw",s.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function e(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},e}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){ue(e,t);t.set(e,r)}function ue(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var he=new WeakMap;var de=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ce(babelHelpers.assertThisInitialized(r),he,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),he,e);if(!a.Type.isNumber(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(r),he).collabId)){throw new TypeError("Collab id is required")}return r}babelHelpers.createClass(t,[{key:"open",value:function e(){var t=this;var r="sn-collab-access-rights-".concat(babelHelpers.classPrivateFieldGet(this,he).collabId);var n=BX.SidePanel.Instance.getSlider(r);if(n!==null&&n!==void 0&&n.isOpen()){return}BX.SidePanel.Instance.open(r,{cacheable:false,title:a.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),contentCallback:function(){var e=babelHelpers.asyncToGenerator(oe().mark((function e(r){var n,i,o,s,l;return oe().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return a.ajax.runAction("socialnetwork.collab.AccessRights.getEditForm",{data:{collabId:babelHelpers.classPrivateFieldGet(t,he).collabId}});case 3:o=r.sent;s=o.data;l=(n=(i=babelHelpers.classPrivateFieldGet(t,he))===null||i===void 0?void 0:i.formData)!==null&&n!==void 0?n:{};return r.abrupt("return",t.render(le(le({},t.prepareFormData(s)),l)));case 9:r.prev=9;r.t0=r["catch"](0);console.error(r.t0);return r.abrupt("return",Promise.reject());case 13:case"end":return r.stop()}}),e,null,[[0,9]])})));function r(t){return e.apply(this,arguments)}return r}(),width:661,events:{onLoad:this.onLoad.bind(this),onClose:this.onClose.bind(this)}})}}]);return t}(x);function fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fe=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,r,n){return t[r]=n}}function c(e,t,r,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new E(i||[]);return n(o,"_invoke",{value:L(e,r,s)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==t&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,a,o,s){var l=u(e[n],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;n(this,"_invoke",{value:function e(r,n){function o(){return new t((function(e,t){i(r,n,e,t)}))}return a=a?a.then(o,o):o()}})}function L(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,_(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(w.prototype),l(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new w(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(y),l(y,s,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function i(e,r){return s.type="throw",s.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function e(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},e}var pe=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"openForm",value:function(){var e=babelHelpers.asyncToGenerator(fe().mark((function e(t){var r,n,i;return fe().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return top.BX.Runtime.loadExtension("socialnetwork.collab.access-rights");case 2:r=Number(t===null||t===void 0?void 0:t.collabId)>0;if(!r){a.next=7;break}n=new de(t);n.open();return a.abrupt("return",n);case 7:i=new ae(t);i.open();return a.abrupt("return",i);case 10:case"end":return a.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]);return e}();e.AccessRights=pe})(this.BX.Socialnetwork.Collab=this.BX.Socialnetwork.Collab||{},BX.Event,BX.UI.FormElements,BX,BX,BX);
//# sourceMappingURL=access-rights.bundle.map.js