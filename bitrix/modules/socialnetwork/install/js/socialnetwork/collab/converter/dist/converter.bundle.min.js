this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(t,e,r,o,s,a,l,i,n,c,d,u){"use strict";let v=t=>t,p,b,E,L,_,h,A,O;var T=babelHelpers.classPrivateFieldLooseKey("groupId");var S=babelHelpers.classPrivateFieldLooseKey("errors");var B=babelHelpers.classPrivateFieldLooseKey("popup");var C=babelHelpers.classPrivateFieldLooseKey("prepareErrors");var R=babelHelpers.classPrivateFieldLooseKey("getPopup");var w=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var P=babelHelpers.classPrivateFieldLooseKey("renderHeader");var N=babelHelpers.classPrivateFieldLooseKey("renderDescription");var g=babelHelpers.classPrivateFieldLooseKey("renderLinkMore");var f=babelHelpers.classPrivateFieldLooseKey("renderButtons");var m=babelHelpers.classPrivateFieldLooseKey("getContentConfig");var y=babelHelpers.classPrivateFieldLooseKey("getMultipleErrorsPopupConfig");var F=babelHelpers.classPrivateFieldLooseKey("getOnlyFlowErrorPopupConfig");var k=babelHelpers.classPrivateFieldLooseKey("getOnlyLandingErrorPopupConfig");var H=babelHelpers.classPrivateFieldLooseKey("hasMultipleErrors");var I=babelHelpers.classPrivateFieldLooseKey("hasOnlyFlowError");var z=babelHelpers.classPrivateFieldLooseKey("hasOnlyLandingError");class U{constructor(t){Object.defineProperty(this,z,{value:J});Object.defineProperty(this,I,{value:Q});Object.defineProperty(this,H,{value:Y});Object.defineProperty(this,k,{value:q});Object.defineProperty(this,F,{value:W});Object.defineProperty(this,y,{value:X});Object.defineProperty(this,m,{value:$});Object.defineProperty(this,f,{value:j});Object.defineProperty(this,g,{value:K});Object.defineProperty(this,N,{value:x});Object.defineProperty(this,P,{value:M});Object.defineProperty(this,w,{value:G});Object.defineProperty(this,R,{value:D});Object.defineProperty(this,C,{value:V});this.ERROR_CODE_HAS_FLOWS=10002;this.ERROR_CODE_LANDING_GROUP=10003;Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,S,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,T)[T]=t.groupId;babelHelpers.classPrivateFieldLooseBase(this,S)[S]=babelHelpers.classPrivateFieldLooseBase(this,C)[C](t.errors)}show(){babelHelpers.classPrivateFieldLooseBase(this,R)[R]().show()}}function V(t){const e=t.filter((t=>[this.ERROR_CODE_HAS_FLOWS,this.ERROR_CODE_LANDING_GROUP].includes(t.code)));if(t.length>e.length){const e=t.filter((t=>![this.ERROR_CODE_HAS_FLOWS,this.ERROR_CODE_LANDING_GROUP].includes(t.code)));console.error("Unexpected errors",e)}return e}function D(){if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B]){babelHelpers.classPrivateFieldLooseBase(this,B)[B]=new o.Popup({cacheable:false,width:400,borderRadius:"var(--ui-border-radius-3xl)",angle:false,closeIcon:false,content:babelHelpers.classPrivateFieldLooseBase(this,w)[w](),closeByEsc:false,autoHide:false,padding:18,contentPadding:0,overlay:true,className:"socialnetwork-collab-converter-error-popup"})}return babelHelpers.classPrivateFieldLooseBase(this,B)[B]}function G(){const t=babelHelpers.classPrivateFieldLooseBase(this,m)[m]();return l.Tag.render(p||(p=v`
			<div class="socialnetwork-collab-converter-error-popup-content">
				${0}
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,P)[P](t),babelHelpers.classPrivateFieldLooseBase(this,N)[N](t),babelHelpers.classPrivateFieldLooseBase(this,g)[g](t),babelHelpers.classPrivateFieldLooseBase(this,f)[f](t))}function M(t){const e=t.header.length>0?l.Tag.render(b||(b=v`<div class="socialnetwork-collab-converter-error-popup-header-text">${0}</div>`),t.header):"";const r=l.Tag.render(E||(E=v`
			<div class="ui-icon-set --${0} socialnetwork-collab-converter-error-popup-close-icon"/>
		`),d.Outline.CROSS_L);l.Event.bind(r,"click",(()=>{var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.close()}));return l.Tag.render(L||(L=v`
			<div class="socialnetwork-collab-converter-error-popup-header">
				${0}
				${0}
			</div>
		`),e,r)}function x(t){const e=[];t.descriptionParagraphs.forEach((t=>{const r=l.Tag.render(_||(_=v`
				<div class="socialnetwork-collab-converter-error-popup-description-paragraph">
					${0}
				</div>
			`),t);e.push(r)}));return l.Tag.render(h||(h=v`
			<div class="socialnetwork-collab-converter-error-popup-description">
				${0}
			</div>
		`),e)}function K(t){if(!t.helperCode){return null}const e=l.Tag.render(A||(A=v`
			<div class="socialnetwork-collab-converter-error-popup-link-more">
				<div class="ui-icon-set --${0} socialnetwork-collab-converter-error-popup-link-more-icon"></div>
				<div class="socialnetwork-collab-converter-error-popup-link-more-text">
					${0}
				</div>
			</div>
		`),d.Outline.KNOWLEDGE_BASE,l.Loc.getMessage("SN_COLLAB_CONVERTER_LINK_MORE"));l.Event.bind(e,"click",(()=>BX.Helper.show(`redirect=detail&code=${t.helperCode}`)));return e}function j(t){return l.Tag.render(O||(O=v`
			<div class="socialnetwork-collab-converter-error-popup-buttons">
				${0}
			</div>
		`),t.buttons.map((t=>t.render())))}function $(){let t=null;if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]()){t=babelHelpers.classPrivateFieldLooseBase(this,y)[y]()}else if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]()){t=babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}else if(babelHelpers.classPrivateFieldLooseBase(this,z)[z]()){t=babelHelpers.classPrivateFieldLooseBase(this,k)[k]()}return t}function X(){const t=new r.Button({useAirDesign:true,noCaps:true,size:r.ButtonSize.LARGE,text:l.Loc.getMessage("SN_COLLAB_CONVERTER_GET_IT"),onclick:()=>{var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.close()}});return{header:"",descriptionParagraphs:[l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_CONTENT_MULTIPLE")],helperCode:"25356654#int",buttons:[t]}}function W(){const t=l.Loc.getMessage("SN_COLLAB_CONVERTER_FLOW_URL_TEMPLATE",{"#groupId#":babelHelpers.classPrivateFieldLooseBase(this,T)[T]});const o=r=>{var o;e.SidePanel.Instance.open(t);(o=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:o.close()};const s=new r.Button({useAirDesign:true,noCaps:true,size:r.ButtonSize.LARGE,text:l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_BUTTON_CONFIRM_FLOWS"),onclick:o});const a=new r.Button({useAirDesign:true,noCaps:true,style:r.AirButtonStyle.OUTLINE,size:r.ButtonSize.LARGE,text:l.Loc.getMessage("SN_COLLAB_CONVERTER_CANCEL"),onclick:()=>{var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.close()}});return{header:l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_TITLE_FLOWS"),descriptionParagraphs:[l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_CONTENT_FLOWS")],helperCode:21307012,buttons:[s,a]}}function q(){const t=new r.Button({useAirDesign:true,noCaps:true,size:r.ButtonSize.LARGE,text:l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_BUTTON_CONFIRM_LANDING"),link:`${l.Loc.getMessage("SN_COLLAB_CONVERTER_GROUP_URL")}group/${babelHelpers.classPrivateFieldLooseBase(this,T)[T]}/edit/`,onclick:()=>{var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.close()}});const e=new r.Button({useAirDesign:true,noCaps:true,style:r.AirButtonStyle.OUTLINE,size:r.ButtonSize.LARGE,text:l.Loc.getMessage("SN_COLLAB_CONVERTER_CANCEL"),onclick:()=>{var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.close()}});return{header:l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_TITLE_LANDING"),descriptionParagraphs:[l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_CONTENT_LANDING_1",{"#ACCENT_START#":'<span class="socialnetwork-collab-converter-error-popup-description-paragraph-accent">',"#ACCENT_END#":"</span>"}),l.Loc.getMessage("SN_COLLAB_CONVERTER_ERROR_POPUP_CONTENT_LANDING_2")],helperCode:22699004,buttons:[t,e]}}function Y(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S].length>1}function Q(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S].length===1&&babelHelpers.classPrivateFieldLooseBase(this,S)[S][0].code===this.ERROR_CODE_HAS_FLOWS}function J(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S].length===1&&babelHelpers.classPrivateFieldLooseBase(this,S)[S][0].code===this.ERROR_CODE_LANDING_GROUP}function Z(t){const e={true:"member",[t.isModerator||t.isScrumMaster]:"moderator",[t.isOwner]:"owner"}.true;return{id:t.id,avatar:t.photo,role:e}}function tt(t){return{name:t.featureName,isActive:t.active}}function et(t){var e;const r=t.AVATAR_TYPE;const o=t.AVATAR_TYPES;const s=t.AVATAR||(o==null?void 0:(e=o[r])==null?void 0:e.entitySelectorUrl)||"";return{id:t.ID,name:t.NAME,image:s,members:t.LIST_OF_MEMBERS.map((t=>Z(t))),features:t.FEATURES.map((t=>tt(t)))}}class rt{async validateGroup(t){const e=await l.ajax.runAction("socialnetwork.collab.Converter.validateGroup",{data:{id:t}});return{isValid:e.data.isValid,errors:e.errors}}async getGroup(t){const e=await l.ajax.runAction("socialnetwork.api.workgroup.get",{data:{params:{groupId:t,select:["LIST_OF_MEMBERS","AVATAR","AVATAR_TYPES","FEATURES"]}}});return et(e.data)}async convertToCollab(t){const e=await l.ajax.runAction("socialnetwork.collab.Converter.convertToCollab",{data:{id:t}});return e.data}}const ot=new rt;const st={props:{options:{type:Object,default:null}},mounted(){this.loader=new i.Loader(this.getOptions());this.loader.render();this.loader.show()},beforeUnmount(){var t;(t=this.loader)==null?void 0:t.hide==null?void 0:t.hide();this.loader=null},methods:{getOptions(){return{...this.getDefaultOptions(),...this.options}},getDefaultOptions(){return{target:this.$refs.loader,type:"BULLET",size:"xl"}}},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-loader-container" ref="loader"></div>\n\t`};const at={props:{group:{type:Object,required:true},size:{type:Number,default:48}},mounted(){const t=this.group;const e=new n.AvatarHexagonGuest({size:this.size,userName:t.name,userpicPath:t.image});return e.renderTo(this.$refs.container)},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-group-avatar" ref="container"/>\n\t`};const lt={components:{BIcon:c.BIcon},props:{icon:{type:String,required:true},iconColor:{type:String,required:true},title:{type:String,required:true},description:{type:String,default:""}},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-advantage --slide">\n\t\t\t<BIcon :name="icon" :color="iconColor" :size="28"/>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-advantage-content">\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-advantage-content-title" v-html="title"/>\n\t\t\t\t<div\n\t\t\t\t\tv-if="description.length > 0"\n\t\t\t\t\tclass="socialnetwork-collab-converter-wizard-advantage-content-description"\n\t\t\t\t\tv-html="description"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`};const it={props:{src:{type:String,default:""},size:{type:Number,default:14}},created(){this.avatar=new n.AvatarBase({size:this.size,picPath:this.src,baseColor:"#858D95"})},mounted(){if(this.avatar&&this.$refs.container){this.avatar.renderTo(this.$refs.container)}},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-user-list-avatar" ref="container"/>\n\t`};const nt={components:{UserAvatar:it},props:{users:{type:Array,default:()=>[]},maxToShow:{type:Number,default:5},borderColor:{type:String,default:"transparent"}},computed:{rowUsers(){return this.users.slice(0,this.maxToShow)},notShownAmount(){return this.users.length-this.rowUsers.length}},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-user-list-pill" :style="{'border-color': borderColor}">\n\t\t\t<UserAvatar v-for="user in rowUsers" :src="user.avatar"/>\n\t\t\t<div v-if="notShownAmount" class="socialnetwork-collab-converter-wizard-user-list-not-shown">+{{notShownAmount}}</div>\n\t\t</div>\n\t`};const ct={components:{UserAvatar:it,AvatarsRow:nt},props:{hostUsers:{type:Array,default:()=>[]},commonUsers:{type:Array,default:()=>[]},maxToShow:{type:Number,default:5}},template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-user-list">\n\t\t\t<AvatarsRow v-if="hostUsers.length > 0" :users="hostUsers" :borderColor="'var(--ui-color-accent-main-success, #1BCE7B)'"/>\n\t\t\t<AvatarsRow v-if="commonUsers.length > 0" :users="commonUsers" :borderColor="'var(--ui-color-divider-default, #F0F0F0)'"/>\n\t\t</div>\n\t`};const dt={components:{BIcon:c.BIcon,UiButton:u.Button},props:{title:{type:String,required:true},primaryButtonText:{type:String,required:true},alertText:{type:String,default:""}},setup(){return{AirButtonStyle:u.AirButtonStyle,ButtonSize:u.ButtonSize,Outline:d.Outline}},emits:["continue","close"],template:`\n\t\t<div class="socialnetwork-collab-converter-wizard-step">\n\t\t\t<div class="socialnetwork-collab-converter-wizard-step-content">\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-step-title">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-step-footer">\n\t\t\t\t<div v-if="alertText.length > 0" class="socialnetwork-collab-converter-wizard-step-footer-alert">\n\t\t\t\t\t<BIcon :name="Outline.ALERT" :size="16" :color="'var(--ui-color-accent-main-warning, #FAA72C)'"/>\n\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-step-footer-alert-text" v-html="alertText"/>\n\t\t\t\t</div>\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-step-footer-buttons">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text="primaryButtonText"\n\t\t\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t\t\t@click="$emit('continue')"\n\t\t\t\t\t\tdata-test-id="socialnetwork-collab-converter-continue-button"\n\t\t\t\t\t/>\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text="loc('SN_COLLAB_CONVERTER_CANCEL')"\n\t\t\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t\t\t:style="AirButtonStyle.OUTLINE"\n\t\t\t\t\t\t@click="$emit('close')"\n\t\t\t\t\t\tdata-test-id="socialnetwork-collab-converter-cancel-button"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const ut={components:{UiButton:u.Button,Advantage:lt,Step:dt},setup(){return{AirButtonStyle:u.AirButtonStyle,ButtonSize:u.ButtonSize}},emits:["continue","close"],computed:{advantages(){return[{icon:d.Outline.MESSAGES,iconColor:"var(--ui-color-accent-main-primary, #0075FF)",title:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_CHAT_TITLE"),description:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_CHAT_DESCRIPTION")},{icon:d.Outline.SUITCASE,iconColor:"var(--ui-color-accent-extra-aqua, #37C5D8)",title:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_DISCUSSION_TITLE"),description:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_DISCUSSION_DESCRIPTION")},{icon:d.Outline.WINDOW_FLAG,iconColor:"var(--ui-color-accent-soft-element-green, #02BB9A)",title:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_FAST_TITLE"),description:this.loc("SN_COLLAB_CONVERTER_STEP_ADVANTAGES_ADVANTAGE_FAST_DESCRIPTION")}]}},template:`\n\t\t<Step\n\t\t\t:title="loc('SN_COLLAB_CONVERTER_STEP_ADVANTAGES_TITLE')"\n\t\t\t:primaryButtonText="loc('SN_COLLAB_CONVERTER_CONTINUE')"\n\t\t\t@continue="$emit('continue')"\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-advantages">\n\t\t\t\t<Advantage\n\t\t\t\t\tv-for="(advantage, index) in advantages"\n\t\t\t\t\t:icon="advantage.icon"\n\t\t\t\t\t:iconColor="advantage.iconColor"\n\t\t\t\t\t:title="advantage.title"\n\t\t\t\t\t:description="advantage.description"\n\t\t\t\t\t:style="{'--i': index}"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Step>\n\t`};const vt={components:{UiButton:u.Button,Advantage:lt,Step:dt},setup(){return{AirButtonStyle:u.AirButtonStyle,ButtonSize:u.ButtonSize,Outline:d.Outline}},emits:["continue","close"],computed:{advantages(){return[{icon:d.Outline.SHUFFLE,iconColor:"var(--ui-color-collab-accent-primary-alt, #00A94E)",title:this.loc("SN_COLLAB_CONVERTER_STEP_AFTER_ADVANTAGE_COLLABORATION_TITLE")},{icon:d.Outline.TASK_LIST,iconColor:"var(--ui-color-collab-accent-primary-alt, #00A94E)",title:this.loc("SN_COLLAB_CONVERTER_STEP_AFTER_ADVANTAGE_DISCUSSION_TITLE")},{icon:d.Outline.CHATS_WITH_CHECK,iconColor:"var(--ui-color-collab-accent-primary-alt, #00A94E)",title:this.loc("SN_COLLAB_CONVERTER_STEP_AFTER_ADVANTAGE_FAST_TITLE")}]}},template:`\n\t\t<Step\n\t\t\t:title="loc('SN_COLLAB_CONVERTER_STEP_AFTER_TITLE')"\n\t\t\t:primaryButtonText="loc('SN_COLLAB_CONVERTER_START')"\n\t\t\t:alertText="loc('SN_COLLAB_CONVERTER_ALERT')"\n\t\t\t@continue="$emit('continue')"\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-advantages">\n\t\t\t\t<Advantage\n\t\t\t\t\tv-for="(advantage, index) in advantages"\n\t\t\t\t\t:icon="advantage.icon"\n\t\t\t\t\t:iconColor="advantage.iconColor"\n\t\t\t\t\t:title="advantage.title"\n\t\t\t\t\t:description="advantage.description"\n\t\t\t\t\t:style="{'--i': index}"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Step>\n\t`};const pt={components:{UiButton:u.Button,Advantage:lt,Step:dt,BIcon:d.BIcon},props:{features:{type:Array,required:true}},setup(){return{AirButtonStyle:u.AirButtonStyle,ButtonSize:u.ButtonSize,Outline:d.Outline}},emits:["continue","close"],methods:{getFeatureName(t){const e={[t==="group_lists"]:"SN_COLLAB_CONVERTER_FEATURE_GROUP_LISTS",[t==="forum"]:"SN_COLLAB_CONVERTER_FEATURE_FORUM",[t==="photo"]:"SN_COLLAB_CONVERTER_FEATURE_PHOTO",[t==="wiki"]:"SN_COLLAB_CONVERTER_FEATURE_WIKI",[t==="marketplace"]:"SN_COLLAB_CONVERTER_FEATURE_MARKETPLACE",[t==="landing_knowledge"]:"SN_COLLAB_CONVERTER_FEATURE_LANDING_KNOWLEDGE"}.true;return this.loc(e)},handleLinkMoreClick(){BX.Helper.show("redirect=detail&code=25356654#tool")}},template:`\n\t\t<Step\n\t\t\t:title="loc('SN_COLLAB_CONVERTER_STEP_FEATURES_TITLE')"\n\t\t\t:primaryButtonText="loc('SN_COLLAB_CONVERTER_START')"\n\t\t\t:alertText="loc('SN_COLLAB_CONVERTER_ALERT')"\n\t\t\tclass="--features"\n\t\t\t@continue="$emit('continue')"\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-step-subtitle">\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-step-subtitle-text" v-html="loc('SN_COLLAB_CONVERTER_STEP_FEATURES_SUBTITLE')"/>\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-step-subtitle-link" @click="handleLinkMoreClick">\n\t\t\t\t\t{{ loc('SN_COLLAB_CONVERTER_LINK_MORE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="socialnetwork-collab-converter-wizard-features">\n\t\t\t\t<div v-for="feature in features" class="socialnetwork-collab-converter-wizard-feature">\n\t\t\t\t\t<BIcon :name="Outline.CIRCLE_MINUS" :color="'var(--ui-color-base-6, #DFE0E3)'" :size="20"/>\n\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-feature-name">\n\t\t\t\t\t\t{{ getFeatureName(feature.name) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Step>\n\t`};const bt={name:"SocialnetworkCollabConverter",components:{BIcon:c.BIcon,Loader:st,GroupAvatar:at,UserList:ct,Advantage:lt,UiButton:u.Button,StepAdvantages:ut,StepAfter:vt,StepFeatures:pt},props:{groupId:{type:Number,required:true},redirectAfterSuccess:{type:Boolean,default:false}},setup(){return{ButtonSize:u.ButtonSize,AirButtonStyle:u.AirButtonStyle,Outline:d.Outline}},data(){return{collab:null,isConversionStarted:false,group:null,step:1}},computed:{leftTopTitle(){return this.loc("SN_COLLAB_CONVERTER_TITLE",{"#ACCENT_START#":'<span class="socialnetwork-collab-converter-wizard-left-top-title-accent">',"#ACCENT_END#":"</span>"})},groupManagers(){return this.group.members.filter((t=>["owner","moderator"].includes(t.role)))},groupCommonMembers(){return this.group.members.filter((t=>["member"].includes(t.role)))},featuresToDisable(){const t=new Set(["forum","photo","group_lists","wiki","landing_knowledge","marketplace"]);return this.group.features.filter((e=>e.isActive&&t.has(e.name)))},fullScaleTitle(){if(this.collab){return this.loc("SN_COLLAB_CONVERTER_DONE")}return this.loc("SN_COLLAB_CONVERTER_TITLE_CONVERTING")},fullScaleSubtitle(){return this.collab?"":this.loc("SN_COLLAB_CONVERTER_SUBTITLE_CONVERTING")}},async created(){try{this.group=await ot.getGroup(this.groupId)}catch(t){console.error("Fetch group error",t);this.close()}},methods:{handleStepAdvantagesContinue(){this.step++},handleStepAfterContinue(){if(this.featuresToDisable.length===0){void this.convert();return}this.step++},handleStepFeaturesContinue(){void this.convert()},async convert(){this.isConversionStarted=true;try{this.collab=await ot.convertToCollab(this.groupId);l.Event.EventEmitter.emit("socialnetwork:collab:converter:success",{collab:this.collab})}catch(t){console.error("Conversion error",t);this.close()}},close(){l.Event.EventEmitter.emit("socialnetwork:collab:converter:close")},openCollab(){if(top.BX.Messenger.Public){top.BX.Messenger.Public.openChat(this.collab.dialogId)}this.close()}},template:`\n\t\t<div\n\t\t\tv-if="group"\n\t\t\tclass="socialnetwork-collab-converter-wizard"\n\t\t>\n\t\t\t<template v-if="isConversionStarted">\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale">\n\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale-content">\n\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale-header">\n\t\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale-title">\n\t\t\t\t\t\t\t\t{{ fullScaleTitle }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale-subtitle">\n\t\t\t\t\t\t\t\t{{ fullScaleSubtitle }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-full-scale-group">\n\t\t\t\t\t\t\t<GroupAvatar :group="group" :size="72"/>\n\t\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-group-title">\n\t\t\t\t\t\t\t\t{{ group.name }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="collab && !redirectAfterSuccess" class="socialnetwork-collab-converter-wizard-full-scale-buttons">\n\t\t\t\t\t\t<UiButton\n\t\t\t\t\t\t\t:text="loc('SN_COLLAB_CONVERTER_OPEN_COLLAB')"\n\t\t\t\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t\t\t\t@click="openCollab"\n\t\t\t\t\t\t\tdata-test-id="socialnetwork-collab-converter-open-collab-button"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<UiButton\n\t\t\t\t\t\t\t:text="loc('SN_COLLAB_CONVERTER_GET_IT')"\n\t\t\t\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t\t\t\t:style="AirButtonStyle.OUTLINE"\n\t\t\t\t\t\t\t@click="close"\n\t\t\t\t\t\t\tdata-test-id="socialnetwork-collab-converter-close-button"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-left">\n\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-left-top">\n\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-left-top-title" v-html="leftTopTitle"/>\n\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-group-info">\n\t\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-group-info-main">\n\t\t\t\t\t\t\t\t<GroupAvatar :group="group"/>\n\t\t\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-group-title">\n\t\t\t\t\t\t\t\t\t{{ group.name }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<UserList :hostUsers="groupManagers" :commonUsers="groupCommonMembers"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-left-link">\n\t\t\t\t\t\t<BIcon :name="Outline.QUESTION" :size="16"/>\n\t\t\t\t\t\t<div class="socialnetwork-collab-converter-wizard-left-link-text">\n\t\t\t\t\t\t\t{{ loc('SN_COLLAB_CONVERTER_LINK_MORE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="socialnetwork-collab-converter-wizard-right">\n\t\t\t\t\t<StepAdvantages v-if="step === 1" @continue="handleStepAdvantagesContinue" @close="close"/>\n\t\t\t\t\t<StepAfter v-if="step === 2" @continue="handleStepAfterContinue" @close="close"/>\n\t\t\t\t\t<StepFeatures v-if="step === 3" :features="featuresToDisable" @continue="handleStepFeaturesContinue" @close="close"/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<Loader v-else/>\n\t`};let Et=t=>t,Lt;var _t=babelHelpers.classPrivateFieldLooseKey("params");var ht=babelHelpers.classPrivateFieldLooseKey("application");var At=babelHelpers.classPrivateFieldLooseKey("wizardPopup");var Ot=babelHelpers.classPrivateFieldLooseKey("layout");var Tt=babelHelpers.classPrivateFieldLooseKey("showPopup");var St=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var Bt=babelHelpers.classPrivateFieldLooseKey("mountApplication");var Ct=babelHelpers.classPrivateFieldLooseKey("unmountApplication");var Rt=babelHelpers.classPrivateFieldLooseKey("subscribe");var wt=babelHelpers.classPrivateFieldLooseKey("unsubscribe");var Pt=babelHelpers.classPrivateFieldLooseKey("close");var Nt=babelHelpers.classPrivateFieldLooseKey("handleSuccess");class gt{constructor(t){Object.defineProperty(this,wt,{value:Ht});Object.defineProperty(this,Rt,{value:kt});Object.defineProperty(this,Ct,{value:Ft});Object.defineProperty(this,Bt,{value:yt});Object.defineProperty(this,St,{value:mt});Object.defineProperty(this,Tt,{value:ft});Object.defineProperty(this,_t,{writable:true,value:void 0});Object.defineProperty(this,ht,{writable:true,value:null});Object.defineProperty(this,At,{writable:true,value:null});Object.defineProperty(this,Ot,{writable:true,value:{}});Object.defineProperty(this,Pt,{writable:true,value:()=>{babelHelpers.classPrivateFieldLooseBase(this,At)[At].close()}});Object.defineProperty(this,Nt,{writable:true,value:t=>{if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t].redirectAfterSuccess){const e=t.data.collab;top.document.location.href=e.url}}});babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]=t}async show(){return new Promise(((t,e)=>{babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt](t).then((()=>{t()})).catch((t=>{e(t)}))}))}}function ft(){const t=()=>babelHelpers.classPrivateFieldLooseBase(this,At)[At].adjustPosition();return new Promise((e=>{babelHelpers.classPrivateFieldLooseBase(this,At)[At]=new o.Popup({cacheable:false,width:665,height:439,borderRadius:"var(--ui-border-radius-3xl)",angle:false,content:babelHelpers.classPrivateFieldLooseBase(this,St)[St](),closeByEsc:false,autoHide:false,closeIcon:false,padding:0,contentPadding:0,contentBorderRadius:"18px",animation:"fading-slide",overlay:true,className:"socialnetwork-collab-converter-wizard-popup",events:{onAfterPopupShow:async r=>{l.Event.bind(window,"scroll",t);babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot].popupContainer=r.getPopupContainer();await babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt](babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot].wizardContainer);babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]();e()},onPopupAfterClose:e=>{l.Event.unbind(window,"scroll",t);babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]();babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]();e.destroy()}}});babelHelpers.classPrivateFieldLooseBase(this,At)[At].show()}))}function mt(){babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot].wizardContainer=l.Tag.render(Lt||(Lt=Et`
			<div class="socialnetwork-collab-converter-wizard-popup-content"></div>
		`));return babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot].wizardContainer}async function yt(t){const e=s.BitrixVue.createApp(bt,babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]);e.mixin(a.locMixin);e.mount(t);babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]=e}function Ft(){babelHelpers.classPrivateFieldLooseBase(this,ht)[ht].unmount()}function kt(){l.Event.EventEmitter.subscribe("socialnetwork:collab:converter:close",babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]);l.Event.EventEmitter.subscribe("socialnetwork:collab:converter:success",babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt])}function Ht(){l.Event.EventEmitter.unsubscribe("socialnetwork:collab:converter:close",babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]);l.Event.EventEmitter.unsubscribe("socialnetwork:collab:converter:success",babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt])}var It=babelHelpers.classPrivateFieldLooseKey("params");class zt{constructor(t){Object.defineProperty(this,It,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,It)[It]=t}convertToCollab(t){ot.validateGroup(t).then((e=>{if(!e.isValid){new U({groupId:t,errors:e.errors}).show();return}void new gt({groupId:t,redirectAfterSuccess:babelHelpers.classPrivateFieldLooseBase(this,It)[It].redirectAfterSuccess}).show()})).catch((e=>{new U({groupId:t,errors:e.errors}).show()}))}}t.Converter=zt})(this.BX.Socialnetwork.Collab=this.BX.Socialnetwork.Collab||{},BX.SidePanel,BX.UI,BX.Main,BX.Vue3,BX.Vue3.Mixins,BX,BX.UI,BX.UI,BX.UI.IconSet,BX.UI.IconSet,BX.Vue3.Components);
//# sourceMappingURL=converter.bundle.map.js