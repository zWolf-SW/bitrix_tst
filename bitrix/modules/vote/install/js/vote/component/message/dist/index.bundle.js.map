{"version":3,"file":"index.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { BaseMessage } from 'im.v2.component.message.base';\nimport { AuthorTitle, DefaultMessageContent, MessageFooter } from 'im.v2.component.message.elements';\n\nimport { VoteDisplay } from 'vote.component.vote';\nimport { VoteAnalytics } from 'vote.analytics';\n\nimport './style.css';\n\n// @vue/component\nexport const VoteChatDisplay = {\n\tname: 'VoteChatDisplay',\n\tcomponents: {\n\t\tBaseMessage,\n\t\tVoteDisplay,\n\t\tAuthorTitle,\n\t\tMessageFooter,\n\t\tDefaultMessageContent,\n\t},\n\tprops:\n\t{\n\t\t/** @type {ImModelMessage} */\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tsavedMessageId(): number\n\t\t{\n\t\t\treturn Number.parseInt(this.item.id, 10);\n\t\t},\n\n\t\tvoteItem(): Object | null\n\t\t{\n\t\t\treturn this.item.componentParams;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonVote(): void\n\t\t{\n\t\t\tVoteAnalytics.vote(this.dialogId, this.savedMessageId);\n\t\t},\n\t\tonRevokeVote(): void\n\t\t{\n\t\t\tVoteAnalytics.revokeVote(this.dialogId, this.savedMessageId);\n\t\t},\n\t\tonCopyLink(): void\n\t\t{\n\t\t\tVoteAnalytics.copyLink(this.dialogId, this.savedMessageId, 'poll_results');\n\t\t},\n\t\tonCompleteVote(): void\n\t\t{\n\t\t\tVoteAnalytics.completeVote(this.dialogId, this.savedMessageId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t\t:withBackground=\"true\"\n\t\t>\n\t\t\t<div class=\"bx-im-chat__vote-container\">\n\t\t\t\t<AuthorTitle :item=\"item\" class=\"bx-im-chat-title__vote\"/>\n\t\t\t\t<div class=\"bx-im-chat-title__vote-icon\"></div>\n\t\t\t\t<VoteDisplay\n\t\t\t\t\t:voteItem=\"voteItem\"\n\t\t\t\t\t:entityId=\"savedMessageId\"\n\t\t\t\t\t:entityType=\"'ImMessage'\"\n\t\t\t\t\t:contextId=\"dialogId\"\n\t\t\t\t\t@vote=\"onVote\"\n\t\t\t\t\t@revokeVote=\"onRevokeVote\"\n\t\t\t\t\t@copyLink=\"onCopyLink\"\n\t\t\t\t\t@completeVote=\"onCompleteVote\"\n\t\t\t\t/>\n\t\t\t\t<DefaultMessageContent\n\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t:withText=\"false\"\n\t\t\t\t\t:withAttach=\"false\"\n\t\t\t\t\tclass=\"bx-im-message-default-content__vote\"/>\n\t\t\t\t<MessageFooter :item=\"item\" :dialogId=\"dialogId\" />\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["VoteChatDisplay","name","components","BaseMessage","VoteDisplay","AuthorTitle","MessageFooter","DefaultMessageContent","props","item","type","Object","required","dialogId","String","computed","savedMessageId","Number","parseInt","id","voteItem","componentParams","methods","onVote","VoteAnalytics","vote","onRevokeVote","revokeVote","onCopyLink","copyLink","onCompleteVote","completeVote","template"],"mappings":";;;;;;CAQA;AACA,OAAaA,eAAe,GAAG;GAC9BC,IAAI,EAAE,iBAAiB;GACvBC,UAAU,EAAE;kBACXC,wCAAW;kBACXC,+BAAW;kBACXC,4CAAW;oBACXC,8CAAa;4BACbC;IACA;GACDC,KAAK,EACL;;KAECC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;;IAEX;GACDG,QAAQ,EACR;KACCC,cAAc,GACd;OACC,OAAOC,MAAM,CAACC,QAAQ,CAAC,IAAI,CAACT,IAAI,CAACU,EAAE,EAAE,EAAE,CAAC;MACxC;KAEDC,QAAQ,GACR;OACC,OAAO,IAAI,CAACX,IAAI,CAACY,eAAe;;IAEjC;GACDC,OAAO,EACP;KACCC,MAAM,GACN;OACCC,4BAAa,CAACC,IAAI,CAAC,IAAI,CAACZ,QAAQ,EAAE,IAAI,CAACG,cAAc,CAAC;MACtD;KACDU,YAAY,GACZ;OACCF,4BAAa,CAACG,UAAU,CAAC,IAAI,CAACd,QAAQ,EAAE,IAAI,CAACG,cAAc,CAAC;MAC5D;KACDY,UAAU,GACV;OACCJ,4BAAa,CAACK,QAAQ,CAAC,IAAI,CAAChB,QAAQ,EAAE,IAAI,CAACG,cAAc,EAAE,cAAc,CAAC;MAC1E;KACDc,cAAc,GACd;OACCN,4BAAa,CAACO,YAAY,CAAC,IAAI,CAAClB,QAAQ,EAAE,IAAI,CAACG,cAAc,CAAC;;IAE/D;GACDgB,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BZ,CAAC;;;;;;;;"}