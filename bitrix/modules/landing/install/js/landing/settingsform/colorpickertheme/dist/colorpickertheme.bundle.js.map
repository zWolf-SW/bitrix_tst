{"version":3,"file":"colorpickertheme.bundle.js","sources":["../src/colorpickertheme.js"],"sourcesContent":["import './css/style.css';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\n/**\n * ColorPicker for Theme site.\n */\nexport class ColorPickerTheme extends EventEmitter\n{\n\tstatic DEFAULT_COLOR_PICKER_COLOR = '#f25a8f';\n\tstatic MATCH_HEX = /#?([0-9A-F]{3}){1,2}$/i;\n\n\tconstructor(node: HTMLElement, allColors, currentColor)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.ColorPickerTheme');\n\n\t\tthis.element = node;\n\t\tthis.input = this.element.firstElementChild;\n\t\tthis.allColors = allColors;\n\t\tthis.currentColor = currentColor;\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tconst color = this.initPreviewColor();\n\t\tconst active = this.isActive();\n\n\t\tthis.element.style.backgroundColor = color;\n\t\tthis.element.dataset.value = color;\n\t\tthis.element.classList.add('landing-colorpicker-theme');\n\t\tif (active)\n\t\t{\n\t\t\tthis.input.setAttribute('value', color);\n\t\t\tthis.element.classList.add('active');\n\t\t}\n\n\t\tthis.colorPicker = new BX.ColorPicker({\n\t\t\tbindElement: this.element,\n\t\t\tpopupOptions: { angle: false, offsetTop: 5 },\n\t\t\tonColorSelected: this.onColorSelected.bind(this),\n\t\t\tcolors: this.getGridColors(),\n\t\t\tselectedColor: this.getSelectedColor()\n\t\t});\n\n\t\tBX.bind(this.element, 'click', this.open.bind(this));\n\t}\n\n\tinitPreviewColor(): string\n\t{\n\t\tlet color;\n\n\t\tif (this.currentColor)\n\t\t{\n\t\t\tif (this.isHex(this.currentColor))\n\t\t\t{\n\t\t\t\tcolor = (this.isBaseColor())\n\t\t\t\t\t? ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR\n\t\t\t\t\t: this.currentColor;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcolor = ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR;\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tisActive(): boolean\n\t{\n\t\tif (!this.isHex(this.currentColor))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn !this.isBaseColor();\n\t}\n\n\tisBaseColor(): boolean\n\t{\n\t\treturn this.allColors.includes(this.currentColor);\n\t}\n\n\tgetSelectedColor(): string\n\t{\n\t\tlet color;\n\t\tif (this.element.dataset.value)\n\t\t{\n\t\t\tcolor = this.element.dataset.value;\n\t\t}\n\t\tcolor = this.prepareColor(color);\n\t\tif (!this.isHex(color))\n\t\t{\n\t\t\tcolor = '';\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tonColorSelected(color): void\n\t{\n\t\tthis.element.classList.add('ui-colorpicker-selected');\n\t\tthis.element.dataset.value = color.substr(1);\n\t\tthis.element.style.backgroundColor = color;\n\n\t\tconst event = new BaseEvent({data: {color: color, node: this.element}});\n\t\tthis.emit('onSelectColor', event);\n\t\tthis.emit('onSelectCustomColor', event);\n\n\t\tthis.input.setAttribute('value', color);\n\t}\n\n\topen(): void\n\t{\n\t\tthis.colorPicker.open();\n\t}\n\n\tgetGridColors()\n\t{\n\t\treturn [\n\t\t\t['#f4f5fb', '#d2d6ef', '#b0b8e3', '#8f99d6', '#6d7bca', '#4b5cbe', '#3e4fac'],\n\t\t\t['#eaecfb', '#d5daf6', '#c0c7f2', '#abb5ed', '#96a2e9', '#8190e4', '#7888e2'],\n\t\t\t['#e8f4fc', '#d1e9fa', '#badef7', '#a3d3f5', '#8cc8f2', '#75bdf0', '#6cb8ef'],\n\t\t\t['#ebfaf8', '#caf1ed', '#aeeae3', '#9ae5dc', '#85e0d5', '#71dace', '#5dd5c7'],\n\t\t\t['#eafbf9', '#c8f4f0', '#aaeee8', '#90e9e2', '#5ddfd4', '#2ad5c7', '#26c0b3'],\n\t\t\t['#ebfaf0', '#d6f5e2', '#c2f0d3', '#adebc5', '#99e6b6', '#85e0a8', '#70db99'],\n\t\t\t['#f6f9eb', '#e8efcc', '#dbe7b1', '#d1e09a', '#c4d77e', '#b8cf63', '#a9c544'],\n\t\t\t['#fafee6', '#f3febe', '#edfd9b', '#e8fc82', '#d0e859', '#b5d31d', '#a7c804'],\n\t\t\t['#fefee6', '#fdfcce', '#fcfbb6', '#fbf993', '#f9f771', '#f7f445', '#f6f223'],\n\t\t\t['#fef8e6', '#fdf1ce', '#fdeab5', '#fce092', '#fbd570', '#f9c943', '#f8bc16'],\n\t\t\t['#fde9e8', '#fbd3d0', '#f9bdb9', '#f7a7a1', '#f5918a', '#f27269', '#ee463a'],\n\t\t\t['#f9ebeb', '#f4d7d7', '#eec4c4', '#e8b0b0', '#e29c9c', '#d77575', '#ca4949'],\n\t\t\t['#fceae8', '#f9d6d2', '#f7c1bb', '#f4aca4', '#f1978e', '#ee8377', '#e75140'],\n\t\t\t['#ffe6e6', '#ffd1d2', '#ffc2c3', '#ffa9aa', '#fe9496', '#fe8082', '#fe6769'],\n\t\t\t['#fee8e7', '#fdd2ce', '#fcbbb6', '#fba59d', '#fa8e85', '#f9786c', '#f75445'],\n\t\t\t['#ffe5e5', '#fcc', '#ffb3b3', '#f99', '#ff8080', '#f66', '#ff0a0a'],\n\t\t\t['#fee7ea', '#fdced6', '#fcb6c1', '#fb9dad', '#fa8598', '#f96c84', '#f73b5a'],\n\t\t\t['#fde7ef', '#fbd0df', '#f9b8cf', '#f7a1bf', '#f580a9', '#f25a8f', '#ec135f'],\n\t\t\t['#faeaef', '#f5d6de', '#f0c1ce', '#ebadbd', '#e698ad', '#e1849d', '#d75b7c'],\n\t\t\t['#f2f2f2', '#dedede', '#ccc', '#b3b3b3', '#999', '#666', '#404040']\n\t\t].map(function(item, index, arr) {\n\t\t\treturn arr.map(function(row) {\n\t\t\t\treturn row[index];\n\t\t\t});\n\t\t});\n\t}\n\n\tprepareColor(color): string\n\t{\n\t\tif (color[0] !== '#')\n\t\t{\n\t\t\tcolor = '#' + color;\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tisHex(color): boolean\n\t{\n\t\tlet isCorrect = false;\n\t\tif (color.length === 4 || color.length === 7)\n\t\t{\n\t\t\tif (color.match(ColorPickerTheme.MATCH_HEX))\n\t\t\t{\n\t\t\t\tisCorrect = true;\n\t\t\t}\n\t\t}\n\n\t\treturn isCorrect;\n\t}\n}"],"names":["ColorPickerTheme","node","allColors","currentColor","setEventNamespace","element","input","firstElementChild","init","color","initPreviewColor","active","isActive","style","backgroundColor","dataset","value","classList","add","setAttribute","colorPicker","BX","ColorPicker","bindElement","popupOptions","angle","offsetTop","onColorSelected","bind","colors","getGridColors","selectedColor","getSelectedColor","open","isHex","isBaseColor","DEFAULT_COLOR_PICKER_COLOR","includes","prepareColor","substr","event","BaseEvent","data","emit","map","item","index","arr","row","isCorrect","length","match","MATCH_HEX","EventEmitter"],"mappings":"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"}