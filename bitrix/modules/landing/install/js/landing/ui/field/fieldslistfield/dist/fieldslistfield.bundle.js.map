{"version":3,"file":"fieldslistfield.bundle.js","sources":["../src/internal/requisite-settings-field.js","../src/fieldslistfield.js"],"sourcesContent":["import {Dom, Tag, Loc} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport './css/style.css';\n\nexport class RequisiteSettingsField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.FieldsListField.RequisiteSettingsField');\n\t\tthis.subscribeFromOptions(options.events);\n\n\t\tDom.replace(this.input, this.getSettingsLayout());\n\t}\n\n\tgetOptions(): {[key: string]: any}\n\t{\n\t\treturn this.options;\n\t}\n\n\tgetSettingsLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('settingsLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-requisite-settings\">\n\t\t\t\t\t${[...this.getCheckboxTree().keys()].map((checkbox) => checkbox.layout)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCheckboxTree(): Map<BX.Landing.UI.Field.Checkbox, BX.Landing.UI.Field.Checkbox>\n\t{\n\t\treturn this.cache.remember('checkboxTree', () => {\n\t\t\tconst requisites = this.getOptions().value;\n\n\t\t\treturn requisites.reduce((map: Map, requisite) => {\n\t\t\t\tconst fieldsCheckbox = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: `${requisite.id}_fields`,\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: requisite.fields.map((field) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: field.label,\n\t\t\t\t\t\t\tvalue: field.name,\n\t\t\t\t\t\t\tchecked: field.disabled !== false,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tconst onFieldSettingsLinkClick = (event: MouseEvent) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tif (!categoryCheckbox.layout.contains(fieldsCheckbox.layout))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(fieldsCheckbox.layout, categoryCheckbox.layout);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(fieldsCheckbox.layout);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst fieldSettingsLink = Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-link ui-link-dashed\"\n\t\t\t\t\t\tonclick=\"${onFieldSettingsLinkClick}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELDS_ITEM_REQUISITE_SETTINGS_FIELDS_LABEL')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\t\tconst categoryCheckbox = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: requisite.id,\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tname: requisite.label,\n\t\t\t\t\t\tvalue: requisite.id,\n\t\t\t\t\t\tchecked: requisite.disabled !== false,\n\t\t\t\t\t}],\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.emit('onChange');\n\n\t\t\t\t\t\tconst labelLayout = categoryCheckbox.layout\n\t\t\t\t\t\t\t.querySelector('.landing-ui-field-checkbox-item-label');\n\n\t\t\t\t\t\tif (categoryCheckbox.getValue().length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.append(fieldSettingsLink, labelLayout);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.remove(fieldSettingsLink);\n\t\t\t\t\t\t\tDom.remove(fieldsCheckbox.layout);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tif (requisite.disabled !== false)\n\t\t\t\t{\n\t\t\t\t\tconst labelLayout = categoryCheckbox.layout\n\t\t\t\t\t\t.querySelector('.landing-ui-field-checkbox-item-label');\n\t\t\t\t\tDom.append(fieldSettingsLink, labelLayout);\n\t\t\t\t}\n\n\t\t\t\tmap.set(\n\t\t\t\t\tcategoryCheckbox,\n\t\t\t\t\tfieldsCheckbox,\n\t\t\t\t);\n\n\t\t\t\treturn map;\n\t\t\t}, new Map());\n\t\t});\n\t}\n\n\tgetValue(): Array<{disabled: boolean, fields: Array<{disabled: boolean}>}>\n\t{\n\t\tconst entries = [...this.getCheckboxTree().entries()];\n\n\t\treturn entries.reduce((acc, [categoryCheckbox, fieldsCheckbox], index) => {\n\t\t\tconst fieldsValue = fieldsCheckbox.getValue();\n\t\t\tacc.push({\n\t\t\t\tid: categoryCheckbox.selector,\n\t\t\t\tdisabled: categoryCheckbox.getValue().length === 0,\n\t\t\t\tfields: this.getOptions().value[index].fields.map((field) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: field.name,\n\t\t\t\t\t\tdisabled: !fieldsValue.includes(field.name),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t}, []);\n\t}\n}","import 'ui.design-tokens';\n\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Loc} from 'landing.loc';\nimport {Dom, Runtime, Tag, Text, Type} from 'main.core';\nimport {Draggable} from 'ui.draganddrop.draggable';\nimport {FieldsPanel} from 'landing.ui.panel.fieldspanel';\nimport {ListItem, type ListItemOptions} from 'landing.ui.component.listitem';\nimport {ActionPanel} from 'landing.ui.component.actionpanel';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {BaseEvent} from 'main.core.events';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {FileLimit} from 'crm.form.file-limit';\nimport {FormClient} from 'crm.form.client';\nimport {ListSettingsField} from 'landing.ui.field.listsettingsfield';\nimport {SeparatorPanel} from 'landing.ui.panel.separatorpanel';\nimport {PageObject} from 'landing.pageobject';\nimport {Loader} from 'main.loader';\nimport {ProductField} from 'landing.ui.field.productfield';\nimport 'calendar.resourcebookinguserfield';\nimport 'socnetlogdest';\nimport 'ui.hint';\nimport {IconButton} from 'landing.ui.component.iconbutton';\nimport {RequisiteSettingsField} from './internal/requisite-settings-field';\n\nimport './css/style.css';\n\nexport class FieldsListField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.FieldsListField');\n\t\tthis.setLayoutClass('landing-ui-field-fields-list');\n\n\t\tthis.onSelectFieldButtonClick = this.onSelectFieldButtonClick.bind(this);\n\t\tthis.onSelectProductsButtonClick = this.onSelectProductsButtonClick.bind(this);\n\t\tthis.onSelectSeparatorButtonClick = this.onSelectSeparatorButtonClick.bind(this);\n\t\tthis.onItemRemove = this.onItemRemove.bind(this);\n\t\tthis.onItemEdit = this.onItemEdit.bind(this);\n\t\tthis.onDragEnd = this.onDragEnd.bind(this);\n\t\tthis.onFormChange = this.onFormChange.bind(this);\n\n\t\tthis.items = [];\n\n\t\tthis.options.items.forEach((itemOptions) => {\n\t\t\tthis.addItem(itemOptions);\n\t\t});\n\n\t\tthis.actionPanel = new ActionPanel({\n\t\t\trenderTo: this.layout,\n\t\t\tleft: [\n\t\t\t\t{\n\t\t\t\t\tid: 'selectField',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_ADD_FIELD_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectFieldButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t\tright: [\n\t\t\t\t{\n\t\t\t\t\tid: 'addProducts',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_PRODUCTS_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectProductsButtonClick,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'selectSeparator',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_SEPARATOR_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectSeparatorButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.draggable = new Draggable({\n\t\t\tcontext: window.parent,\n\t\t\tcontainer: this.getListContainer(),\n\t\t\tdraggable: '.landing-ui-component-list-item',\n\t\t\tdragElement: '.landing-ui-button-icon-drag',\n\t\t\ttype: Draggable.MOVE,\n\t\t\toffset: {\n\t\t\t\ty: -62,\n\t\t\t},\n\t\t});\n\n\t\tthis.draggable.subscribe('end', this.onDragEnd);\n\t}\n\n\tcreateInput(): HTMLDivElement\n\t{\n\t\treturn this.getListContainer();\n\t}\n\n\tgetCrmFieldById(id: string)\n\t{\n\t\treturn Object.values(this.options.crmFields)\n\t\t\t.reduce((acc, category) => {\n\t\t\t\treturn [...acc, ...category.FIELDS];\n\t\t\t}, [])\n\t\t\t.find((currentField) => {\n\t\t\t\treturn currentField.name === id;\n\t\t\t});\n\t}\n\n\tgetCrmFieldCategoryById(id: string)\n\t{\n\t\treturn this.options.crmFields[id];\n\t}\n\n\taddItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.push(item);\n\t\t\t\tDom.append(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tprependItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.unshift(item);\n\t\t\t\tDom.prepend(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tinsertItemAfterIndex(itemOptions, index)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.splice((index + 1), 0, item);\n\t\t\t\tDom.insertAfter(item.getLayout(), this.getListContainer().childNodes[index]);\n\t\t\t});\n\t}\n\n\tstatic isSeparator(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\treturn (\n\t\t\t\tfieldId.startsWith('hr')\n\t\t\t\t|| fieldId.startsWith('section')\n\t\t\t\t|| fieldId.startsWith('page')\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getSeparatorTitle(fieldId: ?string): string\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('hr'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_SOLID_LINE');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('section'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_HEADER');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('page'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_PAGE');\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_SEPARATOR_TITLE');\n\t}\n\n\tisFieldAvailable(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn Type.isPlainObject(\n\t\t\t\tthis.getCrmFieldById(fieldId),\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetFieldItemTitle(fieldId: ?string): string\n\t{\n\t\tif (this.isFieldAvailable(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE');\n\t\t\t}\n\n\t\t\tconst crmField = this.getCrmFieldById(fieldId);\n\t\t\tconst crmFieldCategory = this.getCrmFieldCategoryById(crmField.entity_name);\n\n\t\t\treturn `${crmField.caption} Â· ${crmFieldCategory.CAPTION}`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tcreateCustomFieldController(options: ListItemOptions): { getSettings: Function, showSettingsPopup: Function }\n\t{\n\t\tif (options.type === 'resourcebooking')\n\t\t{\n\t\t\tconst root = PageObject.getRootWindow();\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\treturn root.BX.Calendar.ResourcebookingUserfield.initCrmFormFieldController({\n\t\t\t\tfield: {\n\t\t\t\t\t...options.sourceOptions,\n\t\t\t\t\tdict: crmField,\n\t\t\t\t\tnode: Tag.render`<div><div class=\"crm-webform-resourcebooking-wrap\"></div></div>`,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.type === 'booking' && BX.Booking)\n\t\t{\n\t\t\tconst BookingFieldController = BX.Booking.CrmForms.Settings;\n\n\t\t\treturn new BookingFieldController(options, this.data.formOptions);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateItem(\n\t\toptions: {\n\t\t\tid: string,\n\t\t\tlabel: string,\n\t\t\tdescription: string,\n\t\t\tcontent?: any,\n\t\t\ttype?: any,\n\t\t\tseparatorTitle?: any,\n\t\t},\n\t): Promise<ListItem>\n\t{\n\t\tconst listItemOptions: ListItemOptions = {\n\t\t\tid: options.id,\n\t\t\ttype: options.type ? options.type : '',\n\t\t\tcontent: options.content,\n\t\t\tsourceOptions: {...options},\n\t\t\tdraggable: true,\n\t\t\tremovable: true,\n\t\t\tonRemove: this.onItemRemove,\n\t\t\tonEdit: this.onItemEdit,\n\t\t\tonFormChange: this.onFormChange,\n\t\t\tform: this.createFieldSettingsForm(options),\n\t\t};\n\n\t\tif (!FieldsListField.isSeparator(options.id))\n\t\t{\n\t\t\tif (this.isFieldAvailable(options.id))\n\t\t\t{\n\t\t\t\tlistItemOptions.title = this.getFieldItemTitle(options.id);\n\n\t\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\t\tlistItemOptions.description = options.label || (crmField ? crmField.caption : '');\n\t\t\t\tlistItemOptions.editable = true;\n\t\t\t\tlistItemOptions.isSeparator = false;\n\t\t\t\tlistItemOptions.fieldController = this.createCustomFieldController(listItemOptions);\n\n\n\t\t\t\tif (options.editing.supportAutocomplete)\n\t\t\t\t{\n\t\t\t\t\tconst autocompleteButton = new IconButton({\n\t\t\t\t\t\tid: 'autocomplete',\n\t\t\t\t\t\ttype: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn IconButton.Types.user1Active;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn IconButton.Types.user1;\n\t\t\t\t\t\t})(),\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_ENABLED');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_DISABLED');\n\t\t\t\t\t\t})(),\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.form.subscribe('onChange', (event: BaseEvent) => {\n\t\t\t\t\t\tif (event.getTarget().serialize().autocomplete)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1Active);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.actions = [\n\t\t\t\t\t\tautocompleteButton,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\t\tif (listItemOptions.fieldController)\n\t\t\t\t{\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tif (Type.isFunction(listItemOptions.fieldController.subscribe))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlistItemOptions.fieldController.subscribe('afterInit', (event) => {\n\t\t\t\t\t\t\t\toptions.booking.settings_data = event.getData().settings.data;\n\t\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(listItem);\n\t\t\t}\n\n\t\t\tlistItemOptions.editable = false;\n\t\t\tlistItemOptions.isSeparator = false;\n\t\t\tlistItemOptions.title = '';\n\t\t\tlistItemOptions.description = Loc.getMessage('LANDING_FIELDS_ITEM_FIELD_UNAVAILABLE');\n\t\t\tlistItemOptions.error = true;\n\n\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\treturn Promise.resolve(listItem);\n\t\t}\n\n\t\tlistItemOptions.isSeparator = true;\n\t\tlistItemOptions.editable = !String(options.id).startsWith('hr_');\n\t\tlistItemOptions.title = FieldsListField.getSeparatorTitle(options.id);\n\n\t\tif (Type.isString(options.label))\n\t\t{\n\t\t\tlistItemOptions.description = options.label;\n\t\t}\n\t\telse if (String(options.id).startsWith('hr_'))\n\t\t{\n\t\t\tlistItemOptions.description = FieldsListField.getSeparatorTitle(options.id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\tif (Type.isPlainObject(crmField) && Type.isString(crmField.caption))\n\t\t\t{\n\t\t\t\tlistItemOptions.description = crmField.caption;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlistItemOptions.description = '';\n\t\t\t}\n\t\t}\n\n\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\treturn Promise.resolve(listItem);\n\t}\n\n\tcreateCustomPriceDropdown(field)\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'customPrice',\n\t\t\tselector: 'customPrice',\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE_NOT_SELECTED'), value: null},\n\t\t\t\t...(field.items.map((item) => {\n\t\t\t\t\treturn {name: item.label, value: item.value};\n\t\t\t\t})),\n\t\t\t],\n\t\t\tcontent: field.items.reduce((acc, item) => {\n\t\t\t\tif (item.changeablePrice && acc === null)\n\t\t\t\t{\n\t\t\t\t\treturn item.value;\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, null),\n\t\t});\n\t}\n\n\tcreateProductDefaultValueDropdown(field)\n\t{\n\t\tconst defaultValueField = new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'productDefaultValue',\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\n\t\tif (field.items.length > 0)\n\t\t{\n\t\t\tdefaultValueField.enable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdefaultValueField.disable();\n\t\t}\n\n\t\treturn defaultValueField;\n\t}\n\n\tcreateFileLimitationFields(field): Array<BaseField>\n\t{\n\t\tlet limitationFields: Array<BaseField> = [];\n\n\t\tif (Type.isInteger(this.options.dictionary.defaultMaxFileFieldSizeMbValue))\n\t\t{\n\t\t\tconst defaultSizeValue = this.options.dictionary.defaultMaxFileFieldSizeMbValue;\n\t\t\tlet lastSizeValue = field.maxSizeMb || defaultSizeValue;\n\t\t\tif (lastSizeValue < 0)\n\t\t\t{\n\t\t\t\tlastSizeValue = '';\n\t\t\t}\n\n\t\t\tconst sizeField = new TextField({\n\t\t\t\tid: 'maxSizeMb',\n\t\t\t\tselector: 'maxSizeMb',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MAX_FILE_SIZE'),\n\t\t\t\tcontent: String(lastSizeValue),\n\t\t\t\ttextOnly: true,\n\t\t\t\thelp: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MAX_FILE_SIZE_HINT'),\n\t\t\t\tonValueChange: (e) => {\n\t\t\t\t\tif (e.getValue() === '')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.getValue() === lastSizeValue)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tconst value = Number(e.getValue());\n\t\t\t\t\tif (Number.isNaN(value))\n\t\t\t\t\t{\n\t\t\t\t\t\te.setValue(lastSizeValue);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (String(value) !== e.getValue())\n\t\t\t\t\t{\n\t\t\t\t\t\te.setValue(String(value));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfield.maxSizeMb = value;\n\t\t\t\t\tlastSizeValue = e.getValue();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet titleText = '';\n\t\t\tlet configureNodeText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE_FULL');\n\t\t\tif (Type.isInteger(this.options.dictionary.dailyFileLimitSizeMbValue))\n\t\t\t{\n\t\t\t\ttitleText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_TITLE')\n\t\t\t\t\t.replace('%size%', this.options.dictionary.dailyFileLimitSizeMbValue)\n\t\t\t\t;\n\t\t\t\tconfigureNodeText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE');\n\t\t\t}\n\n\t\t\tconst dailyLimitTitleNode = Tag.render\n\t\t\t\t`<span style=\"margin-right: 5px\">${titleText}</span>\n\t\t\t`;\n\t\t\tconst dailyLimitConfigureNode = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-fields-list-item-button\">${configureNodeText}</div>\n\t\t\t`;\n\n\t\t\tconst dailyLimitNode = Tag.render`\n\t\t\t\t\t<div class=\"ui-color-light ui-text-4\" style=\"margin-top: 4px\"> \n\t\t\t\t\t\t\t${dailyLimitTitleNode}\n\t\t\t\t\t\t\t${dailyLimitConfigureNode}\n\t\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdailyLimitConfigureNode.addEventListener('click', () => {\n\t\t\t\tFileLimit.instance()\n\t\t\t\t\t.subscribe('onSuccessLimitChanged', (event) => {\n\t\t\t\t\t\tif (Type.isUndefined(event.data.limit))\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tthis.options.dictionary.dailyFileLimitSizeMbValue = event.data.limit;\n\t\t\t\t\t\tif (Type.isInteger(event.data.limit))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdailyLimitTitleNode.innerText =\n\t\t\t\t\t\t\t\tLoc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_TITLE')\n\t\t\t\t\t\t\t\t\t.replace('%size%', event.data.limit)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\tdailyLimitConfigureNode.innerText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isNull(event.data.limit))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdailyLimitTitleNode.innerText = '';\n\t\t\t\t\t\t\tdailyLimitConfigureNode.innerText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE_FULL');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.open()\n\t\t\t\t;\n\t\t\t});\n\t\t\tsizeField.getLayout().appendChild(dailyLimitNode);\n\t\t\tlimitationFields.push(sizeField);\n\t\t}\n\n\t\tif (Type.isArrayFilled(this.options.dictionary.contentTypes))\n\t\t{\n\t\t\tconst adjustContentTypesField = (value) => {\n\t\t\t\tif (value.includes('any'))\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tif (Dom.attr(input, 'value') === 'any')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.addClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst selectedContentTypes = Type.isArrayFilled(field.contentTypes) ? field.contentTypes : ['any'];\n\t\t\tlet lastValue = selectedContentTypes;\n\t\t\tconst contentTypesField = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'contentTypes',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_FILE_TYPE'),\n\t\t\t\tvalue: selectedContentTypes,\n\t\t\t\titems: [\n\t\t\t\t\t(() => {\n\t\t\t\t\t\tif (Loc.hasMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'),\n\t\t\t\t\t\t\t\tvalue: 'any',\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})(),\n\t\t\t\t\t...this.options.dictionary.contentTypes.map((item) => {\n\t\t\t\t\t\tconst hint = item.hint\n\t\t\t\t\t\t\t? `<span class=\"ui-hint\" data-hint=\"${Text.encode(item.hint)}\"></span>`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtml: `<span style=\"display: flex; align-items: center;\">${Text.encode(item.name)} ${hint}</span>`,\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tvalue: item.id\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\tonValueChange: () => {\n\t\t\t\t\tconst value = contentTypesField.getValue();\n\n\t\t\t\t\tif (value.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (lastValue.includes('any'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(value.filter((item) => item !== 'any'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(['any']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlastValue = contentTypesField.getValue();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tBX.UI.Hint.init(contentTypesField.getLayout());\n\t\t\tlimitationFields.push(contentTypesField);\n\t\t}\n\n\t\treturn limitationFields;\n\t}\n\n\tcreateDefaultValueField(field): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tcreateFieldSettingsForm(field)\n\t{\n\t\tconst fields = [];\n\t\tconst form = new FormSettingsForm({\n\t\t\tserializeModifier(value) {\n\t\t\t\tconst modifiedValue = {...value};\n\t\t\t\tif (Reflect.has(value, 'label'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.label = Text.decode(value.label);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'required'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.required = value.required.includes('required');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'multiple'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.multiple = value.multiple.includes('multiple');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'bigPic'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.bigPic = value.bigPic.includes('bigPic');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(value.items))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = modifiedValue.items.map((item) => {\n\t\t\t\t\t\titem.selected = (value.value === item.value);\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'products'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = Runtime.clone(value.products);\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(modifiedValue.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\t\titem.selected = (String(value.value) === String(item.value));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.catalog = Runtime.clone(value.products);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'valueType'))\n\t\t\t\t{\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing.editable))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing.editable = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.editable.valueType = value.valueType;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.useCustomPrice))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\titem.changeablePrice = (\n\t\t\t\t\t\t\tvalue.useCustomPrice.includes('useCustomPrice')\n\t\t\t\t\t\t\t&& String(item.value) === String(value.customPrice)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tdelete modifiedValue.customPrice;\n\t\t\t\t\tdelete modifiedValue.useCustomPrice;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.autocomplete))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.autocomplete = value.autocomplete.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(value.contentTypes))\n\t\t\t\t{\n\t\t\t\t\tif (value.contentTypes.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.contentTypes = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.requisite))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.requisite = {\n\t\t\t\t\t\tpresets: value.requisite,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn modifiedValue;\n\t\t\t},\n\t\t});\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew ProductField({\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE2'),\n\t\t\t\t\tselector: 'products',\n\t\t\t\t\titems: field.editing.catalog || [],\n\t\t\t\t\tiblockId: this.options.dictionary.catalog.id,\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tconst oldCustomPrice = form.fields.get('customPrice');\n\t\t\t\t\t\tconst newCustomPrice = this.createCustomPriceDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\t\t\t\treturn item.changeablePrice;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPriceField = form.fields.get('useCustomPrice');\n\n\t\t\t\t\t\tif (useCustomPrice || useCustomPriceField.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', 'none');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewCustomPrice.setValue(oldCustomPrice.getValue());\n\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldCustomPrice,\n\t\t\t\t\t\t\tnewCustomPrice,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst oldDefaultValue = form.fields.get('productDefaultValue');\n\t\t\t\t\t\tconst newDefaultValue = this.createProductDefaultValueDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldDefaultValue,\n\t\t\t\t\t\t\tnewDefaultValue,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasLabel)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'label',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LABEL_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.label,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'rq')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew RequisiteSettingsField({\n\t\t\t\t\tselector: 'requisite',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_REQUISITE_SETTINGS_LABEL'),\n\t\t\t\t\tvalue: field.requisite.presets,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeRequired)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'required',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_REQUIRED_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'required',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.required ? ['required'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeMultiple)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'multiple',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MULTIPLE_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'multiple',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.multiple ? ['multiple'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasStringDefaultValue)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'value',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DEFAULT_VALUE_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.value,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'bigPic',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_SHOW_BIG_PICTURE'),\n\t\t\t\t\t\t\tvalue: 'bigPic',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.bigPic ? ['bigPic'] : [],\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\treturn item.changeablePrice;\n\t\t\t});\n\n\t\t\tconst customPriceField = this.createCustomPriceDropdown(field);\n\t\t\tif (useCustomPrice)\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t}\n\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tid: 'useCustomPrice',\n\t\t\t\t\tselector: 'useCustomPrice',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE'),\n\t\t\t\t\t\t\tvalue: 'useCustomPrice',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: useCustomPrice ? ['useCustomPrice'] : [],\n\t\t\t\t\tonChange: (checkbox) => {\n\t\t\t\t\t\tif (checkbox instanceof BaseField)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst customPriceField = form.fields.get('customPrice');\n\t\t\t\t\t\t\tif (checkbox.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tfields.push(customPriceField);\n\n\t\t\tfields.push(this.createProductDefaultValueDropdown(field));\n\t\t}\n\n\t\tif (['list', 'radio', 'checkbox'].includes(field.type) && field.editing.items.length > 0)\n\t\t{\n\t\t\tconst defaultValueField = this.createDefaultValueField(field);\n\t\t\tconst listSettingsField = new ListSettingsField({\n\t\t\t\tselector: 'items',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_SETTINGS_TITLE'),\n\t\t\t\titems: (() => {\n\t\t\t\t\treturn field.editing.items.map((item) => {\n\t\t\t\t\t\tconst selectedItem = field.items.find((currentItem) => {\n\t\t\t\t\t\t\treturn String(currentItem.value) === String(item.id);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst checked = !!selectedItem;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: checked ? selectedItem.label : item.value,\n\t\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\t\tchecked,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t})(),\n\t\t\t});\n\n\t\t\tlistSettingsField.subscribe('onChange', () => {\n\t\t\t\tconst currentDefaultValueField = form.fields.find((item) => {\n\t\t\t\t\treturn item.selector === 'value';\n\t\t\t\t});\n\t\t\t\tform.replaceField(\n\t\t\t\t\tcurrentDefaultValueField,\n\t\t\t\t\tthis.createDefaultValueField({\n\t\t\t\t\t\t...field,\n\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\tvalue: currentDefaultValueField.getValue(),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tfields.push(listSettingsField);\n\t\t\tfields.push(defaultValueField);\n\t\t}\n\n\t\tif (\n\t\t\tType.isPlainObject(field.editing)\n\t\t\t&& Type.isArrayFilled(field.editing.valueTypes)\n\t\t)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Dropdown({\n\t\t\t\t\tselector: 'valueType',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_VALUE_TYPE'),\n\t\t\t\t\tcontent: field.editing.editable.valueType,\n\t\t\t\t\titems: field.editing.valueTypes.map((item) => {\n\t\t\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportAutocomplete) === true)\n\t\t{\n\t\t\tfields.push(new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'autocomplete',\n\t\t\t\tcompact: true,\n\t\t\t\tmultiple: false,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'),\n\t\t\t\t\t\thtml: Text.encode(Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'))\n\t\t\t\t\t\t\t+ `<span \n\t\t\t\t\t\t\t\t\tclass=\"landing-ui-form-help\" \n\t\t\t\t\t\t\t\t\tstyle=\"margin: 0 0 0 5px;\"\n\t\t\t\t\t\t\t\t\tonclick=\"top.BX.Helper.show('redirect=detail&code=14611764'); return false;\"\n\t\t\t\t\t\t\t\t><a href=\"javascript: void();\"></a></span>`\n\t\t\t\t\t\t,\n\t\t\t\t\t\tvalue: 'autocomplete',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tvalue: field.autocomplete ? ['autocomplete'] : false,\n\t\t\t}));\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.hasHint) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'hint',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_FIELD_HINT_TITLE'),\n\t\t\t\t\tcontent: field.hint,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportHintOnFocus) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'hintOnFocus',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_HINT_ON_FOCUS'),\n\t\t\t\t\t\t\tvalue: 'hintOnFocus',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.hintOnFocus ? ['hintOnFocus'] : false,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'file')\n\t\t{\n\t\t\tconst limitationFields = this.createFileLimitationFields(field);\n\n\t\t\tlimitationFields.forEach((item: BaseField) => {\n\t\t\t\tfields.push(item);\n\t\t\t});\n\t\t}\n\n\t\tfields.forEach((currentField) => {\n\t\t\tform.addField(currentField);\n\t\t});\n\n\t\treturn form;\n\t}\n\n\tgetListContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('listContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-fields-list-container\"></div>`;\n\t\t});\n\t}\n\n\tonSelectFieldButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tFieldsPanel\n\t\t\t.getInstance({\n\t\t\t\tisLeadEnabled: this.options.isLeadEnabled,\n\t\t\t})\n\t\t\t.show({\n\t\t\t\tdisabledFields: this.items.map((item) => item.options.id),\n\t\t\t\tallowedTypes: this.#getFieldsPanelAllowedTypes(),\n\t\t\t})\n\t\t\t.then((selectedFields) => {\n\t\t\t\tif (Type.isArrayFilled(selectedFields))\n\t\t\t\t{\n\t\t\t\t\tthis.options.crmFields = FieldsPanel.getInstance().getOriginalCrmFields();\n\t\t\t\t\tthis.onFieldsSelect(selectedFields);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t#getFieldsPanelAllowedTypes(): Array<string>\n\t{\n\t\treturn [\n\t\t\t'list',\n\t\t\t'string',\n\t\t\t'checkbox',\n\t\t\t'date',\n\t\t\t'text',\n\t\t\t'typed_string',\n\t\t\t'file',\n\t\t\t'datetime',\n\t\t\t'integer',\n\t\t\t'double',\n\t\t\t'enumeration',\n\t\t\t'url',\n\t\t\t'money',\n\t\t\t'boolean',\n\t\t\t'booking',\n\t\t\t'resourcebooking',\n\t\t\t'radio',\n\t\t\t'bool',\n\t\t\t'hr',\n\t\t\t'br',\n\t\t\t'phone',\n\t\t\t'email',\n\t\t\t'page',\n\t\t\t'section',\n\t\t];\n\t}\n\n\tonFieldsSelect(selectedFields: Array<string>)\n\t{\n\t\tconst preparingOptions = {\n\t\t\tfields: selectedFields.map((fieldId) => {\n\t\t\t\treturn {name: fieldId};\n\t\t\t}),\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tresult.data.fields.map((field) => {\n\t\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t});\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.items.map((item) => {\n\t\t\treturn item.getValue();\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonSelectProductsButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst preparingOptions = {\n\t\t\tfields: [\n\t\t\t\t{type: 'product'},\n\t\t\t],\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient\n\t\t\t.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\tconst promises = result.data.fields.map((field) => {\n\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t});\n\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonSelectSeparatorButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tSeparatorPanel.getInstance()\n\t\t\t.show()\n\t\t\t.then((separator) => {\n\t\t\t\tconst fields = [separator];\n\n\t\t\t\tif (\n\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tfields.push({...fields[0]});\n\t\t\t\t}\n\n\t\t\t\tvoid this.showLoader();\n\n\t\t\t\tFormClient.getInstance()\n\t\t\t\t\t.prepareOptions(this.options.formOptions, {fields})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\t\t\tlet separatorPromise = Promise.resolve();\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields[0].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 1);\n\t\t\t\t\t\t\tresult.data.fields[1].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 2);\n\n\t\t\t\t\t\t\tseparatorPromise = Promise.all([\n\t\t\t\t\t\t\t\tthis.prependItem(result.data.fields[0]),\n\t\t\t\t\t\t\t\tthis.insertItemAfterIndex(result.data.fields[1], 1),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields.forEach((field) => {\n\t\t\t\t\t\t\t\tconst [type] = field.id.split('_');\n\t\t\t\t\t\t\t\tconst count = this.items.filter((item) => {\n\t\t\t\t\t\t\t\t\treturn item.options.id.startsWith(type);\n\t\t\t\t\t\t\t\t}).length;\n\n\t\t\t\t\t\t\t\tif (type === 'page')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'section')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_SECTION_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'hr')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_LINE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tseparatorPromise = this.addItem(field);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseparatorPromise.then(() => {\n\t\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonItemRemove(event: BaseEvent)\n\t{\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== event.getTarget();\n\t\t});\n\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tonItemEdit(event: BaseEvent)\n\t{\n\t\tconst listItem = event.getTarget();\n\t\tconst {options} = event.getTarget();\n\t\tif (options.fieldController)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\toptions.fieldController.showSettingsPopup();\n\t\t\tif (options.sourceOptions.settingsData)\n\t\t\t{\n\t\t\t\toptions.form.unsubscribe('onChange', listItem.onFormChange);\n\t\t\t\toptions.form.subscribe('onChange', listItem.onFormChange);\n\t\t\t\toptions.fieldController.settingsPopup.subscribeOnce('onClose', () => {\n\t\t\t\t\toptions.sourceOptions.settingsData = options.fieldController.getSettings();\n\t\t\t\t\toptions.form.emit('onChange');\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\toptions.fieldController.settingsPopup.subscribeOnce('onClose', () => {\n\t\t\t\t\toptions.sourceOptions.booking.settings_data = options.fieldController.getSettings().data;\n\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tconst {settings_data} = options.sourceOptions.booking;\n\t\t\t\t\tObject.keys(settings_data).forEach((key) => {\n\t\t\t\t\t\tif (Type.isArray(settings_data[key].value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsettings_data[key].value = settings_data[key].value.join('|');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tonFormChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\n\t\tconst target = event.getTarget();\n\t\tconst value = target.getValue();\n\n\t\ttarget.setDescription(value.label);\n\t}\n\n\tonDragEnd()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.items = [...this.getListContainer().children].map((itemNode) => {\n\t\t\t\tconst itemNodeId = Dom.attr(itemNode, 'data-id');\n\t\t\t\treturn this.items.find((item) => {\n\t\t\t\t\treturn item.options.id === itemNodeId;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t});\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 50,\n\t\t\t\tmode: 'inline',\n\t\t\t\toffset: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tleft: '225px',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tconst container = this.getListContainer();\n\t\tDom.append(loader.layout, container);\n\t\treturn loader.show(container);\n\t}\n\n\thideLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tDom.remove(loader.layout);\n\t\treturn loader.hide();\n\t}\n}\n"],"names":["RequisiteSettingsField","options","setEventNamespace","subscribeFromOptions","events","Dom","replace","input","getSettingsLayout","cache","remember","Tag","render","getCheckboxTree","keys","map","checkbox","layout","requisites","getOptions","value","reduce","requisite","fieldsCheckbox","BX","Landing","UI","Field","Checkbox","selector","id","compact","items","fields","field","name","label","checked","disabled","onChange","emit","onFieldSettingsLinkClick","event","preventDefault","stopPropagation","categoryCheckbox","contains","append","remove","fieldSettingsLink","Loc","getMessage","labelLayout","querySelector","getValue","length","set","Map","entries","acc","index","fieldsValue","push","includes","BaseField","FieldsListField","setLayoutClass","onSelectFieldButtonClick","bind","onSelectProductsButtonClick","onSelectSeparatorButtonClick","onItemRemove","onItemEdit","onDragEnd","onFormChange","forEach","itemOptions","addItem","actionPanel","ActionPanel","renderTo","left","text","onClick","right","draggable","Draggable","context","window","parent","container","getListContainer","dragElement","type","MOVE","offset","y","subscribe","Object","values","crmFields","category","FIELDS","find","currentField","createItem","then","item","getLayout","unshift","prepend","splice","insertAfter","childNodes","fieldId","Type","isStringFilled","startsWith","isPlainObject","getCrmFieldById","isFieldAvailable","crmField","crmFieldCategory","getCrmFieldCategoryById","entity_name","caption","CAPTION","root","PageObject","getRootWindow","Calendar","ResourcebookingUserfield","initCrmFormFieldController","sourceOptions","dict","node","Booking","BookingFieldController","CrmForms","Settings","data","formOptions","listItemOptions","content","removable","onRemove","onEdit","form","createFieldSettingsForm","isSeparator","title","getFieldItemTitle","description","editable","fieldController","createCustomFieldController","editing","supportAutocomplete","autocompleteButton","IconButton","autocomplete","Types","user1Active","user1","style","opacity","cursor","getTarget","serialize","setType","actions","listItem","ListItem","Promise","resolve","isFunction","booking","settings_data","getData","settings","error","String","getSeparatorTitle","isString","Dropdown","changeablePrice","defaultValueField","enable","disable","limitationFields","isInteger","dictionary","defaultMaxFileFieldSizeMbValue","defaultSizeValue","lastSizeValue","maxSizeMb","sizeField","TextField","textOnly","help","onValueChange","e","Number","isNaN","setValue","titleText","configureNodeText","dailyFileLimitSizeMbValue","dailyLimitTitleNode","dailyLimitConfigureNode","dailyLimitNode","addEventListener","FileLimit","instance","isUndefined","limit","innerText","isNull","open","appendChild","isArrayFilled","contentTypes","selectedContentTypes","lastValue","contentTypesField","hasMessage","undefined","hint","Text","encode","html","filter","Hint","init","FormSettingsForm","serializeModifier","modifiedValue","Reflect","has","decode","required","multiple","bigPic","selected","Runtime","clone","products","catalog","valueType","isArray","useCustomPrice","customPrice","presets","ProductField","iblockId","oldCustomPrice","get","newCustomPrice","createCustomPriceDropdown","some","useCustomPriceField","replaceField","oldDefaultValue","newDefaultValue","createProductDefaultValueDropdown","hasLabel","canBeRequired","canBeMultiple","hasStringDefaultValue","customPriceField","createDefaultValueField","listSettingsField","ListSettingsField","selectedItem","currentItem","currentDefaultValueField","valueTypes","toBoolean","hasHint","supportHintOnFocus","hintOnFocus","createFileLimitationFields","addField","FieldsPanel","getInstance","isLeadEnabled","show","disabledFields","allowedTypes","selectedFields","getOriginalCrmFields","onFieldsSelect","preparingOptions","showLoader","FormClient","prepareOptions","result","hideLoader","all","skipPrepare","promises","SeparatorPanel","separator","separatorPromise","prependItem","insertItemAfterIndex","split","count","showSettingsPopup","settingsData","unsubscribe","settingsPopup","subscribeOnce","getSettings","setTimeout","key","join","target","setDescription","children","itemNode","itemNodeId","attr","Loader","size","mode","top","loader","getLoader","hide"],"mappings":"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"}