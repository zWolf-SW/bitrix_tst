{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","main_core","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX","TAG_REGEX_GS","LF","CRLF","TAB","isLinebreak","symbol","includes","isTab","isSpecialChar","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","value","Boolean","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","replace","setChildren","getChildren","fragment","createFragment","children","openingTag","getOpeningTag","closingTag","getClosingTag","createText","isStringFilled","parseText","text","regex","matchAll","flatMap","token","reduce","acc","push","lastItem","isNil","map","createNewLine","createTab","content","decodeText","findNextTagIndex","bbcode","startIndex","nextContent","slice","matchResult","match","RegExp","findNextTag","slash","isClosedTag","trimQuotes","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","decodeAttribute","trim","split","filter","item","key","parse","createRoot","firstTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","indexOf","splice","nextTag","isNull","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","toString","encode","tokens","Linkify","tokenize","nodes","t","toHref","runOnParseHandler","BBCode"],"sources":["parser.bundle.js"],"mappings":"AACAA,KAAKC,GAAKD,KAAKC,IAAM,CAAC,EACtBD,KAAKC,GAAGC,GAAKF,KAAKC,GAAGC,IAAM,CAAC,GAC3B,SAAUC,EAAQC,EAAuBC,EAAUC,EAAkBC,EAAWC,GAChF,aAEA,SAASC,EAAWC,EAAOC,GACzB,IAAKN,EAAUO,KAAKC,QAAQH,GAAQ,CAClC,MAAM,IAAII,UAAU,uBACtB,CACA,IAAKT,EAAUO,KAAKG,UAAUJ,GAAQ,CACpC,MAAM,IAAIG,UAAU,yBACtB,CACA,MAAME,EAAgBL,EAAQ,EAAID,EAAMO,OAASN,EAAQA,EACzD,OAAOD,EAAMM,EACf,CAEA,MAAME,UAAqBV,EAAgBW,aACzC,YAAAC,CAAaC,GACX,OAAO,IAAIb,EAAgBc,gBAAgB,CACzCC,KAAM,OAEV,CACA,YAAAC,CAAaH,GACX,OAAO,IACT,CACA,cAAAI,CAAeC,EAAQC,GACrB,OAAO,IACT,EAGF,MAAMC,EAAY,sBAClB,MAAMC,EAAe,0BACrB,MAAMC,EAAK,KACX,MAAMC,EAAO,OACb,MAAMC,EAAM,KACZ,MAAMC,EAAcC,GACX,CAACJ,EAAIC,GAAMI,SAASD,GAE7B,MAAME,EAAQF,GACLA,IAAWF,EAEpB,MAAMK,EAAgBH,GACbE,EAAMF,IAAWD,EAAYC,GAEtC,MAAMI,EAASjB,GACN,CAAC,OAAQ,KAAM,MAAMc,SAASI,OAAOlB,GAASmB,eAEvD,MAAMC,EAAapB,GACV,CAAC,IAAK,MAAMc,SAASI,OAAOlB,GAASmB,eAE9C,MAAME,EAAe,IAAIxB,EACzB,MAAMyB,EACJ,WAAAC,CAAYC,EAAU,CAAC,GACrB7C,KAAK8C,eAAiB,KACtB,GAAID,EAAQE,OAAQ,CAClB/C,KAAKgD,UAAUH,EAAQE,OACzB,KAAO,CACL/C,KAAKgD,UAAU,IAAIxC,EAAgByC,oBACrC,CACA,GAAI5C,EAAUO,KAAKsC,WAAWL,EAAQM,WAAY,CAChDnD,KAAKoD,aAAaP,EAAQM,UAC5B,KAAO,CACLnD,KAAKoD,aAAaT,EAAaU,wBACjC,CACA,GAAIR,EAAQS,mBAAmBhD,EAAkBiD,cAAe,CAC9DvD,KAAKwD,WAAWX,EAAQS,QAC1B,KAAO,CACLtD,KAAKwD,WAAW,IAAIlD,EAAkBiD,cACxC,CACA,GAAIlD,EAAUO,KAAK6C,UAAUZ,EAAQa,SAAU,CAC7C1D,KAAK2D,oBAAoBd,EAAQa,QACnC,CACF,CACA,SAAAV,CAAUD,GACR/C,KAAK+C,OAASA,CAChB,CACA,SAAAa,GACE,OAAO5D,KAAK+C,MACd,CACA,YAAAK,CAAaS,GACX,IAAKxD,EAAUO,KAAKsC,WAAWW,GAAU,CACvC,MAAM,IAAI/C,UAAU,4BACtB,CACAd,KAAK8D,iBAAmBD,CAC1B,CACA,mBAAAE,GACE,OAAO/D,KAAK8D,gBACd,CACA,UAAAN,CAAWF,GACT,GAAIA,aAAmBhD,EAAkBiD,cAAe,CACtDvD,KAAKsD,QAAUA,CACjB,KAAO,CACL,MAAM,IAAIxC,UAAU,wCACtB,CACF,CACA,UAAAkD,GACE,OAAOhE,KAAKsD,OACd,CACA,mBAAAK,CAAoBM,GAClBjE,KAAK8C,eAAiBoB,QAAQD,EAChC,CACA,gBAAAE,GACE,OAAOnE,KAAK8C,cACd,CACA,cAAAsB,CAAeC,GACb,GAAIA,EAAKC,YAAc,QAAS,CAC9B,MAAMC,EAAsB,CAAC,MAAO,MAAO,QAAS,QACpD,MAAMC,EAAmBD,EAAoBE,MAAKlD,GACzC2C,QAAQ9D,EAAuBsE,aAAaC,qBAAqBN,EAAM9C,MAEhF,OAAQiD,CACV,CACA,OAAO,KACT,CACA,8BAAOnB,CAAwBgB,EAAMtB,GACnC,GAAIsB,EAAKO,YAAcpE,EAAgBqE,WAAWC,aAAc,CAC9D,MAAMC,EAAWV,EAAKC,UACtB,GAAI,CAAC,OAAQ,SAAU,QAAS,WAAWnC,SAAS4C,GAAW,CAC7D,MAAMC,EAAUjC,EAAOkC,cAAc,CACnC1D,KAAM,MAER8C,EAAKa,QAAQF,GACbA,EAAQG,YAAYd,EAAKe,cAC3B,MAAO,GAAI,CAAC,aAAc,QAAS,QAAQjD,SAAS4C,GAAW,CAC7D,MAAMC,EAAUjC,EAAOkC,cAAc,CACnC1D,KAAM,MAER8C,EAAKa,QAAQF,GACbA,EAAQG,YAAYd,EAAKe,cAC3B,MAAO,GAAI,CAAC,OAAQ,QAAQjD,SAAS4C,GAAW,CAC9C,MAAMM,EAAWtC,EAAOuC,eAAe,CACrCC,SAAUlB,EAAKe,gBAEjBf,EAAKa,QAAQG,EACf,KAAO,CACL,MAAMG,EAAanB,EAAKoB,gBACxB,MAAMC,EAAarB,EAAKsB,gBACxBtB,EAAKa,QAAQnC,EAAO6C,WAAWJ,MAAgBnB,EAAKe,cAAerC,EAAO6C,WAAWF,GACvF,CACF,CACF,CACA,kBAAOlD,CAAYyB,GACjB,GAAI5D,EAAUO,KAAKiF,eAAe5B,GAAQ,CACxC,OAAOA,EAAMzB,aACf,CACA,OAAOyB,CACT,CACA,SAAA6B,CAAUC,GACR,GAAI1F,EAAUO,KAAKiF,eAAeE,GAAO,CACvC,MAAMC,EAAQ,mCACd,MAAO,IAAID,EAAKE,SAASD,IAAQE,SAAQ,EAAEC,MACzC,GAAIlE,EAAYkE,GAAQ,CACtB,OAAOA,CACT,CACA,MAAO,IAAIA,EAAM,IAChBC,QAAO,CAACC,EAAKnE,KACd,GAAIG,EAAcH,GAAS,CACzBmE,EAAIC,KAAKpE,EACX,KAAO,CACL,MAAMqE,EAAW9F,EAAW4F,GAAM,GAClC,GAAIhE,EAAckE,IAAalG,EAAUO,KAAK4F,MAAMD,GAAW,CAC7DF,EAAIC,KAAKpE,EACX,KAAO,CACLmE,EAAIA,EAAIpF,OAAS,IAAMiB,CACzB,CACF,CACA,OAAOmE,CAAG,GACT,IAAII,KAAIpB,IACT,GAAIpD,EAAYoD,GAAW,CACzB,OAAO3C,EAAagE,eACtB,CACA,GAAItE,EAAMiD,GAAW,CACnB,OAAO3C,EAAaiE,WACtB,CACA,OAAOjE,EAAakD,WAAW,CAC7BgB,QAAS5G,KAAKgE,aAAa6C,WAAWxB,IACtC,GAEN,CACA,MAAO,EACT,CACA,uBAAOyB,CAAiBC,EAAQC,EAAa,GAC3C,MAAMC,EAAcF,EAAOG,MAAMF,GACjC,MAAMG,EAAcF,EAAYG,MAAM,IAAIC,OAAOzF,IACjD,GAAIuF,EAAa,CACf,OAAOA,EAAYxG,MAAQqG,CAC7B,CACA,OAAQ,CACV,CACA,kBAAOM,CAAYP,EAAQC,EAAa,GACtC,MAAMC,EAAcF,EAAOG,MAAMF,GACjC,MAAMG,EAAcF,EAAYG,MAAM,IAAIC,OAAOzF,IACjD,GAAIuF,EAAa,CACf,MAAO,CAAEI,EAAOlG,GAAW8F,EAC3B,MAAO,CACL9F,UACAmG,YAAaD,IAAU,KAE3B,CACA,OAAO,IACT,CACA,iBAAOE,CAAWxD,GAChB,MAAMyD,EAASnF,OAAO0B,GACtB,GAAI,gBAAgB0D,KAAKD,GAAS,CAChC,OAAOA,EAAOR,MAAM,GAAI,EAC1B,CACA,OAAOjD,CACT,CACA,eAAA2D,CAAgBC,GACd,MAAMC,EAAS,CACb7D,MAAO,GACP8D,WAAY,IAEd,GAAI1H,EAAUO,KAAKiF,eAAegC,GAAmB,CACnD,GAAIA,EAAiBG,WAAW,KAAM,CACpCF,EAAO7D,MAAQjE,KAAKgE,aAAaiE,gBAAgBtF,EAAa8E,WAAWI,EAAiBX,MAAM,KAChG,OAAOY,CACT,CACA,OAAOD,EAAiBK,OAAOC,MAAM,KAAKC,OAAOlE,SAASkC,QAAO,CAACC,EAAKgC,KACrE,MAAOC,EAAKrE,EAAQ,IAAMoE,EAAKF,MAAM,KACrC9B,EAAI0B,WAAWzB,KAAK,CAAC3D,EAAaH,YAAY8F,GAAMtI,KAAKgE,aAAaiE,gBAAgBtF,EAAa8E,WAAWxD,MAC9G,OAAOoC,CAAG,GACTyB,EACL,CACA,OAAOA,CACT,CACA,KAAAS,CAAMxB,GACJ,MAAMe,EAASpF,EAAa8F,aAC5B,MAAMC,EAAgB9F,EAAamE,iBAAiBC,GACpD,GAAI0B,IAAkB,EAAG,CACvB,MAAMC,EAAqBD,KAAmB,EAAI1B,EAASA,EAAOG,MAAM,EAAGuB,GAC3EX,EAAOa,eAAe3I,KAAK8F,UAAU4C,GACvC,CACA,MAAME,EAAQ,CAACd,GACf,MAAMe,EAAY,GAClB,IAAIC,EAAU,KACd,IAAIC,EAAQ,EACZhC,EAAO7B,QAAQrD,GAAc,CAACmH,EAASzB,EAAOlG,EAAS4H,EAAOtI,KAC5D,MAAMuI,EAAehF,QAAQqD,KAAW,MACxC,MAAMP,EAAagC,EAAQ/H,OAASN,EACpC,MAAMsG,EAAcF,EAAOG,MAAMF,GACjC,MAAMe,EAAa/H,KAAK4H,gBAAgBqB,GACxC,MAAME,EAAmBxG,EAAaH,YAAYnB,GAClD,IAAIK,EAASkH,EAAMG,GACnB,GAAIG,EAAc,CAChB,MAAME,GAAqBnC,EAAY9E,SAAS,KAAKd,MACrD,GAAI+H,IAAsB3G,EAAW0G,GAAmB,CACtD,MAAME,EAAYrJ,KAAK4D,YAAYxC,aAAa+H,GAChD,MAAMG,EAAmBD,GAAaA,EAAUE,SAChD,GAAID,EAAkB,CACpBR,EAAUpG,EAAauC,cAAc,CACnC1D,KAAM4H,EACNlF,MAAO8D,EAAW9D,MAClB8D,WAAYyB,OAAOC,YAAY1B,EAAWA,cAE5Ce,EAAQ9F,UAAUhD,KAAK4D,aACvBlC,EAAOiH,YAAYG,EACrB,KAAO,CACLpH,EAAOiH,YAAYjG,EAAakD,WAAWoD,GAC7C,CACA,MAAMU,EAAe/G,EAAamE,iBAAiBC,EAAQC,GAC3D,GAAI0C,IAAiB,EAAG,CACtB,MAAM9C,EAAU8C,KAAkB,EAAIzC,EAAcF,EAAOG,MAAMF,EAAY0C,GAC7EhI,EAAOiH,eAAe3I,KAAK8F,UAAUc,GACvC,CACF,KAAO,CACL,GAAInE,EAAW0G,IAAqBL,GAAWrG,EAAWqG,EAAQxE,WAAY,CAC5EyE,IACArH,EAASkH,EAAMG,EACjB,CACAD,EAAUpG,EAAauC,cAAc,CACnC1D,KAAM4H,EACNlF,MAAO8D,EAAW9D,MAClB8D,WAAYyB,OAAOC,YAAY1B,EAAWA,cAE5C,MAAM2B,EAAe/G,EAAamE,iBAAiBC,EAAQC,GAC3D,GAAI0C,IAAiB,EAAG,CACtB,MAAM9C,EAAU8C,KAAkB,EAAIzC,EAAcF,EAAOG,MAAMF,EAAY0C,GAC7EZ,EAAQH,eAAe3I,KAAK8F,UAAUc,GACxC,CACA,IAAKlF,EAAQ,CACXqH,IACArH,EAASkH,EAAMG,EACjB,CACArH,EAAOiH,YAAYG,GACnBC,IACAH,EAAMG,GAASD,EACfD,EAAUvC,KAAK6C,EACjB,CACF,KAAO,CACL,GAAIN,EAAU1G,SAASgH,GAAmB,CACxCJ,IACA,MAAMY,EAAiBd,EAAUe,QAAQT,GACzCN,EAAUgB,OAAOF,EAAgB,EACnC,KAAO,CACLf,EAAMG,GAAOJ,YAAYjG,EAAakD,WAAWoD,GACnD,CACA,GAAI1G,EAAO6G,IAAqBJ,EAAQ,EAAG,CACzCA,GACF,CACA,MAAMW,EAAe/G,EAAamE,iBAAiBC,EAAQC,GAC3D,GAAI0C,IAAiB,GAAKd,EAAMG,GAAQ,CACtC,MAAMnC,EAAU8C,KAAkB,EAAIzC,EAAcF,EAAOG,MAAMF,EAAY0C,GAC7Ed,EAAMG,GAAOJ,eAAe3I,KAAK8F,UAAUc,GAC7C,CACA,GAAImC,EAAQ,GAAKtG,EAAWmG,EAAMG,GAAOzE,WAAY,CACnD,MAAMwF,EAAUnH,EAAa2E,YAAYP,EAAQC,GACjD,GAAI3G,EAAUO,KAAKmJ,OAAOD,IAAYrH,EAAWqH,EAAQzI,SAAU,CACjE0H,GACF,CACF,CACF,KAEF,MAAMiB,EAA4B3F,IAChC,IAAI4F,EAAO,MACX,OAAO5F,EAAKe,cAAc8E,aAAY,CAAC7D,EAAK1E,EAAOhB,KACjD,IAAKsJ,GAAQtI,EAAM2C,YAAc,aAAc,CAC7C+B,EAAIC,KAAK3F,EACX,MAAO,IAAKsJ,GAAQtI,EAAM2C,YAAc,OAAQ,CAC9C2F,EAAO,IACT,CACA,OAAO5D,CAAG,GACT,GAAG,EAER7F,EAAgBqE,WAAWsF,WAAWrC,GAAQsC,SAAQ/F,IACpD,GAAIA,EAAKC,YAAc,IAAK,CAC1B,MAAM+F,EAAyBL,EAA0B3F,GACzD,GAAIgG,EAAuBpJ,SAAW,EAAG,CACvCoD,EAAKc,YAAYd,EAAKe,cAAc8B,MAAM,EAAGzG,EAAW4J,EAAwB,IAClF,CACA,GAAIA,EAAuBpJ,OAAS,IAAMoJ,EAAyB,KAAO,EAAG,CAC3EhG,EAAKc,YAAYd,EAAKe,cAAc8B,MAAM,EAAGzG,EAAW4J,EAAwB,IAClF,CACF,CACA,GAAIrK,KAAKmE,oBAAsBnE,KAAKoE,eAAeC,GAAO,CACxD,MAAMuC,EAAUvC,EAAKiG,SAAS,CAC5BC,OAAQ,QAEV,MAAMC,EAASjK,EAAWkK,QAAQC,SAAS9D,GAC3C,MAAM+D,EAAQH,EAAO/D,KAAIN,IACvB,GAAIA,EAAMyE,IAAM,MAAO,CACrB,OAAOlI,EAAauC,cAAc,CAChC1D,KAAM,MACN0C,MAAOkC,EAAM0E,SAAS3F,QAAQ,aAAc,YAC5CK,SAAU,CAAC7C,EAAakD,WAAWO,EAAMmE,cAE7C,CACA,GAAInE,EAAMyE,IAAM,QAAS,CACvB,OAAOlI,EAAauC,cAAc,CAChC1D,KAAM,MACN0C,MAAOkC,EAAM0E,SACbtF,SAAU,CAAC7C,EAAakD,WAAWO,EAAMmE,cAE7C,CACA,OAAO5H,EAAakD,WAAWO,EAAMmE,WAAW,IAElDjG,EAAKa,WAAWyF,EAClB,KAEFnK,EAAgBqE,WAAWsF,WAAWrC,GAAQsC,SAAQ/F,IACpD,MAAMgF,EAAYrJ,KAAK4D,YAAYxC,aAAaiD,GAChD,GAAIgF,EAAW,CACbA,EAAUyB,kBAAkBzG,EAC9B,KAEFyD,EAAO9E,UAAUhD,KAAK4D,YAAa5D,KAAK+D,uBACxC,OAAO+D,CACT,EAGF3H,EAAQwC,aAAeA,CAExB,EAlXA,CAkXG3C,KAAKC,GAAGC,GAAG6K,OAAS/K,KAAKC,GAAGC,GAAG6K,QAAU,CAAC,EAAG9K,GAAGC,GAAG6K,OAAO9K,GAAGA,GAAGC,GAAG6K,OAAO9K,GAAGC,GAAGD,GAAGC,GAAG6K","ignoreList":[]}