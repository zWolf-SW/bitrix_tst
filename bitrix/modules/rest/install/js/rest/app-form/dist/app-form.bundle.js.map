{"version":3,"file":"app-form.bundle.js","sources":["../src/providers/provider.js","../src/providers/config-provider.js","../src/providers/event-type.js","../src/app-form.js"],"sourcesContent":["export class Provider\n{\n\tfetch(): Promise\n\t{\n\t\treturn new Promise();\n\t}\n}\n","import { ajax } from 'main.core';\nimport type { EventType } from './event-type';\nimport { Provider } from './provider';\n\nexport class ConfigProvider extends Provider\n{\n\t#clientId: string;\n\t#type: EventType;\n\n\tconstructor(clientId: string, eventType: EventType)\n\t{\n\t\tsuper();\n\t\tthis.#clientId = clientId;\n\t\tthis.#type = eventType;\n\t}\n\n\tfetch(): Promise\n\t{\n\t\treturn ajax.runAction('rest.controller.appform.getConfig', {\n\t\t\tdata: {\n\t\t\t\tclientId: this.#clientId,\n\t\t\t\ttype: this.#type,\n\t\t\t},\n\t\t});\n\t}\n}\n","export const EventType = {\n\tINSTALL: 'OnAppSettingsInstall',\n\tCHANGE: 'OnAppSettingsChange',\n\tDISPLAY: 'OnAppSettingsDisplay',\n};\n","import { ConfigProvider } from './providers/config-provider';\nimport { EventType } from './providers/event-type';\nimport { Loader } from 'main.loader';\n\nexport type FormConfig = {\n\tconfig: string\n}\n\nexport class AppForm\n{\n\t#url = '/marketplace/app/settings/';\n\t#width = 575;\n\t#options: FormConfig;\n\n\tconstructor(options: FormConfig)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\tshow(): void\n\t{\n\t\ttop.BX.SidePanel.Instance.open(this.#url, {\n\t\t\twidth: this.#width,\n\t\t\trequestMethod: 'post',\n\t\t\trequestParams: this.#options,\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t}\n\n\tstatic sliderLoader()\n\t{\n\t\ttop.BX.SidePanel.Instance.open('rest:app-form.loader', {\n\t\t\twidth: 575,\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\tconst loader = new Loader({\n\t\t\t\t\ttarget: slider.getFrameWindow(),\n\t\t\t\t});\n\n\t\t\t\treturn loader.show();\n\t\t\t},\n\t\t\trequestMethod: 'post',\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t}\n\n\tstatic buildByApp(clientId: string, eventType: EventType): Promise\n\t{\n\t\tconst provider = new ConfigProvider(clientId, eventType);\n\n\t\treturn provider.fetch().then((response) => {\n\t\t\treturn (new AppForm(response.data));\n\t\t});\n\t}\n\n\tstatic buildByAppWithLoader(clientId: string, eventType: EventType): Promise\n\t{\n\t\tconst provider = new ConfigProvider(clientId, eventType);\n\t\tAppForm.sliderLoader();\n\n\t\treturn provider.fetch().then((response) => {\n\t\t\ttop.BX.SidePanel.Instance.close(true);\n\t\t\ttop.BX.SidePanel.Instance.destroy('loader');\n\n\t\t\treturn (new AppForm(response.data));\n\t\t});\n\t}\n}\n\nexport {\n\tEventType,\n};\n"],"names":["Provider","fetch","Promise","ConfigProvider","constructor","clientId","eventType","ajax","runAction","data","type","EventType","INSTALL","CHANGE","DISPLAY","AppForm","options","show","top","BX","SidePanel","Instance","open","width","requestMethod","requestParams","allowChangeHistory","sliderLoader","contentCallback","slider","loader","Loader","target","getFrameWindow","buildByApp","provider","then","response","buildByAppWithLoader","close","destroy"],"mappings":";;;;;CAAO,MAAMA,QAAQ,CACrB;GACCC,KAAK,GACL;KACC,OAAO,IAAIC,OAAO,EAAE;;CAEtB;;CCJsC;CAAA;AAEtC,CAAO,MAAMC,cAAc,SAASH,QAAQ,CAC5C;GAICI,WAAW,CAACC,QAAgB,EAAEC,SAAoB,EAClD;KACC,KAAK,EAAE;KAAC;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACR,4CAAI,0BAAaD,QAAQ;KACzB,4CAAI,kBAASC,SAAS;;GAGvBL,KAAK,GACL;KACC,OAAOM,cAAI,CAACC,SAAS,CAAC,mCAAmC,EAAE;OAC1DC,IAAI,EAAE;SACLJ,QAAQ,0CAAE,IAAI,uBAAU;SACxBK,IAAI,0CAAE,IAAI;;MAEX,CAAC;;CAEJ;;OCzBaC,SAAS,GAAG;GACxBC,OAAO,EAAE,sBAAsB;GAC/BC,MAAM,EAAE,qBAAqB;GAC7BC,OAAO,EAAE;CACV,CAAC;;CCFoC;CAAA;CAAA;AAMrC,CAAO,MAAMC,OAAO,CACpB;GAKCX,WAAW,CAACY,OAAmB,EAC/B;KAAA;OAAA;OAAA,OALO;;KAA4B;OAAA;OAAA,OAC1B;;KAAG;OAAA;OAAA;;KAKX,4CAAI,wBAAYA,OAAO;;GAGxBC,IAAI,GACJ;KACCC,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,yCAAC,IAAI,eAAO;OACzCC,KAAK,0CAAE,IAAI,iBAAO;OAClBC,aAAa,EAAE,MAAM;OACrBC,aAAa,0CAAE,IAAI,qBAAS;OAC5BC,kBAAkB,EAAE;MACpB,CAAC;;GAGH,OAAOC,YAAY,GACnB;KACCT,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC,sBAAsB,EAAE;OACtDC,KAAK,EAAE,GAAG;OACVK,eAAe,EAAGC,MAAM,IAAK;SAC5B,MAAMC,MAAM,GAAG,IAAIC,kBAAM,CAAC;WACzBC,MAAM,EAAEH,MAAM,CAACI,cAAc;UAC7B,CAAC;SAEF,OAAOH,MAAM,CAACb,IAAI,EAAE;QACpB;OACDO,aAAa,EAAE,MAAM;OACrBE,kBAAkB,EAAE;MACpB,CAAC;;GAGH,OAAOQ,UAAU,CAAC7B,QAAgB,EAAEC,SAAoB,EACxD;KACC,MAAM6B,QAAQ,GAAG,IAAIhC,cAAc,CAACE,QAAQ,EAAEC,SAAS,CAAC;KAExD,OAAO6B,QAAQ,CAAClC,KAAK,EAAE,CAACmC,IAAI,CAAEC,QAAQ,IAAK;OAC1C,OAAQ,IAAItB,OAAO,CAACsB,QAAQ,CAAC5B,IAAI,CAAC;MAClC,CAAC;;GAGH,OAAO6B,oBAAoB,CAACjC,QAAgB,EAAEC,SAAoB,EAClE;KACC,MAAM6B,QAAQ,GAAG,IAAIhC,cAAc,CAACE,QAAQ,EAAEC,SAAS,CAAC;KACxDS,OAAO,CAACY,YAAY,EAAE;KAEtB,OAAOQ,QAAQ,CAAClC,KAAK,EAAE,CAACmC,IAAI,CAAEC,QAAQ,IAAK;OAC1CnB,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACkB,KAAK,CAAC,IAAI,CAAC;OACrCrB,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACmB,OAAO,CAAC,QAAQ,CAAC;OAE3C,OAAQ,IAAIzB,OAAO,CAACsB,QAAQ,CAAC5B,IAAI,CAAC;MAClC,CAAC;;CAEJ;;;;;;;;;"}