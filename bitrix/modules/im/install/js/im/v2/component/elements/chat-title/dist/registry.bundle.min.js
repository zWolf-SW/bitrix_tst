this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,i,s,n,a,o,r,l){"use strict";const h={bot:"bot",extranet:"extranet",network:"network",collaber:"collaber",support24:"support24"};const u={absent:"absent",birthday:"birthday"};const c={notes:"notes"};const d=18;const p={name:"ChatTitle",components:{BIcon:i.BIcon},props:{dialogId:{type:[Number,String],default:0},text:{type:String,default:""},showItsYou:{type:Boolean,default:true},withLeftIcon:{type:Boolean,default:true},withColor:{type:Boolean,default:false},withMute:{type:Boolean,default:false},withAutoDelete:{type:Boolean,default:false},onlyFirstName:{type:Boolean,default:false},twoLine:{type:Boolean,default:false},customType:{type:String,default:""}},computed:{Color:()=>r.Color,ICON_SIZE:()=>d,OutlineIcons:()=>i.Outline,dialog(){return this.$store.getters["chats/get"](this.dialogId,true)},chatId(){return this.dialog.chatId},user(){return this.$store.getters["users/get"](this.dialogId,true)},botType(){if(!this.isUser){return""}const t=this.$store.getters["users/bots/getByUserId"](this.dialogId);if(!t){return""}return t.type},isUser(){return this.dialog.type===r.ChatType.user},isSelfChat(){return this.isUser&&this.user.id===s.Core.getUserId()},containerClasses(){const t=[];if(this.twoLine){t.push("--twoline")}return t},dialogName(){if(this.customType===c.notes){return this.loc("IM_SEARCH_MY_NOTES")}if(this.text){return e.Text.encode(this.text)}let t=this.dialog.name;if(this.isUser){t=this.onlyFirstName?this.user.firstName:this.user.name}return e.Text.encode(t)},dialogSpecialType(){if(!this.isUser){if(this.isCollabChat){return""}if(this.isExtranet){return h.extranet}if(this.isCollaberChatOrUser){return h.collaber}if([r.ChatType.support24Notifier,r.ChatType.support24Question].includes(this.dialog.type)){return h.support24}return""}if(this.isSelfChat){return""}if(this.isBot){return this.botType}if(this.isExtranet){return h.extranet}if(this.isCollaberChatOrUser){return h.collaber}if(this.isNetwork){return h.network}return""},isDialogSpecialTypeWithLeftIcon(){if(this.isCollaberChatOrUser||this.isExtranet){return false}return e.Type.isStringFilled(this.dialogSpecialType)},leftIcon(){if(!this.withLeftIcon||this.isSelfChat){return""}if(this.isDialogSpecialTypeWithLeftIcon){return this.dialogSpecialType}if(!this.isUser){return""}if(this.showBirthdays&&this.user.isBirthday){return u.birthday}if(this.user.isAbsent){return u.absent}return""},color(){if(!this.withColor||this.specialColor){return""}return this.dialog.color},specialColor(){return this.dialogSpecialType},isBot(){if(!this.isUser){return false}return this.user.type===r.UserType.bot},isExtranet(){if(this.isUser){return this.user.type===r.UserType.extranet}return this.dialog.extranet},isCollaberChatOrUser(){if(this.isUser){return this.user.type===r.UserType.collaber}return this.dialog.containsCollaber},isCollabChat(){return this.dialog.type===r.ChatType.collab},isNetwork(){if(this.isUser){return this.user.network}return false},isChatMuted(){if(this.isUser){return false}const t=this.dialog.muteList.find((t=>t===s.Core.getUserId()));return Boolean(t)},isAutoDeleteEnabled(){if(!this.withAutoDelete){return false}return this.$store.getters["chats/autoDelete/isEnabled"](this.chatId)},tooltipText(){if(this.customType===c.notes){return this.loc("IM_SEARCH_MY_NOTES")}if(this.isSelfChat&&this.showItsYou){return`${this.dialog.name} (${this.loc("IM_LIST_RECENT_CHAT_SELF")})`}return this.dialog.name},showBirthdays(){return this.$store.getters["application/settings/get"](r.Settings.recent.showBirthday)}},methods:{loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div :class="containerClasses" class="bx-im-chat-title__scope bx-im-chat-title__container">\n\t\t\t<span class="bx-im-chat-title__content">\n\t\t\t\t<span v-if="leftIcon" :class="'--' + leftIcon" class="bx-im-chat-title__icon"></span>\n\t\t\t\t<span\n\t\t\t\t\t:class="[specialColor ? '--' + specialColor : '']"\n\t\t\t\t\t:style="{color: color}"\n\t\t\t\t\t:title="tooltipText"\n\t\t\t\t\tclass="bx-im-chat-title__text"\n\t\t\t\t\tv-html="dialogName"\n\t\t\t\t></span>\n\t\t\t\t<strong v-if="isSelfChat && showItsYou">\n\t\t\t\t\t<span class="bx-im-chat-title__text --self">({{ loc('IM_LIST_RECENT_CHAT_SELF') }})</span>\n\t\t\t\t</strong>\n\t\t\t\t<span v-if="withMute && isChatMuted" class="bx-im-chat-title__muted-icon"></span>\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if="isAutoDeleteEnabled"\n\t\t\t\t\t:name="OutlineIcons.TIMER_DOT"\n\t\t\t\t\t:color="Color.accentBlue"\n\t\t\t\t\t:size="ICON_SIZE"\n\t\t\t\t\t:hoverable="false"\n\t\t\t\t\t:title="loc('IM_CHAT_TITLE_AUTO_DELETE_TITLE')"\n\t\t\t\t\tclass="bx-im-chat-title__auto-delete-icon"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</div>\n\t`};const g=n.BitrixVue.cloneComponent(p,{name:"ChatTitleWithHighlighting",props:{textToHighlight:{type:String,default:""}},computed:{dialogName(){return a.highlightText(this.parentDialogName,this.textToHighlight)}}});const f={name:"MessageAuthorTitle",components:{ChatTitle:p},props:{dialogId:{type:[Number,String],default:0},messageId:{type:[Number,String],default:0},text:{type:String,default:""},showItsYou:{type:Boolean,default:true},withLeftIcon:{type:Boolean,default:true},withColor:{type:Boolean,default:false},withMute:{type:Boolean,default:false},onlyFirstName:{type:Boolean,default:false},twoLine:{type:Boolean,default:false}},computed:{message(){return this.$store.getters["messages/getById"](this.messageId)},authorId(){return this.message.authorId},customAuthorName(){const t=new o.CopilotManager;if(!t.isCopilotBot(this.dialogId)){return""}return t.getNameWithRole({dialogId:this.dialogId,messageId:this.messageId})}},template:`\n\t\t<ChatTitle \n\t\t\t:dialogId="dialogId"\n\t\t\t:text="customAuthorName"\n\t\t\t:showItsYou="showItsYou"\n\t\t\t:withLeftIcon="withLeftIcon"\n\t\t\t:withColor="withColor"\n\t\t\t:withMute="withMute"\n\t\t\t:onlyFirstName="onlyFirstName"\n\t\t\t:twoLine="twoLine"\n\t\t/>\n\t`};const m=5;const T={name:"EditableChatTitle",components:{ChatTitle:p},props:{dialogId:{type:String,required:true}},emits:["newTitleSubmit"],data(){return{isEditing:false,inputWidth:0,showEditIcon:false,chatTitle:""}},computed:{dialog(){return this.$store.getters["chats/get"](this.dialogId,true)},canBeRenamed(){return l.PermissionManager.getInstance().canPerformActionByRole(r.ActionByRole.rename,this.dialogId)},inputStyle(){return{width:`calc(${this.inputWidth}ch + ${m}px)`}}},watch:{chatTitle(){this.inputWidth=this.chatTitle.length}},mounted(){this.chatTitle=this.dialog.name},methods:{async onTitleClick(){if(!this.canBeRenamed){return}if(!this.chatTitle){this.chatTitle=this.dialog.name}this.isEditing=true;await this.$nextTick();this.$refs.titleInput.focus()},onNewTitleSubmit(){if(!this.isEditing){return}this.isEditing=false;const t=this.chatTitle===this.dialog.name;if(t||this.chatTitle===""){return}this.$emit("newTitleSubmit",this.chatTitle)},onEditCancel(){this.isEditing=false;this.showEditIcon=false;this.chatTitle=this.dialog.name}},template:`\n\t\t<div\n\t\t\tv-if="!isEditing"\n\t\t\t@click="onTitleClick"\n\t\t\t@mouseover="showEditIcon = true"\n\t\t\t@mouseleave="showEditIcon = false"\n\t\t\tclass="bx-im-elements-editable-chat-title__wrap"\n\t\t\t:class="{'--can-rename': canBeRenamed}"\n\t\t>\n\t\t\t<div class="bx-im-elements-editable-chat-title__container">\n\t\t\t\t<ChatTitle :dialogId="dialogId" :withMute="true" :withAutoDelete="true" />\n\t\t\t</div>\n\t\t\t<div class="bx-im-elements-editable-chat-title__edit-icon_container">\n\t\t\t\t<div v-if="showEditIcon && canBeRenamed" class="bx-im-elements-editable-chat-title__edit-icon"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else class="bx-im-elements-editable-chat-title__input_container">\n\t\t\t<input\n\t\t\t\tv-model="chatTitle"\n\t\t\t\t:style="inputStyle"\n\t\t\t\t@focus="$event.target.select()"\n\t\t\t\t@blur="onNewTitleSubmit"\n\t\t\t\t@keyup.enter="onNewTitleSubmit"\n\t\t\t\t@keyup.esc="onEditCancel"\n\t\t\t\ttype="text"\n\t\t\t\tclass="bx-im-elements-editable-chat-title__input"\n\t\t\t\tref="titleInput"\n\t\t\t/>\n\t\t</div>\n\t`};t.ChatTitle=p;t.ChatTitleType=c;t.ChatTitleWithHighlighting=g;t.MessageAuthorTitle=f;t.EditableChatTitle=T})(this.BX.Messenger.v2.Component.Elements=this.BX.Messenger.v2.Component.Elements||{},BX,BX.UI.IconSet,BX.Messenger.v2.Application,BX.Vue3,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Messenger.v2.Lib);
//# sourceMappingURL=registry.bundle.map.js