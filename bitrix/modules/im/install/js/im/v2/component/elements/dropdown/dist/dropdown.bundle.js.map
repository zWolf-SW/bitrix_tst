{"version":3,"file":"dropdown.bundle.js","sources":["../src/dropdown.js"],"sourcesContent":["import { MenuManager, Menu } from 'main.popup';\n\nimport 'ui.forms';\n\nimport './dropdown.css';\n\nexport type DropdownItem = {\n\tvalue: string,\n\ttext: string,\n\tdefault?: boolean\n};\n\n// @vue/component\nexport const Dropdown = {\n\tname: 'ChatDropdown',\n\tprops:\n\t{\n\t\titems: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['itemChange'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedElement: '',\n\t\t\tmenuOpened: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tformattedItems(): {[value: string]: DropdownItem}\n\t\t{\n\t\t\tconst map = {};\n\t\t\tthis.items.forEach((item) => {\n\t\t\t\tmap[item.value] = item;\n\t\t\t});\n\n\t\t\treturn map;\n\t\t},\n\t\tdefaultItem(): DropdownItem\n\t\t{\n\t\t\treturn this.items.find((item) => {\n\t\t\t\treturn item.default === true;\n\t\t\t});\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.menuInstance = null;\n\t\tif (this.defaultItem)\n\t\t{\n\t\t\tthis.selectedElement = this.defaultItem.value;\n\t\t}\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.menuInstance?.destroy();\n\t},\n\tmethods:\n\t{\n\t\ttoggleMenu()\n\t\t{\n\t\t\tif (!this.menuInstance)\n\t\t\t{\n\t\t\t\tthis.menuInstance = this.getMenuInstance();\n\t\t\t}\n\n\t\t\tif (this.menuOpened)\n\t\t\t{\n\t\t\t\tthis.menuInstance.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.menuInstance.show();\n\t\t\tconst width = this.$refs.container.clientWidth;\n\t\t\tthis.menuInstance.getPopupWindow().setWidth(width);\n\t\t\tthis.menuOpened = true;\n\t\t},\n\t\tgetMenuInstance(): Menu\n\t\t{\n\t\t\treturn MenuManager.create({\n\t\t\t\tid: this.id,\n\t\t\t\tbindOptions: { forceBindPosition: true, position: 'bottom' },\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\titems: this.getMenuItems(),\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.menuOpened = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tgetMenuItems(): Array<{ text: string, onclick: Function }>\n\t\t{\n\t\t\treturn Object.values(this.formattedItems).map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\ttext: item.text,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.selectedElement = item.value;\n\t\t\t\t\t\tthis.$emit('itemChange', item.value);\n\t\t\t\t\t\tthis.menuInstance.close();\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-dropdown__container bx-im-dropdown__scope\">\n\t\t\t<div @click=\"toggleMenu\" class=\"ui-ctl ui-ctl-xl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\" ref=\"container\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<div class=\"ui-ctl-element\">{{ formattedItems[selectedElement].text }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["Dropdown","name","props","items","type","Object","required","id","String","emits","data","selectedElement","menuOpened","computed","formattedItems","map","forEach","item","value","defaultItem","find","default","created","menuInstance","beforeUnmount","destroy","methods","toggleMenu","getMenuInstance","close","show","width","$refs","container","clientWidth","getPopupWindow","setWidth","MenuManager","create","bindOptions","forceBindPosition","position","targetContainer","document","body","bindElement","getMenuItems","events","onClose","values","text","onclick","$emit","template"],"mappings":";;;;;;;;CAYA;AACA,OAAaA,QAAQ,GAAG;GACvBC,IAAI,EAAE,cAAc;GACpBC,KAAK,EACL;KACCC,KAAK,EAAE;OACNC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,EAAE,EAAE;OACHH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;;IAEX;GACDG,KAAK,EAAE,CAAC,YAAY,CAAC;GACrBC,IAAI,GACJ;KACC,OAAO;OACNC,eAAe,EAAE,EAAE;OACnBC,UAAU,EAAE;MACZ;IACD;GACDC,QAAQ,EACR;KACCC,cAAc,GACd;OACC,MAAMC,GAAG,GAAG,EAAE;OACd,IAAI,CAACZ,KAAK,CAACa,OAAO,CAAEC,IAAI,IAAK;SAC5BF,GAAG,CAACE,IAAI,CAACC,KAAK,CAAC,GAAGD,IAAI;QACtB,CAAC;OAEF,OAAOF,GAAG;MACV;KACDI,WAAW,GACX;OACC,OAAO,IAAI,CAAChB,KAAK,CAACiB,IAAI,CAAEH,IAAI,IAAK;SAChC,OAAOA,IAAI,CAACI,OAAO,KAAK,IAAI;QAC5B,CAAC;;IAEH;GACDC,OAAO,GACP;KACC,IAAI,CAACC,YAAY,GAAG,IAAI;KACxB,IAAI,IAAI,CAACJ,WAAW,EACpB;OACC,IAAI,CAACR,eAAe,GAAG,IAAI,CAACQ,WAAW,CAACD,KAAK;;IAE9C;GACDM,aAAa,GACb;KAAA;KACC,0BAAI,CAACD,YAAY,qBAAjB,mBAAmBE,OAAO,EAAE;IAC5B;GACDC,OAAO,EACP;KACCC,UAAU,GACV;OACC,IAAI,CAAC,IAAI,CAACJ,YAAY,EACtB;SACC,IAAI,CAACA,YAAY,GAAG,IAAI,CAACK,eAAe,EAAE;;OAG3C,IAAI,IAAI,CAAChB,UAAU,EACnB;SACC,IAAI,CAACW,YAAY,CAACM,KAAK,EAAE;SAEzB;;OAGD,IAAI,CAACN,YAAY,CAACO,IAAI,EAAE;OACxB,MAAMC,KAAK,GAAG,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,WAAW;OAC9C,IAAI,CAACX,YAAY,CAACY,cAAc,EAAE,CAACC,QAAQ,CAACL,KAAK,CAAC;OAClD,IAAI,CAACnB,UAAU,GAAG,IAAI;MACtB;KACDgB,eAAe,GACf;OACC,OAAOS,sBAAW,CAACC,MAAM,CAAC;SACzB/B,EAAE,EAAE,IAAI,CAACA,EAAE;SACXgC,WAAW,EAAE;WAAEC,iBAAiB,EAAE,IAAI;WAAEC,QAAQ,EAAE;UAAU;SAC5DC,eAAe,EAAEC,QAAQ,CAACC,IAAI;SAC9BC,WAAW,EAAE,IAAI,CAACb,KAAK,CAACC,SAAS;SACjC9B,KAAK,EAAE,IAAI,CAAC2C,YAAY,EAAE;SAC1BC,MAAM,EAAE;WACPC,OAAO,EAAE,MAAM;aACd,IAAI,CAACpC,UAAU,GAAG,KAAK;;;QAGzB,CAAC;MACF;KACDkC,YAAY,GACZ;OACC,OAAOzC,MAAM,CAAC4C,MAAM,CAAC,IAAI,CAACnC,cAAc,CAAC,CAACC,GAAG,CAAEE,IAAI,IAAK;SACvD,OAAO;WACNiC,IAAI,EAAEjC,IAAI,CAACiC,IAAI;WACfC,OAAO,EAAE,MAAM;aACd,IAAI,CAACxC,eAAe,GAAGM,IAAI,CAACC,KAAK;aACjC,IAAI,CAACkC,KAAK,CAAC,YAAY,EAAEnC,IAAI,CAACC,KAAK,CAAC;aACpC,IAAI,CAACK,YAAY,CAACM,KAAK,EAAE;;UAE1B;QACD,CAAC;;IAEH;GACDwB,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;;;;;;;"}