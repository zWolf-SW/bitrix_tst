{"version":3,"file":"registry.bundle.js","sources":["../src/const/const.js","../src/components/base/avatar.js","../src/components/base/base-ui-avatar.js","../src/components/collab/collab-chat.js","../src/components/collab/collaber.js","../src/components/extranet/extranet-chat-avatar.js","../src/components/extranet/extranet-user-avatar.js","../src/components/copilot/copilot.js","../src/components/notes-avatar.js","../src/chat-avatar.js","../src/message-avatar.js","../src/empty-avatar.js"],"sourcesContent":["export const AvatarSize = Object.freeze({\n\tXXS: 'XXS',\n\tXS: 'XS',\n\tS: 'S',\n\tM: 'M',\n\tL: 'L',\n\tXL: 'XL',\n\tXXL: 'XXL',\n\tXXXL: 'XXXL',\n});\n\nexport const AvatarSizeMap = Object.freeze({\n\t[AvatarSize.XXXL]: 94,\n\t[AvatarSize.XXL]: 60,\n\t[AvatarSize.XL]: 48,\n\t[AvatarSize.L]: 42,\n\t[AvatarSize.M]: 32,\n\t[AvatarSize.S]: 22,\n\t[AvatarSize.XS]: 18,\n\t[AvatarSize.XXS]: 14,\n});\n\nexport const ChatAvatarType = {\n\tnotes: 'notes',\n};\n\nexport const EmptyAvatarType = Object.freeze({\n\tdefault: 'default',\n\tsquared: 'squared',\n\tcollab: 'collab',\n});\n","import 'ui.fonts.opensans';\n\nimport { ChatType } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ChannelManager } from 'im.v2.lib.channel';\n\nimport { AvatarSize } from '../../const/const';\n\nimport './css/avatar.css';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const Avatar = {\n\tname: 'MessengerAvatar',\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\timageLoadError: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisChannel(): boolean\n\t\t{\n\t\t\treturn ChannelManager.isChannel(this.dialogId);\n\t\t},\n\t\tisSpecialType(): boolean\n\t\t{\n\t\t\tconst commonTypes = [ChatType.user, ChatType.chat, ChatType.open, ChatType.lines, ChatType.copilot];\n\n\t\t\treturn !commonTypes.includes(this.dialog.type);\n\t\t},\n\t\tcontainerTitle(): string\n\t\t{\n\t\t\tif (!this.withTooltip)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--size-${this.size.toLowerCase()}`];\n\t\t\tif (this.withSpecialTypes && this.isSpecialType)\n\t\t\t{\n\t\t\t\tclasses.push('--special');\n\t\t\t}\n\t\t\tconst typeClass = ChatType[this.dialog.type] ? `--${this.dialog.type}` : '--default';\n\t\t\tclasses.push(typeClass);\n\n\t\t\treturn classes;\n\t\t},\n\t\tbackgroundColorStyle(): {backgroundColor: string}\n\t\t{\n\t\t\tif (this.backgroundColor)\n\t\t\t{\n\t\t\t\treturn { backgroundColor: this.backgroundColor };\n\t\t\t}\n\n\t\t\treturn { backgroundColor: this.dialog.color };\n\t\t},\n\t\tavatarText(): string\n\t\t{\n\t\t\tif (!this.showAvatarLetters || !this.isEnoughSizeForText)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Utils.text.getFirstLetters(this.dialog.name);\n\t\t},\n\t\tshowAvatarLetters(): boolean\n\t\t{\n\t\t\tconst SPECIAL_TYPES_WITH_LETTERS = [ChatType.openChannel, ChatType.channel];\n\t\t\tif (SPECIAL_TYPES_WITH_LETTERS.includes(this.dialog.type))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !this.isSpecialType;\n\t\t},\n\t\tshowSpecialTypeIcon(): boolean\n\t\t{\n\t\t\tif (!this.withSpecialTypes || !this.withSpecialTypeIcon || this.isChannel)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.isSpecialType;\n\t\t},\n\t\tisEnoughSizeForText(): boolean\n\t\t{\n\t\t\tconst avatarSizesWithText = [AvatarSize.M, AvatarSize.L, AvatarSize.XL, AvatarSize.XXL, AvatarSize.XXXL];\n\n\t\t\treturn avatarSizesWithText.includes(this.size.toUpperCase());\n\t\t},\n\t\tavatarUrl(): string\n\t\t{\n\t\t\treturn this.customSource.length > 0 ? this.customSource : this.dialog.avatar;\n\t\t},\n\t\thasImage(): boolean\n\t\t{\n\t\t\treturn this.avatarUrl && !this.imageLoadError;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tavatarUrl()\n\t\t{\n\t\t\tthis.imageLoadError = false;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonImageLoadError()\n\t\t{\n\t\t\tthis.imageLoadError = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :title=\"containerTitle\" :class=\"containerClasses\" class=\"bx-im-avatar__scope bx-im-avatar__container\">\n\t\t\t<!-- Avatar -->\n\t\t\t<template v-if=\"hasImage\">\n\t\t\t\t<img :src=\"avatarUrl\" :alt=\"dialog.name\" class=\"bx-im-avatar__content --image\" @error=\"onImageLoadError\" draggable=\"false\"/>\n\t\t\t\t<div v-if=\"showSpecialTypeIcon\" :style=\"backgroundColorStyle\" class=\"bx-im-avatar__special-type_icon\"></div>\n\t\t\t</template>\n\t\t\t<div v-else-if=\"withAvatarLetters && avatarText\" :style=\"backgroundColorStyle\" class=\"bx-im-avatar__content --text\">\n\t\t\t\t{{ avatarText }}\n\t\t\t</div>\n\t\t\t<div v-else :style=\"backgroundColorStyle\" class=\"bx-im-avatar__content bx-im-avatar__icon\"></div>\n\t\t</div>\n\t`,\n};\n","import { AvatarHexagonGuest, AvatarRoundExtranet, AvatarRoundGuest, AvatarRoundCopilot, AvatarBase } from 'ui.avatar';\n\nimport { AvatarSize, AvatarSizeMap } from '../../const/const';\n\nimport './css/base-ui-avatar.css';\n\nexport const AvatarType = {\n\textranet: 'extranet',\n\tcollaber: 'collaber',\n\tcollab: 'collab',\n\tcopilot: 'copilot',\n\tdefault: 'default',\n};\n\n// @vue/component\nexport const BaseUiAvatar = {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tvalidator(value): boolean\n\t\t\t{\n\t\t\t\treturn Object.values(AvatarType).includes(value);\n\t\t\t},\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed: {\n\t\tAvatarSize: () => AvatarSize,\n\t\tcalculatedSize(): number\n\t\t{\n\t\t\treturn AvatarSizeMap[this.size];\n\t\t},\n\t},\n\twatch: {\n\t\ttitle()\n\t\t{\n\t\t\tthis.avatar.setTitle(this.title);\n\t\t},\n\t\turl()\n\t\t{\n\t\t\tthis.setAvatarImage();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst classMap = {\n\t\t\textranet: AvatarRoundExtranet,\n\t\t\tcollaber: AvatarRoundGuest,\n\t\t\tcollab: AvatarHexagonGuest,\n\t\t\tcopilot: AvatarRoundCopilot,\n\t\t\tdefault: AvatarBase,\n\t\t};\n\n\t\tconst AvatarClass = classMap[this.type] || classMap.default;\n\t\tthis.avatar = new AvatarClass({\n\t\t\tsize: this.calculatedSize,\n\t\t\ttitle: this.title,\n\t\t});\n\n\t\tthis.setAvatarImage();\n\t\tthis.setBackgroundColor();\n\t},\n\tmounted()\n\t{\n\t\tif (this.avatar && this.$refs.avatarContainer)\n\t\t{\n\t\t\tthis.avatar.renderTo(this.$refs.avatarContainer);\n\t\t}\n\t},\n\tmethods: {\n\t\tsetAvatarImage(): void\n\t\t{\n\t\t\tif (!this.url)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.avatar.setUserPic(this.url);\n\t\t},\n\t\tsetBackgroundColor(): void\n\t\t{\n\t\t\tif (!this.backgroundColor)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.avatar.setBaseColor(this.backgroundColor);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-base-ui-avatar__container\" ref=\"avatarContainer\"></div>\n\t`,\n};\n","import { Color } from 'im.v2.const';\n\nimport { AvatarSize } from '../../const/const';\nimport { BaseUiAvatar, AvatarType } from '../base/base-ui-avatar';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CollabChatAvatar = {\n\tname: 'CollabChatAvatar',\n\tcomponents: { BaseUiAvatar },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tAvatarType: () => AvatarType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tdialogAvatarUrl(): string\n\t\t{\n\t\t\treturn this.dialog.avatar;\n\t\t},\n\t\tcollabBackgroundColor(): string\n\t\t{\n\t\t\treturn Color.collab60;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseUiAvatar\n\t\t\t:type=\"AvatarType.collab\"\n\t\t\t:key=\"dialogId\"\n\t\t\t:title=\"dialogName\" \n\t\t\t:size=\"size\" \n\t\t\t:url=\"dialogAvatarUrl\" \n\t\t\t:backgroundColor=\"collabBackgroundColor\" \n\t\t/>\n\t`,\n};\n","import { Color } from 'im.v2.const';\n\nimport { AvatarSize } from '../../const/const';\nimport { AvatarType, BaseUiAvatar } from '../base/base-ui-avatar';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CollaberAvatar = {\n\tname: 'CollaberAvatar',\n\tcomponents: { BaseUiAvatar },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tAvatarType: () => AvatarType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tdialogAvatarUrl(): string\n\t\t{\n\t\t\treturn this.dialog.avatar;\n\t\t},\n\t\tcollaberBackgroundColor(): string\n\t\t{\n\t\t\treturn Color.collab60;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseUiAvatar\n\t\t\t:type=\"AvatarType.collaber\"\n\t\t\t:key=\"dialogId\"\n\t\t\t:title=\"dialogName\" \n\t\t\t:size=\"size\" \n\t\t\t:url=\"dialogAvatarUrl\"\n\t\t\t:backgroundColor=\"collaberBackgroundColor\" \n\t\t/>\n\t`,\n};\n","import { Color } from 'im.v2.const';\n\nimport { AvatarSize } from '../../const/const';\nimport { Avatar } from '../base/avatar';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const ExtranetChatAvatar = {\n\tname: 'ExtranetChatAvatar',\n\tcomponents: { Avatar },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tdialogAvatarUrl(): string\n\t\t{\n\t\t\treturn this.dialog.avatar;\n\t\t},\n\t\textranetBackgroundColor(): string\n\t\t{\n\t\t\treturn Color.orange50;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Avatar\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:title=\"dialogName\" \n\t\t\t:size=\"size\" \n\t\t\t:url=\"dialogAvatarUrl\" \n\t\t\t:backgroundColor=\"extranetBackgroundColor\" \n\t\t/>\n\t`,\n};\n","import { AvatarSize } from '../../const/const';\nimport { AvatarType, BaseUiAvatar } from '../base/base-ui-avatar';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const ExtranetUserAvatar = {\n\tname: 'ExtranetUserAvatar',\n\tcomponents: { BaseUiAvatar },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tAvatarType: () => AvatarType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tdialogAvatarUrl(): string\n\t\t{\n\t\t\treturn this.dialog.avatar;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseUiAvatar\n\t\t\t:type=\"AvatarType.extranet\"\n\t\t\t:title=\"dialogName\"\n\t\t\t:size=\"size\"\n\t\t\t:url=\"dialogAvatarUrl\"\n\t\t/>\n\t`,\n};\n","import { AvatarSize } from '../../const/const';\nimport { BaseUiAvatar, AvatarType } from '../base/base-ui-avatar';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CopilotAvatar = {\n\tname: 'CopilotAvatar',\n\tcomponents: { BaseUiAvatar },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\tcustomSource: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tAvatarType: () => AvatarType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tdialogAvatarUrl(): string\n\t\t{\n\t\t\treturn this.customSource.length > 0 ? this.customSource : this.dialog.avatar;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseUiAvatar\n\t\t\t:type=\"AvatarType.copilot\"\n\t\t\t:title=\"dialogName\" \n\t\t\t:size=\"size\" \n\t\t\t:url=\"dialogAvatarUrl\" \n\t\t/>\n\t`,\n};\n","import { AvatarSize, AvatarSizeMap } from '../const/const';\n\nimport '../css/chat-notes-avatar.css';\n\n// @vue/component\nexport const NotesAvatar = {\n\tname: 'NotesAvatar',\n\tinheritAttrs: false,\n\tprops: {\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t},\n\tcomputed: {\n\t\tsizeStyles(): { width: string, height: string }\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: `${AvatarSizeMap[this.size]}px`,\n\t\t\t\theight: `${AvatarSizeMap[this.size]}px`,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-notes-avatar__container\" :style=\"sizeStyles\" :title=\"loc('IM_ELEMENTS_CHAT_MY_NOTES')\"></div>\n\t`,\n};\n","import { ChatType, UserType } from 'im.v2.const';\nimport { CopilotManager } from 'im.v2.lib.copilot';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\n\nimport { AvatarSize, ChatAvatarType } from './const/const';\nimport { Avatar } from './components/base/avatar';\nimport { CollabChatAvatar } from './components/collab/collab-chat';\nimport { CollaberAvatar } from './components/collab/collaber';\nimport { ExtranetChatAvatar } from './components/extranet/extranet-chat-avatar';\nimport { ExtranetUserAvatar } from './components/extranet/extranet-user-avatar';\nimport { CopilotAvatar } from './components/copilot/copilot';\nimport { NotesAvatar } from './components/notes-avatar';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { ImModelChat, ImModelUser } from 'im.v2.model';\n\n// @vue/component\nexport const ChatAvatar = {\n\tname: 'ChatAvatar',\n\tcomponents:\n\t{\n\t\tAvatar,\n\t\tCollabAvatar:\n\t\tCollabChatAvatar,\n\t\tCollaberAvatar,\n\t\tExtranetUserAvatar,\n\t\tNotesAvatar,\n\t\tCopilotAvatar,\n\t},\n\tprops: {\n\t\tavatarDialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tcontextDialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcustomType: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.copilotManager = new CopilotManager();\n\t},\n\tcomputed: {\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.avatarDialog.type === ChatType.user;\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.avatarDialogId, true);\n\t\t},\n\t\tcustomAvatarUrl(): string\n\t\t{\n\t\t\tif (!this.isCopilot)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.copilotManager.getRoleAvatarUrl({\n\t\t\t\tavatarDialogId: this.avatarDialogId,\n\t\t\t\tcontextDialogId: this.contextDialogId,\n\t\t\t});\n\t\t},\n\t\tavatarDialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.avatarDialogId, true);\n\t\t},\n\t\tisCollabChat(): boolean\n\t\t{\n\t\t\treturn this.avatarDialog.type === ChatType.collab;\n\t\t},\n\t\tisCollaber(): boolean\n\t\t{\n\t\t\treturn this.user?.type === UserType.collaber;\n\t\t},\n\t\tisExtranetChat(): boolean\n\t\t{\n\t\t\treturn this.avatarDialog.extranet;\n\t\t},\n\t\tisExtranet(): boolean\n\t\t{\n\t\t\treturn this.user?.type === UserType.extranet;\n\t\t},\n\t\tisCopilot(): boolean\n\t\t{\n\t\t\treturn this.copilotManager.isCopilotChatOrBot(this.avatarDialogId);\n\t\t},\n\t\tisCopilotChatsInRecentTabEnabled(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.showCopilotChatsInRecentTab);\n\t\t},\n\t\tavatarComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\tif (this.customType === ChatAvatarType.notes)\n\t\t\t{\n\t\t\t\treturn NotesAvatar;\n\t\t\t}\n\n\t\t\tif (this.isExtranet)\n\t\t\t{\n\t\t\t\treturn ExtranetUserAvatar;\n\t\t\t}\n\n\t\t\tif (this.isCollaber)\n\t\t\t{\n\t\t\t\treturn CollaberAvatar;\n\t\t\t}\n\n\t\t\tif (this.isCollabChat)\n\t\t\t{\n\t\t\t\treturn CollabChatAvatar;\n\t\t\t}\n\n\t\t\tif (this.isCopilot && this.isCopilotChatsInRecentTabEnabled)\n\t\t\t{\n\t\t\t\treturn CopilotAvatar;\n\t\t\t}\n\n\t\t\treturn this.isExtranetChat ? ExtranetChatAvatar : Avatar;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<component\n\t\t\t:is=\"avatarComponent\"\n\t\t\t:dialogId=\"avatarDialogId\"\n\t\t\t:customSource=\"customAvatarUrl\"\n\t\t\t:size=\"size\"\n\t\t\t:withAvatarLetters=\"withAvatarLetters\"\n\t\t\t:withSpecialTypes=\"withSpecialTypes\"\n\t\t\t:withSpecialTypeIcon=\"withSpecialTypeIcon\"\n\t\t\t:withTooltip=\"withTooltip\"\n\t\t/>\n\t`,\n};\n","import { UserType } from 'im.v2.const';\nimport { CopilotManager } from 'im.v2.lib.copilot';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\n\nimport { AvatarSize } from './const/const';\nimport { Avatar } from './components/base/avatar';\nimport { CollaberAvatar } from './components/collab/collaber';\nimport { CopilotAvatar } from './components/copilot/copilot';\nimport { ExtranetUserAvatar } from './components/extranet/extranet-user-avatar';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { ImModelUser } from 'im.v2.model';\n\n// @vue/component\nexport const MessageAvatar = {\n\tname: 'MessageAvatar',\n\tcomponents: { Avatar, CollaberAvatar, CopilotAvatar },\n\tprops: {\n\t\tmessageId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tauthorId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypeIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcustomAvatarUrl(): string\n\t\t{\n\t\t\tconst copilotManager = new CopilotManager();\n\t\t\tif (!copilotManager.isCopilotMessage(this.messageId))\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn copilotManager.getMessageRoleAvatar(this.messageId);\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.authorId, true);\n\t\t},\n\t\tisCopilotChatsInRecentTabEnabled(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.showCopilotChatsInRecentTab);\n\t\t},\n\t\tavatarComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\tconst avatarMap = {\n\t\t\t\t[UserType.extranet]: ExtranetUserAvatar,\n\t\t\t\t[UserType.collaber]: CollaberAvatar,\n\t\t\t};\n\n\t\t\tif (this.isCopilotChatsInRecentTabEnabled)\n\t\t\t{\n\t\t\t\tavatarMap[UserType.bot] = this.getBotAvatar();\n\t\t\t}\n\n\t\t\treturn avatarMap[this.user.type] ?? Avatar;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tgetBotAvatar(): BitrixVueComponentProps\n\t\t{\n\t\t\tconst copilotManager = new CopilotManager();\n\n\t\t\treturn copilotManager.isCopilotChatOrBot(this.authorId) ? CopilotAvatar : Avatar;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<component\n\t\t\t:is=\"avatarComponent\"\n\t\t\t:dialogId=\"authorId\"\n\t\t\t:customSource=\"customAvatarUrl\"\n\t\t\t:size=\"size\"\n\t\t\t:withAvatarLetters=\"withAvatarLetters\"\n\t\t\t:withSpecialTypes=\"withSpecialTypes\"\n\t\t\t:withSpecialTypeIcon=\"withSpecialTypeIcon\"\n\t\t\t:withTooltip=\"withTooltip\"\n\t\t/>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { Color } from 'im.v2.const';\n\nimport { AvatarSize, EmptyAvatarType } from './const/const';\nimport { AvatarType, BaseUiAvatar } from './components/base/base-ui-avatar';\n\nimport './css/empty-avatar.css';\n\nimport type { JsonObject } from 'main.core';\n\nconst COLLAB_EMPTY_AVATAR_URL = '/bitrix/js/im/v2/component/elements/avatar/src/components/base/css/images/camera.png';\n\n// @vue/component\nexport const EmptyAvatar = {\n\tname: 'EmptyAvatar',\n\tcomponents: { BaseUiAvatar },\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: EmptyAvatarType.default,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\timageLoadError: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tAvatarSize: () => AvatarSize,\n\t\tAvatarType: () => AvatarType,\n\t\tColor: () => Color,\n\t\tisSquared(): boolean\n\t\t{\n\t\t\treturn this.type === EmptyAvatarType.squared;\n\t\t},\n\t\tisCollabType(): boolean\n\t\t{\n\t\t\treturn this.type === EmptyAvatarType.collab;\n\t\t},\n\t\tcollabEmptyAvatarUrl(): string\n\t\t{\n\t\t\tif (!Type.isStringFilled(this.url))\n\t\t\t{\n\t\t\t\treturn COLLAB_EMPTY_AVATAR_URL;\n\t\t\t}\n\n\t\t\treturn this.url;\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--size-${this.size.toLowerCase()}`];\n\t\t\tif (this.isSquared)\n\t\t\t{\n\t\t\t\tclasses.push('--squared');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseUiAvatar\n\t\t\tv-if=\"isCollabType\"\n\t\t\t:type=\"AvatarType.collab\"\n\t\t\t:url=\"collabEmptyAvatarUrl\" \n\t\t\t:size=\"size\"\n\t\t\t:title=\"title\"\n\t\t\t:backgroundColor=\"Color.collab10\"\n\t\t/>\n\t\t<div v-else class=\"bx-im-empty-avatar__container\" :class=\"containerClasses\">\n\t\t\t<div v-if=\"!url\" class=\"bx-im-empty-avatar__avatar --default\"></div>\n\t\t\t<img v-else class=\"bx-im-empty-avatar__avatar --image\" :src=\"url\" :alt=\"title\"/>\n\t\t</div>\n\t`,\n};\n"],"names":["AvatarSize","Object","freeze","XXS","XS","S","M","L","XL","XXL","XXXL","AvatarSizeMap","ChatAvatarType","notes","EmptyAvatarType","default","squared","collab","Avatar","name","props","dialogId","type","String","Number","customSource","size","withAvatarLetters","Boolean","withSpecialTypes","withSpecialTypeIcon","withTooltip","backgroundColor","data","imageLoadError","computed","dialog","$store","getters","isChannel","ChannelManager","isSpecialType","commonTypes","ChatType","user","chat","open","lines","copilot","includes","containerTitle","containerClasses","classes","toLowerCase","push","typeClass","backgroundColorStyle","color","avatarText","showAvatarLetters","isEnoughSizeForText","Utils","text","getFirstLetters","SPECIAL_TYPES_WITH_LETTERS","openChannel","channel","showSpecialTypeIcon","avatarSizesWithText","toUpperCase","avatarUrl","length","avatar","hasImage","watch","methods","onImageLoadError","template","AvatarType","extranet","collaber","BaseUiAvatar","required","validator","value","values","url","title","calculatedSize","setTitle","setAvatarImage","created","classMap","AvatarRoundExtranet","AvatarRoundGuest","AvatarHexagonGuest","AvatarRoundCopilot","AvatarBase","AvatarClass","setBackgroundColor","mounted","$refs","avatarContainer","renderTo","setUserPic","setBaseColor","CollabChatAvatar","components","dialogName","dialogAvatarUrl","collabBackgroundColor","Color","collab60","CollaberAvatar","collaberBackgroundColor","ExtranetChatAvatar","extranetBackgroundColor","orange50","ExtranetUserAvatar","CopilotAvatar","NotesAvatar","inheritAttrs","sizeStyles","width","height","loc","phraseCode","$Bitrix","Loc","getMessage","ChatAvatar","CollabAvatar","avatarDialogId","contextDialogId","customType","copilotManager","CopilotManager","isUser","avatarDialog","customAvatarUrl","isCopilot","getRoleAvatarUrl","isCollabChat","isCollaber","UserType","isExtranetChat","isExtranet","isCopilotChatOrBot","isCopilotChatsInRecentTabEnabled","FeatureManager","isFeatureAvailable","Feature","showCopilotChatsInRecentTab","avatarComponent","MessageAvatar","messageId","authorId","isCopilotMessage","getMessageRoleAvatar","avatarMap","bot","getBotAvatar","COLLAB_EMPTY_AVATAR_URL","EmptyAvatar","isSquared","isCollabType","collabEmptyAvatarUrl","Type","isStringFilled"],"mappings":"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"}