this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(e,t,n,o,s,i,a,l){"use strict";let u=e=>e,r;const p="im-auto-delete-delay-dropdown";const d={name:"AutoDeleteDropdown",props:{currentDelay:{type:Number,required:true}},emits:["delayChange"],data(){return{menuOpened:false,selectedValue:o.AutoDeleteDelay.Off}},computed:{isEnabled(){return this.currentDelay!==o.AutoDeleteDelay.Off},autoDeleteText(){return s.AutoDeleteManager.getStatusText(this.currentDelay)}},beforeUnmount(){var e;(e=this.menuInstance)==null?void 0:e.destroy()},methods:{toggleMenu(){if(this.currentDelay===o.AutoDeleteDelay.Off){return}this.menuInstance=this.getMenuInstance();if(this.menuOpened){this.menuInstance.close();return}this.menuInstance.show();this.menuOpened=true},getMenuInstance(){return n.MenuManager.create({id:p,bindOptions:{forceBindPosition:true,position:"bottom"},offsetTop:6,targetContainer:document.body,bindElement:this.$refs.dropdown,className:"bx-im-messenger__scope bx-im-auto-delete-dropdown__scope",width:193,items:this.getMenuItems(),events:{onClose:()=>{this.menuOpened=false;this.menuInstance.destroy()}}})},getMenuItems(){return Object.values(o.AutoDeleteDelay).map((e=>{const t=e===this.currentDelay;return{html:this.getMenuItemHtml(e,t),onclick:()=>{this.$emit("delayChange",e);this.menuInstance.close()}}}))},getMenuItemHtml(e,t){const n=t?'<span class="bx-im-auto-delete-dropdown__icon"></span>':"";return i.Tag.render(r||(r=u`
				<span class="bx-im-auto-delete-dropdown__item">
					${0}
					${0}
				</span>
			`),s.AutoDeleteManager.getStatusText(e),n)}},template:`\n\t\t<div\n\t\t\tref="dropdown"\n\t\t\tclass="bx-im-auto-delete-dropdown__container bx-im-auto-delete-dropdown__scope"\n\t\t\t:class="{'--enabled': isEnabled}"\n\t\t\t@click="toggleMenu"\n\t\t>\n\t\t\t{{ autoDeleteText }}\n\t\t</div>\n\t`};const c={name:"RadioGroup",props:{items:{type:Array,required:true}},emits:["change"],computed:{selectedValue(){return this.items.find((e=>e.selected)).value}},methods:{onInput(e){this.$emit("change",e)}},template:`\n\t\t<div class="bx-im-auto-delete-popup-radio__container">\n\t\t\t<label v-for="option in items" class="bx-im-auto-delete-popup-radio__option">\n\t\t\t\t<input\n\t\t\t\t\ttype="radio"\n\t\t\t\t\tclass="bx-im-auto-delete-popup-radio__input"\n\t\t\t\t\t:value="option.value"\n\t\t\t\t\t:checked="option.value === selectedValue"\n\t\t\t\t\t@change="onInput(option.value)"\n\t\t\t\t/>\n\t\t\t\t<span class="bx-im-auto-delete-popup-radio__label">{{ option.text }}</span>\n\t\t\t</label>\n\t\t</div>\n\t`};const m="auto-delete-choose-delay-popup";const g={name:"AutoDeletePopup",components:{MessengerPopup:a.MessengerPopup,RadioGroup:c},props:{autoDeleteDelay:{type:Number,default:0}},emits:["close","autoDeleteDelayChange"],computed:{POPUP_ID:()=>m,config(){return{overlay:true,height:342,width:400,titleBar:this.loc("IM_ELEMENTS_AUTO_DELETE_POPUP_TITLE"),closeIcon:true,targetContainer:document.body,fixed:true,padding:0,autoHide:true,contentPadding:0,contentBackground:"#fff",className:"bx-im-auto-delete-popup__scope"}},options(){return Object.values(o.AutoDeleteDelay).map((e=>({value:e,text:s.AutoDeleteManager.getStatusText(e),selected:this.autoDeleteDelay===e})))}},methods:{onAutoDeleteDelayChange(e){this.$emit("autoDeleteDelayChange",e);this.$emit("close")},loc(e){return this.$Bitrix.Loc.getMessage(e)}},template:`\n\t\t<MessengerPopup\n\t\t\t:config="config"\n\t\t\t:id="POPUP_ID"\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<div class="bx-im-auto-delete-popup__container">\n\t\t\t\t<div class="bx-im-auto-delete-popup__info">\n\t\t\t\t\t{{ this.loc('IM_ELEMENTS_AUTO_DELETE_POPUP_INFO') }}\n\t\t\t\t</div>\n\t\t\t\t<RadioGroup :items="options" @change="onAutoDeleteDelayChange" />\n\t\t\t</div>\n\t\t</MessengerPopup>\n\t`};const h="im-auto-delete-hint-popup";const _={name:"AutoDeleteHint",components:{MessengerPopup:a.MessengerPopup},props:{bindElement:{type:Object,required:true},config:{type:Object,default:()=>{}}},emits:["close"],computed:{POPUP_ID:()=>h,getConfig(){return{darkMode:true,bindElement:this.bindElement,angle:true,width:317,closeIcon:true,offsetLeft:45,className:"bx-im-auto-delete-hint__scope",contentBorderRadius:0,...this.config}},hintText(){const e="24402288";const t=l.getHelpdeskStringCallback(e);return i.Loc.getMessage("IM_ELEMENTS_AUTO_DELETE_NO_PERMISSION",{"[helpdesklink]":`<a class="bx-im-auto-delete-hint__helpdesk-link" onclick="${t}">`,"[/helpdesklink]":"</a>"})}},template:`\n\t\t<MessengerPopup\n\t\t\t:config="getConfig"\n\t\t\t:id="POPUP_ID"\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<div class="bx-im-auto-delete-hint__container">\n\t\t\t\t<div class="bx-im-auto-delete-hint__text" v-html="hintText" />\n\t\t\t</div>\n\t\t</MessengerPopup>\n\t`};e.AutoDeleteDropdown=d;e.AutoDeletePopup=g;e.AutoDeleteHint=_})(this.BX.Messenger.v2.Component.Elements=this.BX.Messenger.v2.Component.Elements||{},BX,BX.Main,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Lib);
//# sourceMappingURL=registry.bundle.map.js