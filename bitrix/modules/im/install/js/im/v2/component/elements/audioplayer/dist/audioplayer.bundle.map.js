{"version":3,"file":"audioplayer.bundle.map.js","names":["this","BX","Messenger","v2","Component","exports","ui_fonts_opensans","main_polyfill_intersectionobserver","main_core_events","im_v2_const","im_v2_lib_localStorage","im_v2_lib_utils","im_v2_component_elements_avatar","ID_KEY","AudioPlayer","name","components","MessageAvatar","props","id","type","Number","default","src","String","file","Object","required","authorId","messageId","timelineType","withContextMenu","Boolean","withAvatar","withPlaybackRateControl","data","preload","loaded","loading","state","AudioPlaybackState","none","progress","progressInPixel","seek","timeCurrent","timeTotal","showContextButton","currentRate","AudioPlaybackRate","computed","State","seekPosition","isPlaying","play","labelTime","time","Utils","date","formatMediaDurationTime","AvatarSize","fileSize","formatFileSize","size","progressPosition","width","activeTimelineStyles","TIMELINE_VERTICAL_SHIFT","ACTIVE_TIMELINE_VERTICAL_SHIFT","shift","timelineStyles","getAudioPlayerIds","$Bitrix","Data","get","currentRateLabel","metaInfo","watch","value","registerPlayer","preloadNext","created","localStorageInst","LocalStorageManager","getInstance","getRateFromLS","preloadRequestSent","registeredId","EventEmitter","subscribe","EventType","audioPlayer","onPlay","stop","onStop","pause","onPause","onPreload","mounted","getObserver","observe","$refs","body","beforeUnmount","unregisterPlayer","unsubscribe","unobserve","methods","loadFile","source","clickToButton","updateRate","setPosition","pixelPerPercent","track","offsetWidth","setProgress","currentTime","LocalStorageKey","audioPlaybackRate","setRateInLS","newRate","set","getNextPlaybackRate","rates","values","sort","currentIndex","indexOf","nextIndex","length","changeRate","includes","commonCurrentRate","playbackRate","seeking","event","offsetX","percent","pixel","Math","round","audioIdArray","Set","a","b","filter","playNext","nextId","slice","emit","start","getData","initiator","audioEventRouter","eventName","duration","console","error","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","threshold","template","Elements","Event","Const","Lib"],"sources":["audioplayer.bundle.js"],"mappings":"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","ignoreList":[]}