{"version":3,"file":"search-input.bundle.js","sources":["../src/search-input.js"],"sourcesContent":["import { Utils } from 'im.v2.lib.utils';\nimport { Spinner, SpinnerSize, SpinnerColor } from 'im.v2.component.elements.loader';\n\nimport './search-input.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const SearchInput = {\n\tname: 'SearchInput',\n\tcomponents: {\n\t\tSpinner,\n\t},\n\tprops: {\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsearchMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithLoader: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdelayForFocusOnStart: {\n\t\t\ttype: Number || null,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['queryChange', 'inputFocus', 'inputBlur', 'keyPressed', 'close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tquery: '',\n\t\t\thasFocus: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tSpinnerSize: () => SpinnerSize,\n\t\tSpinnerColor: () => SpinnerColor,\n\t\tisEmptyQuery(): boolean\n\t\t{\n\t\t\treturn this.query.length === 0;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tsearchMode(newValue: boolean)\n\t\t{\n\t\t\tif (newValue === true)\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.query = '';\n\t\t\t\tthis.blur();\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.delayForFocusOnStart === 0)\n\t\t{\n\t\t\tthis.focus();\n\t\t}\n\t\telse if (this.delayForFocusOnStart > 0)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.focus();\n\t\t\t}, this.delayForFocusOnStart);\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonInputUpdate()\n\t\t{\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t},\n\t\tonFocus()\n\t\t{\n\t\t\tthis.focus();\n\t\t\tthis.$emit('inputFocus');\n\t\t},\n\t\tonCloseClick()\n\t\t{\n\t\t\tthis.query = '';\n\t\t\tthis.hasFocus = false;\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tonClearInput()\n\t\t{\n\t\t\tthis.query = '';\n\t\t\tthis.focus();\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t},\n\t\tonKeyUp(event: KeyboardEvent)\n\t\t{\n\t\t\tif (Utils.key.isCombination(event, 'Escape'))\n\t\t\t{\n\t\t\t\tthis.onEscapePressed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('keyPressed', event);\n\t\t},\n\t\tonEscapePressed()\n\t\t{\n\t\t\tif (this.isEmptyQuery)\n\t\t\t{\n\t\t\t\tthis.onCloseClick();\n\t\t\t\tthis.blur();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onClearInput();\n\t\t\t}\n\t\t},\n\t\tfocus()\n\t\t{\n\t\t\tthis.hasFocus = true;\n\t\t\tthis.$refs.searchInput.focus();\n\t\t},\n\t\tblur()\n\t\t{\n\t\t\tthis.hasFocus = false;\n\t\t\tthis.$refs.searchInput.blur();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-search-input__scope bx-im-search-input__container\" :class=\"{'--has-focus': hasFocus}\">\n\t\t\t<div v-if=\"!isLoading\" class=\"bx-im-search-input__search-icon\"></div>\n\t\t\t<Spinner \n\t\t\t\tv-if=\"withLoader && isLoading\" \n\t\t\t\t:size=\"SpinnerSize.XXS\" \n\t\t\t\t:color=\"SpinnerColor.grey\" \n\t\t\t\tclass=\"bx-im-search-input__loader\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\t@focus=\"onFocus\"\n\t\t\t\t@input=\"onInputUpdate\"\n\t\t\t\t@keyup=\"onKeyUp\"\n\t\t\t\tv-model=\"query\"\n\t\t\t\tclass=\"bx-im-search-input__element\"\n\t\t\t\t:class=\"{'--with-icon': withIcon}\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\tref=\"searchInput\"\n\t\t\t/>\n\t\t\t<div v-if=\"hasFocus\" class=\"bx-im-search-input__close-icon\" @click=\"onCloseClick\"></div>\n\t\t</div>\n\t`,\n};\n"],"names":["SearchInput","name","components","Spinner","props","placeholder","type","String","default","searchMode","Boolean","withIcon","withLoader","isLoading","delayForFocusOnStart","Number","emits","data","query","hasFocus","computed","SpinnerSize","SpinnerColor","isEmptyQuery","length","watch","newValue","focus","blur","mounted","setTimeout","methods","onInputUpdate","$emit","onFocus","onCloseClick","onClearInput","onKeyUp","event","Utils","key","isCombination","onEscapePressed","$refs","searchInput","template"],"mappings":"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"}