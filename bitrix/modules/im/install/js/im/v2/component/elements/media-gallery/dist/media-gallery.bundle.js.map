{"version":3,"file":"media-gallery.bundle.js","sources":["../src/components/image-item.js","../src/media-item.js","../src/media-gallery.js"],"sourcesContent":["import { Type } from 'main.core';\nimport { lazyload } from 'ui.vue3.directives.lazyload';\nimport { FileType, FileViewerContext } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ProgressBar } from\t'im.v2.component.elements.progressbar';\n\nimport '../css/components/image-item.css';\n\nimport type { ImModelFile } from 'im.v2.model';\n\nconst MAX_WIDTH = 488;\nconst MAX_HEIGHT = 340;\nconst MIN_WIDTH = 200;\nconst MIN_HEIGHT = 100;\n\n// @vue/component\nexport const ImageItem = {\n\tname: 'ImageItem',\n\tdirectives: { lazyload },\n\tcomponents: { ProgressBar },\n\tprops: {\n\t\t/** @type ImModelFile */\n\t\tfile: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisGallery: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tallowRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['remove', 'cancelClick'],\n\tcomputed: {\n\t\timageSize(): {width: string, height: string, backgroundSize: string}\n\t\t{\n\t\t\tif (this.isGallery)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tlet newWidth = this.file.image.width;\n\t\t\tlet newHeight = this.file.image.height;\n\n\t\t\tif (this.file.image.width > MAX_WIDTH || this.file.image.height > MAX_HEIGHT)\n\t\t\t{\n\t\t\t\tconst aspectRatio = this.file.image.width / this.file.image.height;\n\n\t\t\t\tif (this.file.image.width > MAX_WIDTH)\n\t\t\t\t{\n\t\t\t\t\tnewWidth = MAX_WIDTH;\n\t\t\t\t\tnewHeight = Math.round(MAX_WIDTH / aspectRatio);\n\t\t\t\t}\n\n\t\t\t\tif (newHeight > MAX_HEIGHT)\n\t\t\t\t{\n\t\t\t\t\tnewWidth = Math.round(MAX_HEIGHT * aspectRatio);\n\t\t\t\t\tnewHeight = MAX_HEIGHT;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst sizes = {\n\t\t\t\twidth: Math.max(newWidth, MIN_WIDTH),\n\t\t\t\theight: Math.max(newHeight, MIN_HEIGHT),\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\twidth: `${sizes.width}px`,\n\t\t\t\theight: `${sizes.height}px`,\n\t\t\t\t'object-fit': (sizes.width < 100 || sizes.height < 100) ? 'cover' : 'contain',\n\t\t\t};\n\t\t},\n\t\tviewerAttributes(): Object\n\t\t{\n\t\t\treturn Utils.file.getViewerDataAttributes({\n\t\t\t\tviewerAttributes: this.file.viewerAttrs,\n\t\t\t\tpreviewImageSrc: this.file.urlPreview,\n\t\t\t\tcontext: FileViewerContext.dialog,\n\t\t\t});\n\t\t},\n\t\tcanBeOpenedWithViewer(): boolean\n\t\t{\n\t\t\treturn this.file.viewerAttrs && BX.UI?.Viewer;\n\t\t},\n\t\timageTitle(): string\n\t\t{\n\t\t\tconst size = Utils.file.formatFileSize(this.file.size);\n\n\t\t\treturn this.loc(\n\t\t\t\t'IM_ELEMENTS_MEDIA_IMAGE_TITLE',\n\t\t\t\t{\n\t\t\t\t\t'#NAME#': this.file.name,\n\t\t\t\t\t'#SIZE#': size,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tisLoaded(): boolean\n\t\t{\n\t\t\treturn this.file.progress === 100;\n\t\t},\n\t\tisVideo(): boolean\n\t\t{\n\t\t\treturn this.file.type === FileType.video;\n\t\t},\n\t\tshowPlayIcon(): boolean\n\t\t{\n\t\t\treturn this.isVideo && (this.isLoaded || !this.handleLoading);\n\t\t},\n\t\tisAnimated(): boolean\n\t\t{\n\t\t\treturn this.file.extension === 'gif' || this.file.extension === 'webp';\n\t\t},\n\t\tpreviewSourceLink(): string\n\t\t{\n\t\t\tif (this.isAnimated)\n\t\t\t{\n\t\t\t\treturn this.file.urlShow || this.file.urlDownload;\n\t\t\t}\n\n\t\t\treturn this.file.urlPreview;\n\t\t},\n\t\tallowLazyLoad(): boolean\n\t\t{\n\t\t\treturn !this.previewSourceLink.startsWith('blob:');\n\t\t},\n\t\twithoutPreview(): boolean\n\t\t{\n\t\t\treturn !Type.isStringFilled(this.previewSourceLink);\n\t\t},\n\t},\n\tmethods: {\n\t\tdownload()\n\t\t{\n\t\t\tif (this.file.progress !== 100 || this.canBeOpenedWithViewer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow.open(this.file.urlDownload, '_blank');\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonRemoveClick()\n\t\t{\n\t\t\tthis.$emit('remove', { file: this.file });\n\t\t},\n\t\tonCancelClick(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\tv-bind=\"viewerAttributes\" \n\t\t\tclass=\"bx-im-elements-media-gallery-image-item__container\" \n\t\t\t:class=\"{'--without-preview': withoutPreview}\"\n\t\t\t@click=\"download\"\n\t\t\t:style=\"imageSize\"\n\t\t>\n\t\t\t<img\n\t\t\t\tv-if=\"allowLazyLoad\"\n\t\t\t\tv-lazyload\n\t\t\t\tdata-lazyload-dont-hide\n\t\t\t\t:data-lazyload-src=\"previewSourceLink\"\n\t\t\t\t:title=\"imageTitle\"\n\t\t\t\t:alt=\"file.name\"\n\t\t\t\tclass=\"bx-im-elements-media-gallery-image-item__source\"\n\t\t\t/>\n\t\t\t<img\n\t\t\t\tv-else\n\t\t\t\t:src=\"previewSourceLink\"\n\t\t\t\t:title=\"imageTitle\"\n\t\t\t\t:alt=\"file.name\"\n\t\t\t\tclass=\"bx-im-elements-media-gallery-image-item__source\"\n\t\t\t/>\n\t\t\t<ProgressBar \n\t\t\t\tv-if=\"handleLoading && !isLoaded\" \n\t\t\t\t:item=\"file\" \n\t\t\t\t:withLabels=\"!isGallery\" \n\t\t\t\t@cancelClick=\"onCancelClick\"\n\t\t\t/>\n\t\t\t<div v-if=\"showPlayIcon\" class=\"bx-im-elements-media-gallery-image-item__play-icon-container\">\n\t\t\t\t<div class=\"bx-im-elements-media-gallery-image-item__play-icon\"></div>\n\t\t\t</div>\n\t\t\t<div v-if=\"allowRemove\" class=\"bx-im-elements-media-gallery-image-item__remove\" @click=\"onRemoveClick\">\n\t\t\t\t<div class=\"bx-im-elements-media-gallery-image-item__remove-icon\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ImageItem } from './components/image-item';\n\nimport type { ImModelFile } from 'im.v2.model';\n\nconst MediaComponents = Object.freeze({\n\timage: 'ImageItem',\n\tvideo: 'ImageItem',\n});\n\n// @vue/component\nexport const MediaItem = {\n\tname: 'MediaItem',\n\tcomponents: { ImageItem },\n\tprops: {\n\t\t/** @type { ImModelFile } */\n\t\tfile: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tallowRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['remove', 'cancelClick'],\n\tcomputed: {\n\t\tcomponentName(): string\n\t\t{\n\t\t\treturn MediaComponents[this.file.type];\n\t\t},\n\t},\n\tmethods: {\n\t\tonRemove(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('remove', event);\n\t\t},\n\t\tonCancel(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<component\n\t\t\t:is=\"componentName\"\n\t\t\t:file=\"file\"\n\t\t\t:allowRemove=\"allowRemove\"\n\t\t\t:handleLoading=\"handleLoading\"\n\t\t\t@remove=\"onRemove\"\n\t\t\t@cancelClick=\"onCancel\"\n\t\t/>\n\t`,\n};\n","import type { ImModelFile } from 'im.v2.model';\n\nimport { MediaItem } from './media-item';\n\nimport './css/media-gallery.css';\n\ntype GalleryStyles = {\n\tgridTemplateRows: string,\n};\n\n// @vue/component\nexport const MediaGallery = {\n\tname: 'MediaGallery',\n\tcomponents: { MediaItem },\n\tprops: {\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tallowRemoveItem: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thandleLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['removeItem', 'cancelClick'],\n\tcomputed: {\n\t\tfirstFile(): ImModelFile\n\t\t{\n\t\t\treturn this.files[0];\n\t\t},\n\t\tfilesCount(): number\n\t\t{\n\t\t\treturn this.files.length;\n\t\t},\n\t\tisGallery(): boolean\n\t\t{\n\t\t\treturn this.filesCount > 1;\n\t\t},\n\t\tisSingleFile(): boolean\n\t\t{\n\t\t\treturn this.filesCount === 1;\n\t\t},\n\t\tisError(): boolean\n\t\t{\n\t\t\treturn this.filesCount === 0;\n\t\t},\n\t\ttemplateRows(): string\n\t\t{\n\t\t\tif (this.filesCount >= 7)\n\t\t\t{\n\t\t\t\treturn '140px 80px 80px 58px';\n\t\t\t}\n\n\t\t\tif (this.filesCount >= 3)\n\t\t\t{\n\t\t\t\treturn '140px 80px 80px';\n\t\t\t}\n\n\t\t\treturn '140px 80px';\n\t\t},\n\t\tgalleryStyles(): GalleryStyles\n\t\t{\n\t\t\treturn {\n\t\t\t\tgridTemplateRows: this.templateRows,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonRemoveItem(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('removeItem', event);\n\t\t},\n\t\tonCancel(event: { file: ImModelFile })\n\t\t{\n\t\t\tthis.$emit('cancelClick', event);\n\t\t},\n\t\tgetMediaItemStyles(index: number): { [key: string]: string }\n\t\t{\n\t\t\tconst spanValues = {\n\t\t\t\t10: ['1-4', '1-1', '1-2', '1-1', '1-1', '1-2', '1-1', '1-1', '1-2', '1-1'],\n\t\t\t\t9: ['1-4', '1-1', '1-2', '1-1', '1-2', '1-2', '1-1', '1-2', '1-1'],\n\t\t\t\t8: ['1-4', '1-2', '1-2', '1-1', '1-2', '1-1', '1-2', '1-2'],\n\t\t\t\t7: ['1-4', '1-2', '1-2', '1-2', '1-2', '1-2', '1-2'],\n\t\t\t\t6: ['1-4', '1-2', '1-2', '1-1', '1-2', '1-1'],\n\t\t\t\t5: ['1-4', '1-2', '1-2', '1-2', '1-2'],\n\t\t\t\t4: ['2-4', '1-1', '1-2', '1-1'],\n\t\t\t\t3: ['2-4', '1-2', '1-2'],\n\t\t\t\t2: ['2-2', '2-2'],\n\t\t\t};\n\n\t\t\tconst spanValue = spanValues[this.filesCount]?.[index] ?? '1-1';\n\t\t\tconst [rowSpan, colSpan] = spanValue.split('-');\n\n\t\t\treturn {\n\t\t\t\t'grid-row-end': `span ${rowSpan}`,\n\t\t\t\t'grid-column-end': `span ${colSpan}`,\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-media-gallery__container\">\n\t\t\t<div v-if=\"isGallery\" class=\"bx-im-elements-media-gallery__items\" :style=\"galleryStyles\">\n\t\t\t\t<MediaItem\n\t\t\t\t\tv-for=\"(file, index) in files\"\n\t\t\t\t\t:key=\"file.id\"\n\t\t\t\t\t:file=\"file\"\n\t\t\t\t\t:allowRemove=\"allowRemoveItem\"\n\t\t\t\t\t:handleLoading=\"handleLoading\"\n\t\t\t\t\t:style=\"getMediaItemStyles(index)\"\n\t\t\t\t\t@remove=\"onRemoveItem\"\n\t\t\t\t\t@cancelClick=\"onCancel\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"isSingleFile\" class=\"bx-im-elements-media-gallery__single-file\">\n\t\t\t\t<MediaItem\n\t\t\t\t\t:file=\"firstFile\"\n\t\t\t\t\t:allowRemove=\"allowRemoveItem\"\n\t\t\t\t\t:handleLoading=\"handleLoading\"\n\t\t\t\t\t:isGallery=\"false\"\n\t\t\t\t\t@remove=\"onRemoveItem\"\n\t\t\t\t\t@cancelClick=\"onCancel\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"isError\" class=\"bx-im-elements-media-gallery__error\">\n\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["MAX_WIDTH","MAX_HEIGHT","MIN_WIDTH","MIN_HEIGHT","ImageItem","name","directives","lazyload","components","ProgressBar","props","file","type","Object","required","isGallery","Boolean","default","handleLoading","allowRemove","emits","computed","imageSize","newWidth","image","width","newHeight","height","aspectRatio","Math","round","sizes","max","viewerAttributes","Utils","getViewerDataAttributes","viewerAttrs","previewImageSrc","urlPreview","context","FileViewerContext","dialog","canBeOpenedWithViewer","BX","UI","Viewer","imageTitle","size","formatFileSize","loc","isLoaded","progress","isVideo","FileType","video","showPlayIcon","isAnimated","extension","previewSourceLink","urlShow","urlDownload","allowLazyLoad","startsWith","withoutPreview","Type","isStringFilled","methods","download","window","open","phraseCode","replacements","$Bitrix","Loc","getMessage","onRemoveClick","$emit","onCancelClick","event","template","MediaComponents","freeze","MediaItem","componentName","onRemove","onCancel","MediaGallery","files","Array","allowRemoveItem","firstFile","filesCount","length","isSingleFile","isError","templateRows","galleryStyles","gridTemplateRows","onRemoveItem","getMediaItemStyles","index","spanValues","spanValue","rowSpan","colSpan","split"],"mappings":"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"}