{"version":3,"file":"recent-compact.bundle.js","sources":["../src/components/compact-navigation-item.js","../src/components/compact-navigation.js","../src/components/recent-item.js","../src/components/active-call.js","../src/components/empty-state.js","../src/recent-compact.js"],"sourcesContent":["import { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\n\nimport { Messenger } from 'im.public';\nimport { NavigationMenuItem, Color } from 'im.v2.const';\n\nconst NavigationItemToIcon = Object.freeze({\n\t[NavigationMenuItem.notification]: OutlineIcons.NOTIFICATION,\n\t[NavigationMenuItem.copilot]: OutlineIcons.COPILOT,\n\t[NavigationMenuItem.openlines]: OutlineIcons.OPEN_CHANNELS,\n\t[NavigationMenuItem.openlinesV2]: OutlineIcons.OPEN_CHANNELS,\n});\n\nconst ICON_SIZE = 24;\n\n// @vue/component\nexport const CompactNavigationItem = {\n\tname: 'CompactNavigationItem',\n\tcomponents: { BIcon },\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tICON_SIZE: () => ICON_SIZE,\n\t\tColor: () => Color,\n\t\tNavigationItemToIcon: () => NavigationItemToIcon,\n\t\tcounter(): number\n\t\t{\n\t\t\tconst counterToItemId = {\n\t\t\t\t[NavigationMenuItem.notification]: 'notifications/getCounter',\n\t\t\t\t[NavigationMenuItem.copilot]: 'counters/getTotalCopilotCounter',\n\t\t\t\t[NavigationMenuItem.openlines]: 'counters/getTotalLinesCounter',\n\t\t\t\t[NavigationMenuItem.openlinesV2]: 'counters/getTotalLinesCounter',\n\t\t\t};\n\n\t\t\treturn this.$store.getters[counterToItemId[this.id]] ?? 0;\n\t\t},\n\t\thasCounter(): boolean\n\t\t{\n\t\t\treturn this.counter > 0;\n\t\t},\n\t\tformattedCounter(): string\n\t\t{\n\t\t\tif (!this.hasCounter)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.counter > 99 ? '99+' : String(this.counter);\n\t\t},\n\t\ticonColorToken(): string\n\t\t{\n\t\t\tif (this.counter > 0)\n\t\t\t{\n\t\t\t\treturn 'var(--ui-color-design-outline-content)';\n\t\t\t}\n\n\t\t\treturn 'var(--ui-color-design-outline-na-content)';\n\t\t},\n\t},\n\tmethods: {\n\t\tonNavigationItemClick(): void\n\t\t{\n\t\t\tvoid Messenger.openNavigationItem({ id: this.id });\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-compact-navigation__icon --ui-hoverable\">\n\t\t\t<BIcon\n\t\t\t\t:key=\"id\"\n\t\t\t\t:name=\"NavigationItemToIcon[id]\"\n\t\t\t\t:hoverable-alt=\"true\"\n\t\t\t\t:color=\"iconColorToken\"\n\t\t\t\t:size=\"ICON_SIZE\"\n\t\t\t\t@click=\"onNavigationItemClick\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"hasCounter\"\n\t\t\t\tclass=\"bx-im-compact-navigation__icon-counter\"\n\t\t\t>\n\t\t\t\t{{ formattedCounter }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import 'ui.design-tokens.air';\nimport { Extension } from 'main.core';\n\nimport { NavigationMenuItem } from 'im.v2.const';\nimport { LayoutManager } from 'im.v2.lib.layout';\n\nimport { CompactNavigationItem } from './compact-navigation-item';\n\nimport '../css/compact-navigation.css';\n\nconst CompactNavigationItems = [\n\tNavigationMenuItem.notification,\n\tNavigationMenuItem.copilot,\n\tNavigationMenuItem.openlines,\n\tNavigationMenuItem.openlinesV2,\n];\n\ntype NavigationItem = {\n\tid: string,\n\ttext: string,\n\tentityId: number | null,\n}\n\n// @vue/component\nexport const CompactNavigation = {\n\tname: 'CompactNavigation',\n\tcomponents: { CompactNavigationItem },\n\tcomputed: {\n\t\tavailableNavigationItems(): string[]\n\t\t{\n\t\t\tconst settings = Extension.getSettings('im.v2.component.list.items.recent-compact');\n\t\t\tconst items: NavigationItem[] = settings.get('navigationItems', []);\n\n\t\t\treturn items.map((item) => item.id);\n\t\t},\n\t\tpreparedNavigationItems(): string[]\n\t\t{\n\t\t\treturn CompactNavigationItems.filter((item) => this.availableNavigationItems.includes(item));\n\t\t},\n\t\tisAirDesignAvailable(): boolean\n\t\t{\n\t\t\treturn LayoutManager.getInstance().isAirDesignEnabled();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isAirDesignAvailable\" class=\"bx-im-compact-navigation__container\">\n\t\t\t<div class=\"bx-im-compact-navigation__items\">\n\t\t\t\t<CompactNavigationItem\n\t\t\t\t\tv-for=\"navigationItemId in preparedNavigationItems\"\n\t\t\t\t\t:id=\"navigationItemId\"\n\t\t\t\t\t:key=\"navigationItemId\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-compact-navigation__delimiter\"></div>\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\nimport { ChatAvatar, AvatarSize, ChatAvatarType } from 'im.v2.component.elements.avatar';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelRecentItem, ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const RecentItem = {\n\tname: 'RecentItem',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\trecentItem(): ImModelRecentItem\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.recentItem.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisChatMuted(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst isMuted = this.dialog.muteList.find((element) => {\n\t\t\t\treturn element === Core.getUserId();\n\t\t\t});\n\n\t\t\treturn Boolean(isMuted);\n\t\t},\n\t\tinvitation(): { isActive: boolean, originator: number, canResend: boolean }\n\t\t{\n\t\t\treturn this.recentItem.invitation;\n\t\t},\n\t\ttotalCounter(): number\n\t\t{\n\t\t\treturn this.dialog.counter + this.channelCommentsCounter;\n\t\t},\n\t\tchannelCommentsCounter(): number\n\t\t{\n\t\t\treturn this.$store.getters['counters/getChannelCommentsCounter'](this.dialog.chatId);\n\t\t},\n\t\tformattedCounter(): string\n\t\t{\n\t\t\treturn this.totalCounter > 99 ? '99+' : this.totalCounter.toString();\n\t\t},\n\t\twrapClasses(): Object\n\t\t{\n\t\t\treturn { '--pinned': this.recentItem.pinned };\n\t\t},\n\t\titemClasses(): Object\n\t\t{\n\t\t\treturn { '--no-counter': this.totalCounter === 0 };\n\t\t},\n\t\tgetAvatarType(): string\n\t\t{\n\t\t\treturn Number.parseInt(this.recentItem.dialogId, 10) === Core.getUserId() ? ChatAvatarType.notes : '';\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div :data-id=\"recentItem.dialogId\" :class=\"wrapClasses\" class=\"bx-im-list-recent-compact-item__wrap\">\n\t\t\t<div :class=\"itemClasses\" class=\"bx-im-list-recent-compact-item__container\" ref=\"container\">\n\t\t\t\t<div class=\"bx-im-list-recent-compact-item__avatar_container\">\n\t\t\t\t\t<div v-if=\"invitation.isActive\" class=\"bx-im-list-recent-compact-item__avatar_invitation\"></div>\n\t\t\t\t\t<ChatAvatar \n\t\t\t\t\t\tv-else \n\t\t\t\t\t\t:contextDialogId=\"recentItem.dialogId\"\n\t\t\t\t\t\t:avatarDialogId=\"recentItem.dialogId\"\n\t\t\t\t\t\t:size=\"AvatarSize.M\" \n\t\t\t\t\t\t:withSpecialTypes=\"false\"\n\t\t\t\t\t\t:customType=\"getAvatarType\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-if=\"totalCounter > 0\" :class=\"{'--muted': isChatMuted}\" class=\"bx-im-list-recent-compact-item__avatar_counter\">\n\t\t\t\t\t\t{{ formattedCounter }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatAvatar, AvatarSize } from 'im.v2.component.elements.avatar';\n\nimport type { ImModelCallItem } from 'im.v2.model';\n\n// @vue/component\nexport const ActiveCall = {\n\tname: 'ActiveCall',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['click'],\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tactiveCall(): ImModelCallItem\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonClick(event)\n\t\t{\n\t\t\tconst recentItem = this.$store.getters['recent/get'](this.activeCall.dialogId);\n\t\t\tif (!recentItem)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$emit('click', { item: recentItem, $event: event });\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"activeCall.dialogId\" class=\"bx-im-list-recent-compact-item__wrap\">\n\t\t\t<div @click=\"onClick\" class=\"bx-im-list-recent-compact-item__container\">\n\t\t\t\t<div class=\"bx-im-list-recent-compact-item__avatar_container\">\n\t\t\t\t\t<ChatAvatar \n\t\t\t\t\t\t:avatarDialogId=\"activeCall.dialogId\"\n\t\t\t\t\t\t:contextDialogId=\"activeCall.dialogId\"\n\t\t\t\t\t\t:size=\"AvatarSize.M\" \n\t\t\t\t\t\t:withSpecialTypes=\"false\" \n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"bx-im-list-recent-compact-active-call__icon\" :class=\"'--' + activeCall.state\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const EmptyState = {\n\tname: 'EmptyState',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-recent-compact__empty\">\n\t\t\t{{ loc('IM_LIST_RECENT_COMPACT_EMPTY') }}\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { ChatType, Settings } from 'im.v2.const';\nimport { LayoutManager } from 'im.v2.lib.layout';\nimport { Utils } from 'im.v2.lib.utils';\nimport { RecentService } from 'im.v2.provider.service.recent';\nimport { RecentMenu } from 'im.v2.lib.menu';\nimport { Messenger } from 'im.public';\nimport 'im.v2.css.tokens';\n\nimport { CompactNavigation } from './components/compact-navigation';\nimport { RecentItem } from './components/recent-item';\nimport { ActiveCall } from './components/active-call';\nimport { EmptyState } from './components/empty-state';\n\nimport './css/recent-list.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelRecentItem, ImModelCallItem } from 'im.v2.model';\n\n// @vue/component\nexport const RecentList = {\n\tname: 'RecentList',\n\tcomponents: { RecentItem, ActiveCall, EmptyState, CompactNavigation },\n\temits: ['chatClick'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcollection(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.getRecentService().getCollection();\n\t\t},\n\t\tpreparedItems(): ImModelRecentItem[]\n\t\t{\n\t\t\tconst filteredCollection = this.collection.filter((item) => {\n\t\t\t\tlet result = true;\n\t\t\t\tif (!this.showBirthdays && item.isBirthdayPlaceholder)\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\tif (item.isFakeElement && !this.isFakeItemNeeded(item))\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t});\n\n\t\t\treturn [...filteredCollection].sort((a, b) => {\n\t\t\t\tconst firstDate = this.$store.getters['recent/getSortDate'](a.dialogId);\n\t\t\t\tconst secondDate = this.$store.getters['recent/getSortDate'](b.dialogId);\n\n\t\t\t\treturn secondDate - firstDate;\n\t\t\t});\n\t\t},\n\t\tactiveCalls(): ImModelCallItem[]\n\t\t{\n\t\t\treturn this.$store.getters['recent/calls/get'];\n\t\t},\n\t\tpinnedItems(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.preparedItems.filter((item) => {\n\t\t\t\treturn item.pinned === true;\n\t\t\t});\n\t\t},\n\t\tgeneralItems(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.preparedItems.filter((item) => {\n\t\t\t\treturn item.pinned === false;\n\t\t\t});\n\t\t},\n\t\tshowBirthdays(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showBirthday);\n\t\t},\n\t\tshowInvited(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showInvited);\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--air': LayoutManager.getInstance().isAirDesignEnabled(),\n\t\t\t};\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tthis.contextMenuManager = new RecentMenu();\n\n\t\tthis.managePreloadedList();\n\n\t\tawait this.getRecentService().loadFirstPage();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.contextMenuManager.destroy();\n\t},\n\tmethods:\n\t{\n\t\tonClick(item)\n\t\t{\n\t\t\tMessenger.openChat(item.dialogId);\n\t\t},\n\t\tonRightClick(item, event)\n\t\t{\n\t\t\tif (Utils.key.isCombination(event, 'Alt+Shift'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst context = {\n\t\t\t\t...item,\n\t\t\t\tcompactMode: true,\n\t\t\t};\n\n\t\t\tthis.contextMenuManager.openMenu(context, event.currentTarget);\n\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tmanagePreloadedList()\n\t\t{\n\t\t\tconst { preloadedList } = Core.getApplicationData();\n\t\t\tif (!preloadedList)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getRecentService().setPreloadedData(preloadedList);\n\t\t},\n\t\tisFakeItemNeeded(item: ImModelRecentItem): boolean\n\t\t{\n\t\t\tconst dialog = this.$store.getters['chats/get'](item.dialogId, true);\n\t\t\tconst isUser = dialog.type === ChatType.user;\n\t\t\tconst hasBirthday = isUser && this.showBirthdays && this.$store.getters['users/hasBirthday'](item.dialogId);\n\n\t\t\treturn this.showInvited || hasBirthday;\n\t\t},\n\t\tgetRecentService(): RecentService\n\t\t{\n\t\t\tif (!this.service)\n\t\t\t{\n\t\t\t\tthis.service = RecentService.getInstance();\n\t\t\t}\n\n\t\t\treturn this.service;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-messenger__scope bx-im-list-recent-compact__container\" :class=\"containerClasses\">\n\t\t\t<CompactNavigation />\n\t\t\t<div v-if=\"activeCalls.length > 0\" class=\"bx-im-list-recent-compact__calls_container\">\n\t\t\t\t<ActiveCall\n\t\t\t\t\tv-for=\"activeCall in activeCalls\"\n\t\t\t\t\t:key=\"activeCall.dialogId\"\n\t\t\t\t\t:item=\"activeCall\"\n\t\t\t\t\t@click=\"onClick\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-recent-compact__scroll-container\">\n\t\t\t\t<div v-if=\"pinnedItems.length > 0\" class=\"bx-im-list-recent-compact__pinned_container\">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for=\"item in pinnedItems\"\n\t\t\t\t\t\t:key=\"item.dialogId\"\n\t\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t\t@click=\"onClick(item)\"\n\t\t\t\t\t\t@click.right=\"onRightClick(item, $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-list-recent-compact__general_container\">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for=\"item in generalItems\"\n\t\t\t\t\t\t:key=\"item.dialogId\"\n\t\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t\t@click=\"onClick(item)\"\n\t\t\t\t\t\t@click.right=\"onRightClick(item, $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\t\n\t\t\t\t<EmptyState v-if=\"collection.length === 0\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["NavigationItemToIcon","Object","freeze","NavigationMenuItem","notification","OutlineIcons","NOTIFICATION","copilot","COPILOT","openlines","OPEN_CHANNELS","openlinesV2","ICON_SIZE","CompactNavigationItem","name","components","BIcon","props","id","type","String","required","computed","Color","counter","counterToItemId","$store","getters","hasCounter","formattedCounter","iconColorToken","methods","onNavigationItemClick","Messenger","openNavigationItem","template","CompactNavigationItems","CompactNavigation","availableNavigationItems","settings","Extension","getSettings","items","get","map","item","preparedNavigationItems","filter","includes","isAirDesignAvailable","LayoutManager","getInstance","isAirDesignEnabled","RecentItem","ChatAvatar","data","AvatarSize","recentItem","dialog","dialogId","isUser","ChatType","user","isChatMuted","isMuted","muteList","find","element","Core","getUserId","Boolean","invitation","totalCounter","channelCommentsCounter","chatId","toString","wrapClasses","pinned","itemClasses","getAvatarType","Number","parseInt","ChatAvatarType","notes","loc","phraseCode","$Bitrix","Loc","getMessage","ActiveCall","emits","activeCall","onClick","event","$emit","$event","EmptyState","RecentList","collection","getRecentService","getCollection","preparedItems","filteredCollection","result","showBirthdays","isBirthdayPlaceholder","isFakeElement","isFakeItemNeeded","sort","a","b","firstDate","secondDate","activeCalls","pinnedItems","generalItems","Settings","recent","showBirthday","showInvited","containerClasses","created","contextMenuManager","RecentMenu","managePreloadedList","loadFirstPage","beforeUnmount","destroy","openChat","onRightClick","Utils","key","isCombination","context","compactMode","openMenu","currentTarget","preventDefault","preloadedList","getApplicationData","setPreloadedData","hasBirthday","service","RecentService"],"mappings":"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"}