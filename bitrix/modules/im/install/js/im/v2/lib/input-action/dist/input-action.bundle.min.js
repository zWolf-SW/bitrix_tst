this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t){"use strict";const i={writing:"writing",recordingVoice:"recordingVoice",sendingFile:"sendingFile"};const r=25e3;const a={[i.writing]:{[t.ChatType.copilot]:18e4,default:r},[i.recordingVoice]:{default:r},[i.sendingFile]:{default:r}};var l=babelHelpers.classPrivateFieldLooseKey("instance");var o=babelHelpers.classPrivateFieldLooseKey("actionTimers");var c=babelHelpers.classPrivateFieldLooseKey("isAlreadyActive");var n=babelHelpers.classPrivateFieldLooseKey("buildTimerId");var b=babelHelpers.classPrivateFieldLooseKey("setTimer");var d=babelHelpers.classPrivateFieldLooseKey("clearTimer");var p=babelHelpers.classPrivateFieldLooseKey("getActionDuration");class v{constructor(){Object.defineProperty(this,p,{value:B});Object.defineProperty(this,d,{value:P});Object.defineProperty(this,b,{value:g});Object.defineProperty(this,n,{value:h});Object.defineProperty(this,c,{value:u});Object.defineProperty(this,o,{writable:true,value:{}})}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l]){babelHelpers.classPrivateFieldLooseBase(this,l)[l]=new this}return babelHelpers.classPrivateFieldLooseBase(this,l)[l]}startAction(e){const t=babelHelpers.classPrivateFieldLooseBase(this,n)[n](e);if(babelHelpers.classPrivateFieldLooseBase(this,c)[c](e)){babelHelpers.classPrivateFieldLooseBase(this,d)[d](t);babelHelpers.classPrivateFieldLooseBase(this,o)[o][t]=babelHelpers.classPrivateFieldLooseBase(this,b)[b](e);return}s.Core.getStore().dispatch("chats/inputActions/start",e);babelHelpers.classPrivateFieldLooseBase(this,o)[o][t]=babelHelpers.classPrivateFieldLooseBase(this,b)[b](e)}stopAction(e){if(!babelHelpers.classPrivateFieldLooseBase(this,c)[c](e)){return}s.Core.getStore().dispatch("chats/inputActions/stop",e)}stopUserActionsInChat(e){s.Core.getStore().dispatch("chats/inputActions/stopUserActionsInChat",e)}clear(){Object.values(babelHelpers.classPrivateFieldLooseBase(this,o)[o]).forEach((e=>{clearTimeout(e)}));babelHelpers.classPrivateFieldLooseBase(this,o)[o]={}}}function u(e){const{type:t,dialogId:i,userId:r}=e;return s.Core.getStore().getters["chats/inputActions/isActionActive"]({type:t,dialogId:i,userId:r})}function h(e){const{type:s,dialogId:t,userId:i}=e;return`${s}|${t}|${i}`}function g(e){const{type:s,dialogId:t}=e;const i=babelHelpers.classPrivateFieldLooseBase(this,p)[p](s,t);return setTimeout((()=>{this.stopAction(e)}),i)}function P(e){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]);delete babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]}function B(e,t){var i;const r=a[e];const l=s.Core.getStore().getters["chats/get"](t,true);return(i=r[l.type])!=null?i:r.default}Object.defineProperty(v,l,{writable:true,value:void 0});e.InputAction=i;e.InputActionListener=v})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=input-action.bundle.map.js