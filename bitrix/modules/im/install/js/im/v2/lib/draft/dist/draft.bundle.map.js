{"version":3,"file":"draft.bundle.map.js","names":["this","BX","Messenger","v2","exports","main_core","main_core_events","im_v2_lib_logger","im_v2_application_core","im_v2_const","ui_dexie","im_v2_lib_localStorage","DB_NAME","recentDraftLocalStorageKey","copilotDraftLocalStorageKey","IndexedDbManager","getInstance","instance","constructor","db","Dexie","version","stores","drafts","migrateFromLocalStorage","migrationStatus","get","recentDrafts","LocalStorageManager","set","remove","copilotDrafts","setMigrationFinished","key","value","put","result","defaultValue","WRITE_TO_STORAGE_TIMEOUT","SHOW_DRAFT_IN_RECENT_TIMEOUT","STORAGE_KEY","NOT_AVAILABLE_CHAT_TYPES","Set","ChatType","comment","DraftManager","inited","initPromise","Promise","resolve","initPromiseResolver","EventEmitter","subscribe","EventType","layout","onLayoutChange","bind","initDraftHistory","draftHistory","error","console","fillDraftsFromStorage","Logger","warn","setRecentListDraftText","ready","Type","isPlainObject","Object","entries","forEach","dialogId","draft","setDraftText","text","trim","refreshSaveTimeout","setDraftPanel","panelType","panelContext","setDraftMentions","mentions","getDraft","_this$drafts$dialogId","clearDraft","setRecentItemDraftText","_draft$text","canSetRecentItemDraftText","Core","getStore","dispatch","id","event","from","getData","entityId","setTimeout","async","clearTimeout","writeToStorageTimeout","saveToIndexedDb","prepareDrafts","TextareaPanelType","edit","chat","getters","has","type","Lib","Event","Application","Const","DexieExport"],"sources":["draft.bundle.js"],"mappings":"AACAA,KAAKC,GAAKD,KAAKC,IAAM,CAAC,EACtBD,KAAKC,GAAGC,UAAYF,KAAKC,GAAGC,WAAa,CAAC,EAC1CF,KAAKC,GAAGC,UAAUC,GAAKH,KAAKC,GAAGC,UAAUC,IAAM,CAAC,GAC/C,SAAUC,EAAQC,EAAUC,EAAiBC,EAAiBC,EAAuBC,EAAYC,EAASC,GAC1G,aAEA,MAAMC,EAAU,eAChB,MAAMC,EAA6B,cACnC,MAAMC,EAA8B,eACpC,MAAMC,EACJ,kBAAOC,GACL,IAAKhB,KAAKiB,SAAU,CAClBjB,KAAKiB,SAAW,IAAIjB,IACtB,CACA,OAAOA,KAAKiB,QACd,CACA,WAAAC,GACElB,KAAKmB,GAAK,IAAIT,EAASU,MAAMR,GAC7BZ,KAAKmB,GAAGE,QAAQ,GAAGC,OAAO,CACxBC,OAAQ,IAEZ,CACA,6BAAMC,GACJ,MAAMC,QAAwBzB,KAAKmB,GAAGI,OAAOG,IAAI,oBACjD,GAAID,EAAiB,CACnB,MACF,CACA,MAAME,EAAehB,EAAuBiB,oBAAoBZ,cAAcU,IAAIb,EAA4B,CAAC,GAC/Gb,KAAK6B,IAAIhB,EAA4Bc,GACrChB,EAAuBiB,oBAAoBZ,cAAcc,OAAOjB,GAChE,MAAMkB,EAAgBpB,EAAuBiB,oBAAoBZ,cAAcU,IAAIZ,EAA6B,CAAC,GACjHd,KAAK6B,IAAIf,EAA6BiB,GACtCpB,EAAuBiB,oBAAoBZ,cAAcc,OAAOhB,GAChEd,KAAKgC,sBACP,CACA,GAAAH,CAAII,EAAKC,GACPlC,KAAKmB,GAAGI,OAAOY,IAAID,EAAOD,EAC5B,CACA,oBAAAD,GACE,MAAMI,EAAS,CACbvB,CAACA,GAA6B,KAC9BC,CAACA,GAA8B,MAEjCd,KAAKmB,GAAGI,OAAOY,IAAIC,EAAQ,mBAC7B,CACA,SAAMV,CAAIO,EAAKI,EAAe,YACtBrC,KAAKwB,0BACX,MAAMU,QAAclC,KAAKmB,GAAGI,OAAOG,IAAIO,GACvC,OAAOC,GAASG,CAClB,EAGF,MAAMC,EAA2B,IACjC,MAAMC,EAA+B,KACrC,MAAMC,EAAc,cACpB,MAAMC,EAA2B,IAAIC,IAAI,CAACjC,EAAYkC,SAASC,UAC/D,MAAMC,EACJ,kBAAO7B,GACL,IAAK6B,EAAa5B,SAAU,CAC1B4B,EAAa5B,SAAW,IAAI4B,CAC9B,CACA,OAAOA,EAAa5B,QACtB,CACA,WAAAC,GACElB,KAAK8C,OAAS,MACd9C,KAAKuB,OAAS,CAAC,EACfvB,KAAK+C,YAAc,IAAIC,SAAQC,IAC7BjD,KAAKkD,oBAAsBD,CAAO,IAEpC3C,EAAiB6C,aAAaC,UAAU3C,EAAY4C,UAAUC,OAAOC,eAAgBvD,KAAKuD,eAAeC,KAAKxD,MAChH,CACA,sBAAMyD,GACJ,GAAIzD,KAAK8C,OAAQ,CACf,MACF,CACA9C,KAAK8C,OAAS,KACd,IAAIY,EAAe,KACnB,IACEA,QAAqB3C,EAAiBC,cAAcU,IAAIc,EAAa,CAAC,EACxE,CAAE,MAAOmB,GAEPC,QAAQD,MAAM,4CAA6CA,GAC3D3D,KAAKkD,sBACL,MACF,CACAlD,KAAK6D,sBAAsBH,GAC3BnD,EAAiBuD,OAAOC,KAAK,4BAA6B/D,KAAKuB,QAC/DvB,KAAKkD,sBACLlD,KAAKgE,wBACP,CACA,KAAAC,GACE,OAAOjE,KAAK+C,WACd,CACA,qBAAAc,CAAsBH,GACpB,IAAKrD,EAAU6D,KAAKC,cAAcT,GAAe,CAC/C,MACF,CACAU,OAAOC,QAAQX,GAAcY,SAAQ,EAAEC,EAAUC,MAC/C,IAAKnE,EAAU6D,KAAKC,cAAcK,GAAQ,CACxC,MACF,CACAxE,KAAKuB,OAAOgD,GAAYC,CAAK,GAEjC,CACA,YAAAC,CAAaF,EAAUG,GACrB,IAAK1E,KAAKuB,OAAOgD,GAAW,CAC1BvE,KAAKuB,OAAOgD,GAAY,CAAC,CAC3B,CACAvE,KAAKuB,OAAOgD,GAAUG,KAAOA,EAAKC,OAClC3E,KAAK4E,oBACP,CACA,aAAAC,CAAcN,EAAUO,EAAWC,GACjC,IAAK/E,KAAKuB,OAAOgD,GAAW,CAC1BvE,KAAKuB,OAAOgD,GAAY,CAAC,CAC3B,CACAvE,KAAKuB,OAAOgD,GAAUO,UAAYA,EAClC9E,KAAKuB,OAAOgD,GAAUQ,aAAeA,EACrC/E,KAAK4E,oBACP,CACA,gBAAAI,CAAiBT,EAAUU,GACzB,IAAKjF,KAAKuB,OAAOgD,GAAW,CAC1BvE,KAAKuB,OAAOgD,GAAY,CAAC,CAC3B,CACAvE,KAAKuB,OAAOgD,GAAUU,SAAWA,EACjCjF,KAAK4E,oBACP,CACA,cAAMM,CAASX,GACb,IAAIY,EACJ,IAAKnF,KAAK8C,OAAQ,OACV9C,KAAKyD,kBACb,CACA,OAAQ0B,EAAwBnF,KAAKuB,OAAOgD,KAAc,KAAOY,EAAwB,CAAC,CAC5F,CACA,UAAAC,CAAWb,UACFvE,KAAKuB,OAAOgD,GACnBvE,KAAKqF,uBAAuBd,EAAU,GACxC,CACA,sBAAAP,GACEI,OAAOC,QAAQrE,KAAKuB,QAAQ+C,SAAQ,EAAEC,EAAUC,MAC9C,IAAIc,EACJtF,KAAKqF,uBAAuBd,GAAWe,EAAcd,EAAME,OAAS,KAAOY,EAAc,GAAG,GAEhG,CACA,sBAAAD,CAAuBd,EAAUG,GAC/B,IAAK1E,KAAKuF,0BAA0BhB,GAAW,CAC7C,MACF,MACK/D,EAAuBgF,KAAKC,WAAWC,SAAS,kBAAmB,CACtEC,GAAIpB,EACJG,QAEJ,CACA,cAAAnB,CAAeqC,GACb,MAAMC,KACJA,GACED,EAAME,UACV,MAAMvB,EAAWsB,EAAKE,SACtB,GAAIxB,IAAa,GAAI,CACnB,MACF,CACAyB,YAAWC,UACT,MAAMvB,KACJA,EAAO,UACC1E,KAAKkF,SAASX,GACxBvE,KAAKqF,uBAAuBd,EAAUG,EAAK,GAC1CnC,EACL,CACA,kBAAAqC,GACEsB,aAAalG,KAAKmG,uBAClBnG,KAAKmG,sBAAwBH,YAAW,KACtChG,KAAKoG,iBAAiB,GACrB9D,EACL,CACA,eAAA8D,GACErF,EAAiBC,cAAca,IAAIW,EAAaxC,KAAKqG,gBACvD,CACA,aAAAA,GACE,MAAMjE,EAAS,CAAC,EAChBgC,OAAOC,QAAQrE,KAAKuB,QAAQ+C,SAAQ,EAAEC,EAAUC,MAC9C,IAAKA,EAAME,OAASF,EAAMM,UAAW,CACnC,MACF,CACA,GAAIN,EAAMM,YAAcrE,EAAY6F,kBAAkBC,KAAM,CAC1D,MACF,CACAnE,EAAOmC,GAAY,CACjBG,KAAMF,EAAME,KACZO,SAAUT,EAAMS,SACjB,IAEH,OAAO7C,CACT,CACA,yBAAAmD,CAA0BhB,GACxB,MAAMiC,EAAOhG,EAAuBgF,KAAKC,WAAWgB,QAAQ,aAAalC,GACzE,IAAKiC,EAAM,CACT,OAAO,KACT,CACA,OAAQ/D,EAAyBiE,IAAIF,EAAKG,KAC5C,EAEF9D,EAAa5B,SAAW,KAExBb,EAAQyC,aAAeA,CAExB,EAzMA,CAyMG7C,KAAKC,GAAGC,UAAUC,GAAGyG,IAAM5G,KAAKC,GAAGC,UAAUC,GAAGyG,KAAO,CAAC,EAAG3G,GAAGA,GAAG4G,MAAM5G,GAAGC,UAAUC,GAAGyG,IAAI3G,GAAGC,UAAUC,GAAG2G,YAAY7G,GAAGC,UAAUC,GAAG4G,MAAM9G,GAAG+G,YAAY/G,GAAGC,UAAUC,GAAGyG","ignoreList":[]}