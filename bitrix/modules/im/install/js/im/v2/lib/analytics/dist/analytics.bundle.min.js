this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,s,o,c,i){"use strict";const n=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const r=Object.freeze({openMessenger:"open_messenger",openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",typeMessage:"type_message",pinChat:"pin_chat",clickDelete:"click_delete",clickShare:"click_share",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreatePoll:"click_create_poll",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach",downloadFile:"download_file",saveToDisk:"save_to_disk",pinMessage:"pin_message",unpinMessage:"unpin_message",pinnedMessageLimitException:"pinned_message_limit_exception",startSearch:"start_search",selectRecipient:"select_recipient",selectUser:"select_user",openCreateMenu:"open_create_menu",clickUpdate:"click_update",clickMoreInformation:"click_more_information",goToWeb:"go_to_web"});const l=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper",inform:"inform"});const p=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab",updateAppPopup:"update_app_popup"});const d=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group",may25DesktopRelease:"may_25_desktop_release"});const h=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor",chatWindow:"chat_window",forward:"forward",userAdd:"user_add"});const g=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window"});const b=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button"});const y=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const u=Object.freeze({collabEmptyState:"collab_empty_state"});const _=Object.freeze({single:"single",multiple:"multiple",selected:"selected"});function v(e){const t=o.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const C=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function m(){const e=o.Core.getStore().getters["users/get"](o.Core.getUserId(),true);switch(e.type){case s.UserType.user:return C.userIntranet;case s.UserType.extranet:return C.userExtranet;case s.UserType.collaber:return C.userCollaber;default:return C.userIntranet}}function f(e){switch(e){case s.ChatType.channel:case s.ChatType.openChannel:case s.ChatType.comment:case s.ChatType.generalChannel:return p.channel;case s.ChatType.copilot:return p.copilot;case s.ChatType.videoconf:return p.videoconf;case s.ChatType.collab:return p.collab;default:return p.chat}}const I="custom";function k(e){var t;return(t=s.ChatType[e.type])!=null?t:I}const P={single:"files_single",many:"files_all"};const T={...s.FileType,media:"media",any:"any"};class S{onClickDownload({messageId:e,dialogId:t}){const a=o.Core.getStore().getters["chats/get"](t);const n={tool:l.im,category:f(a.type),event:r.downloadFile,type:L(e),c_section:h.chatWindow,c_sub_section:g.contextMenu,p1:`chatType_${a.type}`,p2:m(),p3:B(e),p5:`chatId_${a.chatId}`};if(a.type===s.ChatType.collab){n.p4=c.getCollabId(a.chatId)}i.sendData(n)}onClickSaveOnDisk({messageId:e,dialogId:t}){const a=o.Core.getStore().getters["chats/get"](t);const n={tool:l.im,category:f(a.type),event:r.saveToDisk,type:L(e),c_section:h.chatWindow,c_sub_section:g.contextMenu,p1:`chatType_${a.type}`,p2:m(),p3:B(e),p5:`chatId_${a.chatId}`};if(a.type===s.ChatType.collab){n.p4=c.getCollabId(a.chatId)}i.sendData(n)}}function B(e){const t=o.Core.getStore().getters["messages/getById"](e);if(t.files.length===1){return P.single}return P.many}function L(e){const t=o.Core.getStore().getters["messages/getById"](e);const a=t.files.map((e=>o.Core.getStore().getters["files/get"](e).type));const c=[...new Set(a)];if(c.length===1){return c[0]}if(c.length===2&&c.includes(s.FileType.image)&&c.includes(s.FileType.video)){return T.media}return T.any}const F={[s.CollabEntityType.tasks]:r.openTasks,[s.CollabEntityType.calendar]:r.openCalendar,[s.CollabEntityType.files]:r.openFiles};class H{onClick(e,t){const a=F[t];if(!a){return}const c=o.Core.getStore().getters["chats/get"](e,true);const n={tool:l.im,category:p.collab,event:a,c_section:h.chatHeader,p2:m(),p5:`chatId_${c.chatId}`};if(c.type===s.ChatType.collab){n.p4=v(c.chatId)}i.sendData(n)}}var D=babelHelpers.classPrivateFieldLooseKey("onClick");class w{constructor(){Object.defineProperty(this,D,{value:O})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,D)[D]({dialogId:e,event:r.clickCreateTask,section:h.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,D)[D]({dialogId:e,event:r.clickCreateTask,section:h.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,D)[D]({dialogId:e,event:r.clickCreateEvent,section:h.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,D)[D]({dialogId:e,event:r.clickCreateEvent,section:h.chatTextarea})}onCreateVoteFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,D)[D]({dialogId:e,event:r.clickCreatePoll,section:h.chatTextarea})}}function O({dialogId:e,event:t,section:a}){const c=o.Core.getStore().getters["chats/get"](e,true);const n={tool:l.im,category:f(c.type),event:t,c_section:a,p1:`chatType_${k(c)}`,p2:m(),p5:`chatId_${c.chatId}`};if(c.type===s.ChatType.collab){n.p4=v(c.chatId)}i.sendData(n)}class ${onClick(e){const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.clickDelete,type:k(t),c_section:h.sidebar,c_sub_section:g.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.cancelDelete,type:k(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.delete,type:k(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=o.Core.getStore().getters["chats/get"](e);const a=f(t);i.sendData({tool:l.im,category:p.chatPopup,event:r.view,type:`deleted_${a}`,c_section:h.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class M{onClickDelete({messageId:e,dialogId:t}){const s=o.Core.getStore().getters["messages/getById"](e);const c=new a.MessageComponentManager(s).getName();const n=o.Core.getStore().getters["chats/get"](t);i.sendData({tool:l.im,category:p.message,event:r.clickDelete,type:c,c_sub_section:g.contextMenu,p1:`chatType_${n.type}`,p5:`chatId_${n.chatId}`})}onCancel({messageId:e,dialogId:t}){const s=o.Core.getStore().getters["messages/getById"](e);const c=new a.MessageComponentManager(s).getName();const n=o.Core.getStore().getters["chats/get"](t);i.sendData({tool:l.im,category:p.message,event:r.cancelDelete,type:c,c_section:h.popup,c_sub_section:g.contextMenu,p1:`chatType_${n.type}`,p5:`chatId_${n.chatId}`})}onNotFoundNotification({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);if(!t){return}i.sendData({tool:l.im,category:p.chatPopup,event:r.view,type:d.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const a=o.Core.getStore().getters["chats/get"](t);const s=o.Core.getStore().getters["messages/comments/getByMessageId"](e);i.sendData({tool:l.im,category:p.chatPopup,event:r.view,type:d.deletedMessage,c_section:h.comments,p1:`chatType_${a.type}`,p4:`parentChatId_${a.chatId}`,p5:`chatId_${s.chatId}`})}}var j=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var x=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class U{constructor(){Object.defineProperty(this,x,{value:R});Object.defineProperty(this,j,{value:E})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const a=t?h.chatStart:h.chatHistory;const s=o.Core.getStore().getters["chats/get"](e);const c=k(s);const n={tool:l.im,category:p.limitBanner,event:r.view,type:d.limitOfficeChatingHistory,c_section:a,p1:`chatType_${c}`};i.sendData(n)}onSidebarLimitExceeded({dialogId:e,panel:t}){const a=o.Core.getStore().getters["chats/get"](e);const s=k(a);const c={tool:l.im,category:p.limitBanner,event:r.view,type:d.limitOfficeChatingHistory,c_section:h.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,x)[x](t),p1:`chatType_${s}`};i.sendData(c)}onDialogBannerClick({dialogId:e}){const t=h.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,j)[j]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=h.sidebar;const s=babelHelpers.classPrivateFieldLooseBase(this,x)[x](t);babelHelpers.classPrivateFieldLooseBase(this,j)[j]({dialogId:e,section:a,element:s})}onGoToContextLimitExceeded({dialogId:e}){const t=h.messageLink;babelHelpers.classPrivateFieldLooseBase(this,j)[j]({dialogId:e,section:t})}}function E({dialogId:e,section:t,element:a}){const s=o.Core.getStore().getters["chats/get"](e);const c=k(s);const n={tool:l.im,category:p.limitBanner,event:r.click,type:d.limitOfficeChatingHistory,c_section:t,p1:`chatType_${c}`};if(a){n.c_element=a}i.sendData(n)}function R(e){switch(e){case s.SidebarDetailBlock.main:return"main";case s.SidebarDetailBlock.file:case s.SidebarDetailBlock.fileUnsorted:case s.SidebarDetailBlock.audio:case s.SidebarDetailBlock.brief:case s.SidebarDetailBlock.document:case s.SidebarDetailBlock.media:return"docs";case s.SidebarDetailBlock.messageSearch:return"message_search";case s.SidebarDetailBlock.favorite:return"favs";case s.SidebarDetailBlock.link:return"links";case s.SidebarDetailBlock.task:return"task";case s.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}const A=Object.freeze({recent:"recent",searchResult:"search_result"});var K=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var N=babelHelpers.classPrivateFieldLooseKey("onSelectUser");var z=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class X{constructor(){Object.defineProperty(this,z,{value:V});Object.defineProperty(this,N,{value:W});Object.defineProperty(this,K,{writable:true,value:false})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z](e,h.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z](e,h.chatHeader)}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]){return}babelHelpers.classPrivateFieldLooseBase(this,K)[K]=true;const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.startSearch,c_section:h.userAdd,p1:`chatType_${t.type}`,p2:m()})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,K)[K]=false}onSelectUserFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,N)[N]({dialogId:e,position:t,source:A.recent})}onSelectUserFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,N)[N]({dialogId:e,position:t,source:A.searchResult})}}function W({dialogId:e,position:t,source:a}){const s=o.Core.getStore().getters["chats/get"](e,true);i.sendData({tool:l.im,category:f(s.type),event:r.selectUser,type:a,c_section:h.userAdd,p1:`chatType_${s.type}`,p2:m(),p3:`position_${t}`})}function V(e,t){const a=o.Core.getStore().getters["chats/get"](e,true);const c={tool:l.im,category:f(a.type),event:r.clickAddUser,c_section:t,p2:m(),p5:`chatId_${a.chatId}`};if(a.type===s.ChatType.collab){c.p4=v(a.chatId)}i.sendData(c)}class G{onOpenForm(e){const t=o.Core.getStore().getters["chats/get"](e);const a={tool:l.im,category:f(t.type),event:r.clickEdit,c_section:h.sidebar,c_sub_section:g.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){a.p4=v(t.chatId)}i.sendData(a)}onSubmitForm(e){const t=o.Core.getStore().getters["chats/get"](e);const a={tool:l.im,category:f(t.type),c_section:h.editor,event:r.submitEdit,p1:`chatType_${t.type}`,p2:m(),p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){a.p4=v(t.chatId)}i.sendData(a)}}class J{onStartClick(e){const t=o.Core.getStore().getters["application/getLayout"].name;i.sendData({tool:l.im,category:f(e),event:r.clickCreateNew,type:e,c_section:`${t}_tab`,p2:m()})}onCollabEmptyStateCreateClick(){i.sendData({tool:l.im,category:f(s.ChatType.collab),event:r.clickCreateNew,type:s.ChatType.collab,c_section:u.collabEmptyState,p2:m()})}onMenuCreateClick(){const e=o.Core.getStore().getters["application/getLayout"].name;i.sendData({tool:l.im,category:p.messenger,event:r.openCreateMenu,c_section:`${e}_tab`})}}class Y{onOpenPriceTable(e){i.sendData({tool:l.infoHelper,category:p.limit,event:r.openPrices,type:e,c_section:h.chat})}onOpenToolsSettings(e){i.sendData({tool:l.infoHelper,category:p.toolOff,event:r.openSettings,type:e,c_section:h.chat})}}class q{onOpenCheckInPopup(){i.sendData({event:r.popupOpen,tool:l.checkin,category:p.shift,c_section:h.chat})}}const Q=Object.freeze({create_menu:"create_menu",role_picker:"role_picker"});var Z=babelHelpers.classPrivateFieldLooseKey("sendDataForCopilotCreation");class ee{constructor(){Object.defineProperty(this,Z,{value:te})}onCreateChat(e){i.sendData({event:r.createNewChat,tool:l.ai,category:p.chatOperations,c_section:h.copilotTab,type:d.ai,p3:n.private,p5:`chatId_${e}`})}onCreateDefaultChatInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]({c_sub_section:Q.create_menu})}onSelectRoleInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]({c_sub_section:Q.role_picker})}onOpenChat(e){const t=o.Core.getStore().getters["chats/get"](e);const a=t.userCounter<=2?n.private:n.multiuser;i.sendData({event:r.openChat,tool:l.ai,category:p.chatOperations,c_section:h.copilotTab,type:d.ai,p3:a,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:r.openTab,tool:l.ai,category:p.chatOperations,c_section:h.copilotTab,status:e?y.success:y.errorTurnedOff};i.sendData(t)}onUseAudioInput(){i.sendData({event:r.audioUse,tool:l.ai,category:p.chatOperations,c_section:h.copilotTab})}}function te(e){const t=o.Core.getStore().getters["application/getLayout"].name;i.sendData({event:r.clickCreateNew,tool:l.im,category:p.copilot,c_section:`${t}_tab`,type:d.copilot,...e})}class ae{onOpenUploadMenu(e){const t=o.Core.getStore().getters["chats/get"](e);const a=k(t);const c={tool:l.im,category:f(t.type),event:r.clickAttach,c_section:h.chatTextarea,p1:`chatType_${a}`,p2:m(),p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){c.p4=v(t.chatId)}i.sendData(c)}}class se{getSerializedParams(e){const t=this.getAnalyticsOptions(e);const a=Object.entries(t).map((([e,t])=>`st[${e}]=${encodeURIComponent(t)}`));return a.join("&")}getAnalyticsOptions(e){const t=o.Core.getStore().getters["chats/get"](e,true);const a=t.type;const c={tool:l.im,event:r.clickCreatePoll,category:f(a),p1:`chatType_${a}`,p2:m(),p5:`chatId_${t.chatId}`};if(a===s.ChatType.comment){const e=o.Core.getStore().getters["chats/getByChatId"](t.parentChatId);c.p1=`chatType_${e.type}`;c.p4=`parentChatId_${t.parentChatId}`}if(a===s.ChatType.collab){c.p4=v(t.chatId)}return c}}var oe=babelHelpers.classPrivateFieldLooseKey("onClick");var ce=babelHelpers.classPrivateFieldLooseKey("getAdditionalParams");class ie{constructor(){Object.defineProperty(this,ce,{value:re});Object.defineProperty(this,oe,{value:ne})}onPin(e){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]({chatId:e,event:r.pinMessage})}onUnpin(e){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]({chatId:e,event:r.unpinMessage})}onReachingLimit(e){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]({chatId:e,event:r.pinnedMessageLimitException})}}function ne({chatId:e,event:t}){const a=o.Core.getStore().getters["chats/get"](`chat${e}`,true);const s={tool:l.im,category:f(a.type),event:t,p1:`chatType_${k(a)}`,...babelHelpers.classPrivateFieldLooseBase(this,ce)[ce](t,e)};i.sendData(s)}function re(e,t){const a=o.Core.getStore().getters["messages/pin/getPinned"](t).length;if(e===r.pinMessage){return{p3:`pinnedCount_${a}`,type:a>1?_.multiple:_.single}}if(e===r.unpinMessage){return{type:a>0?_.selected:_.single}}return{}}const le=Object.freeze({recent:"recent",searchResult:"search_result",notes:"notes"});var pe=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var de=babelHelpers.classPrivateFieldLooseKey("onSelectRecipient");var he=babelHelpers.classPrivateFieldLooseKey("isNotesChat");class ge{constructor(){Object.defineProperty(this,he,{value:ye});Object.defineProperty(this,de,{value:be});Object.defineProperty(this,pe,{writable:true,value:false})}onClickForward({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.clickShare,p1:`chatType_${t.type}`,p2:c.getUserType()})}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]){return}babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=true;const t=o.Core.getStore().getters["chats/get"](e);i.sendData({tool:l.im,category:f(t.type),event:r.startSearch,c_section:h.forward,p1:`chatType_${t.type}`,p2:c.getUserType()})}onSelectRecipientFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,de)[de]({dialogId:e,position:t,source:le.recent})}onSelectRecipientFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,de)[de]({dialogId:e,position:t,source:le.searchResult})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=false}}function be({dialogId:e,position:t,source:a}){const s=o.Core.getStore().getters["chats/get"](e);const n=babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)?le.notes:a;i.sendData({tool:l.im,category:f(s.type),event:r.selectRecipient,type:n,c_section:h.forward,p1:`chatType_${s.type}`,p2:c.getUserType(),p3:`position_${t}`})}function ye(e){return o.Core.getUserId().toString()===e}var ue=babelHelpers.classPrivateFieldLooseKey("buildAnalyticsData");class _e{constructor(){Object.defineProperty(this,ue,{value:ve})}onShow(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](r.view))}onClickUpdate(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](r.clickUpdate))}onClickMoreInformation(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](r.clickMoreInformation))}onOpenWebVersion(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](r.goToWeb))}}function ve(e){return{tool:l.inform,category:p.updateAppPopup,event:e,type:d.may25DesktopRelease}}const Ce="notes";var me=babelHelpers.classPrivateFieldLooseKey("excludedChats");var fe=babelHelpers.classPrivateFieldLooseKey("chatsWithTyping");var Ie=babelHelpers.classPrivateFieldLooseKey("currentTab");var ke=babelHelpers.classPrivateFieldLooseKey("instance");var Pe=babelHelpers.classPrivateFieldLooseKey("isNotes");class Te{constructor(){Object.defineProperty(this,Pe,{value:Se});Object.defineProperty(this,me,{writable:true,value:new Set});Object.defineProperty(this,fe,{writable:true,value:new Set});Object.defineProperty(this,Ie,{writable:true,value:s.Layout.chat.name});this.chatCreate=new J;this.chatEdit=new G;this.chatDelete=new $;this.messageDelete=new M;this.historyLimit=new U;this.userAdd=new X;this.collabEntities=new H;this.chatEntities=new w;this.supervisor=new Y;this.checkIn=new q;this.copilot=new ee;this.attachMenu=new ae;this.messageFiles=new S;this.vote=new se;this.messagePins=new ie;this.messageForward=new ge;this.desktopUpdateBanner=new _e}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=new this}return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,me)[me].add(e)}onOpenMessenger(){i.sendData({event:r.openMessenger,tool:l.im,category:p.messenger})}onOpenTab(e){const t=[s.Layout.chat.name,s.Layout.copilot.name,s.Layout.collab.name,s.Layout.channel.name,s.Layout.notification.name,s.Layout.settings.name,s.Layout.openlines.name];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]===e){return}babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]=e;i.sendData({event:r.openTab,tool:l.im,category:p.messenger,type:e,p2:m()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,me)[me].delete(e.dialogId);return}babelHelpers.classPrivateFieldLooseBase(this,fe)[fe].delete(e.dialogId);const a=k(e);if(a===s.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}const c=o.Core.getStore().getters["application/getLayout"].name;const n=e.role===s.UserRole.guest?"N":"Y";const p={tool:l.im,category:f(a),event:r.openExisting,type:babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)?Ce:a,c_section:`${c}_tab`,p2:m()};if(!babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)){p.p5=`chatId_${e.chatId}`}if(a===s.ChatType.comment){const t=o.Core.getStore().getters["chats/getByChatId"](e.parentChatId);p.p1=`chatType_${t.type}`;p.p4=`parentChatId_${e.parentChatId}`}if(a===s.ChatType.collab){p.p4=v(e.chatId)}if(a!==s.ChatType.copilot){p.p3=`isMember_${n}`}if(a===s.ChatType.copilot){const a=o.Core.getStore().getters["copilot/chats/getRole"](e.dialogId);p.p4=`role_${t.Text.toCamelCase(a.code)}`}i.sendData(p)}onPinChat(e){if(!babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)){return}const t=k(e);const a={tool:l.im,category:f(t),event:r.pinChat,p1:`chatType_${babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)?Ce:t}`};i.sendData(a)}onTypeMessage(e){if(!babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)||babelHelpers.classPrivateFieldLooseBase(this,fe)[fe].has(e.dialogId)){return}babelHelpers.classPrivateFieldLooseBase(this,fe)[fe].add(e.dialogId);const t=k(e);const a={tool:l.im,category:f(t),event:r.typeMessage,p1:`chatType_${babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e)?Ce:t}`};i.sendData(a)}}function Se(e){return Number.parseInt(e.dialogId,10)===o.Core.getUserId()}Object.defineProperty(Te,ke,{writable:true,value:void 0});e.Analytics=Te;e.CreateChatContext=u;e.getCollabId=v;e.getUserType=m})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Messenger.v2.Application,BX.Messenger.v2.Lib,BX.UI.Analytics);
//# sourceMappingURL=analytics.bundle.map.js