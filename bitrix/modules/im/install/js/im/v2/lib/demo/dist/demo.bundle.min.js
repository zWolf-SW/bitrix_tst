this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t,a,r){"use strict";let l=Number.MIN_SAFE_INTEGER;let i=Number.MIN_SAFE_INTEGER;let o=Number.MIN_SAFE_INTEGER;let d=Number.MIN_SAFE_INTEGER;const b={getDialogId(){return r.Utils.text.getUuidV4()},getNextChatId(){l++;return l},getNextUserId(){i++;return i},getNextMessageId(){o++;return o},getNextFileId(){d++;return d}};var n=babelHelpers.classPrivateFieldLooseKey("chat");var c=babelHelpers.classPrivateFieldLooseKey("messages");var h=babelHelpers.classPrivateFieldLooseKey("users");var g=babelHelpers.classPrivateFieldLooseKey("files");var v=babelHelpers.classPrivateFieldLooseKey("getDefaultChatFields");class u{constructor(){Object.defineProperty(this,v,{value:p});Object.defineProperty(this,n,{writable:true,value:{}});Object.defineProperty(this,c,{writable:true,value:[]});Object.defineProperty(this,h,{writable:true,value:[]});Object.defineProperty(this,g,{writable:true,value:[]})}static isDemoDialogId(e){return r.Utils.text.isUuidV4(e)}addChat(e){babelHelpers.classPrivateFieldLooseBase(this,n)[n]={...babelHelpers.classPrivateFieldLooseBase(this,v)[v](),...e,dialogId:b.getDialogId(),chatId:b.getNextChatId()};return babelHelpers.classPrivateFieldLooseBase(this,n)[n]}addMessage(e){var s;const t={id:b.getNextMessageId(),chatId:(s=babelHelpers.classPrivateFieldLooseBase(this,n)[n].chatId)!=null?s:0,...e};babelHelpers.classPrivateFieldLooseBase(this,c)[c].push(t);return t}addUser(e){const s={id:b.getNextUserId(),...e};babelHelpers.classPrivateFieldLooseBase(this,h)[h].push(s);return s}addFile(e){var s;const t={id:b.getNextFileId(),chatId:(s=babelHelpers.classPrivateFieldLooseBase(this,n)[n].chatId)!=null?s:0,...e};babelHelpers.classPrivateFieldLooseBase(this,g)[g].push(t);return t}save(){if(babelHelpers.classPrivateFieldLooseBase(this,c)[c].length>0){const[e]=babelHelpers.classPrivateFieldLooseBase(this,c)[c].slice(-1);babelHelpers.classPrivateFieldLooseBase(this,n)[n].lastMessageId=e.id}void s.Core.getStore().dispatch("chats/set",babelHelpers.classPrivateFieldLooseBase(this,n)[n]);const e=new a.UserManager;void e.addUsersToModel(babelHelpers.classPrivateFieldLooseBase(this,h)[h]);void s.Core.getStore().dispatch("files/set",babelHelpers.classPrivateFieldLooseBase(this,g)[g]);void s.Core.getStore().dispatch("messages/setChatCollection",{messages:babelHelpers.classPrivateFieldLooseBase(this,c)[c]})}getChat(){return babelHelpers.classPrivateFieldLooseBase(this,n)[n]}getUsers(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h]}getMessages(){return babelHelpers.classPrivateFieldLooseBase(this,c)[c]}getFiles(){return babelHelpers.classPrivateFieldLooseBase(this,g)[g]}}function p(){return{type:t.ChatType.chat,inited:true,role:t.UserRole.member,permissions:{manageUi:t.UserRole.member,manageSettings:t.UserRole.member,manageUsersAdd:t.UserRole.member,manageUsersDelete:t.UserRole.member,manageMessages:t.UserRole.member}}}e.DemoChatBuilder=u})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Application,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib);
//# sourceMappingURL=demo.bundle.map.js