this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,a,i,s,l,t,r){"use strict";const o=[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList];var n=babelHelpers.classPrivateFieldLooseKey("dialogId");var b=babelHelpers.classPrivateFieldLooseKey("chat");var c=babelHelpers.classPrivateFieldLooseKey("blocks");var d=babelHelpers.classPrivateFieldLooseKey("isFileMigrationFinished");var P=babelHelpers.classPrivateFieldLooseKey("hasMarketApps");var B=babelHelpers.classPrivateFieldLooseKey("hasHistoryLimit");class p{constructor(e,a){Object.defineProperty(this,B,{value:v});Object.defineProperty(this,P,{value:M});Object.defineProperty(this,d,{value:L});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=s.Core.getStore().getters["chats/get"](e,true);babelHelpers.classPrivateFieldLooseBase(this,c)[c]=a}run(){const e=new Set(babelHelpers.classPrivateFieldLooseBase(this,c)[c]);if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]()){e.delete(r.SidebarMainPanelBlock.fileUnsortedList)}else{e.delete(r.SidebarMainPanelBlock.fileList)}if(!babelHelpers.classPrivateFieldLooseBase(this,P)[P]()){e.delete(r.SidebarMainPanelBlock.marketAppList)}if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B]()){e.delete(r.SidebarMainPanelBlock.tariffLimit)}return[...e]}}function L(){return a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles)}function M(){return i.MarketManager.getInstance().getAvailablePlacementsByType(r.PlacementType.sidebar,babelHelpers.classPrivateFieldLooseBase(this,n)[n]).length>0}function v(){const e=r.ChatType.comment===babelHelpers.classPrivateFieldLooseBase(this,b)[b].type;const i=t.ChannelManager.isChannel(babelHelpers.classPrivateFieldLooseBase(this,n)[n]);if(i||e||a.FeatureManager.chatHistory.isAvailable()){return false}return s.Core.getStore().getters["sidebar/hasHistoryLimit"](babelHelpers.classPrivateFieldLooseBase(this,b)[b].chatId)}var h=babelHelpers.classPrivateFieldLooseKey("blocks");var k=babelHelpers.classPrivateFieldLooseKey("headerTitle");var f=babelHelpers.classPrivateFieldLooseKey("headerMenuEnabled");var u=babelHelpers.classPrivateFieldLooseKey("getDefaultConfig");class S{constructor(e={}){Object.defineProperty(this,u,{value:g});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});const a={...babelHelpers.classPrivateFieldLooseBase(this,u)[u](),...e};const{blocks:i,headerTitle:s,headerMenuEnabled:l}=a;babelHelpers.classPrivateFieldLooseBase(this,h)[h]=i;babelHelpers.classPrivateFieldLooseBase(this,k)[k]=s;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=l}getBlocks(e){return new p(e,babelHelpers.classPrivateFieldLooseBase(this,h)[h]).run()}getHeaderTitle(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k]}isMenuEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]}}function g(){return{blocks:o,headerTitle:l.Loc.getMessage("IM_SIDEBAR_HEADER_TITLE"),headerMenuEnabled:true}}const F=e=>e.type===r.ChatType.chat;const H=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const y=e=>e.type===r.ChatType.user;const C=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const m=e=>{const a=s.Core.getStore().getters["users/get"](e.dialogId);return(a==null?void 0:a.type)===r.UserType.bot};const T=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.marketAppList]});const w=e=>e.type===r.ChatType.user&&Number(e.dialogId)===s.Core.getUserId();const E=new S({blocks:[r.SidebarMainPanelBlock.notes,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList]});const A=e=>e.type===r.ChatType.lines;const I=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],headerMenuEnabled:false});const O=e=>e.type===r.ChatType.collab;const j=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.collabHelpdesk],headerTitle:l.Loc.getMessage("IM_SIDEBAR_COLLAB_HEADER_TITLE")});const K=e=>s.Core.getStore().getters["sidebar/multidialog/isSupport"](e.dialogId);const _=new S({blocks:[r.SidebarMainPanelBlock.support,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.multidialog,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList]});const X=e=>e.type===r.ChatType.comment;const D=new S({blocks:[r.SidebarMainPanelBlock.post,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],headerTitle:l.Loc.getMessage("IM_SIDEBAR_COMMENTS_HEADER_TITLE"),headerMenuEnabled:false});const U=e=>t.ChannelManager.isChannel(e.dialogId);const R=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],headerTitle:l.Loc.getMessage("IM_SIDEBAR_CHANNEL_HEADER_TITLE")});const N=e=>e.type===r.ChatType.copilot;const q=new S({blocks:[r.SidebarMainPanelBlock.copilot,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.copilotInfo,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList]});var x=babelHelpers.classPrivateFieldLooseKey("instance");var z=babelHelpers.classPrivateFieldLooseKey("defaultConfigMap");var G=babelHelpers.classPrivateFieldLooseKey("customConfigMap");var J=babelHelpers.classPrivateFieldLooseKey("checkMigrationStatus");var Q=babelHelpers.classPrivateFieldLooseKey("registerDefaultConfigs");class V{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,x)[x]){babelHelpers.classPrivateFieldLooseBase(this,x)[x]=new V}return babelHelpers.classPrivateFieldLooseBase(this,x)[x]}constructor(){Object.defineProperty(this,Q,{value:Y});Object.defineProperty(this,J,{value:W});Object.defineProperty(this,z,{writable:true,value:new Map});Object.defineProperty(this,G,{writable:true,value:new Map});babelHelpers.classPrivateFieldLooseBase(this,J)[J]();babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]()}registerConfig(e,a){babelHelpers.classPrivateFieldLooseBase(this,G)[G].set(e,a)}getConfig(e){const a=s.Core.getStore().getters["chats/get"](e,true);const i=[...babelHelpers.classPrivateFieldLooseBase(this,G)[G].entries(),...babelHelpers.classPrivateFieldLooseBase(this,z)[z].entries()];for(const[e,s]of i){if(e(a)){return s}}return new S}}function W(){const e=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles);const i=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarLinks);void s.Core.getStore().dispatch("sidebar/setFilesMigrated",e);void s.Core.getStore().dispatch("sidebar/setLinksMigrated",i)}function Y(){babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(N,q);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(U,R);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(X,D);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(K,_);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(m,T);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(w,E);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(A,I);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(O,j);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(y,C);babelHelpers.classPrivateFieldLooseBase(this,z)[z].set(F,H)}Object.defineProperty(V,x,{writable:true,value:null});e.SidebarManager=V;e.SidebarConfig=S})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Const);
//# sourceMappingURL=sidebar.bundle.map.js