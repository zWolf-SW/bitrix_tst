this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t,i,r,a){"use strict";const o=new Set([r.ErrorCode.chat.accessDenied,r.ErrorCode.chat.notFound,r.ErrorCode.message.notFound,r.ErrorCode.message.accessDenied,r.ErrorCode.message.accessDeniedByTariff]);const c={async checkMessageAccess(e){const t={data:{messageId:e}};try{await s.runAction(r.RestMethod.imV2AccessCheck,t)}catch(e){return l(e)}return Promise.resolve({hasAccess:true})}};const l=e=>{const[s]=e;if(o.has(s.code)){return{hasAccess:false,errorCode:s.code}}console.error("AccessService: error checking access",s.code);return{hasAccess:true}};let n=e=>e,d,b;var p=babelHelpers.classPrivateFieldLooseKey("popupInstance");var v=babelHelpers.classPrivateFieldLooseKey("cache");var h=babelHelpers.classPrivateFieldLooseKey("getPopupConfig");var u=babelHelpers.classPrivateFieldLooseKey("getContainer");var g=babelHelpers.classPrivateFieldLooseKey("getButtonContainer");var y=babelHelpers.classPrivateFieldLooseKey("bindEvents");var m=babelHelpers.classPrivateFieldLooseKey("unbindEvents");class P{constructor(){Object.defineProperty(this,m,{value:f});Object.defineProperty(this,y,{value:H});Object.defineProperty(this,g,{value:F});Object.defineProperty(this,u,{value:L});Object.defineProperty(this,h,{value:B});Object.defineProperty(this,p,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:new t.Cache.MemoryCache});babelHelpers.classPrivateFieldLooseBase(this,p)[p]=new i.Popup(babelHelpers.classPrivateFieldLooseBase(this,h)[h]());babelHelpers.classPrivateFieldLooseBase(this,y)[y]()}show(){babelHelpers.classPrivateFieldLooseBase(this,p)[p].show()}close(){babelHelpers.classPrivateFieldLooseBase(this,p)[p].destroy()}}function B(){return{id:r.PopupType.messageHistoryLimit,className:"bx-im-messenger__scope",closeIcon:false,autoHide:false,closeByEsc:false,animation:"fading",overlay:true,padding:0,content:babelHelpers.classPrivateFieldLooseBase(this,u)[u](),events:{onPopupDestroy:()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}}}}function L(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v].remember("",(()=>{const e=t.Tag.render(d||(d=n`
				<div class="bx-im-history-limit-popup__container">
					<div class="bx-im-history-limit-popup__image"></div>
					<div class="bx-im-history-limit-popup__title">
						${0}
					</div>
					<div class="bx-im-history-limit-popup__subtitle">
						${0}
					</div>
				</div>
			`),a.FeatureManager.chatHistory.getLimitTitle(),a.FeatureManager.chatHistory.getLimitSubtitle());t.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),e);return e}))}function F(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v].remember("",(()=>t.Tag.render(b||(b=n`
				<div class="bx-im-history-limit-popup__button">
					${0}
				</div>
			`),a.FeatureManager.chatHistory.getLearnMoreText())))}function H(){t.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),"click",(()=>{a.FeatureManager.chatHistory.openFeatureSlider();this.close()}))}function f(){t.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),"click")}const M={checkMessageAccess(e){return c.checkMessageAccess(e)},showHistoryLimitPopup(){const e=new P;e.show()}};e.AccessManager=M})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX,BX.Main,BX.Messenger.v2.Const,BX.Messenger.v2.Lib);
//# sourceMappingURL=access.bundle.map.js