{"version":3,"file":"auto-delete.bundle.js","sources":["../src/auto-delete.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ActionByRole, ActionByUserType, AutoDeleteDelay } from 'im.v2.const';\n\nexport const AutoDeleteManager = {\n\tgetStatusText(delayInHours: number): string\n\t{\n\t\tconst delayMap = {\n\t\t\t[AutoDeleteDelay.Off]: 'IM_LIB_AUTO_DELETE_STATUS_OFF',\n\t\t\t[AutoDeleteDelay.Hour]: 'IM_LIB_AUTO_DELETE_STATUS_1H',\n\t\t\t[AutoDeleteDelay.Day]: 'IM_LIB_AUTO_DELETE_STATUS_1D',\n\t\t\t[AutoDeleteDelay.Week]: 'IM_LIB_AUTO_DELETE_STATUS_1W',\n\t\t\t[AutoDeleteDelay.Month]: 'IM_LIB_AUTO_DELETE_STATUS_1M',\n\t\t};\n\n\t\tconst code = delayMap[delayInHours] || 'IM_LIB_AUTO_DELETE_STATUS_CUSTOM';\n\n\t\treturn Loc.getMessage(code, { '#NUMBER#': delayInHours });\n\t},\n\tisAutoDeleteAllowed(dialogId: string): boolean\n\t{\n\t\tconst canUserModify = PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\tActionByUserType.changeMessagesAutoDeleteDelay,\n\t\t);\n\n\t\tconst hasRolePermission = PermissionManager.getInstance().canPerformActionByRole(\n\t\t\tActionByRole.changeMessagesAutoDeleteDelay,\n\t\t\tdialogId,\n\t\t);\n\n\t\treturn canUserModify && hasRolePermission;\n\t},\n};\n"],"names":["AutoDeleteManager","getStatusText","delayInHours","delayMap","AutoDeleteDelay","Off","Hour","Day","Week","Month","code","Loc","getMessage","isAutoDeleteAllowed","dialogId","canUserModify","PermissionManager","getInstance","canPerformActionByUserType","ActionByUserType","changeMessagesAutoDeleteDelay","hasRolePermission","canPerformActionByRole","ActionByRole"],"mappings":";;;;;;;OAKaA,iBAAiB,GAAG;GAChCC,aAAa,CAACC,YAAoB,EAClC;KACC,MAAMC,QAAQ,GAAG;OAChB,CAACC,2BAAe,CAACC,GAAG,GAAG,+BAA+B;OACtD,CAACD,2BAAe,CAACE,IAAI,GAAG,8BAA8B;OACtD,CAACF,2BAAe,CAACG,GAAG,GAAG,8BAA8B;OACrD,CAACH,2BAAe,CAACI,IAAI,GAAG,8BAA8B;OACtD,CAACJ,2BAAe,CAACK,KAAK,GAAG;MACzB;KAED,MAAMC,IAAI,GAAGP,QAAQ,CAACD,YAAY,CAAC,IAAI,kCAAkC;KAEzE,OAAOS,aAAG,CAACC,UAAU,CAACF,IAAI,EAAE;OAAE,UAAU,EAAER;MAAc,CAAC;IACzD;GACDW,mBAAmB,CAACC,QAAgB,EACpC;KACC,MAAMC,aAAa,GAAGC,sCAAiB,CAACC,WAAW,EAAE,CAACC,0BAA0B,CAC/EC,4BAAgB,CAACC,6BAA6B,CAC9C;KAED,MAAMC,iBAAiB,GAAGL,sCAAiB,CAACC,WAAW,EAAE,CAACK,sBAAsB,CAC/EC,wBAAY,CAACH,6BAA6B,EAC1CN,QAAQ,CACR;KAED,OAAOC,aAAa,IAAIM,iBAAiB;;CAE3C,CAAC;;;;;;;;"}