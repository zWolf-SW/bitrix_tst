{"version":3,"file":"analytics.bundle.js","sources":["../src/const.js","../src/helpers/get-collab-id.js","../src/helpers/get-user-type.js","../src/helpers/get-category-by-chat-type.js","../src/helpers/get-chat-type.js","../src/classes/message-files.js","../src/classes/collab-entities.js","../src/classes/chat-entities.js","../src/classes/chat-delete.js","../src/classes/message-delete.js","../src/classes/history-limit.js","../src/classes/user-add.js","../src/classes/chat-edit.js","../src/classes/chat-create.js","../src/classes/supervisor.js","../src/classes/check-in.js","../src/classes/copilot.js","../src/classes/attach-menu.js","../src/classes/vote-create.js","../src/classes/message-pins.js","../src/classes/message-forward.js","../src/classes/desktop-update-banner.js","../src/analytics.js"],"sourcesContent":["export const CopilotChatType = Object.freeze({\n\tprivate: 'chatType_private',\n\tmultiuser: 'chatType_multiuser',\n});\n\nexport const AnalyticsEvent = Object.freeze({\n\topenMessenger: 'open_messenger',\n\topenChat: 'open_chat',\n\tcreateNewChat: 'create_new_chat',\n\taudioUse: 'audio_use',\n\topenTab: 'open_tab',\n\tpopupOpen: 'popup_open',\n\topenPrices: 'open_prices',\n\topenSettings: 'open_settings',\n\tclickCreateNew: 'click_create_new',\n\topenExisting: 'open_existing',\n\ttypeMessage: 'type_message',\n\tpinChat: 'pin_chat',\n\tclickDelete: 'click_delete',\n\tclickShare: 'click_share',\n\tcancelDelete: 'cancel_delete',\n\tdelete: 'delete',\n\tview: 'view',\n\tclick: 'click',\n\tclickEdit: 'click_edit',\n\tsubmitEdit: 'submit_edit',\n\tclickCallButton: 'click_call_button',\n\tclickStartConf: 'click_start_conf',\n\tclickJoin: 'click_join',\n\tclickAddUser: 'click_add_user',\n\topenCalendar: 'open_calendar',\n\topenTasks: 'open_tasks',\n\topenFiles: 'open_files',\n\tclickCreatePoll: 'click_create_poll',\n\tclickCreateTask: 'click_create_task',\n\tclickCreateEvent: 'click_create_event',\n\tclickAttach: 'click_attach',\n\tdownloadFile: 'download_file',\n\tsaveToDisk: 'save_to_disk',\n\tpinMessage: 'pin_message',\n\tunpinMessage: 'unpin_message',\n\tpinnedMessageLimitException: 'pinned_message_limit_exception',\n\tstartSearch: 'start_search',\n\tselectRecipient: 'select_recipient',\n\tselectUser: 'select_user',\n\topenCreateMenu: 'open_create_menu',\n\tclickUpdate: 'click_update',\n\tclickMoreInformation: 'click_more_information',\n\tgoToWeb: 'go_to_web',\n});\n\nexport const AnalyticsTool = Object.freeze({\n\tai: 'ai',\n\tcheckin: 'checkin',\n\tim: 'im',\n\tinfoHelper: 'InfoHelper',\n\tinform: 'inform',\n});\n\nexport const AnalyticsCategory = Object.freeze({\n\tchatOperations: 'chat_operations',\n\tshift: 'shift',\n\tmessenger: 'messenger',\n\tchat: 'chat',\n\tchannel: 'channel',\n\tvideoconf: 'videoconf',\n\tcopilot: 'copilot',\n\tlimit: 'limit',\n\tlimitBanner: 'limit_banner',\n\ttoolOff: 'tool_off',\n\tmessage: 'message',\n\tchatPopup: 'chat_popup',\n\tcall: 'call',\n\tcollab: 'collab',\n\tupdateAppPopup: 'update_app_popup',\n});\n\nexport const AnalyticsType = Object.freeze({\n\tai: 'ai',\n\tchat: 'chat',\n\tchannel: 'channel',\n\tvideoconf: 'videoconf',\n\tcopilot: 'copilot',\n\tdeletedMessage: 'deleted_message',\n\tlimitOfficeChatingHistory: 'limit_office_chating_history',\n\tprivateCall: 'private',\n\tgroupCall: 'group',\n\tmay25DesktopRelease: 'may_25_desktop_release',\n});\n\nexport const AnalyticsSection = Object.freeze({\n\tcopilotTab: 'copilot_tab',\n\tchat: 'chat',\n\tchatStart: 'chat_start',\n\tchatHistory: 'chat_history',\n\tsidebar: 'sidebar',\n\tpopup: 'popup',\n\tactiveChat: 'active_chat',\n\tcomments: 'comments',\n\tchatHeader: 'chat_header',\n\tchatSidebar: 'chat_sidebar',\n\tchatTextarea: 'chat_textarea',\n\teditor: 'editor',\n\tchatWindow: 'chat_window',\n\tforward: 'forward',\n\tuserAdd: 'user_add',\n});\n\nexport const AnalyticsSubSection = Object.freeze({\n\tcontextMenu: 'context_menu',\n\tsidebar: 'sidebar',\n\tchatWindow: 'chat_window',\n\tmessageLink: 'message_link',\n\tchatSidebar: 'chat_sidebar',\n\tchatList: 'chat_list',\n\twindow: 'window',\n});\n\nexport const AnalyticsElement = Object.freeze({\n\tinitialBanner: 'initial_banner',\n\tvideocall: 'videocall',\n\taudiocall: 'audiocall',\n\tstartButton: 'start_button',\n});\n\nexport const AnalyticsStatus = Object.freeze({\n\tsuccess: 'success',\n\terrorTurnedOff: 'error_turnedoff',\n});\n\nexport const CreateChatContext = Object.freeze({\n\tcollabEmptyState: 'collab_empty_state',\n});\n\nexport const MessagePinsTypes = Object.freeze({\n\tsingle: 'single',\n\tmultiple: 'multiple',\n\tselected: 'selected',\n});\n","import { Core } from 'im.v2.application.core';\n\nimport type { ImModelCollabInfo } from 'im.v2.model';\n\nexport function getCollabId(chatId: number): ?string\n{\n\tconst collabInfo: ImModelCollabInfo = Core.getStore().getters['chats/collabs/getByChatId'](chatId);\n\tif (!collabInfo)\n\t{\n\t\treturn null;\n\t}\n\n\treturn `collabId_${collabInfo.collabId}`;\n}\n","import { Core } from 'im.v2.application.core';\nimport { UserType } from 'im.v2.const';\n\nimport type { ImModelUser } from 'im.v2.model';\n\nconst AnalyticUserType = Object.freeze({\n\tuserIntranet: 'user_intranet',\n\tuserExtranet: 'user_extranet',\n\tuserCollaber: 'user_collaber',\n});\n\nexport function getUserType(): $Values<typeof AnalyticUserType>\n{\n\tconst user: ImModelUser = Core.getStore().getters['users/get'](Core.getUserId(), true);\n\n\tswitch (user.type)\n\t{\n\t\tcase UserType.user:\n\t\t\treturn AnalyticUserType.userIntranet;\n\t\tcase UserType.extranet:\n\t\t\treturn AnalyticUserType.userExtranet;\n\t\tcase UserType.collaber:\n\t\t\treturn AnalyticUserType.userCollaber;\n\t\tdefault:\n\t\t\treturn AnalyticUserType.userIntranet;\n\t}\n}\n","import { ChatType } from 'im.v2.const';\n\nimport { AnalyticsCategory } from '../const';\n\nexport function getCategoryByChatType(type: $Values<typeof ChatType>): $Values<typeof AnalyticsCategory>\n{\n\tswitch (type)\n\t{\n\t\tcase ChatType.channel:\n\t\tcase ChatType.openChannel:\n\t\tcase ChatType.comment:\n\t\tcase ChatType.generalChannel:\n\t\t\treturn AnalyticsCategory.channel;\n\t\tcase ChatType.copilot:\n\t\t\treturn AnalyticsCategory.copilot;\n\t\tcase ChatType.videoconf:\n\t\t\treturn AnalyticsCategory.videoconf;\n\t\tcase ChatType.collab:\n\t\t\treturn AnalyticsCategory.collab;\n\t\tdefault:\n\t\t\treturn AnalyticsCategory.chat;\n\t}\n}\n","import { ChatType } from 'im.v2.const';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst CUSTOM_CHAT_TYPE = 'custom';\n\nexport function getChatType(chat: ImModelChat): $Values<typeof ChatType>\n{\n\treturn ChatType[chat.type] ?? CUSTOM_CHAT_TYPE;\n}\n","import { sendData } from 'ui.analytics';\n\nimport { ChatType, FileType } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\nimport { getCollabId } from 'im.v2.lib.analytics';\n\nimport {\n\tAnalyticsEvent,\n\tAnalyticsSection,\n\tAnalyticsSubSection,\n\tAnalyticsTool,\n} from '../const';\n\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getUserType } from '../helpers/get-user-type';\n\nimport type { ImModelMessage, ImModelChat } from 'im.v2.model';\n\nconst AnalyticsAmountFilesType = {\n\tsingle: 'files_single',\n\tmany: 'files_all',\n};\n\nconst AnalyticsFileType = {\n\t...FileType,\n\tmedia: 'media',\n\tany: 'any',\n};\n\nexport class MessageFiles\n{\n\tonClickDownload({ messageId, dialogId }: {messageId: string | number, dialogId: string})\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.downloadFile,\n\t\t\ttype: getAnalyticsFileType(messageId),\n\t\t\tc_section: AnalyticsSection.chatWindow,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t\tp3: getFilesAmountParam(messageId),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n\n\tonClickSaveOnDisk({ messageId, dialogId }: {messageId: string | number, dialogId: string})\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.saveToDisk,\n\t\t\ttype: getAnalyticsFileType(messageId),\n\t\t\tc_section: AnalyticsSection.chatWindow,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t\tp3: getFilesAmountParam(messageId),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n\nfunction getFilesAmountParam(messageId: string | number): string\n{\n\tconst message: ImModelMessage = Core.getStore().getters['messages/getById'](messageId);\n\tif (message.files.length === 1)\n\t{\n\t\treturn AnalyticsAmountFilesType.single;\n\t}\n\n\treturn AnalyticsAmountFilesType.many;\n}\n\nfunction getAnalyticsFileType(messageId: string | number): $Values<typeof AnalyticsFileType>\n{\n\tconst message: ImModelMessage = Core.getStore().getters['messages/getById'](messageId);\n\tconst fileTypes = message.files.map((fileId) => {\n\t\treturn Core.getStore().getters['files/get'](fileId).type;\n\t});\n\n\tconst uniqueTypes = [...new Set(fileTypes)];\n\n\tif (uniqueTypes.length === 1)\n\t{\n\t\treturn uniqueTypes[0];\n\t}\n\n\tif (uniqueTypes.length === 2 && uniqueTypes.includes(FileType.image) && uniqueTypes.includes(FileType.video))\n\t{\n\t\treturn AnalyticsFileType.media;\n\t}\n\n\treturn AnalyticsFileType.any;\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType, CollabEntityType } from 'im.v2.const';\n\nimport { AnalyticsEvent, AnalyticsTool, AnalyticsSection, AnalyticsCategory } from '../const';\nimport { getCollabId } from '../helpers/get-collab-id';\nimport { getUserType } from '../helpers/get-user-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst EntityToEventMap = {\n\t[CollabEntityType.tasks]: AnalyticsEvent.openTasks,\n\t[CollabEntityType.calendar]: AnalyticsEvent.openCalendar,\n\t[CollabEntityType.files]: AnalyticsEvent.openFiles,\n};\n\nexport class CollabEntities\n{\n\tonClick(dialogId: string, type: $Values<typeof CollabEntityType>)\n\t{\n\t\tconst event = EntityToEventMap[type];\n\t\tif (!event)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId, true);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.collab,\n\t\t\tevent,\n\t\t\tc_section: AnalyticsSection.chatHeader,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\n\nimport { AnalyticsEvent, AnalyticsTool, AnalyticsSection } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getChatType } from '../helpers/get-chat-type';\nimport { getCollabId } from '../helpers/get-collab-id';\nimport { getUserType } from '../helpers/get-user-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class ChatEntities\n{\n\tonCreateTaskFromSidebarClick(dialogId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tdialogId,\n\t\t\tevent: AnalyticsEvent.clickCreateTask,\n\t\t\tsection: AnalyticsSection.chatSidebar,\n\t\t});\n\t}\n\n\tonCreateTaskFromTextareaClick(dialogId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tdialogId,\n\t\t\tevent: AnalyticsEvent.clickCreateTask,\n\t\t\tsection: AnalyticsSection.chatTextarea,\n\t\t});\n\t}\n\n\tonCreateEventFromSidebarClick(dialogId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tdialogId,\n\t\t\tevent: AnalyticsEvent.clickCreateEvent,\n\t\t\tsection: AnalyticsSection.chatSidebar,\n\t\t});\n\t}\n\n\tonCreateEventFromTextareaClick(dialogId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tdialogId,\n\t\t\tevent: AnalyticsEvent.clickCreateEvent,\n\t\t\tsection: AnalyticsSection.chatTextarea,\n\t\t});\n\t}\n\n\tonCreateVoteFromTextareaClick(dialogId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tdialogId,\n\t\t\tevent: AnalyticsEvent.clickCreatePoll,\n\t\t\tsection: AnalyticsSection.chatTextarea,\n\t\t});\n\t}\n\n\t#onClick({ dialogId, event, section })\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId, true);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent,\n\t\t\tc_section: section,\n\t\t\tp1: `chatType_${getChatType(chat)}`,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\n\nimport {\n\tAnalyticsCategory,\n\tAnalyticsEvent,\n\tAnalyticsSection, AnalyticsSubSection,\n\tAnalyticsTool,\n} from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getChatType } from '../helpers/get-chat-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class ChatDelete\n{\n\tonClick(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.clickDelete,\n\t\t\ttype: getChatType(chat),\n\t\t\tc_section: AnalyticsSection.sidebar,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonCancel(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.cancelDelete,\n\t\t\ttype: getChatType(chat),\n\t\t\tc_section: AnalyticsSection.popup,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonConfirm(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.delete,\n\t\t\ttype: getChatType(chat),\n\t\t\tc_section: AnalyticsSection.popup,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonChatDeletedNotification(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst category = getCategoryByChatType(chat);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.chatPopup,\n\t\t\tevent: AnalyticsEvent.view,\n\t\t\ttype: `deleted_${category}`,\n\t\t\tc_section: AnalyticsSection.activeChat,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { MessageComponentManager } from 'im.v2.lib.message-component';\n\nimport {\n\tAnalyticsCategory,\n\tAnalyticsEvent,\n\tAnalyticsSection,\n\tAnalyticsSubSection,\n\tAnalyticsTool,\n\tAnalyticsType,\n} from '../const';\n\nimport type { ImModelMessage, ImModelChat, ImModelCommentInfo } from 'im.v2.model';\n\nexport class MessageDelete\n{\n\tonClickDelete({ messageId, dialogId }: {messageId: string | number, dialogId: string})\n\t{\n\t\tconst message: ImModelMessage = Core.getStore().getters['messages/getById'](messageId);\n\t\tconst type = new MessageComponentManager(message).getName();\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.message,\n\t\t\tevent: AnalyticsEvent.clickDelete,\n\t\t\ttype,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonCancel({ messageId, dialogId }: {messageId: string | number, dialogId: string})\n\t{\n\t\tconst message: ImModelMessage = Core.getStore().getters['messages/getById'](messageId);\n\t\tconst type = new MessageComponentManager(message).getName();\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.message,\n\t\t\tevent: AnalyticsEvent.cancelDelete,\n\t\t\ttype,\n\t\t\tc_section: AnalyticsSection.popup,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonNotFoundNotification({ dialogId }: {dialogId: string})\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\tif (!chat)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.chatPopup,\n\t\t\tevent: AnalyticsEvent.view,\n\t\t\ttype: AnalyticsType.deletedMessage,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t});\n\t}\n\n\tonDeletedPostNotification({ messageId, dialogId }: {messageId: string | number, dialogId: string})\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst commentInfo: ImModelCommentInfo = Core.getStore().getters['messages/comments/getByMessageId'](messageId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.chatPopup,\n\t\t\tevent: AnalyticsEvent.view,\n\t\t\ttype: AnalyticsType.deletedMessage,\n\t\t\tc_section: AnalyticsSection.comments,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp4: `parentChatId_${chat.chatId}`,\n\t\t\tp5: `chatId_${commentInfo.chatId}`,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { SidebarDetailBlock } from 'im.v2.const';\n\nimport { AnalyticsCategory, AnalyticsEvent, AnalyticsSection, AnalyticsTool, AnalyticsType } from '../const';\nimport { getChatType } from '../helpers/get-chat-type';\n\nexport class HistoryLimit\n{\n\tonDialogLimitExceeded({ dialogId, noMessages }: { dialogId: string, noMessages: boolean })\n\t{\n\t\tconst sectionValue = noMessages ? AnalyticsSection.chatStart : AnalyticsSection.chatHistory;\n\t\tconst dialog = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst chatType = getChatType(dialog);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.limitBanner,\n\t\t\tevent: AnalyticsEvent.view,\n\t\t\ttype: AnalyticsType.limitOfficeChatingHistory,\n\t\t\tc_section: sectionValue,\n\t\t\tp1: `chatType_${chatType}`,\n\t\t};\n\n\t\tsendData(params);\n\t}\n\n\tonSidebarLimitExceeded({ dialogId, panel }: { dialogId: string, panel: $Values<typeof SidebarDetailBlock> })\n\t{\n\t\tconst dialog = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst chatType = getChatType(dialog);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.limitBanner,\n\t\t\tevent: AnalyticsEvent.view,\n\t\t\ttype: AnalyticsType.limitOfficeChatingHistory,\n\t\t\tc_section: AnalyticsSection.sidebar,\n\t\t\tc_element: this.#getSidebarPanelNameForAnalytics(panel),\n\t\t\tp1: `chatType_${chatType}`,\n\t\t};\n\n\t\tsendData(params);\n\t}\n\n\tonDialogBannerClick({ dialogId }: {dialogId: string})\n\t{\n\t\tconst section = AnalyticsSection.chatWindow;\n\t\tthis.#onBannerClick({ dialogId, section });\n\t}\n\n\tonSidebarBannerClick({ dialogId, panel }: { dialogId: string, panel: $Values<typeof SidebarDetailBlock> })\n\t{\n\t\tconst section = AnalyticsSection.sidebar;\n\t\tconst element = this.#getSidebarPanelNameForAnalytics(panel);\n\t\tthis.#onBannerClick({ dialogId, section, element });\n\t}\n\n\tonGoToContextLimitExceeded({ dialogId }: { dialogId: string })\n\t{\n\t\tconst section = AnalyticsSection.messageLink;\n\t\tthis.#onBannerClick({ dialogId, section });\n\t}\n\n\t#onBannerClick({ dialogId, section, element }: { dialogId: string, section: string, element?: string })\n\t{\n\t\tconst dialog = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst chatType = getChatType(dialog);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.limitBanner,\n\t\t\tevent: AnalyticsEvent.click,\n\t\t\ttype: AnalyticsType.limitOfficeChatingHistory,\n\t\t\tc_section: section,\n\t\t\tp1: `chatType_${chatType}`,\n\t\t};\n\n\t\tif (element)\n\t\t{\n\t\t\tparams.c_element = element;\n\t\t}\n\n\t\tsendData(params);\n\t}\n\n\t#getSidebarPanelNameForAnalytics(panel: $Values<typeof SidebarDetailBlock>): string\n\t{\n\t\tswitch (panel)\n\t\t{\n\t\t\tcase SidebarDetailBlock.main:\n\t\t\t\treturn 'main';\n\t\t\tcase SidebarDetailBlock.file:\n\t\t\tcase SidebarDetailBlock.fileUnsorted:\n\t\t\tcase SidebarDetailBlock.audio:\n\t\t\tcase SidebarDetailBlock.brief:\n\t\t\tcase SidebarDetailBlock.document:\n\t\t\tcase SidebarDetailBlock.media:\n\t\t\t\treturn 'docs';\n\t\t\tcase SidebarDetailBlock.messageSearch:\n\t\t\t\treturn 'message_search';\n\t\t\tcase SidebarDetailBlock.favorite:\n\t\t\t\treturn 'favs';\n\t\t\tcase SidebarDetailBlock.link:\n\t\t\t\treturn 'links';\n\t\t\tcase SidebarDetailBlock.task:\n\t\t\t\treturn 'task';\n\t\t\tcase SidebarDetailBlock.meeting:\n\t\t\t\treturn 'event';\n\t\t\tdefault:\n\t\t\t\treturn 'unknown';\n\t\t}\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\n\nimport { AnalyticsEvent, AnalyticsTool, AnalyticsSection } from '../const';\nimport { getCollabId } from '../helpers/get-collab-id';\nimport { getUserType } from '../helpers/get-user-type';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\ntype SelectUserParams = {\n\tdialogId: string,\n\tposition: number,\n};\n\ntype SelectUserWithSourceParams = SelectUserParams & {\n\tsource: $Values<typeof SelectUserSource>,\n};\n\nconst SelectUserSource = Object.freeze({\n\trecent: 'recent',\n\tsearchResult: 'search_result',\n});\n\nexport class UserAdd\n{\n\t#hasSearchedBefore: boolean = false;\n\n\tonChatSidebarClick(dialogId: string)\n\t{\n\t\tthis.#onAddUserClick(dialogId, AnalyticsSection.chatSidebar);\n\t}\n\n\tonChatHeaderClick(dialogId: string)\n\t{\n\t\tthis.#onAddUserClick(dialogId, AnalyticsSection.chatHeader);\n\t}\n\n\tonStartSearch({ dialogId }: { dialogId: string })\n\t{\n\t\tif (this.#hasSearchedBefore)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#hasSearchedBefore = true;\n\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.startSearch,\n\t\t\tc_section: AnalyticsSection.userAdd,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\tonClosePopup()\n\t{\n\t\tthis.#hasSearchedBefore = false;\n\t}\n\n\tonSelectUserFromRecent({ dialogId, position }: SelectUserParams)\n\t{\n\t\tthis.#onSelectUser({\n\t\t\tdialogId,\n\t\t\tposition,\n\t\t\tsource: SelectUserSource.recent,\n\t\t});\n\t}\n\n\tonSelectUserFromSearchResult({ dialogId, position }: SelectUserParams)\n\t{\n\t\tthis.#onSelectUser({\n\t\t\tdialogId,\n\t\t\tposition,\n\t\t\tsource: SelectUserSource.searchResult,\n\t\t});\n\t}\n\n\t#onSelectUser({ dialogId, position, source }: SelectUserWithSourceParams)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId, true);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.selectUser,\n\t\t\ttype: source,\n\t\t\tc_section: AnalyticsSection.userAdd,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t\tp3: `position_${position}`,\n\t\t});\n\t}\n\n\t#onAddUserClick(dialogId: string, element: AnalyticsSection.chatSidebar | AnalyticsSection.chatHeader)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId, true);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.clickAddUser,\n\t\t\tc_section: element,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\n\nimport { AnalyticsEvent, AnalyticsTool, AnalyticsSubSection, AnalyticsSection } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getCollabId } from '../helpers/get-collab-id';\nimport { getUserType } from '../helpers/get-user-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class ChatEdit\n{\n\tonOpenForm(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.clickEdit,\n\t\t\tc_section: AnalyticsSection.sidebar,\n\t\t\tc_sub_section: AnalyticsSubSection.contextMenu,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n\n\tonSubmitForm(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tc_section: AnalyticsSection.editor,\n\t\t\tevent: AnalyticsEvent.submitEdit,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\n\nimport { AnalyticsCategory, AnalyticsEvent, AnalyticsTool, CreateChatContext } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getUserType } from '../helpers/get-user-type';\n\nexport class ChatCreate\n{\n\tonStartClick(type: $Values<typeof ChatType>)\n\t{\n\t\tconst currentLayout = Core.getStore().getters['application/getLayout'].name;\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(type),\n\t\t\tevent: AnalyticsEvent.clickCreateNew,\n\t\t\ttype,\n\t\t\tc_section: `${currentLayout}_tab`,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\tonCollabEmptyStateCreateClick()\n\t{\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(ChatType.collab),\n\t\t\tevent: AnalyticsEvent.clickCreateNew,\n\t\t\ttype: ChatType.collab,\n\t\t\tc_section: CreateChatContext.collabEmptyState,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\tonMenuCreateClick()\n\t{\n\t\tconst currentLayout = Core.getStore().getters['application/getLayout'].name;\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.messenger,\n\t\t\tevent: AnalyticsEvent.openCreateMenu,\n\t\t\tc_section: `${currentLayout}_tab`,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { AnalyticsCategory, AnalyticsEvent, AnalyticsTool, AnalyticsSection } from '../const';\n\nexport class Supervisor\n{\n\tonOpenPriceTable(featureId: string)\n\t{\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.infoHelper,\n\t\t\tcategory: AnalyticsCategory.limit,\n\t\t\tevent: AnalyticsEvent.openPrices,\n\t\t\ttype: featureId,\n\t\t\tc_section: AnalyticsSection.chat,\n\t\t});\n\t}\n\n\tonOpenToolsSettings(toolId: string)\n\t{\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.infoHelper,\n\t\t\tcategory: AnalyticsCategory.toolOff,\n\t\t\tevent: AnalyticsEvent.openSettings,\n\t\t\ttype: toolId,\n\t\t\tc_section: AnalyticsSection.chat,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { AnalyticsCategory, AnalyticsEvent, AnalyticsSection, AnalyticsTool } from '../const';\n\nexport class CheckIn\n{\n\tonOpenCheckInPopup()\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.popupOpen,\n\t\t\ttool: AnalyticsTool.checkin,\n\t\t\tcategory: AnalyticsCategory.shift,\n\t\t\tc_section: AnalyticsSection.chat,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\n\nimport {\n\tAnalyticsCategory,\n\tAnalyticsEvent,\n\tAnalyticsSection,\n\tAnalyticsStatus,\n\tAnalyticsTool,\n\tCopilotChatType,\n\tAnalyticsType,\n} from '../const';\n\nconst CopilotEntryPoint = Object.freeze({\n\tcreate_menu: 'create_menu',\n\trole_picker: 'role_picker',\n});\n\nexport class Copilot\n{\n\tonCreateChat(chatId: number): void\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.createNewChat,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t\ttype: AnalyticsType.ai,\n\t\t\tp3: CopilotChatType.private,\n\t\t\tp5: `chatId_${chatId}`,\n\t\t});\n\t}\n\n\tonCreateDefaultChatInRecent(): void\n\t{\n\t\tthis.#sendDataForCopilotCreation({ c_sub_section: CopilotEntryPoint.create_menu });\n\t}\n\n\tonSelectRoleInRecent(): void\n\t{\n\t\tthis.#sendDataForCopilotCreation({ c_sub_section: CopilotEntryPoint.role_picker });\n\t}\n\n\tonOpenChat(dialogId: string): void\n\t{\n\t\tconst dialog = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst copilotChatType = dialog.userCounter <= 2 ? CopilotChatType.private : CopilotChatType.multiuser;\n\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.openChat,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t\ttype: AnalyticsType.ai,\n\t\t\tp3: copilotChatType,\n\t\t\tp5: `chatId_${dialog.chatId}`,\n\t\t});\n\t}\n\n\tonOpenTab({ isAvailable = true } = {}): void\n\t{\n\t\tconst payload = {\n\t\t\tevent: AnalyticsEvent.openTab,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t\tstatus: isAvailable ? AnalyticsStatus.success : AnalyticsStatus.errorTurnedOff,\n\t\t};\n\n\t\tsendData(payload);\n\t}\n\n\tonUseAudioInput(): void\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.audioUse,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t});\n\t}\n\n\t#sendDataForCopilotCreation(params: { c_sub_section: string }): void\n\t{\n\t\tconst currentLayout = Core.getStore().getters['application/getLayout'].name;\n\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.clickCreateNew,\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.copilot,\n\t\t\tc_section: `${currentLayout}_tab`,\n\t\t\ttype: AnalyticsType.copilot,\n\t\t\t...params,\n\t\t});\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { ChatType } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\n\nimport { AnalyticsEvent, AnalyticsSection, AnalyticsTool } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getChatType } from '../helpers/get-chat-type';\nimport { getCollabId } from '../helpers/get-collab-id';\nimport { getUserType } from '../helpers/get-user-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class AttachMenu\n{\n\tonOpenUploadMenu(dialogId: string)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst chatType: $Values<ChatType> = getChatType(chat);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.clickAttach,\n\t\t\tc_section: AnalyticsSection.chatTextarea,\n\t\t\tp1: `chatType_${chatType}`,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chat.type === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\tsendData(params);\n\t}\n}\n","import { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getUserType } from '../helpers/get-user-type';\nimport { getCollabId } from '../analytics';\nimport { AnalyticsTool, AnalyticsEvent } from '../const';\n\nimport type { AnalyticsOptions } from 'ui.analytics';\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class Vote\n{\n\tgetSerializedParams(dialogId: string): string\n\t{\n\t\tconst options = this.getAnalyticsOptions(dialogId);\n\t\tconst queryParams = Object.entries(options).map(([optionName, optionValue]) => {\n\t\t\treturn `st[${optionName}]=${encodeURIComponent(optionValue)}`;\n\t\t});\n\n\t\treturn queryParams.join('&');\n\t}\n\n\tgetAnalyticsOptions(dialogId: string): Partial<AnalyticsOptions>\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId, true);\n\t\tconst chatType = chat.type;\n\t\tconst options = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tevent: AnalyticsEvent.clickCreatePoll,\n\t\t\tcategory: getCategoryByChatType(chatType),\n\t\t\tp1: `chatType_${chatType}`,\n\t\t\tp2: getUserType(),\n\t\t\tp5: `chatId_${chat.chatId}`,\n\t\t};\n\n\t\tif (chatType === ChatType.comment)\n\t\t{\n\t\t\tconst parentChat = Core.getStore().getters['chats/getByChatId'](chat.parentChatId);\n\t\t\toptions.p1 = `chatType_${parentChat.type}`;\n\t\t\toptions.p4 = `parentChatId_${chat.parentChatId}`;\n\t\t}\n\n\t\tif (chatType === ChatType.collab)\n\t\t{\n\t\t\toptions.p4 = getCollabId(chat.chatId);\n\t\t}\n\n\t\treturn options;\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\n\nimport { AnalyticsEvent, AnalyticsTool, MessagePinsTypes } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\nimport { getChatType } from '../helpers/get-chat-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport class MessagePins\n{\n\tonPin(chatId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tchatId,\n\t\t\tevent: AnalyticsEvent.pinMessage,\n\t\t});\n\t}\n\n\tonUnpin(chatId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tchatId,\n\t\t\tevent: AnalyticsEvent.unpinMessage,\n\t\t});\n\t}\n\n\tonReachingLimit(chatId: string)\n\t{\n\t\tthis.#onClick({\n\t\t\tchatId,\n\t\t\tevent: AnalyticsEvent.pinnedMessageLimitException,\n\t\t});\n\t}\n\n\t#onClick({ chatId, event }: { chatId: string, event: string })\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](`chat${chatId}`, true);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent,\n\t\t\tp1: `chatType_${getChatType(chat)}`,\n\t\t\t...this.#getAdditionalParams(event, chatId),\n\t\t};\n\n\t\tsendData(params);\n\t}\n\n\t#getAdditionalParams(event: string, chatId: string): Record<string, string>\n\t{\n\t\tconst pinnedCount: number = Core.getStore().getters['messages/pin/getPinned'](chatId).length;\n\n\t\tif (event === AnalyticsEvent.pinMessage)\n\t\t{\n\t\t\treturn {\n\t\t\t\tp3: `pinnedCount_${pinnedCount}`,\n\t\t\t\ttype: pinnedCount > 1 ? MessagePinsTypes.multiple : MessagePinsTypes.single,\n\t\t\t};\n\t\t}\n\n\t\tif (event === AnalyticsEvent.unpinMessage)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttype: pinnedCount > 0 ? MessagePinsTypes.selected : MessagePinsTypes.single,\n\t\t\t};\n\t\t}\n\n\t\treturn {};\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { Core } from 'im.v2.application.core';\nimport { getUserType } from 'im.v2.lib.analytics';\n\nimport { AnalyticsEvent, AnalyticsSection, AnalyticsTool } from '../const';\nimport { getCategoryByChatType } from '../helpers/get-category-by-chat-type';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nconst SelectRecipientSource = Object.freeze({\n\trecent: 'recent',\n\tsearchResult: 'search_result',\n\tnotes: 'notes',\n});\n\ntype RecipientParams = {\n\tdialogId: string,\n\tposition: number,\n}\n\ntype RecipientParamsWithSource = RecipientParams & {\n\tsource: $Values<typeof SelectRecipientSource>\n};\n\nexport class MessageForward\n{\n\t#hasSearchedBefore: boolean = false;\n\n\tonClickForward({ dialogId }: { dialogId: string })\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.clickShare,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\tonStartSearch({ dialogId }: { dialogId: string })\n\t{\n\t\tif (this.#hasSearchedBefore)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#hasSearchedBefore = true;\n\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.startSearch,\n\t\t\tc_section: AnalyticsSection.forward,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\tonSelectRecipientFromRecent({ dialogId, position }: RecipientParams)\n\t{\n\t\tthis.#onSelectRecipient({\n\t\t\tdialogId,\n\t\t\tposition,\n\t\t\tsource: SelectRecipientSource.recent,\n\t\t});\n\t}\n\n\tonSelectRecipientFromSearchResult({ dialogId, position }: RecipientParams)\n\t{\n\t\tthis.#onSelectRecipient({\n\t\t\tdialogId,\n\t\t\tposition,\n\t\t\tsource: SelectRecipientSource.searchResult,\n\t\t});\n\t}\n\n\tonClosePopup()\n\t{\n\t\tthis.#hasSearchedBefore = false;\n\t}\n\n\t#onSelectRecipient({ dialogId, position, source }: RecipientParamsWithSource)\n\t{\n\t\tconst chat: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst type = this.#isNotesChat(dialogId) ? SelectRecipientSource.notes : source;\n\n\t\tsendData({\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chat.type),\n\t\t\tevent: AnalyticsEvent.selectRecipient,\n\t\t\ttype,\n\t\t\tc_section: AnalyticsSection.forward,\n\t\t\tp1: `chatType_${chat.type}`,\n\t\t\tp2: getUserType(),\n\t\t\tp3: `position_${position}`,\n\t\t});\n\t}\n\n\t#isNotesChat(dialogId: string): boolean\n\t{\n\t\treturn Core.getUserId().toString() === dialogId;\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nimport { AnalyticsCategory, AnalyticsTool, AnalyticsEvent, AnalyticsType } from '../const';\n\nexport class DesktopUpdateBanner\n{\n\tonShow()\n\t{\n\t\tsendData(this.#buildAnalyticsData(AnalyticsEvent.view));\n\t}\n\n\tonClickUpdate()\n\t{\n\t\tsendData(this.#buildAnalyticsData(AnalyticsEvent.clickUpdate));\n\t}\n\n\tonClickMoreInformation()\n\t{\n\t\tsendData(this.#buildAnalyticsData(AnalyticsEvent.clickMoreInformation));\n\t}\n\n\tonOpenWebVersion()\n\t{\n\t\tsendData(this.#buildAnalyticsData(AnalyticsEvent.goToWeb));\n\t}\n\n\t#buildAnalyticsData(event: string): { [key: string]: string }\n\t{\n\t\treturn {\n\t\t\ttool: AnalyticsTool.inform,\n\t\t\tcategory: AnalyticsCategory.updateAppPopup,\n\t\t\tevent,\n\t\t\ttype: AnalyticsType.may25DesktopRelease,\n\t\t};\n\t}\n}\n","import { Text } from 'main.core';\nimport { sendData } from 'ui.analytics';\n\nimport { ChatType, Layout, UserRole } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\n\nimport { AnalyticsEvent, AnalyticsTool, AnalyticsCategory } from './const';\n\nimport { getCollabId } from './helpers/get-collab-id';\nimport { getUserType } from './helpers/get-user-type';\nimport { getCategoryByChatType } from './helpers/get-category-by-chat-type';\nimport { getChatType } from './helpers/get-chat-type';\n\nimport { MessageFiles } from './classes/message-files';\nimport { CollabEntities } from './classes/collab-entities';\nimport { ChatEntities } from './classes/chat-entities';\nimport { ChatDelete } from './classes/chat-delete';\nimport { MessageDelete } from './classes/message-delete';\nimport { HistoryLimit } from './classes/history-limit';\nimport { UserAdd } from './classes/user-add';\nimport { ChatEdit } from './classes/chat-edit';\nimport { ChatCreate } from './classes/chat-create';\nimport { Supervisor } from './classes/supervisor';\nimport { CheckIn } from './classes/check-in';\nimport { Copilot } from './classes/copilot';\nimport { AttachMenu } from './classes/attach-menu';\nimport { Vote } from './classes/vote-create';\nimport { MessagePins } from './classes/message-pins';\nimport { MessageForward } from './classes/message-forward';\nimport { DesktopUpdateBanner } from './classes/desktop-update-banner';\n\nimport type { ImModelChat } from 'im.v2.model';\n\ntype DialogId = string;\n\nexport { CreateChatContext } from './const';\nexport { getCollabId } from './helpers/get-collab-id';\nexport { getUserType } from './helpers/get-user-type';\n\nconst PseudoChatTypeForNotes = 'notes';\n\nexport class Analytics\n{\n\t#excludedChats: Set<DialogId> = new Set();\n\t#chatsWithTyping: Set<DialogId> = new Set();\n\t#currentTab: string = Layout.chat.name;\n\n\tchatCreate: ChatCreate = new ChatCreate();\n\tchatEdit: ChatEdit = new ChatEdit();\n\tchatDelete: ChatDelete = new ChatDelete();\n\tmessageDelete: MessageDelete = new MessageDelete();\n\thistoryLimit: HistoryLimit = new HistoryLimit();\n\tuserAdd: UserAdd = new UserAdd();\n\tcollabEntities: CollabEntities = new CollabEntities();\n\tchatEntities: ChatEntities = new ChatEntities();\n\tsupervisor: Supervisor = new Supervisor();\n\tcheckIn: CheckIn = new CheckIn();\n\tcopilot: Copilot = new Copilot();\n\tattachMenu: AttachMenu = new AttachMenu();\n\tmessageFiles: MessageFiles = new MessageFiles();\n\tvote: Vote = new Vote();\n\tmessagePins: MessagePins = new MessagePins();\n\tmessageForward: MessageForward = new MessageForward();\n\tdesktopUpdateBanner: DesktopUpdateBanner = new DesktopUpdateBanner();\n\n\tstatic #instance: Analytics;\n\n\tstatic getInstance(): Analytics\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tignoreNextChatOpen(dialogId: string): void\n\t{\n\t\tthis.#excludedChats.add(dialogId);\n\t}\n\n\tonOpenMessenger()\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.openMessenger,\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.messenger,\n\t\t});\n\t}\n\n\tonOpenTab(tabName: string)\n\t{\n\t\tconst existingTabs = [\n\t\t\tLayout.chat.name,\n\t\t\tLayout.copilot.name,\n\t\t\tLayout.collab.name,\n\t\t\tLayout.channel.name,\n\t\t\tLayout.notification.name,\n\t\t\tLayout.settings.name,\n\t\t\tLayout.openlines.name,\n\t\t];\n\n\t\tif (!existingTabs.includes(tabName))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#currentTab === tabName)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#currentTab = tabName;\n\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.openTab,\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: AnalyticsCategory.messenger,\n\t\t\ttype: tabName,\n\t\t\tp2: getUserType(),\n\t\t});\n\t}\n\n\t#isNotes(dialog: ImModelChat): boolean\n\t{\n\t\treturn Number.parseInt(dialog.dialogId, 10) === Core.getUserId();\n\t}\n\n\tonOpenChat(dialog: ImModelChat)\n\t{\n\t\tif (this.#excludedChats.has(dialog.dialogId))\n\t\t{\n\t\t\tthis.#excludedChats.delete(dialog.dialogId);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#chatsWithTyping.delete(dialog.dialogId);\n\t\tconst chatType = getChatType(dialog);\n\n\t\tif (chatType === ChatType.copilot)\n\t\t{\n\t\t\tthis.copilot.onOpenChat(dialog.dialogId);\n\t\t}\n\n\t\tconst currentLayout = Core.getStore().getters['application/getLayout'].name;\n\t\tconst isMember = dialog.role === UserRole.guest ? 'N' : 'Y';\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chatType),\n\t\t\tevent: AnalyticsEvent.openExisting,\n\t\t\ttype: this.#isNotes(dialog) ? PseudoChatTypeForNotes : chatType,\n\t\t\tc_section: `${currentLayout}_tab`,\n\t\t\tp2: getUserType(),\n\t\t};\n\n\t\tif (!this.#isNotes(dialog))\n\t\t{\n\t\t\tparams.p5 = `chatId_${dialog.chatId}`;\n\t\t}\n\n\t\tif (chatType === ChatType.comment)\n\t\t{\n\t\t\tconst parentChat = Core.getStore().getters['chats/getByChatId'](dialog.parentChatId);\n\t\t\tparams.p1 = `chatType_${parentChat.type}`;\n\t\t\tparams.p4 = `parentChatId_${dialog.parentChatId}`;\n\t\t}\n\n\t\tif (chatType === ChatType.collab)\n\t\t{\n\t\t\tparams.p4 = getCollabId(dialog.chatId);\n\t\t}\n\n\t\tif (chatType !== ChatType.copilot)\n\t\t{\n\t\t\tparams.p3 = `isMember_${isMember}`;\n\t\t}\n\n\t\tif (chatType === ChatType.copilot)\n\t\t{\n\t\t\tconst role = Core.getStore().getters['copilot/chats/getRole'](dialog.dialogId);\n\t\t\tparams.p4 = `role_${Text.toCamelCase(role.code)}`;\n\t\t}\n\n\t\tsendData(params);\n\t}\n\n\tonPinChat(dialog: ImModelChat)\n\t{\n\t\tif (!this.#isNotes(dialog))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatType = getChatType(dialog);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chatType),\n\t\t\tevent: AnalyticsEvent.pinChat,\n\t\t\tp1: `chatType_${this.#isNotes(dialog) ? PseudoChatTypeForNotes : chatType}`,\n\t\t};\n\n\t\tsendData(params);\n\t}\n\n\tonTypeMessage(dialog: ImModelChat)\n\t{\n\t\tif (!this.#isNotes(dialog) || this.#chatsWithTyping.has(dialog.dialogId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#chatsWithTyping.add(dialog.dialogId);\n\n\t\tconst chatType = getChatType(dialog);\n\n\t\tconst params = {\n\t\t\ttool: AnalyticsTool.im,\n\t\t\tcategory: getCategoryByChatType(chatType),\n\t\t\tevent: AnalyticsEvent.typeMessage,\n\t\t\tp1: `chatType_${this.#isNotes(dialog) ? PseudoChatTypeForNotes : chatType}`,\n\t\t};\n\n\t\tsendData(params);\n\t}\n}\n"],"names":["CopilotChatType","Object","freeze","private","multiuser","AnalyticsEvent","openMessenger","openChat","createNewChat","audioUse","openTab","popupOpen","openPrices","openSettings","clickCreateNew","openExisting","typeMessage","pinChat","clickDelete","clickShare","cancelDelete","delete","view","click","clickEdit","submitEdit","clickCallButton","clickStartConf","clickJoin","clickAddUser","openCalendar","openTasks","openFiles","clickCreatePoll","clickCreateTask","clickCreateEvent","clickAttach","downloadFile","saveToDisk","pinMessage","unpinMessage","pinnedMessageLimitException","startSearch","selectRecipient","selectUser","openCreateMenu","clickUpdate","clickMoreInformation","goToWeb","AnalyticsTool","ai","checkin","im","infoHelper","inform","AnalyticsCategory","chatOperations","shift","messenger","chat","channel","videoconf","copilot","limit","limitBanner","toolOff","message","chatPopup","call","collab","updateAppPopup","AnalyticsType","deletedMessage","limitOfficeChatingHistory","privateCall","groupCall","may25DesktopRelease","AnalyticsSection","copilotTab","chatStart","chatHistory","sidebar","popup","activeChat","comments","chatHeader","chatSidebar","chatTextarea","editor","chatWindow","forward","userAdd","AnalyticsSubSection","contextMenu","messageLink","chatList","window","AnalyticsElement","initialBanner","videocall","audiocall","startButton","AnalyticsStatus","success","errorTurnedOff","CreateChatContext","collabEmptyState","MessagePinsTypes","single","multiple","selected","getCollabId","chatId","collabInfo","Core","getStore","getters","collabId","AnalyticUserType","userIntranet","userExtranet","userCollaber","getUserType","user","getUserId","type","UserType","extranet","collaber","getCategoryByChatType","ChatType","openChannel","comment","generalChannel","CUSTOM_CHAT_TYPE","getChatType","AnalyticsAmountFilesType","many","AnalyticsFileType","FileType","media","any","MessageFiles","onClickDownload","messageId","dialogId","params","tool","category","event","getAnalyticsFileType","c_section","c_sub_section","p1","p2","p3","getFilesAmountParam","p5","p4","sendData","onClickSaveOnDisk","files","length","fileTypes","map","fileId","uniqueTypes","Set","includes","image","video","EntityToEventMap","CollabEntityType","tasks","calendar","CollabEntities","onClick","ChatEntities","onCreateTaskFromSidebarClick","section","onCreateTaskFromTextareaClick","onCreateEventFromSidebarClick","onCreateEventFromTextareaClick","onCreateVoteFromTextareaClick","ChatDelete","onCancel","onConfirm","onChatDeletedNotification","MessageDelete","onClickDelete","MessageComponentManager","getName","onNotFoundNotification","onDeletedPostNotification","commentInfo","HistoryLimit","onDialogLimitExceeded","noMessages","sectionValue","dialog","chatType","onSidebarLimitExceeded","panel","c_element","onDialogBannerClick","onSidebarBannerClick","element","onGoToContextLimitExceeded","SidebarDetailBlock","main","file","fileUnsorted","audio","brief","document","messageSearch","favorite","link","task","meeting","SelectUserSource","recent","searchResult","UserAdd","onChatSidebarClick","onChatHeaderClick","onStartSearch","onClosePopup","onSelectUserFromRecent","position","source","onSelectUserFromSearchResult","ChatEdit","onOpenForm","onSubmitForm","ChatCreate","onStartClick","currentLayout","name","onCollabEmptyStateCreateClick","onMenuCreateClick","Supervisor","onOpenPriceTable","featureId","onOpenToolsSettings","toolId","CheckIn","onOpenCheckInPopup","CopilotEntryPoint","create_menu","role_picker","Copilot","onCreateChat","onCreateDefaultChatInRecent","onSelectRoleInRecent","onOpenChat","copilotChatType","userCounter","onOpenTab","isAvailable","payload","status","onUseAudioInput","AttachMenu","onOpenUploadMenu","Vote","getSerializedParams","options","getAnalyticsOptions","queryParams","entries","optionName","optionValue","encodeURIComponent","join","parentChat","parentChatId","MessagePins","onPin","onUnpin","onReachingLimit","pinnedCount","SelectRecipientSource","notes","MessageForward","onClickForward","onSelectRecipientFromRecent","onSelectRecipientFromSearchResult","toString","DesktopUpdateBanner","onShow","onClickUpdate","onClickMoreInformation","onOpenWebVersion","PseudoChatTypeForNotes","Analytics","Layout","chatCreate","chatEdit","chatDelete","messageDelete","historyLimit","collabEntities","chatEntities","supervisor","checkIn","attachMenu","messageFiles","vote","messagePins","messageForward","desktopUpdateBanner","getInstance","ignoreNextChatOpen","add","onOpenMessenger","tabName","existingTabs","notification","settings","openlines","has","isMember","role","UserRole","guest","Text","toCamelCase","code","onPinChat","onTypeMessage","Number","parseInt"],"mappings":"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"}