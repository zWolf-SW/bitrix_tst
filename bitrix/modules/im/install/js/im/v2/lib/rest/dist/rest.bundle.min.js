this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,r,n,s){"use strict";const o="invalid_authentication";const i={[o]:{retryCount:1,timeout:null}};let c=null;const u=(e,r={})=>{const n={...r,data:B(r.data)};return new Promise(((r,s)=>{t.ajax.runAction(e,n).then((e=>{c=null;return r(e.data)})).catch((t=>{if(c===0){return s(t.errors)}if(a(t.errors)){return f(e,n,t)}return s(t.errors)}))}))};const a=e=>e.some((e=>i[e.code]));const f=async(e,t,s)=>{const o=d(s.errors);if(!c){c=o.retryCount}c--;if(h(s.errors)){await r.EventEmitter.emitAsync(n.EventType.request.onAuthError,{errors:s.errors})}if(o.timeout){return new Promise((r=>{setTimeout((()=>{r(u(e,t))}),o.timeout)}))}return u(e,t)};const d=e=>{const t=e.find((e=>i[e.code]));return i[t.code]};const h=e=>e.some((e=>e.code===o));const l=e=>{const t={};const r=new Set;Object.entries(e).forEach((([e,n])=>{r.add(e);t[e]=[e,n]}));return new Promise(((e,n)=>{s.Core.getRestClient().callBatch(t,(t=>{const s={};for(const e of r){const r=t[e];if(r.error()){const{error:t,error_description:s}=r.error().ex;n({method:e,code:t,description:s});break}s[e]=r.data()}return e(s)}))}))};const B=e=>{if(e instanceof FormData){return e}if(!t.Type.isObjectLike(e)){return{}}const r={};for(const[n,s]of Object.entries(e)){let e=s;if(t.Type.isBoolean(s)){e=s===true?"Y":"N"}r[n]=e}return r};e.runAction=u;e.callBatch=l})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Event,BX.Messenger.v2.Const,BX.Messenger.v2.Application);
//# sourceMappingURL=rest.bundle.map.js