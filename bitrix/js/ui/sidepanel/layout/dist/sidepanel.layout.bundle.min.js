this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,s,t,i,o,a,n){"use strict";let l=e=>e,r,d,c,b,u,p,v,h,f,B,P;const g=BX.UI;const y=BX.SidePanel;function F(e={}){e={...e};e.design={...e.design};e.design={margin:true,section:true,...e.design};e.extensions=[...e.extensions||[],"ui.sidepanel.layout","ui.buttons"];if(e.toolbar){e.extensions.push("ui.buttons.icons")}if(e.design.section){e.extensions.push("ui.sidepanel-content")}if(e.menu){e.extensions.push("ui.sidepanel.menu")}return e}var m=babelHelpers.classPrivateFieldLooseKey("container");var L=babelHelpers.classPrivateFieldLooseKey("containerFooter");var H=babelHelpers.classPrivateFieldLooseKey("options");var T=babelHelpers.classPrivateFieldLooseKey("menu");var w=babelHelpers.classPrivateFieldLooseKey("getScrollWidth");var D=babelHelpers.classPrivateFieldLooseKey("adjustFooter");var X=babelHelpers.classPrivateFieldLooseKey("onMenuItemClick");class j{static createContent(e={}){e=F(e);return top.BX.Runtime.loadExtension(e.extensions).then((()=>new j(e).render()))}static createLayout(e={}){e=F(e);return top.BX.Runtime.loadExtension(e.extensions).then((()=>new j(e)))}constructor(e={}){Object.defineProperty(this,X,{value:I});Object.defineProperty(this,D,{value:C});Object.defineProperty(this,w,{value:E});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,H)[H]=F(e);const s=babelHelpers.classPrivateFieldLooseBase(this,H)[H].menu;if(s){babelHelpers.classPrivateFieldLooseBase(this,T)[T]=new n.Menu(Object.assign(s));if(i.Type.isUndefined(s.contentAttribute)){s.contentAttribute="data-menu-item-id"}if(s.contentAttribute){babelHelpers.classPrivateFieldLooseBase(this,T)[T].subscribe("click",(e=>{babelHelpers.classPrivateFieldLooseBase(this,X)[X]((e.getData()||{}).item)}))}}}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,m)[m]){babelHelpers.classPrivateFieldLooseBase(this,m)[m]=i.Tag.render(r||(r=l`<div class="ui-sidepanel-layout"></div>`))}return babelHelpers.classPrivateFieldLooseBase(this,m)[m]}getMenu(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T]}getFooterContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,L)[L]){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=i.Tag.render(d||(d=l`<div class="ui-sidepanel-layout-footer"></div>`))}return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}render(e="",s=false){if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].content&&!s){e=babelHelpers.classPrivateFieldLooseBase(this,H)[H].content();if(Object.prototype.toString.call(e)==="[object Promise]"||e.toString&&e.toString()==="[object BX.Promise]"){return e.then((e=>this.render(e,true)))}}const t=this.getContainer();t.innerHTML="";if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].title){const e=i.Tag.safe(c||(c=l`${0}`),babelHelpers.classPrivateFieldLooseBase(this,H)[H].title);const s=i.Tag.render(b||(b=l`
				<div class="ui-sidepanel-layout-header">
					<div class="ui-sidepanel-layout-title">${0}</div>
				</div>
			`),e);if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,H)[H].toolbar)){const e=i.Tag.render(u||(u=l`<div class="ui-sidepanel-layout-toolbar"></div>`));babelHelpers.classPrivateFieldLooseBase(this,H)[H].toolbar({...g}).forEach((s=>{if(s instanceof a.BaseButton){s.renderTo(e)}else if(i.Type.isDomNode(s)){i.Dom.append(s,e)}else{throw new i.BaseError(`Wrong button type ${s}`)}}));i.Dom.append(e,s)}i.Dom.append(s,t)}{const s=babelHelpers.classPrivateFieldLooseBase(this,H)[H].design;const o=["ui-sidepanel-layout-content"];const a=[];if(s.margin){if(s.margin===true){o.push("ui-sidepanel-layout-content-margin")}else{a.push(`margin: ${s.margin}`)}}let n=i.Tag.render(p||(p=l`<div class="${0}" style="${0}"></div>`),o.join(" "),a.join("; "));i.Dom.append(n,t);if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]){babelHelpers.classPrivateFieldLooseBase(this,T)[T].renderTo(n)}i.Dom.append(i.Tag.render(v||(v=l`<div class="ui-sidepanel-layout-content-inner"></div>`)),n);n=n.lastElementChild;if(s.section){i.Dom.append(i.Tag.render(h||(h=l`<div class="ui-slider-section ui-sidepanel-layout-content-fill-height"></div>`)),n);n=n.firstElementChild}if(i.Type.isString(e)){n.innerHTML=e}else if(e instanceof Element){i.Dom.append(e,n)}if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]){babelHelpers.classPrivateFieldLooseBase(this,X)[X](babelHelpers.classPrivateFieldLooseBase(this,T)[T].getActiveItem(),n)}}const o=i.Type.isUndefined(babelHelpers.classPrivateFieldLooseBase(this,H)[H].buttons);if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,H)[H].buttons)||o){const e=new a.CancelButton({onclick:()=>y.Instance.close()});const s=new a.CloseButton({onclick:()=>y.Instance.close()});const n={...g,cancelButton:e,closeButton:s};if(o){babelHelpers.classPrivateFieldLooseBase(this,H)[H].buttons=()=>[s]}const r=babelHelpers.classPrivateFieldLooseBase(this,H)[H].buttons(n);if(r&&r.length>0){i.Dom.append(i.Tag.render(f||(f=l`<div class="ui-sidepanel-layout-footer-anchor"></div>`)),t);const e=["ui-sidepanel-layout-buttons"];if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].design.alignButtonsLeft){e.push("ui-sidepanel-layout-buttons-align-left")}const s=i.Tag.render(B||(B=l`<div class="${0}"></div>`),e.join(" "));i.Dom.append(s,this.getFooterContainer());r.forEach((e=>{if(e instanceof a.BaseButton){e.renderTo(s)}else if(i.Type.isDomNode(e)){i.Dom.append(e,s)}else{throw new i.BaseError(`Wrong button type ${e}`)}}));i.Dom.append(this.getFooterContainer(),t)}}setTimeout((()=>{this.afterRender()}));return t}afterRender(){babelHelpers.classPrivateFieldLooseBase(this,D)[D]();const e=i.Runtime.throttle(babelHelpers.classPrivateFieldLooseBase(this,D)[D],300,this);i.Event.bind(window,"resize",e);const s=y.Instance.getTopSlider();if(s){o.EventEmitter.subscribeOnce(s,"SidePanel.Slider:onDestroy",(()=>{i.Event.unbind(window,"resize",e)}))}}}function E(){const e=i.Tag.render(P||(P=l`<div style="overflow-y: scroll; width: 50px; height: 50px; opacity: 0; pointer-events: none; position: absolute;"></div>`));i.Dom.append(e,document.body);const s=e.offsetWidth-e.clientWidth;i.Dom.remove(e);return s}function C(){const e=this.getContainer().parentNode;if(e!==null&&e.scrollWidth>e.offsetWidth){i.Dom.style(this.getFooterContainer(),"bottom",`${babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}px`)}else{i.Dom.style(this.getFooterContainer(),"bottom",0)}}function I(e,s=null){if(!e){return}const t=e.getId();const i=babelHelpers.classPrivateFieldLooseBase(this,H)[H].menu.contentAttribute;if(!i){return}s=s||babelHelpers.classPrivateFieldLooseBase(this,m)[m];let o=s.querySelectorAll(`[${i}]`);o=Array.prototype.slice.call(o);o.forEach((e=>{e.hidden=e.getAttribute(i)!==t}))}e.Layout=j})(this.BX.UI.SidePanel=this.BX.UI.SidePanel||{},BX,BX,BX,BX.Event,BX.UI,BX.UI.SidePanel);
//# sourceMappingURL=sidepanel.layout.bundle.map.js