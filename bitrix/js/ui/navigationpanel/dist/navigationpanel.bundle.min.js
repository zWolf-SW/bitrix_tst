this.BX=this.BX||{};(function(e,t,i,n,s,a){"use strict";let l=e=>e,r,o,c,h;function u(e,t){d(e,t);t.add(e)}function v(e,t,i){d(e,t);t.set(e,i)}function d(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function f(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var p=new WeakMap;var k=new WeakMap;var m=new WeakSet;var b=new WeakSet;var g=new WeakSet;let C=function(){function e({id:t,title:n,active:s,events:a,link:l,locked:r,dropdown:o=false,menuItems:c=[]}){babelHelpers.classCallCheck(this,e);u(this,g);u(this,b);u(this,m);v(this,p,{writable:true,value:false});v(this,k,{writable:true,value:[]});this.id=t!==null&&t!==void 0?t:null;this.title=i.Type.isString(n)?n:null;this.active=i.Type.isBoolean(s)?s:false;this.events=a!==null&&a!==void 0?a:null;this.link=l!==null&&l!==void 0?l:null;this.locked=i.Type.isBoolean(r)?r:false;babelHelpers.classPrivateFieldSet(this,p,o===true);babelHelpers.classPrivateFieldSet(this,k,c!==null&&c!==void 0?c:[]);this.linkContainer=null;this.bindEvents()}babelHelpers.createClass(e,[{key:"getTitle",value:function e(){if(!this.title){this.title=i.Tag.render(r||(r=l`
				<div class="ui-nav-panel__item-title">${0}</div>	
			`),this.title)}return this.title}},{key:"getContainer",value:function e(){if(this.active===false&&babelHelpers.classPrivateFieldGet(this,p)){return null}if(!this.linkContainer){const e=this.id?`id="ui-nav-panel-item-${this.id}"`:"";this.linkContainer=i.Tag.render(o||(o=l`
				<div ${0} class="ui-nav-panel__item">
					<span>${0}</span>
					${0}
				</div>
			`),e,this.title?this.getTitle():"",babelHelpers.classPrivateFieldGet(this,p)?f(this,m,w).call(this):"");if(babelHelpers.classPrivateFieldGet(this,p)){i.Dom.addClass(this.linkContainer,"--dropdown")}this.setEvents();if(this.active){this.activate()}else{this.inactivate()}if(this.locked){this.lock()}else{this.unLock()}}return this.linkContainer}},{key:"bindEvents",value:function e(){n.EventEmitter.subscribe("BX.UI.NavigationPanel.Item:active",(e=>{if(e.data!==this){this.inactivate()}}))}},{key:"isLocked",value:function e(){return this.locked}},{key:"lock",value:function e(){this.locked=true;i.Dom.addClass(this.getContainer(),"--locked")}},{key:"unLock",value:function e(){this.locked=false;i.Dom.removeClass(this.getContainer(),"--locked")}},{key:"setEvents",value:function e(){if(babelHelpers.classPrivateFieldGet(this,p)){i.Event.bind(this.linkContainer,"click",(()=>{f(this,b,y).call(this)}));return}if(this.link){this.linkContainer=i.Tag.render(c||(c=l`
				<a class="ui-nav-panel__item">
					<span>${0}</span>
				</a>
			`),this.title?this.getTitle():"");Object.entries(this.link).forEach((([e,t])=>{this.linkContainer.setAttribute(e,t)}))}if(this.events){Object.entries(this.events).forEach((([e,t])=>{i.Event.bind(this.getContainer(),e,(()=>{t()}))}))}}},{key:"activate",value:function e(){this.active=true;if(babelHelpers.classPrivateFieldGet(this,p)===false){i.Dom.addClass(this.getContainer(),"--active")}n.EventEmitter.emit("BX.UI.NavigationPanel.Item:active",this)}},{key:"inactivate",value:function e(){this.active=false;if(babelHelpers.classPrivateFieldGet(this,p)===false){i.Dom.removeClass(this.getContainer(),"--active")}n.EventEmitter.emit("BX.UI.NavigationPanel.Item:inactive",this)}}]);return e}();function w(){const e=new a.Icon({size:16,icon:a.Outline.CHEVRON_DOWN_L}).render();return i.Tag.render(h||(h=l`
			<span class="ui-nav-panel__item-dropdown-icon ui-icon-set__scope">${0}</span>
		`),e)}function y(){f(this,g,E).call(this).show()}function E(){return new s.Menu({items:babelHelpers.classPrivateFieldGet(this,k),bindElement:this.getContainer(),cacheable:false,events:{onPopupShow:()=>{i.Dom.addClass(this.linkContainer,"--active")},onPopupClose:()=>{i.Dom.removeClass(this.linkContainer,"--active")}}})}let _=e=>e,P,H,I;function T(e,t){B(e,t);t.add(e)}function D(e,t,i){B(e,t);t.set(e,i)}function B(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function F(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var S=new WeakMap;var X=new WeakSet;var $=new WeakSet;var G=new WeakSet;let W=function(){function e(t){babelHelpers.classCallCheck(this,e);T(this,G);T(this,$);T(this,X);D(this,S,{writable:true,value:false});this.target=i.Type.isDomNode(t.target)?t.target:null;this.items=i.Type.isArray(t.items)?t.items:[];this.container=null;this.keys=[];babelHelpers.classPrivateFieldSet(this,S,t.collapsed===true)}babelHelpers.createClass(e,[{key:"adjustItem",value:function e(){this.items=this.items.map((e=>{var t,i,n,s;this.keys.push(e.id);return new C({id:(t=e.id)!==null&&t!==void 0?t:null,title:(i=e.title)!==null&&i!==void 0?i:null,active:e.active===true,events:(n=e.events)!==null&&n!==void 0?n:null,link:(s=e.link)!==null&&s!==void 0?s:null,locked:e.locked===true,dropdown:e.active===true&&babelHelpers.classPrivateFieldGet(this,S),menuItems:e.active===true&&babelHelpers.classPrivateFieldGet(this,S)?F(this,X,N).call(this):[]})}))}},{key:"getItemById",value:function e(t){if(t){const e=this.keys.indexOf(t);return this.items[e]}return null}},{key:"getContainer",value:function e(){if(!this.container){this.container=i.Tag.render(P||(P=_`
				<div class="ui-nav-panel ui-nav-panel__scope"></div>
			`));if(this.hasAirDesign()){i.Dom.addClass(this.container,"--air")}if(babelHelpers.classPrivateFieldGet(this,S)){i.Dom.addClass(this.container,"--collapsed")}}return this.container}},{key:"render",value:function e(){this.items.forEach((e=>{if(babelHelpers.classPrivateFieldGet(this,S)&&e.active===false){return}if(e instanceof C){i.Dom.append(e.getContainer(),this.getContainer())}}));i.Dom.clean(this.target);i.Dom.append(this.getContainer(),this.target)}},{key:"init",value:function e(){this.adjustItem();this.render()}},{key:"hasAirDesign",value:function e(){return i.Extension.getSettings("ui.navigationpanel").get("useAirDesign")}}]);return e}();function N(){return this.items.map((e=>{var t;if(e.active){return null}return{id:Math.random(),text:e.title,href:(t=e.link)===null||t===void 0?void 0:t.href,html:F(this,$,O).call(this,e),className:e.locked?"--locked":"",onclick:()=>{var t;(t=e.events)===null||t===void 0?void 0:t.click()}}})).filter((e=>Boolean(e)))}function O(e){const t=this.hasAirDesign()?"--air":"";return i.Tag.render(H||(H=_`
			<div class="ui-nav-panel__menu-item ${0} ${0}">
				${0}
				<span>${0}</span>
			</div>
		`),e.locked?"--locked":"",t,e.locked?F(this,G,U).call(this):"",e.title)}function U(){const e=new a.Icon({icon:a.Outline.LOCK_L,size:20}).render();return i.Tag.render(I||(I=_`
			<span class="ui-nav-panel__menu-item-icon ui-icon-set__scope">${0}</span>
		`),e)}e.NavigationPanel=W})(this.BX.UI=this.BX.UI||{},BX.UI,BX,BX.Event,BX.Main,BX.UI.IconSet);
//# sourceMappingURL=navigationpanel.bundle.map.js