{"version":3,"file":"counterpanel.bundle.js","sources":["../src/item.js","../src/panel.js","../src/item-collapsed-icon.js"],"sourcesContent":["import { Dom, Tag, Type, Event } from 'main.core';\nimport { Counter, CounterColor, CounterStyle } from 'ui.cnt';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.design-tokens';\nimport 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { CounterPanel } from './index';\n\nexport type CounterItemOptions = {\n\tid?: string;\n\tpanel: CounterPanel;\n\ttitle: string | { value: number, order: number };\n\tparentId: string;\n\tcollapsedIcon?: string;\n\tcollapsed?: string;\n\tlocked?: boolean;\n\tdataAttributes?: { [key: string]: string };\n\tcolor?: CounterColor;\n\tvalue?: number;\n\tisActive: boolean;\n\tseparator?: boolean;\n\titems?: CounterItemOptions[];\n\ttype?: string;\n\teventsForActive: Object;\n\teventsForUnActive: Object;\n\thideValue: boolean;\n\tisRestricted?: boolean;\n\tuseAirDesign?: boolean;\n}\n\nexport default class CounterItem\n{\n\t#collapsedIcon: ?string;\n\t#collapsed: ?boolean;\n\tcounter: ?Counter;\n\t#dataAttributes: ?{ [key: string]: string };\n\t#useAirDesign: boolean = false;\n\n\tconstructor(args: CounterItemOptions)\n\t{\n\t\tthis.id = args.id ?? null;\n\t\tthis.separator = Type.isBoolean(args.separator) ? args.separator : true;\n\t\tthis.items = Type.isArray(args.items) ? args.items : [];\n\t\tthis.popupMenu = null;\n\t\tthis.isActive = Type.isBoolean(args.isActive) ? args.isActive : false;\n\t\tthis.isRestricted = Type.isBoolean(args.isRestricted) ? args.isRestricted : false;\n\t\tthis.panel = args.panel ?? null;\n\t\tthis.title = args.title ?? null;\n\t\tthis.value = (Type.isNumber(args.value) && args.value !== undefined) ? args.value : null;\n\t\tthis.titleOrder = null;\n\t\tthis.valueOrder = null;\n\t\tthis.color = args.color ?? null;\n\t\tthis.parent = Type.isBoolean(args.parent) ? args.parent : null;\n\t\tthis.parentId = args.parentId ?? null;\n\t\tthis.locked = args.locked === true;\n\t\tthis.type = Type.isString(args.type) ? args.type.toLowerCase() : null;\n\t\tthis.eventsForActive = Type.isObject(args.eventsForActive) ? args.eventsForActive : {};\n\t\tthis.eventsForUnActive = Type.isObject(args.eventsForUnActive) ? args.eventsForUnActive : {};\n\t\tthis.hideValue = Type.isBoolean(args.hideValue) ? args.hideValue : false;\n\t\tthis.#collapsedIcon = args.collapsedIcon ?? null;\n\t\tthis.#collapsed = args.collapsed === true;\n\t\tthis.#dataAttributes = Type.isPlainObject(args.dataAttributes) ? args.dataAttributes : {};\n\t\tthis.#useAirDesign = args.useAirDesign === true;\n\n\t\tif (Type.isObject(args.title))\n\t\t{\n\t\t\tthis.title = args.title.value ?? null;\n\t\t\tthis.titleOrder = Type.isNumber(args.title.order) ? args.title.order : null;\n\t\t}\n\n\t\tif (Type.isObject(args.value))\n\t\t{\n\t\t\tthis.value = Type.isNumber(args.value.value) ? args.value.value : null;\n\t\t\tthis.valueOrder = Type.isNumber(args.value.order) ? args.value.order : null;\n\t\t}\n\n\t\tthis.layout = {\n\t\t\tcontainer: null,\n\t\t\tvalue: null,\n\t\t\ttitle: null,\n\t\t\tcross: null,\n\t\t\tdropdownArrow: null,\n\t\t\tmenuItem: null,\n\t\t};\n\n\t\tthis.counter = this.#getCounter();\n\n\t\tif (!this.#getPanel().isMultiselect())\n\t\t{\n\t\t\tthis.#bindEvents();\n\t\t}\n\t}\n\n\tgetItems(): (CounterItemOptions | CounterItem)[]\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetId(): ?string\n\t{\n\t\treturn this.id;\n\t}\n\n\thasParentId(): ?string\n\t{\n\t\treturn this.parentId;\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('BX.UI.CounterPanel.Item:activate', (item) => {\n\t\t\tconst isLinkedItems = item.data.parentId === this.id;\n\t\t\tif (item.data !== this && !isLinkedItems)\n\t\t\t{\n\t\t\t\tthis.deactivate();\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateValue(param: number): void\n\t{\n\t\tif (Type.isNumber(param))\n\t\t{\n\t\t\tthis.value = param;\n\t\t\tthis.#getCounter().update(param);\n\n\t\t\tif (param === 0)\n\t\t\t{\n\t\t\t\tthis.updateColor(this.parentId ? 'GRAY' : 'THEME');\n\t\t\t\tDom.addClass(this.layout.container, this.#getZeroItemClassModifier());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.container, this.#getZeroItemClassModifier());\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateValueAnimate(param: Number)\n\t{\n\t\tif (Type.isNumber(param))\n\t\t{\n\t\t\tthis.value = param;\n\t\t\tthis.#getCounter().update(param);\n\t\t\tthis.#getCounter().show();\n\n\t\t\tif (param === 0)\n\t\t\t{\n\t\t\t\tconst color = this.parentId ? 'GRAY' : 'THEME';\n\n\t\t\t\tthis.updateColor(color);\n\t\t\t\tthis.#getCounter().setStyle(this.#getCounterStyleByColor(Counter.Color[color]));\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateColor(param: string)\n\t{\n\t\tif (Type.isString(param))\n\t\t{\n\t\t\tthis.color = param;\n\t\t\tthis.#getCounter().setColor(Counter.Color[param]);\n\t\t\tthis.#getCounter().setStyle(this.#getCounterStyleByColor(Counter.Color[param]));\n\t\t}\n\t}\n\n\tactivate(isEmitEvent: boolean = true)\n\t{\n\t\tthis.isActive = true;\n\t\tif (this.parentId)\n\t\t{\n\t\t\tconst target = BX.findParent(\n\t\t\t\tthis.getContainerMenu(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'ui-counter-panel__popup-item',\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\tDom.addClass(target, '-active');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.getContainer(), '--active');\n\t\t}\n\n\t\tif (isEmitEvent)\n\t\t{\n\t\t\tEventEmitter.emit('BX.UI.CounterPanel.Item:activate', this);\n\t\t}\n\t}\n\n\tdeactivate(isEmitEvent: boolean = true)\n\t{\n\t\tthis.isActive = false;\n\t\tif (this.parentId)\n\t\t{\n\t\t\tconst target = BX.findParent(\n\t\t\t\tthis.getContainerMenu(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'ui-counter-panel__popup-item',\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\tDom.removeClass(target, '--active');\n\t\t\t\tDom.removeClass(target, '--hover');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--active');\n\t\t\tDom.removeClass(this.getContainer(), '--hover');\n\t\t}\n\n\t\tif (isEmitEvent)\n\t\t{\n\t\t\tEventEmitter.emit('BX.UI.CounterPanel.Item:deactivate', this);\n\t\t}\n\t}\n\n\tcollapse(): void\n\t{\n\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t}\n\n\texpand(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t}\n\n\tgetSeparator()\n\t{\n\t\treturn this.separator;\n\t}\n\n\t#getPanel(): CounterPanel\n\t{\n\t\treturn this.panel;\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\tif (!this.counter)\n\t\t{\n\t\t\tconst counterColor = this.color\n\t\t\t\t? Counter.Color[this.color.toUpperCase()]\n\t\t\t\t: (this.parentId ? Counter.Color.GRAY : Counter.Color.THEME)\n\t\t\t;\n\n\t\t\tthis.counter = new Counter({\n\t\t\t\tcolor: counterColor,\n\t\t\t\tvalue: this.value,\n\t\t\t\tanimation: false,\n\t\t\t\tuseAirDesign: this.#useAirDesign,\n\t\t\t\tstyle: this.#getCounterStyleByColor(counterColor),\n\t\t\t});\n\t\t}\n\n\t\treturn this.counter;\n\t}\n\n\tgetCounterContainer(): ?HTMLElement\n\t{\n\t\treturn this.layout.value;\n\t}\n\n\t#getValue(): HTMLElement\n\t{\n\t\tif (!this.layout.value)\n\t\t{\n\t\t\tconst counterValue = this.isRestricted\n\t\t\t\t? Tag.render`<div class=\"ui-counter-panel__item-lock\"></div>`\n\t\t\t\t: this.#getCounter().getContainer();\n\n\t\t\tthis.layout.value = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-value\">\n\t\t\t\t\t${counterValue}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tDom.style(this.layout.value, 'order', this.valueOrder);\n\t\t}\n\n\t\treturn this.layout.value;\n\t}\n\n\t#getTitle(): HTMLElement\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-title\">${this.title}</div>\n\t\t\t`;\n\n\t\t\tDom.style(this.layout.title, 'order', this.titleOrder);\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t#getCollapsedIcon(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-counter-panel__item-collapsed-icon ui-icon-set__scope --icon-${this.#collapsedIcon}\"></div>\n\t\t`;\n\t}\n\n\t#getCross(): HTMLElement\n\t{\n\t\tif (!this.layout.cross)\n\t\t{\n\t\t\tthis.layout.cross = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-cross\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.cross;\n\t}\n\n\tsetEvents(container)\n\t{\n\t\tif (!container)\n\t\t{\n\t\t\tcontainer = this.getContainer();\n\t\t}\n\n\t\tif (this.eventsForActive)\n\t\t{\n\t\t\tconst eventKeys = Object.keys(this.eventsForActive);\n\n\t\t\tfor (const event of eventKeys)\n\t\t\t{\n\t\t\t\tEvent.bind(container, event, () => {\n\t\t\t\t\tif (this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.eventsForActive[event]();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.eventsForUnActive)\n\t\t{\n\t\t\tconst eventKeys = Object.keys(this.eventsForUnActive);\n\n\t\t\tfor (const event of eventKeys)\n\t\t\t{\n\t\t\t\tEvent.bind(container, event, () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.eventsForUnActive[event]();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tisLocked(): boolean\n\t{\n\t\treturn this.locked;\n\t}\n\n\tlock(): void\n\t{\n\t\tthis.locked = true;\n\t\tDom.addClass(this.getContainer(), '--locked');\n\t}\n\n\tunLock(): void\n\t{\n\t\tthis.locked = false;\n\t\tDom.removeClass(this.getContainer(), '--locked');\n\t}\n\n\tgetArrowDropdown(): HTMLElement\n\t{\n\t\tif (!this.layout.dropdownArrow)\n\t\t{\n\t\t\tthis.layout.dropdownArrow = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-dropdown\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.dropdownArrow;\n\t}\n\n\tgetContainerMenu(): HTMLElement\n\t{\n\t\tif (!this.layout.menuItem)\n\t\t{\n\t\t\tthis.layout.menuItem = Tag.render`\n\t\t\t\t<span>\n\t\t\t\t\t${this.#getValue()}\n\t\t\t\t\t${this.title}\n\t\t\t\t\t${this.#getCross()}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.menuItem;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tconst type = this.type ? `id=\"ui-counter-panel-item-${this.type}\"` : '';\n\t\t\tconst isValue = Type.isNumber(this.value);\n\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div ${type} class=\"ui-counter-panel__item ${this.#getItemClassModifierByValue(this.value)}\">\n\t\t\t\t\t${this.#collapsedIcon ? this.#getCollapsedIcon() : ''}\n\t\t\t\t\t${isValue && !this.hideValue ? this.#getValue() : ''}\n\t\t\t\t\t${this.title ? this.#getTitle() : ''}\n\t\t\t\t\t${isValue ? this.#getCross() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (this.parent)\n\t\t\t{\n\t\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t\t<div class=\"ui-counter-panel__item\">\n\t\t\t\t\t\t${this.title ? this.#getTitle() : ''}\n\t\t\t\t\t\t${isValue ? this.#getValue() : ''}\n\t\t\t\t\t\t${this.#getCross()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tEvent.bind(this.#getCross(), 'click', (ev) => {\n\t\t\t\t\tthis.deactivate();\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\tDom.addClass(this.layout.container, '--dropdown');\n\t\t\t}\n\n\t\t\tif (!isValue)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--string');\n\t\t\t}\n\n\t\t\tif (!isValue && !this.eventsForActive && !this.eventsForUnActive)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--title');\n\t\t\t}\n\n\t\t\tif (!this.separator)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--without-separator');\n\t\t\t}\n\n\t\t\tif (this.locked)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--locked');\n\t\t\t}\n\n\t\t\tif (this.isActive)\n\t\t\t{\n\t\t\t\tthis.activate();\n\t\t\t}\n\n\t\t\tif (this.isRestricted)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--restricted');\n\t\t\t}\n\n\t\t\tif (this.#collapsed)\n\t\t\t{\n\t\t\t\tthis.collapse();\n\t\t\t}\n\n\t\t\tif (this.locked)\n\t\t\t{\n\t\t\t\tthis.lock();\n\t\t\t}\n\n\t\t\tthis.setEvents(this.layout.container);\n\t\t\tthis.#setElementDataAttributes(this.layout.container);\n\n\t\t\tEvent.bind(this.layout.container, 'click', () => {\n\t\t\t\tEventEmitter.emit('BX.UI.CounterPanel.Item:click', {\n\t\t\t\t\titem: this,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (isValue && this.items.length === 0 && !this.parent)\n\t\t\t{\n\t\t\t\tEvent.bind(this.layout.container, 'mouseenter', () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.container, '--hover');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(this.layout.container, 'mouseleave', () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.layout.container, '--hover');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(this.layout.container, 'click', () => {\n\t\t\t\t\tif (this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.deactivate();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.activate();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.parent)\n\t\t\t{\n\t\t\t\tDom.append(this.getArrowDropdown(), this.layout.container);\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n\n\tsetDataAttributes(attributes: Object): void\n\t{\n\t\tthis.#dataAttributes = Type.isPlainObject(attributes) || {};\n\t\tthis.#setElementDataAttributes(this.getContainer());\n\t}\n\n\t#setElementDataAttributes(element?: HTMLElement): void\n\t{\n\t\tif (!element)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tObject.entries(this.#dataAttributes).forEach(([key, value]) => {\n\t\t\tDom.attr(element, `data-${key}`, value);\n\t\t});\n\t}\n\n\t#getCounterStyleByColor(color: string): string\n\t{\n\t\tif (color === CounterColor.DANGER)\n\t\t{\n\t\t\treturn CounterStyle.FILLED_ALERT;\n\t\t}\n\n\t\tif (color === CounterColor.SUCCESS)\n\t\t{\n\t\t\treturn CounterStyle.FILLED_SUCCESS;\n\t\t}\n\n\t\treturn CounterStyle.OUTLINE_NO_ACCENT;\n\t}\n\n\t#getItemClassModifierByValue(value: number): string\n\t{\n\t\treturn value === 0 ? this.#getZeroItemClassModifier() : '';\n\t}\n\n\t#getZeroItemClassModifier(): string\n\t{\n\t\treturn '--zero';\n\t}\n}\n","import { Dom, Tag, Type, Extension, Event } from 'main.core';\nimport { PopupMenuWindow } from 'main.popup';\nimport CounterItem from './item';\nimport './style.css';\nimport type { CounterItemOptions } from './item';\n\ntype CounterPanelOptions = {\n\ttarget: HTMLElement;\n\titems: Array;\n\tmultiselect: boolean;\n\ttitle: string;\n}\n\nexport default class CounterPanel\n{\n\tconstructor(options: CounterPanelOptions)\n\t{\n\t\tthis.target = Type.isDomNode(options.target) ? options.target : null;\n\t\tthis.items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.multiselect = Type.isBoolean(options.multiselect) ? options.multiselect : null;\n\t\tthis.title = Type.isStringFilled(options.title) ? options.title : null;\n\t\tthis.container = null;\n\t\tthis.keys = [];\n\t\tthis.hasParent = [];\n\t}\n\n\t#adjustData()\n\t{\n\t\tthis.items = this.items.map((item) => {\n\t\t\tthis.keys.push(item.id);\n\t\t\tif (item.parentId)\n\t\t\t{\n\t\t\t\tthis.hasParent.push(item.parentId);\n\t\t\t}\n\n\t\t\treturn new CounterItem({\n\t\t\t\t...item,\n\t\t\t\tuseAirDesign: this.hasAirDesign(),\n\t\t\t\tpanel: this,\n\t\t\t});\n\t\t});\n\n\t\tthis.hasParent.forEach((item) => {\n\t\t\tconst index = this.keys.indexOf(item);\n\t\t\tthis.items[index].parent = true;\n\t\t});\n\n\t\tthis.items.forEach((item) => {\n\t\t\tif (item.parentId)\n\t\t\t{\n\t\t\t\tconst index = this.keys.indexOf(item.parentId);\n\t\t\t\tthis.items[index].items.push(item.id);\n\t\t\t}\n\t\t});\n\t}\n\n\tisMultiselect(): boolean\n\t{\n\t\treturn this.multiselect;\n\t}\n\n\tgetItems(): (CounterItem | CounterItemOptions)[]\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItemById(param): CounterItem | undefined\n\t{\n\t\tif (param)\n\t\t{\n\t\t\tconst index = this.keys.indexOf(param);\n\n\t\t\treturn this.items[index];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t#getContainer(): HTMLElement\n\t{\n\t\tif (!this.container)\n\t\t{\n\t\t\tlet myHead = '';\n\t\t\tif (this.title)\n\t\t\t{\n\t\t\t\tmyHead = Tag.render`\n\t\t\t\t\t<div class=\"ui-counter-panel__item-head\">${this.title}</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tthis.container = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel ui-counter-panel__scope\">${myHead}</div>\n\t\t\t`;\n\n\t\t\tif (this.hasAirDesign() === true)\n\t\t\t{\n\t\t\t\tDom.addClass(this.container, '--air');\n\t\t\t}\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\t#render(): void\n\t{\n\t\tif (this.target && this.items.length > 0)\n\t\t{\n\t\t\tthis.items.forEach((item, key) => {\n\t\t\t\tif (item instanceof CounterItem)\n\t\t\t\t{\n\t\t\t\t\tif (!item.hasParentId())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(item.getContainer(), this.#getContainer());\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.items.length !== key + 1\n\t\t\t\t\t\t\t&& this.items.length > 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.append(Tag.render`\n\t\t\t\t\t\t\t\t<div class=\"ui-counter-panel__item-separator ${item.getSeparator() ? '' : '--invisible'}\"></div>\n\t\t\t\t\t\t\t`, this.#getContainer());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.parent)\n\t\t\t\t\t{\n\t\t\t\t\t\tEvent.bind(item.getContainer(), 'click', () => {\n\t\t\t\t\t\t\tconst itemsArr = [];\n\t\t\t\t\t\t\titem.getItems().forEach((item) => {\n\t\t\t\t\t\t\t\tconst itemCounter = this.getItemById(item);\n\t\t\t\t\t\t\t\tconst test = {\n\t\t\t\t\t\t\t\t\thtml: itemCounter.getContainerMenu(),\n\t\t\t\t\t\t\t\t\tclassName: `ui-counter-panel__popup-item ${this.hasAirDesign() ? '--air' : ''} menu-popup-no-icon ${itemCounter.isActive ? '--active' : ''}`,\n\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\tif (itemCounter.isActive)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\titemCounter.deactivate();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\titemCounter.activate();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\titemsArr.push(test);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tconst popup = new PopupMenuWindow({\n\t\t\t\t\t\t\t\tclassName: 'ui-counter-panel__popup ui-counter-panel__scope',\n\t\t\t\t\t\t\t\tbindElement: item.getArrowDropdown(),\n\t\t\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\t\t\titems: itemsArr,\n\t\t\t\t\t\t\t\tangle: true,\n\t\t\t\t\t\t\t\toffsetLeft: 6,\n\t\t\t\t\t\t\t\toffsetTop: 5,\n\t\t\t\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\t\t\t\t\tDom.addClass(item.getContainer(), '--hover');\n\t\t\t\t\t\t\t\t\t\tDom.addClass(item.getContainer(), '--pointer-events-none');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\t\t\t\tDom.removeClass(item.getContainer(), '--hover');\n\t\t\t\t\t\t\t\t\t\tDom.removeClass(item.getContainer(), '--pointer-events-none');\n\t\t\t\t\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tpopup.show();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDom.clean(this.target);\n\t\t\tDom.append(this.#getContainer(), this.target);\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.#adjustData();\n\t\tthis.#render();\n\t}\n\n\tsetItems(items)\n\t{\n\t\tthis.items = items;\n\t}\n\n\thasAirDesign(): boolean\n\t{\n\t\treturn Extension.getSettings('ui.counterpanel').get('useAirDesign') === true;\n\t}\n}\n","export const CounterItemCollapsedIcon = Object.freeze({\n\tCHAT_CHECK: 'chat-chek',\n});\n"],"names":["CounterItem","args","id","separator","Type","isBoolean","items","isArray","popupMenu","isActive","isRestricted","panel","title","value","isNumber","undefined","titleOrder","valueOrder","color","parent","parentId","locked","type","isString","toLowerCase","eventsForActive","isObject","eventsForUnActive","hideValue","collapsedIcon","collapsed","isPlainObject","dataAttributes","useAirDesign","order","layout","container","cross","dropdownArrow","menuItem","counter","isMultiselect","param","update","updateColor","Dom","addClass","removeClass","show","setStyle","Counter","Color","setColor","isEmitEvent","target","BX","findParent","getContainerMenu","className","getContainer","EventEmitter","emit","eventKeys","Object","keys","event","Event","bind","Tag","render","isValue","ev","deactivate","stopPropagation","activate","collapse","lock","setEvents","item","length","append","getArrowDropdown","attributes","subscribe","isLinkedItems","data","counterColor","toUpperCase","GRAY","THEME","animation","style","counterValue","element","entries","forEach","key","attr","CounterColor","DANGER","CounterStyle","FILLED_ALERT","SUCCESS","FILLED_SUCCESS","OUTLINE_NO_ACCENT","CounterPanel","options","_classPrivateMethodInitSpec","isDomNode","multiselect","isStringFilled","hasParent","index","indexOf","_classPrivateMethodGet","Extension","getSettings","get","map","push","hasAirDesign","myHead","hasParentId","getSeparator","itemsArr","getItems","itemCounter","getItemById","test","html","onclick","popup","PopupMenuWindow","bindElement","autoHide","closeByEsc","angle","offsetLeft","offsetTop","events","onPopupShow","onPopupClose","destroy","clean","CounterItemCollapsedIcon","freeze","CHAT_CHECK"],"mappings":"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"}