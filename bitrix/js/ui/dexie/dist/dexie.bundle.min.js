this.BX=this.BX||{};(function(e){"use strict";
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.
	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.
	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var n=function e(t,r){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t))e[t]=n[t]};return n(t,r)};function t(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var r=function e(){r=Object.assign||function e(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))n[a]=t[a]}return n};return r.apply(this,arguments)};function i(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++){if(a||!(r in n)){if(!a)a=Array.prototype.slice.call(n,0,r);a[r]=n[r]}}return e.concat(a||Array.prototype.slice.call(n))}var a=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;var o=Object.keys;var u=Array.isArray;if(typeof Promise!=="undefined"&&!a.Promise){a.Promise=Promise}function s(e,n){if(babelHelpers["typeof"](n)!=="object")return e;o(n).forEach((function(t){e[t]=n[t]}));return e}var c=Object.getPrototypeOf;var f={}.hasOwnProperty;function l(e,n){return f.call(e,n)}function h(e,n){if(typeof n==="function")n=n(c(e));if(babelHelpers["typeof"](n)!=="object")return;(typeof Reflect==="undefined"?o:Reflect.ownKeys)(n).forEach((function(t){v(e,t,n[t])}))}var d=Object.defineProperty;function v(e,n,t,r){d(e,n,s(t&&l(t,"get")&&typeof t.get==="function"?{get:t.get,set:t.set,configurable:true}:{value:t,configurable:true,writable:true},r))}function p(e){return{from:function n(t){e.prototype=Object.create(t.prototype);v(e.prototype,"constructor",e);return{extend:h.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor;function m(e,n){var t=y(e,n);var r;return t||(r=c(e))&&m(r,n)}var b=[].slice;function g(e,n,t){return b.call(e,n,t)}function w(e,n){return n(e)}function _(e){if(!e)throw new Error("Assertion Failed")}function x(e){if(a.setImmediate)setImmediate(e);else setTimeout(e,0)}function k(e,n){return e.reduce((function(e,t,r){var i=n(t,r);if(i)e[i[0]]=i[1];return e}),{})}function O(e,n){if(typeof n==="string"&&l(e,n))return e[n];if(!n)return e;if(typeof n!=="string"){var t=[];for(var r=0,i=n.length;r<i;++r){var a=O(e,n[r]);t.push(a)}return t}var o=n.indexOf(".");if(o!==-1){var u=e[n.substr(0,o)];return u==null?undefined:O(u,n.substr(o+1))}return undefined}function P(e,n,t){if(!e||n===undefined)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof n!=="string"&&"length"in n){_(typeof t!=="string"&&"length"in t);for(var r=0,i=n.length;r<i;++r){P(e,n[r],t[r])}}else{var a=n.indexOf(".");if(a!==-1){var o=n.substr(0,a);var s=n.substr(a+1);if(s===""){if(t===undefined){if(u(e)&&!isNaN(parseInt(o)))e.splice(o,1);else delete e[o]}else e[o]=t}else{var c=e[o];if(!c||!l(e,o))c=e[o]={};P(c,s,t)}}else{if(t===undefined){if(u(e)&&!isNaN(parseInt(n)))e.splice(n,1);else delete e[n]}else e[n]=t}}}function K(e,n){if(typeof n==="string")P(e,n,undefined);else if("length"in n)[].map.call(n,(function(n){P(e,n,undefined)}))}function E(e){var n={};for(var t in e){if(l(e,t))n[t]=e[t]}return n}var S=[].concat;function j(e){return S.apply([],e)}var A="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(n){return n+e+"Array"}))})))).filter((function(e){return a[e]}));var C=new Set(A.map((function(e){return a[e]})));function I(e){var n={};for(var t in e)if(l(e,t)){var r=e[t];n[t]=!r||babelHelpers["typeof"](r)!=="object"||C.has(r.constructor)?r:I(r)}return n}function D(e){for(var n in e)if(l(e,n))return false;return true}var q=null;function B(e){q=new WeakMap;var n=T(e);q=null;return n}function T(e){if(!e||babelHelpers["typeof"](e)!=="object")return e;var n=q.get(e);if(n)return n;if(u(e)){n=[];q.set(e,n);for(var t=0,r=e.length;t<r;++t){n.push(T(e[t]))}}else if(C.has(e.constructor)){n=e}else{var i=c(e);n=i===Object.prototype?{}:Object.create(i);q.set(e,n);for(var a in e){if(l(e,a)){n[a]=T(e[a])}}}return n}var R={}.toString;function M(e){return R.call(e).slice(8,-1)}var N=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator";var F=babelHelpers["typeof"](N)==="symbol"?function(e){var n;return e!=null&&(n=e[N])&&n.apply(e)}:function(){return null};function L(e,n){var t=e.indexOf(n);if(t>=0)e.splice(t,1);return t>=0}var U={};function V(e){var n,t,r,i;if(arguments.length===1){if(u(e))return e.slice();if(this===U&&typeof e==="string")return[e];if(i=F(e)){t=[];while(r=i.next(),!r.done)t.push(r.value);return t}if(e==null)return[e];n=e.length;if(typeof n==="number"){t=new Array(n);while(n--)t[n]=e[n];return t}return[e]}n=arguments.length;t=new Array(n);while(n--)t[n]=arguments[n];return t}var H=typeof Symbol!=="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return false};var z=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var Y=z.concat(W);var X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,n){this.name=e;this.message=n}p($).from(Error).extend({toString:function e(){return this.name+": "+this.message}});function Q(e,n){return e+". Errors: "+Object.keys(n).map((function(e){return n[e].toString()})).filter((function(e,n,t){return t.indexOf(e)===n})).join("\n")}function G(e,n,t,r){this.failures=n;this.failedKeys=r;this.successCount=t;this.message=Q(e,n)}p(G).from($);function J(e,n){this.name="BulkError";this.failures=Object.keys(n).map((function(e){return n[e]}));this.failuresByPos=n;this.message=Q(e,this.failures)}p(J).from($);var Z=Y.reduce((function(e,n){return e[n]=n+"Error",e}),{});var ee=$;var ne=Y.reduce((function(e,n){var t=n+"Error";function r(e,r){this.name=t;if(!e){this.message=X[n]||t;this.inner=null}else if(typeof e==="string"){this.message="".concat(e).concat(!r?"":"\n "+r);this.inner=r||null}else if(babelHelpers["typeof"](e)==="object"){this.message="".concat(e.name," ").concat(e.message);this.inner=e}}p(r).from(ee);e[n]=r;return e}),{});ne.Syntax=SyntaxError;ne.Type=TypeError;ne.Range=RangeError;var te=W.reduce((function(e,n){e[n+"Error"]=ne[n];return e}),{});function re(e,n){if(!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var t=new te[e.name](n||e.message,e);if("stack"in e){v(t,"stack",{get:function e(){return this.inner.stack}})}return t}var ie=Y.reduce((function(e,n){if(["Syntax","Type","Range"].indexOf(n)===-1)e[n+"Error"]=ne[n];return e}),{});ie.ModifyError=G;ie.DexieError=$;ie.BulkError=J;function ae(){}function oe(e){return e}function ue(e,n){if(e==null||e===oe)return n;return function(t){return n(e(t))}}function se(e,n){return function(){e.apply(this,arguments);n.apply(this,arguments)}}function ce(e,n){if(e===ae)return n;return function(){var t=e.apply(this,arguments);if(t!==undefined)arguments[0]=t;var r=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var a=n.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?se(r,this.onsuccess):r;if(i)this.onerror=this.onerror?se(i,this.onerror):i;return a!==undefined?a:t}}function fe(e,n){if(e===ae)return n;return function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null;n.apply(this,arguments);if(t)this.onsuccess=this.onsuccess?se(t,this.onsuccess):t;if(r)this.onerror=this.onerror?se(r,this.onerror):r}}function le(e,n){if(e===ae)return n;return function(t){var r=e.apply(this,arguments);s(t,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null;this.onerror=null;var o=n.apply(this,arguments);if(i)this.onsuccess=this.onsuccess?se(i,this.onsuccess):i;if(a)this.onerror=this.onerror?se(a,this.onerror):a;return r===undefined?o===undefined?undefined:o:s(r,o)}}function he(e,n){if(e===ae)return n;return function(){if(n.apply(this,arguments)===false)return false;return e.apply(this,arguments)}}function de(e,n){if(e===ae)return n;return function(){var t=e.apply(this,arguments);if(t&&typeof t.then==="function"){var r=this,i=arguments.length,a=new Array(i);while(i--)a[i]=arguments[i];return t.then((function(){return n.apply(r,a)}))}return n.apply(this,arguments)}}var ve=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pe(e,n){ve=e}var ye={};var me=100,be=typeof Promise==="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[e,c(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,c(n),e]}(),ge=be[0],we=be[1],_e=be[2],xe=we&&we.then;var ke=ge&&ge.constructor;var Oe=!!_e;function Pe(){queueMicrotask(ze)}var Ke=function e(n,t){qe.push([n,t]);if(Se){Pe();Se=false}};var Ee=true,Se=true,je=[],Ae=[],Ce=oe;var Ie={id:"global",global:true,ref:0,unhandleds:[],onunhandled:ae,pgp:false,env:{},finalize:ae};var De=Ie;var qe=[];var Be=0;var Te=[];function Re(e){if(babelHelpers["typeof"](this)!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=false;var n=this._PSD=De;if(typeof e!=="function"){if(e!==ye)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)Le(this,this._value);return}this._state=null;this._value=null;++n.ref;Fe(this,e)}var Me={get:function e(){var n=De,t=an;function r(e,r){var i=this;var a=!n.global&&(n!==De||t!==an);var o=a&&!cn();var u=new Re((function(t,u){Ve(i,new Ne(yn(e,n,a,o),yn(r,n,a,o),t,u,n))}));if(this._consoleTask)u._consoleTask=this._consoleTask;return u}r.prototype=ye;return r},set:function e(n){v(this,"then",n&&n.prototype===ye?Me:{get:function e(){return n},set:Me.set})}};h(Re.prototype,{then:Me,_then:function e(n,t){Ve(this,new Ne(null,null,n,t,De))},catch:function e(n){if(arguments.length===1)return this.then(null,n);var t=arguments[0],r=arguments[1];return typeof t==="function"?this.then(null,(function(e){return e instanceof t?r(e):Je(e)})):this.then(null,(function(e){return e&&e.name===t?r(e):Je(e)}))},finally:function e(n){return this.then((function(e){return Re.resolve(n()).then((function(){return e}))}),(function(e){return Re.resolve(n()).then((function(){return Je(e)}))}))},timeout:function e(n,t){var r=this;return n<Infinity?new Re((function(e,i){var a=setTimeout((function(){return i(new ne.Timeout(t))}),n);r.then(e,i)["finally"](clearTimeout.bind(null,a))})):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)v(Re.prototype,Symbol.toStringTag,"Dexie.Promise");Ie.env=vn();function Ne(e,n,t,r,i){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof n==="function"?n:null;this.resolve=t;this.reject=r;this.psd=i}h(Re,{all:function e(){var n=V.apply(null,arguments).map(fn);return new Re((function(e,t){if(n.length===0)e([]);var r=n.length;n.forEach((function(i,a){return Re.resolve(i).then((function(t){n[a]=t;if(! --r)e(n)}),t)}))}))},resolve:function e(n){if(n instanceof Re)return n;if(n&&typeof n.then==="function")return new Re((function(e,t){n.then(e,t)}));var t=new Re(ye,true,n);return t},reject:Je,race:function e(){var n=V.apply(null,arguments).map(fn);return new Re((function(e,t){n.map((function(n){return Re.resolve(n).then(e,t)}))}))},PSD:{get:function e(){return De},set:function e(n){return De=n}},totalEchoes:{get:function e(){return an}},newPSD:un,usePSD:pn,scheduler:{get:function e(){return Ke},set:function e(n){Ke=n}},rejectionMapper:{get:function e(){return Ce},set:function e(n){Ce=n}},follow:function e(n,t){return new Re((function(e,r){return un((function(e,t){var r=De;r.unhandleds=[];r.onunhandled=t;r.finalize=se((function(){var n=this;$e((function(){n.unhandleds.length===0?e():t(n.unhandleds[0])}))}),r.finalize);n()}),t,e,r)}))}});if(ke){if(ke.allSettled)v(Re,"allSettled",(function(){var e=V.apply(null,arguments).map(fn);return new Re((function(n){if(e.length===0)n([]);var t=e.length;var r=new Array(t);e.forEach((function(e,i){return Re.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--t||n(r)}))}))}))}));if(ke.any&&typeof AggregateError!=="undefined")v(Re,"any",(function(){var e=V.apply(null,arguments).map(fn);return new Re((function(n,t){if(e.length===0)t(new AggregateError([]));var r=e.length;var i=new Array(r);e.forEach((function(e,a){return Re.resolve(e).then((function(e){return n(e)}),(function(e){i[a]=e;if(! --r)t(new AggregateError(i))}))}))}))}));if(ke.withResolvers)Re.withResolvers=ke.withResolvers}function Fe(e,n){try{n((function(n){if(e._state!==null)return;if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var t=e._lib&&We();if(n&&typeof n.then==="function"){Fe(e,(function(e,t){n instanceof Re?n._then(e,t):n.then(e,t)}))}else{e._state=true;e._value=n;Ue(e)}if(t)Ye()}),Le.bind(null,e))}catch(n){Le(e,n)}}function Le(e,n){Ae.push(n);if(e._state!==null)return;var t=e._lib&&We();n=Ce(n);e._state=false;e._value=n;Qe(e);Ue(e);if(t)Ye()}function Ue(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t){Ve(e,n[t])}var i=e._PSD;--i.ref||i.finalize();if(Be===0){++Be;Ke((function(){if(--Be===0)Xe()}),[])}}function Ve(e,n){if(e._state===null){e._listeners.push(n);return}var t=e._state?n.onFulfilled:n.onRejected;if(t===null){return(e._state?n.resolve:n.reject)(e._value)}++n.psd.ref;++Be;Ke(He,[t,e,n])}function He(e,n,t){try{var r,i=n._value;if(!n._state&&Ae.length)Ae=[];r=ve&&n._consoleTask?n._consoleTask.run((function(){return e(i)})):e(i);if(!n._state&&Ae.indexOf(i)===-1){Ge(n)}t.resolve(r)}catch(e){t.reject(e)}finally{if(--Be===0)Xe();--t.psd.ref||t.psd.finalize()}}function ze(){pn(Ie,(function(){We()&&Ye()}))}function We(){var e=Ee;Ee=false;Se=false;return e}function Ye(){var e,n,t;do{while(qe.length>0){e=qe;qe=[];t=e.length;for(n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}}}while(qe.length>0);Ee=true;Se=true}function Xe(){var e=je;je=[];e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));var n=Te.slice(0);var t=n.length;while(t)n[--t]()}function $e(e){function n(){e();Te.splice(Te.indexOf(n),1)}Te.push(n);++Be;Ke((function(){if(--Be===0)Xe()}),[])}function Qe(e){if(!je.some((function(n){return n._value===e._value})))je.push(e)}function Ge(e){var n=je.length;while(n)if(je[--n]._value===e._value){je.splice(n,1);return}}function Je(e){return new Re(ye,false,e)}function Ze(e,n){var t=De;return function(){var r=We(),i=De;try{dn(t,true);return e.apply(this,arguments)}catch(e){n&&n(e)}finally{dn(i,false);if(r)Ye()}}}var en={awaits:0,echoes:0,id:0};var nn=0;var tn=[];var rn=0;var an=0;var on=0;function un(e,n,t,r){var i=De,a=Object.create(i);a.parent=i;a.ref=0;a.global=false;a.id=++on;a.env=Oe?{Promise:Re,PromiseProp:{value:Re,configurable:true,writable:true},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{};if(n)s(a,n);++i.ref;a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=pn(a,e,t,r);if(a.ref===0)a.finalize();return o}function sn(){if(!en.id)en.id=++nn;++en.awaits;en.echoes+=me;return en.id}function cn(){if(!en.awaits)return false;if(--en.awaits===0)en.id=0;en.echoes=en.awaits*me;return true}if((""+xe).indexOf("[native code]")===-1){sn=cn=ae}function fn(e){if(en.echoes&&e&&e.constructor===ke){sn();return e.then((function(e){cn();return e}),(function(e){cn();return bn(e)}))}return e}function ln(e){++an;if(!en.echoes||--en.echoes===0){en.echoes=en.awaits=en.id=0}tn.push(De);dn(e,true)}function hn(){var e=tn[tn.length-1];tn.pop();dn(e,false)}function dn(e,n){var t=De;if(n?en.echoes&&(!rn++||e!==De):rn&&(! --rn||e!==De)){queueMicrotask(n?ln.bind(null,e):hn)}if(e===De)return;De=e;if(t===Ie)Ie.env=vn();if(Oe){var r=Ie.env.Promise;var i=e.env;if(t.global||e.global){Object.defineProperty(a,"Promise",i.PromiseProp);r.all=i.all;r.race=i.race;r.resolve=i.resolve;r.reject=i.reject;if(i.allSettled)r.allSettled=i.allSettled;if(i.any)r.any=i.any}}}function vn(){var e=a.Promise||Promise;return Oe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function pn(e,n,t,r,i){var a=De;try{dn(e,true);return n(t,r,i)}finally{dn(a,false)}}function yn(e,n,t,r){return typeof e!=="function"?e:function(){var i=De;if(t)sn();dn(n,true);try{return e.apply(this,arguments)}finally{dn(i,false);if(r)queueMicrotask(cn)}}}function mn(e){if(Promise===ke&&en.echoes===0){if(rn===0){e()}else{enqueueNativeMicroTask(e)}}else{setTimeout(e,0)}}var bn=Re.reject;function gn(e,n,t,r){if(!e.idbdb||!e._state.openComplete&&!De.letThrough&&!e._vip){if(e._state.openComplete){return bn(new ne.DatabaseClosed(e._state.dbOpenError))}if(!e._state.isBeingOpened){if(!e._state.autoOpen)return bn(new ne.DatabaseClosed);e.open()["catch"](ae)}return e._state.dbReadyPromise.then((function(){return gn(e,n,t,r)}))}else{var i=e._createTransaction(n,t,e._dbSchema);try{i.create();e._state.PR1398_maxLoop=3}catch(i){if(i.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e.close({disableAutoOpen:false});return e.open().then((function(){return gn(e,n,t,r)}))}return bn(i)}return i._promise(n,(function(e,n){return un((function(){De.trans=i;return r(e,n,i)}))})).then((function(e){if(n==="readwrite")try{i.idbtrans.commit()}catch(e){}return n==="readonly"?e:i._completion.then((function(){return e}))}))}}var wn="4.0.9";var _n=String.fromCharCode(65535);var xn=-Infinity;var kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var On="String expected.";var Pn=[];var Kn="__dbnames";var En="readonly";var Sn="readwrite";function jn(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var An={type:3,lower:-Infinity,lowerOpen:false,upper:[[]],upperOpen:false};function Cn(e){return typeof e==="string"&&!/\./.test(e)?function(n){if(n[e]===undefined&&e in n){n=B(n);delete n[e]}return n}:function(e){return e}}function In(){throw ne.Type()}function Dn(e,n){try{var t=Tn(e);var r=Tn(n);if(t!==r){if(t==="Array")return 1;if(r==="Array")return-1;if(t==="binary")return 1;if(r==="binary")return-1;if(t==="string")return 1;if(r==="string")return-1;if(t==="Date")return 1;if(r!=="Date")return NaN;return-1}switch(t){case"number":case"Date":case"string":return e>n?1:e<n?-1:0;case"binary":{return Bn(Rn(e),Rn(n))}case"Array":return qn(e,n)}}catch(e){}return NaN}function qn(e,n){var t=e.length;var r=n.length;var i=t<r?t:r;for(var a=0;a<i;++a){var o=Dn(e[a],n[a]);if(o!==0)return o}return t===r?0:t<r?-1:1}function Bn(e,n){var t=e.length;var r=n.length;var i=t<r?t:r;for(var a=0;a<i;++a){if(e[a]!==n[a])return e[a]<n[a]?-1:1}return t===r?0:t<r?-1:1}function Tn(e){var n=babelHelpers["typeof"](e);if(n!=="object")return n;if(ArrayBuffer.isView(e))return"binary";var t=M(e);return t==="ArrayBuffer"?"binary":t}function Rn(e){if(e instanceof Uint8Array)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return new Uint8Array(e)}var Mn=function(){function e(){}e.prototype._trans=function(e,n,t){var r=this._tx||De.trans;var i=this.name;var a=ve&&typeof console!=="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function o(e,t,r){if(!r.schema[i])throw new ne.NotFound("Table "+i+" not part of transaction");return n(r.idbtrans,r)}var u=We();try{var s=r&&r.db._novip===this.db._novip?r===De.trans?r._promise(e,o,t):un((function(){return r._promise(e,o,t)}),{trans:r,transless:De.transless||De}):gn(this.db,e,[this.name],o);if(a){s._consoleTask=a;s=s["catch"]((function(e){console.trace(e);return bn(e)}))}return s}finally{if(u)Ye()}};e.prototype.get=function(e,n){var t=this;if(e&&e.constructor===Object)return this.where(e).first(n);if(e==null)return bn(new ne.Type("Invalid argument to Table.get()"));return this._trans("readonly",(function(n){return t.core.get({trans:n,key:e}).then((function(e){return t.hook.reading.fire(e)}))})).then(n)};e.prototype.where=function(e){if(typeof e==="string")return new this.db.WhereClause(this,e);if(u(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=o(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&n.every((function(n){return e.keyPath.indexOf(n)>=0}))){for(var t=0;t<n.length;++t){if(n.indexOf(e.keyPath[t])===-1)return false}return true}return false})).sort((function(e,n){return e.keyPath.length-n.keyPath.length}))[0];if(t&&this.db._maxKey!==_n){var r=t.keyPath.slice(0,n.length);return this.where(r).equals(r.map((function(n){return e[n]})))}if(!t&&ve)console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var i=this.schema.idxByName;function a(e,n){return Dn(e,n)===0}var s=n.reduce((function(n,t){var r=n[0],o=n[1];var s=i[t];var c=e[t];return[r||s,r||!s?jn(o,s&&s.multi?function(e){var n=O(e,t);return u(n)&&n.some((function(e){return a(c,e)}))}:function(e){return a(c,O(e,t))}):o]}),[null,null]),c=s[0],f=s[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):t?this.filter(f):this.where(n).equals("")};e.prototype.filter=function(e){return this.toCollection().and(e)};e.prototype.count=function(e){return this.toCollection().count(e)};e.prototype.offset=function(e){return this.toCollection().offset(e)};e.prototype.limit=function(e){return this.toCollection().limit(e)};e.prototype.each=function(e){return this.toCollection().each(e)};e.prototype.toArray=function(e){return this.toCollection().toArray(e)};e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,u(e)?"[".concat(e.join("+"),"]"):e))};e.prototype.reverse=function(){return this.toCollection().reverse()};e.prototype.mapToClass=function(e){var n=this,r=n.db,i=n.name;this.schema.mappedClass=e;if(e.prototype instanceof In){e=function(e){t(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(n.prototype,"db",{get:function e(){return r},enumerable:false,configurable:true});n.prototype.table=function(){return i};return n}(e)}var a=new Set;for(var o=e.prototype;o;o=c(o)){Object.getOwnPropertyNames(o).forEach((function(e){return a.add(e)}))}var u=function n(t){if(!t)return t;var r=Object.create(e.prototype);for(var i in t)if(!a.has(i))try{r[i]=t[i]}catch(e){}return r};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=u;this.hook("reading",u);return e};e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)};e.prototype.add=function(e,n){var t=this;var r=this.schema.primKey,i=r.auto,a=r.keyPath;var o=e;if(a&&i){o=Cn(a)(e)}return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"add",keys:n!=null?[n]:null,values:[o]})})).then((function(e){return e.numFailures?Re.reject(e.failures[0]):e.lastResult})).then((function(n){if(a){try{P(e,a,n)}catch(e){}}return n}))};e.prototype.update=function(e,n){if(babelHelpers["typeof"](e)==="object"&&!u(e)){var t=O(e,this.schema.primKey.keyPath);if(t===undefined)return bn(new ne.InvalidArgument("Given object does not contain its primary key"));return this.where(":id").equals(t).modify(n)}else{return this.where(":id").equals(e).modify(n)}};e.prototype.put=function(e,n){var t=this;var r=this.schema.primKey,i=r.auto,a=r.keyPath;var o=e;if(a&&i){o=Cn(a)(e)}return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"put",values:[o],keys:n!=null?[n]:null})})).then((function(e){return e.numFailures?Re.reject(e.failures[0]):e.lastResult})).then((function(n){if(a){try{P(e,a,n)}catch(e){}}return n}))};e.prototype["delete"]=function(e){var n=this;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Re.reject(e.failures[0]):undefined}))};e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"deleteRange",range:An})})).then((function(e){return e.numFailures?Re.reject(e.failures[0]):undefined}))};e.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",(function(t){return n.core.getMany({keys:e,trans:t}).then((function(e){return e.map((function(e){return n.hook.reading.fire(e)}))}))}))};e.prototype.bulkAdd=function(e,n,t){var r=this;var i=Array.isArray(n)?n:undefined;t=t||(i?undefined:n);var a=t?t.allKeys:undefined;return this._trans("readwrite",(function(n){var t=r.schema.primKey,o=t.auto,u=t.keyPath;if(u&&i)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length;var c=u&&o?e.map(Cn(u)):e;return r.core.mutate({trans:n,type:"add",keys:i,values:c,wantResults:a}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,o=e.failures;var u=a?t:i;if(n===0)return u;throw new J("".concat(r.name,".bulkAdd(): ").concat(n," of ").concat(s," operations failed"),o)}))}))};e.prototype.bulkPut=function(e,n,t){var r=this;var i=Array.isArray(n)?n:undefined;t=t||(i?undefined:n);var a=t?t.allKeys:undefined;return this._trans("readwrite",(function(n){var t=r.schema.primKey,o=t.auto,u=t.keyPath;if(u&&i)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length;var c=u&&o?e.map(Cn(u)):e;return r.core.mutate({trans:n,type:"put",keys:i,values:c,wantResults:a}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,o=e.failures;var u=a?t:i;if(n===0)return u;throw new J("".concat(r.name,".bulkPut(): ").concat(n," of ").concat(s," operations failed"),o)}))}))};e.prototype.bulkUpdate=function(e){var n=this;var t=this.core;var r=e.map((function(e){return e.key}));var i=e.map((function(e){return e.changes}));var a=[];return this._trans("readwrite",(function(o){return t.getMany({trans:o,keys:r,cache:"clone"}).then((function(u){var s=[];var c=[];e.forEach((function(e,t){var r=e.key,i=e.changes;var o=u[t];if(o){for(var f=0,l=Object.keys(i);f<l.length;f++){var h=l[f];var d=i[h];if(h===n.schema.primKey.keyPath){if(Dn(d,r)!==0){throw new ne.Constraint("Cannot update primary key in bulkUpdate()")}}else{P(o,h,d)}}a.push(t);s.push(r);c.push(o)}}));var f=s.length;return t.mutate({trans:o,type:"put",keys:s,values:c,updates:{keys:r,changeSpecs:i}}).then((function(e){var t=e.numFailures,r=e.failures;if(t===0)return f;for(var i=0,o=Object.keys(r);i<o.length;i++){var u=o[i];var s=a[Number(u)];if(s!=null){var c=r[u];delete r[u];r[s]=c}}throw new J("".concat(n.name,".bulkUpdate(): ").concat(t," of ").concat(f," operations failed"),r)}))}))}))};e.prototype.bulkDelete=function(e){var n=this;var t=e.length;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,a=e.failures;if(r===0)return i;throw new J("".concat(n.name,".bulkDelete(): ").concat(r," of ").concat(t," operations failed"),a)}))};return e}();function Nn(e){var n={};var t=function t(r,i){if(i){var a=arguments.length,o=new Array(a-1);while(--a)o[a-1]=arguments[a];n[r].subscribe.apply(null,o);return e}else if(typeof r==="string"){return n[r]}};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r){a(arguments[r])}return t;function a(e,r,i){if(babelHelpers["typeof"](e)==="object")return s(e);if(!r)r=he;if(!i)i=ae;var a={subscribers:[],fire:i,subscribe:function e(n){if(a.subscribers.indexOf(n)===-1){a.subscribers.push(n);a.fire=r(a.fire,n)}},unsubscribe:function e(n){a.subscribers=a.subscribers.filter((function(e){return e!==n}));a.fire=a.subscribers.reduce(r,i)}};n[e]=t[e]=a;return a}function s(e){o(e).forEach((function(n){var t=e[n];if(u(t)){a(n,e[n][0],e[n][1])}else if(t==="asap"){var r=a(n,oe,(function e(){var n=arguments.length,t=new Array(n);while(n--)t[n]=arguments[n];r.subscribers.forEach((function(e){x((function n(){e.apply(null,t)}))}))}))}else throw new ne.InvalidArgument("Invalid event config")}))}}function Fn(e,n){p(n).from({prototype:e});return n}function Ln(e){return Fn(Mn.prototype,(function n(t,r,i){this.db=e;this._tx=i;this.name=t;this.schema=r;this.hook=e._allTables[t]?e._allTables[t].hook:Nn(null,{creating:[ce,ae],reading:[ue,oe],updating:[le,ae],deleting:[fe,ae]})}))}function Un(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Vn(e,n){e.filter=jn(e.filter,n)}function Hn(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return jn(r(),n())}:n;e.justLimit=t&&!r}function zn(e,n){e.isMatch=jn(e.isMatch,n)}function Wn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new ne.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function Yn(e,n,t){var r=Wn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Xn(e,n,t,r){var i=e.replayFilter?jn(e.filter,e.replayFilter()):e.filter;if(!e.or){return $n(Yn(e,r,t),jn(e.algorithm,i),n,!e.keysOnly&&e.valueMapper)}else{var a={};var o=function e(t,r,o){if(!i||i(r,o,(function(e){return r.stop(e)}),(function(e){return r.fail(e)}))){var u=r.primaryKey;var s=""+u;if(s==="[object ArrayBuffer]")s=""+new Uint8Array(u);if(!l(a,s)){a[s]=true;n(t,r,o)}}};return Promise.all([e.or._iterate(o,t),$n(Yn(e,r,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}}function $n(e,n,t,r){var i=r?function(e,n,i){return t(r(e),n,i)}:t;var a=Ze(i);return e.then((function(e){if(e){return e.start((function(){var t=function n(){return e["continue"]()};if(!n||n(e,(function(e){return t=e}),(function(n){e.stop(n);t=ae}),(function(n){e.fail(n);t=ae})))a(e.value,e,(function(e){return t=e}));t()}))}}))}var Qn=Symbol();var Gn=function(){function e(e){Object.assign(this,e)}e.prototype.execute=function(e){var n;if(this.add!==undefined){var t=this.add;if(u(t)){return i(i([],u(e)?e:[],true),t,true).sort()}if(typeof t==="number")return(Number(e)||0)+t;if(typeof t==="bigint"){try{return BigInt(e)+t}catch(e){return BigInt(0)+t}}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==undefined){var r=this.remove;if(u(r)){return u(e)?e.filter((function(e){return!r.includes(e)})).sort():[]}if(typeof r==="number")return Number(e)-r;if(typeof r==="bigint"){try{return BigInt(e)-r}catch(e){return BigInt(0)-r}}throw new TypeError("Invalid subtrahend ".concat(r))}var a=(n=this.replacePrefix)===null||n===void 0?void 0:n[0];if(a&&typeof e==="string"&&e.startsWith(a)){return this.replacePrefix[1]+e.substring(a.length)}return e};return e}();var Jn=function(){function e(){}e.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,bn.bind(null,t.error)):t.table._trans("readonly",e).then(n)};e.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,bn.bind(null,n.error)):n.table._trans("readwrite",e,"locked")};e.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=jn(n.algorithm,e)};e.prototype._iterate=function(e,n){return Xn(this._ctx,e,n,this._ctx.table.core)};e.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);if(e)s(t,e);n._ctx=t;return n};e.prototype.raw=function(){this._ctx.valueMapper=null;return this};e.prototype.each=function(e){var n=this._ctx;return this._read((function(t){return Xn(n,e,t,n.table.core)}))};e.prototype.count=function(e){var n=this;return this._read((function(e){var t=n._ctx;var r=t.table.core;if(Un(t,true)){return r.count({trans:e,query:{index:Wn(t,r.schema),range:t.range}}).then((function(e){return Math.min(e,t.limit)}))}else{var i=0;return Xn(t,(function(){++i;return false}),e,r).then((function(){return i}))}})).then(e)};e.prototype.sortBy=function(e,n){var t=e.split(".").reverse(),r=t[0],i=t.length-1;function a(e,n){if(n)return a(e[t[n]],n-1);return e[r]}var o=this._ctx.dir==="next"?1:-1;function u(e,n){var t=a(e,i),r=a(n,i);return Dn(t,r)*o}return this.toArray((function(e){return e.sort(u)})).then(n)};e.prototype.toArray=function(e){var n=this;return this._read((function(e){var t=n._ctx;if(t.dir==="next"&&Un(t,true)&&t.limit>0){var r=t.valueMapper;var i=Wn(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:true,query:{index:i,range:t.range}}).then((function(e){var n=e.result;return r?n.map(r):n}))}else{var a=[];return Xn(t,(function(e){return a.push(e)}),e,t.table.core).then((function(){return a}))}}),e)};e.prototype.offset=function(e){var n=this._ctx;if(e<=0)return this;n.offset+=e;if(Un(n)){Hn(n,(function(){var n=e;return function(e,t){if(n===0)return true;if(n===1){--n;return false}t((function(){e.advance(n);n=0}));return false}}))}else{Hn(n,(function(){var n=e;return function(){return--n<0}}))}return this};e.prototype.limit=function(e){this._ctx.limit=Math.min(this._ctx.limit,e);Hn(this._ctx,(function(){var n=e;return function(e,t,r){if(--n<=0)t(r);return n>=0}}),true);return this};e.prototype.until=function(e,n){Vn(this._ctx,(function(t,r,i){if(e(t.value)){r(i);return n}else{return true}}));return this};e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)};e.prototype.last=function(e){return this.reverse().first(e)};e.prototype.filter=function(e){Vn(this._ctx,(function(n){return e(n.value)}));zn(this._ctx,e);return this};e.prototype.and=function(e){return this.filter(e)};e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)};e.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this};e.prototype.desc=function(){return this.reverse()};e.prototype.eachKey=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;return this.each((function(n,t){e(t.key,t)}))};e.prototype.eachUniqueKey=function(e){this._ctx.unique="unique";return this.eachKey(e)};e.prototype.eachPrimaryKey=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;return this.each((function(n,t){e(t.primaryKey,t)}))};e.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.key)})).then((function(){return t})).then(e)};e.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Un(n,true)&&n.limit>0){return this._read((function(e){var t=Wn(n,n.table.core.schema);return n.table.core.query({trans:e,values:false,limit:n.limit,query:{index:t,range:n.range}})})).then((function(e){var n=e.result;return n})).then(e)}n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.primaryKey)})).then((function(){return t})).then(e)};e.prototype.uniqueKeys=function(e){this._ctx.unique="unique";return this.keys(e)};e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)};e.prototype.lastKey=function(e){return this.reverse().firstKey(e)};e.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var t={};Vn(this._ctx,(function(e){var n=e.primaryKey.toString();var r=l(t,n);t[n]=true;return!r}));return this};e.prototype.modify=function(e){var n=this;var t=this._ctx;return this._write((function(r){var i;if(typeof e==="function"){i=e}else{var a=o(e);var u=a.length;i=function n(t){var r=false;for(var i=0;i<u;++i){var o=a[i];var s=e[o];var c=O(t,o);if(s instanceof Gn){P(t,o,s.execute(c));r=true}else if(c!==s){P(t,o,s);r=true}}return r}}var s=t.table.core;var c=s.schema.primaryKey,f=c.outbound,l=c.extractKey;var h=n.db._options.modifyChunkSize||200;var d=[];var v=0;var p=[];var y=function e(n,t){var r=t.failures,i=t.numFailures;v+=n-i;for(var a=0,u=o(r);a<u.length;a++){var s=u[a];d.push(r[s])}};return n.clone().primaryKeys().then((function(n){var a=Un(t)&&t.limit===Infinity&&(typeof e!=="function"||e===Zn)&&{index:t.index,range:t.range};var o=function t(o){var u=Math.min(h,n.length-o);return s.getMany({trans:r,keys:n.slice(o,o+u),cache:"immutable"}).then((function(c){var d=[];var v=[];var p=f?[]:null;var m=[];for(var b=0;b<u;++b){var g=c[b];var w={value:B(g),primKey:n[o+b]};if(i.call(w,w.value,w)!==false){if(w.value==null){m.push(n[o+b])}else if(!f&&Dn(l(g),l(w.value))!==0){m.push(n[o+b]);d.push(w.value)}else{v.push(w.value);if(f)p.push(n[o+b])}}}return Promise.resolve(d.length>0&&s.mutate({trans:r,type:"add",values:d}).then((function(e){for(var n in e.failures){m.splice(parseInt(n),1)}y(d.length,e)}))).then((function(){return(v.length>0||a&&babelHelpers["typeof"](e)==="object")&&s.mutate({trans:r,type:"put",keys:p,values:v,criteria:a,changeSpec:typeof e!=="function"&&e,isAdditionalChunk:o>0}).then((function(e){return y(v.length,e)}))})).then((function(){return(m.length>0||a&&e===Zn)&&s.mutate({trans:r,type:"delete",keys:m,criteria:a,isAdditionalChunk:o>0}).then((function(e){return y(m.length,e)}))})).then((function(){return n.length>o+u&&t(o+h)}))}))};return o(0).then((function(){if(d.length>0)throw new G("Error modifying one or more objects",d,v,p);return n.length}))}))}))};e.prototype["delete"]=function(){var e=this._ctx,n=e.range;if(Un(e)&&(e.isPrimKey||n.type===3)){return this._write((function(t){var r=e.table.core.schema.primaryKey;var i=n;return e.table.core.count({trans:t,query:{index:r,range:i}}).then((function(n){return e.table.core.mutate({trans:t,type:"deleteRange",range:i}).then((function(e){var t=e.failures;e.lastResult;e.results;var r=e.numFailures;if(r)throw new G("Could not delete some values",Object.keys(t).map((function(e){return t[e]})),n-r);return n-r}))}))}))}return this.modify(Zn)};return e}();var Zn=function e(n,t){return t.value=null};function et(e){return Fn(Jn.prototype,(function n(t,r){this.db=e;var i=An,a=null;if(r)try{i=r()}catch(e){a=e}var o=t._ctx;var u=o.table;var s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:a,or:o.or,valueMapper:s!==oe?s:null}}))}function nt(e,n){return e<n?-1:e===n?0:1}function tt(e,n){return e>n?-1:e===n?0:1}function rt(e,n,t){var r=e instanceof lt?new e.Collection(e):e;r._ctx.error=t?new t(n):new TypeError(n);return r}function it(e){return new e.Collection(e,(function(){return ft("")})).limit(0)}function at(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function ot(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ut(e,n,t,r,i,a){var o=Math.min(e.length,r.length);var u=-1;for(var s=0;s<o;++s){var c=n[s];if(c!==r[s]){if(i(e[s],t[s])<0)return e.substr(0,s)+t[s]+t.substr(s+1);if(i(e[s],r[s])<0)return e.substr(0,s)+r[s]+t.substr(s+1);if(u>=0)return e.substr(0,u)+n[u]+t.substr(u+1);return null}if(i(e[s],c)<0)u=s}if(o<r.length&&a==="next")return e+t.substr(e.length);if(o<e.length&&a==="prev")return e.substr(0,t.length);return u<0?null:e.substr(0,u)+r[u]+t.substr(u+1)}function st(e,n,t,r){var i,a,o,u,s,c,f,l=t.length;if(!t.every((function(e){return typeof e==="string"}))){return rt(e,On)}function h(e){i=at(e);a=ot(e);o=e==="next"?nt:tt;var n=t.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,n){return o(e.lower,n.lower)}));u=n.map((function(e){return e.upper}));s=n.map((function(e){return e.lower}));c=e;f=e==="next"?"":r}h("next");var d=new e.Collection(e,(function(){return ct(u[0],s[l-1]+r)}));d._ondirectionchange=function(e){h(e)};var v=0;d._addAlgorithm((function(e,t,r){var i=e.key;if(typeof i!=="string")return false;var h=a(i);if(n(h,s,v)){return true}else{var d=null;for(var p=v;p<l;++p){var y=ut(i,h,u[p],s[p],o,c);if(y===null&&d===null)v=p+1;else if(d===null||o(d,y)>0){d=y}}if(d!==null){t((function(){e["continue"](d+f)}))}else{t(r)}return false}}));return d}function ct(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function ft(e){return{type:1,lower:e,upper:e}}var lt=function(){function e(){}Object.defineProperty(e.prototype,"Collection",{get:function e(){return this._ctx.table.db.Collection},enumerable:false,configurable:true});e.prototype.between=function(e,n,t,r){t=t!==false;r=r===true;try{if(this._cmp(e,n)>0||this._cmp(e,n)===0&&(t||r)&&!(t&&r))return it(this);return new this.Collection(this,(function(){return ct(e,n,!t,!r)}))}catch(e){return rt(this,kn)}};e.prototype.equals=function(e){if(e==null)return rt(this,kn);return new this.Collection(this,(function(){return ft(e)}))};e.prototype.above=function(e){if(e==null)return rt(this,kn);return new this.Collection(this,(function(){return ct(e,undefined,true)}))};e.prototype.aboveOrEqual=function(e){if(e==null)return rt(this,kn);return new this.Collection(this,(function(){return ct(e,undefined,false)}))};e.prototype.below=function(e){if(e==null)return rt(this,kn);return new this.Collection(this,(function(){return ct(undefined,e,false,true)}))};e.prototype.belowOrEqual=function(e){if(e==null)return rt(this,kn);return new this.Collection(this,(function(){return ct(undefined,e)}))};e.prototype.startsWith=function(e){if(typeof e!=="string")return rt(this,On);return this.between(e,e+_n,true,true)};e.prototype.startsWithIgnoreCase=function(e){if(e==="")return this.startsWith(e);return st(this,(function(e,n){return e.indexOf(n[0])===0}),[e],_n)};e.prototype.equalsIgnoreCase=function(e){return st(this,(function(e,n){return e===n[0]}),[e],"")};e.prototype.anyOfIgnoreCase=function(){var e=V.apply(U,arguments);if(e.length===0)return it(this);return st(this,(function(e,n){return n.indexOf(e)!==-1}),e,"")};e.prototype.startsWithAnyOfIgnoreCase=function(){var e=V.apply(U,arguments);if(e.length===0)return it(this);return st(this,(function(e,n){return n.some((function(n){return e.indexOf(n)===0}))}),e,_n)};e.prototype.anyOf=function(){var e=this;var n=V.apply(U,arguments);var t=this._cmp;try{n.sort(t)}catch(e){return rt(this,kn)}if(n.length===0)return it(this);var r=new this.Collection(this,(function(){return ct(n[0],n[n.length-1])}));r._ondirectionchange=function(r){t=r==="next"?e._ascending:e._descending;n.sort(t)};var i=0;r._addAlgorithm((function(e,r,a){var o=e.key;while(t(o,n[i])>0){++i;if(i===n.length){r(a);return false}}if(t(o,n[i])===0){return true}else{r((function(){e["continue"](n[i])}));return false}}));return r};e.prototype.notEqual=function(e){return this.inAnyRange([[xn,e],[e,this.db._maxKey]],{includeLowers:false,includeUppers:false})};e.prototype.noneOf=function(){var e=V.apply(U,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return rt(this,kn)}var n=e.reduce((function(e,n){return e?e.concat([[e[e.length-1][1],n]]):[[xn,n]]}),null);n.push([e[e.length-1],this.db._maxKey]);return this.inAnyRange(n,{includeLowers:false,includeUppers:false})};e.prototype.inAnyRange=function(e,n){var t=this;var r=this._cmp,i=this._ascending,a=this._descending,o=this._min,u=this._max;if(e.length===0)return it(this);if(!e.every((function(e){return e[0]!==undefined&&e[1]!==undefined&&i(e[0],e[1])<=0}))){return rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument)}var s=!n||n.includeLowers!==false;var c=n&&n.includeUppers===true;function f(e,n){var t=0,i=e.length;for(;t<i;++t){var a=e[t];if(r(n[0],a[1])<0&&r(n[1],a[0])>0){a[0]=o(a[0],n[0]);a[1]=u(a[1],n[1]);break}}if(t===i)e.push(n);return e}var l=i;function h(e,n){return l(e[0],n[0])}var d;try{d=e.reduce(f,[]);d.sort(h)}catch(e){return rt(this,kn)}var v=0;var p=c?function(e){return i(e,d[v][1])>0}:function(e){return i(e,d[v][1])>=0};var y=s?function(e){return a(e,d[v][0])>0}:function(e){return a(e,d[v][0])>=0};function m(e){return!p(e)&&!y(e)}var b=p;var g=new this.Collection(this,(function(){return ct(d[0][0],d[d.length-1][1],!s,!c)}));g._ondirectionchange=function(e){if(e==="next"){b=p;l=i}else{b=y;l=a}d.sort(h)};g._addAlgorithm((function(e,n,r){var a=e.key;while(b(a)){++v;if(v===d.length){n(r);return false}}if(m(a)){return true}else if(t._cmp(a,d[v][1])===0||t._cmp(a,d[v][0])===0){return false}else{n((function(){if(l===i)e["continue"](d[v][0]);else e["continue"](d[v][1])}));return false}}));return g};e.prototype.startsWithAnyOf=function(){var e=V.apply(U,arguments);if(!e.every((function(e){return typeof e==="string"}))){return rt(this,"startsWithAnyOf() only works with strings")}if(e.length===0)return it(this);return this.inAnyRange(e.map((function(e){return[e,e+_n]})))};return e}();function ht(e){return Fn(lt.prototype,(function n(t,r,i){this.db=e;this._ctx={table:t,index:r===":id"?null:r,or:i};this._cmp=this._ascending=Dn;this._descending=function(e,n){return Dn(n,e)};this._max=function(e,n){return Dn(e,n)>0?e:n};this._min=function(e,n){return Dn(e,n)<0?e:n};this._IDBKeyRange=e._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new ne.MissingAPI}))}function dt(e){return Ze((function(n){vt(n);e(n.target.error);return false}))}function vt(e){if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}var pt="storagemutated";var yt="x-storagemutated-1";var mt=Nn(null,pt);var bt=function(){function e(){}e.prototype._lock=function(){_(!De.global);++this._reculock;if(this._reculock===1&&!De.global)De.lockOwnerFor=this;return this};e.prototype._unlock=function(){_(!De.global);if(--this._reculock===0){if(!De.global)De.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var e=this._blockedFuncs.shift();try{pn(e[1],e[0])}catch(e){}}}return this};e.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this};e.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb;var r=this.db._state.dbOpenError;_(!this.idbtrans);if(!e&&!t){switch(r&&r.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(r);case"MissingAPIError":throw new ne.MissingAPI(r.message,r);default:throw new ne.OpenFailed(r)}}if(!this.active)throw new ne.TransactionInactive;_(this._completion._state===null);e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));e.onerror=Ze((function(t){vt(t);n._reject(e.error)}));e.onabort=Ze((function(t){vt(t);n.active&&n._reject(new ne.Abort(e.error));n.active=false;n.on("abort").fire(t)}));e.oncomplete=Ze((function(){n.active=false;n._resolve();if("mutatedParts"in e){mt.storagemutated.fire(e["mutatedParts"])}}));return this};e.prototype._promise=function(e,n,t){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return bn(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return bn(new ne.TransactionInactive);if(this._locked()){return new Re((function(i,a){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,a)},De])}))}else if(t){return un((function(){var e=new Re((function(e,t){r._lock();var i=n(e,t,r);if(i&&i.then)i.then(e,t)}));e["finally"]((function(){return r._unlock()}));e._lib=true;return e}))}else{var i=new Re((function(e,t){var i=n(e,t,r);if(i&&i.then)i.then(e,t)}));i._lib=true;return i}};e.prototype._root=function(){return this.parent?this.parent._root():this};e.prototype.waitFor=function(e){var n=this._root();var t=Re.resolve(e);if(n._waitingFor){n._waitingFor=n._waitingFor.then((function(){return t}))}else{n._waitingFor=t;n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);(function e(){++n._spinCount;while(n._waitingQueue.length)n._waitingQueue.shift()();if(n._waitingFor)r.get(-Infinity).onsuccess=e})()}var i=n._waitingFor;return new Re((function(e,r){t.then((function(t){return n._waitingQueue.push(Ze(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Ze(r.bind(null,e)))}))["finally"]((function(){if(n._waitingFor===i){n._waitingFor=null}}))}))};e.prototype.abort=function(){if(this.active){this.active=false;if(this.idbtrans)this.idbtrans.abort();this._reject(new ne.Abort)}};e.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(l(n,e))return n[e];var t=this.schema[e];if(!t){throw new ne.NotFound("Table "+e+" not part of transaction")}var r=new this.db.Table(e,t,this);r.core=this.db.core.table(e);n[e]=r;return r};return e}();function gt(e){return Fn(bt.prototype,(function n(t,r,i,a,o){var u=this;this.db=e;this.mode=t;this.storeNames=r;this.schema=i;this.chromeTransactionDurability=a;this.idbtrans=null;this.on=Nn(this,"complete","error","abort");this.parent=o||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new Re((function(e,n){u._resolve=e;u._reject=n}));this._completion.then((function(){u.active=false;u.on.complete.fire()}),(function(e){var n=u.active;u.active=false;u.on.error.fire(e);u.parent?u.parent._reject(e):n&&u.idbtrans&&u.idbtrans.abort();return bn(e)}))}))}function wt(e,n,t,r,i,a,o){return{name:e,keyPath:n,unique:t,multi:r,auto:i,compound:a,src:(t&&!o?"&":"")+(r?"*":"")+(i?"++":"")+_t(n)}}function _t(e){return typeof e==="string"?e:e?"["+[].join.call(e,"+")+"]":""}function xt(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:k(t,(function(e){return[e.name,e]}))}}function kt(e){return e.length===1?e[0]:e}var Ot=function e(n){try{n.only([[]]);Ot=function e(){return[[]]};return[[]]}catch(e){Ot=function e(){return _n};return _n}};function Pt(e){if(e==null){return function(){return undefined}}else if(typeof e==="string"){return Kt(e)}else{return function(n){return O(n,e)}}}function Kt(e){var n=e.split(".");if(n.length===1){return function(n){return n[e]}}else{return function(n){return O(n,e)}}}function Et(e){return[].slice.call(e)}var St=0;function jt(e){return e==null?":id":typeof e==="string"?e:"[".concat(e.join("+"),"]")}function At(e,n,t){function r(e,n){var t=Et(e.objectStoreNames);return{schema:{name:e.name,tables:t.map((function(e){return n.objectStore(e)})).map((function(e){var n=e.keyPath,t=e.autoIncrement;var r=u(n);var i=n==null;var a={};var o={name:e.name,primaryKey:{name:null,isPrimaryKey:true,outbound:i,compound:r,keyPath:n,autoIncrement:t,unique:true,extractKey:Pt(n)},indexes:Et(e.indexNames).map((function(n){return e.index(n)})).map((function(e){var n=e.name,t=e.unique,r=e.multiEntry,i=e.keyPath;var o=u(i);var s={name:n,compound:o,keyPath:i,unique:t,multiEntry:r,extractKey:Pt(i)};a[jt(i)]=s;return s})),getIndexByKeyPath:function e(n){return a[jt(n)]}};a[":id"]=o.primaryKey;if(n!=null){a[jt(n)]=o.primaryKey}return o}))},hasGetAll:t.length>0&&"getAll"in n.objectStore(t[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,a=e.upperOpen;var o=t===undefined?r===undefined?null:n.upperBound(r,!!a):r===undefined?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!a);return o}function a(e){var n=e.name;function t(e){var t=e.trans,r=e.type,a=e.keys,o=e.values,u=e.range;return new Promise((function(e,s){e=Ze(e);var c=t.objectStore(n);var f=c.keyPath==null;var l=r==="put"||r==="add";if(!l&&r!=="delete"&&r!=="deleteRange")throw new Error("Invalid operation type: "+r);var h=(a||o||{length:1}).length;if(a&&o&&a.length!==o.length){throw new Error("Given keys array must have same length as given values array.")}if(h===0)return e({numFailures:0,failures:{},results:[],lastResult:undefined});var d;var v=[];var p=[];var y=0;var m=function e(n){++y;vt(n)};if(r==="deleteRange"){if(u.type===4)return e({numFailures:y,failures:p,results:[],lastResult:undefined});if(u.type===3)v.push(d=c.clear());else v.push(d=c["delete"](i(u)))}else{var b=l?f?[o,a]:[o,null]:[a,null],g=b[0],w=b[1];if(l){for(var _=0;_<h;++_){v.push(d=w&&w[_]!==undefined?c[r](g[_],w[_]):c[r](g[_]));d.onerror=m}}else{for(var _=0;_<h;++_){v.push(d=c[r](g[_]));d.onerror=m}}}var x=function n(t){var i=t.target.result;v.forEach((function(e,n){return e.error!=null&&(p[n]=e.error)}));e({numFailures:y,failures:p,results:r==="delete"?a:v.map((function(e){return e.result})),lastResult:i})};d.onerror=function(e){m(e);x(e)};d.onsuccess=x}))}function r(e){var t=e.trans,r=e.values,a=e.query,o=e.reverse,u=e.unique;return new Promise((function(e,s){e=Ze(e);var c=a.index,f=a.range;var l=t.objectStore(n);var h=c.isPrimaryKey?l:l.index(c.name);var d=o?u?"prevunique":"prev":u?"nextunique":"next";var v=r||!("openKeyCursor"in h)?h.openCursor(i(f),d):h.openKeyCursor(i(f),d);v.onerror=dt(s);v.onsuccess=Ze((function(n){var r=v.result;if(!r){e(null);return}r.___id=++St;r.done=false;var i=r["continue"].bind(r);var a=r.continuePrimaryKey;if(a)a=a.bind(r);var o=r.advance.bind(r);var u=function e(){throw new Error("Cursor not started")};var c=function e(){throw new Error("Cursor not stopped")};r.trans=t;r.stop=r["continue"]=r.continuePrimaryKey=r.advance=u;r.fail=Ze(s);r.next=function(){var e=this;var n=1;return this.start((function(){return n--?e["continue"]():e.stop()})).then((function(){return e}))};r.start=function(e){var n=new Promise((function(e,n){e=Ze(e);v.onerror=dt(n);r.fail=n;r.stop=function(n){r.stop=r["continue"]=r.continuePrimaryKey=r.advance=c;e(n)}}));var t=function n(){if(v.result){try{e()}catch(e){r.fail(e)}}else{r.done=true;r.start=function(){throw new Error("Cursor behind last entry")};r.stop()}};v.onsuccess=Ze((function(e){v.onsuccess=t;t()}));r["continue"]=i;r.continuePrimaryKey=a;r.advance=o;t();return n};e(r)}),s)}))}function a(e){return function(t){return new Promise((function(r,a){r=Ze(r);var o=t.trans,u=t.values,s=t.limit,c=t.query;var f=s===Infinity?undefined:s;var l=c.index,h=c.range;var d=o.objectStore(n);var v=l.isPrimaryKey?d:d.index(l.name);var p=i(h);if(s===0)return r({result:[]});if(e){var y=u?v.getAll(p,f):v.getAllKeys(p,f);y.onsuccess=function(e){return r({result:e.target.result})};y.onerror=dt(a)}else{var m=0;var b=u||!("openKeyCursor"in v)?v.openCursor(p):v.openKeyCursor(p);var g=[];b.onsuccess=function(e){var n=b.result;if(!n)return r({result:g});g.push(u?n.value:n.primaryKey);if(++m===s)return r({result:g});n["continue"]()};b.onerror=dt(a)}}))}}return{name:n,schema:e,mutate:t,getMany:function e(t){var r=t.trans,i=t.keys;return new Promise((function(e,t){e=Ze(e);var a=r.objectStore(n);var o=i.length;var u=new Array(o);var s=0;var c=0;var f;var l=function n(t){var r=t.target;if((u[r._pos]=r.result)!=null);if(++c===s)e(u)};var h=dt(t);for(var d=0;d<o;++d){var v=i[d];if(v!=null){f=a.get(i[d]);f._pos=d;f.onsuccess=l;f.onerror=h;++s}}if(s===0)e(u)}))},get:function e(t){var r=t.trans,i=t.key;return new Promise((function(e,t){e=Ze(e);var a=r.objectStore(n);var o=a.get(i);o.onsuccess=function(n){return e(n.target.result)};o.onerror=dt(t)}))},query:a(c),openCursor:r,count:function e(t){var r=t.query,a=t.trans;var o=r.index,u=r.range;return new Promise((function(e,t){var r=a.objectStore(n);var s=o.isPrimaryKey?r:r.index(o.name);var c=i(u);var f=c?s.count(c):s.count();f.onsuccess=Ze((function(n){return e(n.target.result)}));f.onerror=dt(t)}))}}}var o=r(e,t),s=o.schema,c=o.hasGetAll;var f=s.tables.map((function(e){return a(e)}));var l={};f.forEach((function(e){return l[e.name]=e}));return{stack:"dbcore",transaction:e.transaction.bind(e),table:function e(n){var t=l[n];if(!t)throw new Error("Table '".concat(n,"' not found"));return l[n]},MIN_KEY:-Infinity,MAX_KEY:Ot(n),schema:s}}function Ct(e,n){return n.reduce((function(e,n){var t=n.create;return r(r({},e),t(e))}),e)}function It(e,n,t,r){var i=t.IDBKeyRange;t.indexedDB;var a=Ct(At(n,i,r),e.dbcore);return{dbcore:a}}function Dt(e,n){var t=n.db;var r=It(e._middlewares,t,e._deps,n);e.core=r.dbcore;e.tables.forEach((function(n){var t=n.name;if(e.core.schema.tables.some((function(e){return e.name===t}))){n.core=e.core.table(t);if(e[t]instanceof e.Table){e[t].core=n.core}}}))}function qt(e,n,t,r){t.forEach((function(t){var i=r[t];n.forEach((function(n){var r=m(n,t);if(!r||"value"in r&&r.value===undefined){if(n===e.Transaction.prototype||n instanceof e.Transaction){v(n,t,{get:function e(){return this.table(t)},set:function e(n){d(this,t,{value:n,writable:true,configurable:true,enumerable:true})}})}else{n[t]=new e.Table(t,i)}}}))}))}function Bt(e,n){n.forEach((function(n){for(var t in n){if(n[t]instanceof e.Table)delete n[t]}}))}function Tt(e,n){return e._cfg.version-n._cfg.version}function Rt(e,n,t,r){var i=e._dbSchema;if(t.objectStoreNames.contains("$meta")&&!i.$meta){i.$meta=xt("$meta",Qt("")[0],[]);e._storeNames.push("$meta")}var a=e._createTransaction("readwrite",e._storeNames,i);a.create(t);a._completion["catch"](r);var u=a._reject.bind(a);var s=De.transless||De;un((function(){De.trans=a;De.transless=s;if(n===0){o(i).forEach((function(e){Ut(t,e,i[e].primKey,i[e].indexes)}));Dt(e,t);Re.follow((function(){return e.on.populate.fire(a)}))["catch"](u)}else{Dt(e,t);return Nt(e,a,n).then((function(n){return Ft(e,n,a,t)}))["catch"](u)}}))}function Mt(e,n){Vt(e._dbSchema,n);if(n.db.version%10===0&&!n.objectStoreNames.contains("$meta")){n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version")}var t=Wt(e,e.idbdb,n);$t(e,e._dbSchema,n);var r=Lt(t,e._dbSchema);var i=function e(t){if(t.change.length||t.recreate){console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key."));return{value:void 0}}var r=n.objectStore(t.name);t.add.forEach((function(e){if(ve)console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src));zt(r,e)}))};for(var a=0,o=r.change;a<o.length;a++){var u=o[a];var s=i(u);if(babelHelpers["typeof"](s)==="object")return s.value}}function Nt(e,n,t){if(n.storeNames.includes("$meta")){return n.table("$meta").get("version").then((function(e){return e!=null?e:t}))}else{return Re.resolve(t)}}function Ft(e,n,t,r){var i=[];var a=e._versions;var u=e._dbSchema=Wt(e,e.idbdb,r);var s=a.filter((function(e){return e._cfg.version>=n}));if(s.length===0){return Re.resolve()}s.forEach((function(a){i.push((function(){var i=u;var s=a._cfg.dbschema;$t(e,i,r);$t(e,s,r);u=e._dbSchema=s;var c=Lt(i,s);c.add.forEach((function(e){Ut(r,e[0],e[1].primKey,e[1].indexes)}));c.change.forEach((function(e){if(e.recreate){throw new ne.Upgrade("Not yet support for changing primary key")}else{var n=r.objectStore(e.name);e.add.forEach((function(e){return zt(n,e)}));e.change.forEach((function(e){n.deleteIndex(e.name);zt(n,e)}));e.del.forEach((function(e){return n.deleteIndex(e)}))}}));var f=a._cfg.contentUpgrade;if(f&&a._cfg.version>n){Dt(e,r);t._memoizedTables={};var l=E(s);c.del.forEach((function(e){l[e]=i[e]}));Bt(e,[e.Transaction.prototype]);qt(e,[e.Transaction.prototype],o(l),l);t.schema=l;var h=H(f);if(h){sn()}var d;var v=Re.follow((function(){d=f(t);if(d){if(h){var e=cn.bind(null,null);d.then(e,e)}}}));return d&&typeof d.then==="function"?Re.resolve(d):v.then((function(){return d}))}}));i.push((function(n){var r=a._cfg.dbschema;Ht(r,n);Bt(e,[e.Transaction.prototype]);qt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);t.schema=e._dbSchema}));i.push((function(n){if(e.idbdb.objectStoreNames.contains("$meta")){if(Math.ceil(e.idbdb.version/10)===a._cfg.version){e.idbdb.deleteObjectStore("$meta");delete e._dbSchema.$meta;e._storeNames=e._storeNames.filter((function(e){return e!=="$meta"}))}else{n.objectStore("$meta").put(a._cfg.version,"version")}}}))}));function c(){return i.length?Re.resolve(i.shift()(t.idbtrans)).then(c):Re.resolve()}return c().then((function(){Vt(u,r)}))}function Lt(e,n){var t={del:[],add:[],change:[]};var r;for(r in e){if(!n[r])t.del.push(r)}for(r in n){var i=e[r],a=n[r];if(!i){t.add.push([r,a])}else{var o={name:r,def:a,recreate:false,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto){o.recreate=true;t.change.push(o)}else{var u=i.idxByName;var s=a.idxByName;var c=void 0;for(c in u){if(!s[c])o.del.push(c)}for(c in s){var f=u[c],l=s[c];if(!f)o.add.push(l);else if(f.src!==l.src)o.change.push(l)}if(o.del.length>0||o.add.length>0||o.change.length>0){t.change.push(o)}}}}return t}function Ut(e,n,t,r){var i=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});r.forEach((function(e){return zt(i,e)}));return i}function Vt(e,n){o(e).forEach((function(t){if(!n.db.objectStoreNames.contains(t)){if(ve)console.debug("Dexie: Creating missing table",t);Ut(n,t,e[t].primKey,e[t].indexes)}}))}function Ht(e,n){[].slice.call(n.db.objectStoreNames).forEach((function(t){return e[t]==null&&n.db.deleteObjectStore(t)}))}function zt(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wt(e,n,t){var r={};var i=g(n.objectStoreNames,0);i.forEach((function(e){var n=t.objectStore(e);var i=n.keyPath;var a=wt(_t(i),i||"",true,false,!!n.autoIncrement,i&&typeof i!=="string",true);var o=[];for(var u=0;u<n.indexNames.length;++u){var s=n.index(n.indexNames[u]);i=s.keyPath;var c=wt(s.name,i,!!s.unique,!!s.multiEntry,false,i&&typeof i!=="string",false);o.push(c)}r[e]=xt(e,a,o)}));return r}function Yt(e,n,t){e.verno=n.version/10;var r=e._dbSchema=Wt(e,n,t);e._storeNames=g(n.objectStoreNames,0);qt(e,[e._allTables],o(r),r)}function Xt(e,n){var t=Wt(e,e.idbdb,n);var r=Lt(t,e._dbSchema);return!(r.add.length||r.change.some((function(e){return e.add.length||e.change.length})))}function $t(e,n,t){var r=t.db.objectStoreNames;for(var i=0;i<r.length;++i){var o=r[i];var u=t.objectStore(o);e._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s];var f=u.index(c).keyPath;var l=typeof f==="string"?f:"["+g(f).join("+")+"]";if(n[o]){var h=n[o].idxByName[l];if(h){h.name=c;delete n[o].idxByName[l];n[o].idxByName[c]=h}}}}if(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){e._hasGetAll=false}}function Qt(e){return e.split(",").map((function(e,n){e=e.trim();var t=e.replace(/([&*]|\+\+)/g,"");var r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;return wt(t,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),u(r),n===0)}))}var Gt=function(){function e(){}e.prototype._parseStoresSpec=function(e,n){o(e).forEach((function(t){if(e[t]!==null){var r=Qt(e[t]);var i=r.shift();i.unique=true;if(i.multi)throw new ne.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}));n[t]=xt(t,i,r)}}))};e.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var t=n._versions;var r={};var i={};t.forEach((function(e){s(r,e._cfg.storesSource);i=e._cfg.dbschema={};e._parseStoresSpec(r,i)}));n._dbSchema=i;Bt(n,[n._allTables,n,n.Transaction.prototype]);qt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],o(i),i);n._storeNames=o(i);return this};e.prototype.upgrade=function(e){this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||ae,e);return this};return e}();function Jt(e){return Fn(Gt.prototype,(function n(t){this.db=e;this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function Zt(e,n){var t=e["_dbNamesDB"];if(!t){t=e["_dbNamesDB"]=new ei(Kn,{addons:[],indexedDB:e,IDBKeyRange:n});t.version(1).stores({dbnames:"name"})}return t.table("dbnames")}function er(e){return e&&typeof e.databases==="function"}function nr(e){var n=e.indexedDB,t=e.IDBKeyRange;return er(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Kn}))})):Zt(n,t).toCollection().primaryKeys()}function tr(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!er(t)&&n!==Kn&&Zt(t,r).put({name:n})["catch"](ae)}function rr(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!er(t)&&n!==Kn&&Zt(t,r)["delete"](n)["catch"](ae)}function ir(e){return un((function(){De.letThrough=true;return e()}))}function ar(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var n;return new Promise((function(e){var t=function n(){return indexedDB.databases()["finally"](e)};n=setInterval(t,100);t()}))["finally"]((function(){return clearInterval(n)}))}var or;function ur(e){return!("from"in e)}var sr=function e(n,t){if(this){s(this,arguments.length?{d:1,from:n,to:arguments.length>1?t:n}:{d:0})}else{var r=new e;if(n&&"d"in n){s(r,n)}return r}};h(sr.prototype,(or={add:function e(n){fr(this,n);return this},addKey:function e(n){cr(this,n,n);return this},addKeys:function e(n){var t=this;n.forEach((function(e){return cr(t,e,e)}));return this},hasKey:function e(n){var t=hr(this).next(n).value;return t&&Dn(t.from,n)<=0&&Dn(t.to,n)>=0}},or[N]=function(){return hr(this)},or));function cr(e,n,t){var r=Dn(n,t);if(isNaN(r))return;if(r>0)throw RangeError();if(ur(e))return s(e,{from:n,to:t,d:1});var i=e.l;var a=e.r;if(Dn(t,e.from)<0){i?cr(i,n,t):e.l={from:n,to:t,d:1,l:null,r:null};return dr(e)}if(Dn(n,e.to)>0){a?cr(a,n,t):e.r={from:n,to:t,d:1,l:null,r:null};return dr(e)}if(Dn(n,e.from)<0){e.from=n;e.l=null;e.d=a?a.d+1:1}if(Dn(t,e.to)>0){e.to=t;e.r=null;e.d=e.l?e.l.d+1:1}var o=!e.r;if(i&&!e.l){fr(e,i)}if(a&&o){fr(e,a)}}function fr(e,n){function t(e,n){var r=n.from,i=n.to,a=n.l,o=n.r;cr(e,r,i);if(a)t(e,a);if(o)t(e,o)}if(!ur(n))t(e,n)}function lr(e,n){var t=hr(n);var r=t.next();if(r.done)return false;var i=r.value;var a=hr(e);var o=a.next(i.from);var u=o.value;while(!r.done&&!o.done){if(Dn(u.from,i.to)<=0&&Dn(u.to,i.from)>=0)return true;Dn(i.from,u.from)<0?i=(r=t.next(u.from)).value:u=(o=a.next(i.from)).value}return false}function hr(e){var n=ur(e)?null:{s:0,n:e};return{next:function e(t){var r=arguments.length>0;while(n){switch(n.s){case 0:n.s=1;if(r){while(n.n.l&&Dn(t,n.n.from)<0)n={up:n,n:n.n.l,s:1}}else{while(n.n.l)n={up:n,n:n.n.l,s:1}}case 1:n.s=2;if(!r||Dn(t,n.n.to)<=0)return{value:n.n,done:false};case 2:if(n.n.r){n.s=3;n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}}return{done:true}}}}function dr(e){var n,t;var i=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0);var a=i>1?"r":i<-1?"l":"";if(a){var o=a==="r"?"l":"r";var u=r({},e);var s=e[a];e.from=s.from;e.to=s.to;e[a]=s[a];u[a]=s[o];e[o]=u;u.d=vr(u)}e.d=vr(e)}function vr(e){var n=e.r,t=e.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function pr(e,n){o(n).forEach((function(t){if(e[t])fr(e[t],n[t]);else e[t]=I(n[t])}));return e}function yr(e,n){return e.all||n.all||Object.keys(e).some((function(t){return n[t]&&lr(n[t],e[t])}))}var mr={};var br={};var gr=false;function wr(e,n){pr(br,e);if(!gr){gr=true;setTimeout((function(){gr=false;var e=br;br={};_r(e,false)}),0)}}function _r(e,n){if(n===void 0){n=false}var t=new Set;if(e.all){for(var r=0,i=Object.values(mr);r<i.length;r++){var a=i[r];xr(a,e,t,n)}}else{for(var o in e){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(u){var s=u[1],c=u[2];var a=mr["idb://".concat(s,"/").concat(c)];if(a)xr(a,e,t,n)}}}t.forEach((function(e){return e()}))}function xr(e,n,t,r){var i=[];for(var a=0,o=Object.entries(e.queries.query);a<o.length;a++){var u=o[a],s=u[0],c=u[1];var f=[];for(var l=0,h=c;l<h.length;l++){var d=h[l];if(yr(n,d.obsSet)){d.subscribers.forEach((function(e){return t.add(e)}))}else if(r){f.push(d)}}if(r)i.push([s,f])}if(r){for(var v=0,p=i;v<p.length;v++){var y=p[v],s=y[0],f=y[1];e.queries.query[s]=f}}}function kr(e){var n=e._state;var t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?bn(n.dbOpenError):e}));n.isBeingOpened=true;n.dbOpenError=null;n.openComplete=false;var r=n.openCanceller;var i=Math.round(e.verno*10);var a=false;function o(){if(n.openCanceller!==r)throw new ne.DatabaseClosed("db.open() was cancelled")}var u=n.dbReadyResolve,s=null,c=false;var f=function r(){return new Re((function(u,f){o();if(!t)throw new ne.MissingAPI;var l=e.name;var h=n.autoSchema||!i?t.open(l):t.open(l,i);if(!h)throw new ne.MissingAPI;h.onerror=dt(f);h.onblocked=Ze(e._fireOnBlocked);h.onupgradeneeded=Ze((function(r){s=h.transaction;if(n.autoSchema&&!e._options.allowEmptyDB){h.onerror=vt;s.abort();h.result.close();var i=t.deleteDatabase(l);i.onsuccess=i.onerror=Ze((function(){f(new ne.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{s.onerror=dt(f);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=o<1;e.idbdb=h.result;if(a){Mt(e,s)}Rt(e,o/10,s,f)}}),f);h.onsuccess=Ze((function(){s=null;var t=e.idbdb=h.result;var o=g(t.objectStoreNames);if(o.length>0)try{var f=t.transaction(kt(o),"readonly");if(n.autoSchema)Yt(e,t,f);else{$t(e,e._dbSchema,f);if(!Xt(e,f)&&!a){console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.");t.close();i=t.version+1;a=true;return u(r())}}Dt(e,f)}catch(e){}Pn.push(e);t.onversionchange=Ze((function(t){n.vcFired=true;e.on("versionchange").fire(t)}));t.onclose=Ze((function(n){e.on("close").fire(n)}));if(c)tr(e._deps,l);u()}),f)}))["catch"]((function(e){switch(e===null||e===void 0?void 0:e.name){case"UnknownError":if(n.PR1398_maxLoop>0){n.PR1398_maxLoop--;console.warn("Dexie: Workaround for Chrome UnknownError on open()");return r()}break;case"VersionError":if(i>0){i=0;return r()}break}return Re.reject(e)}))};return Re.race([r,(typeof navigator==="undefined"?Re.resolve():ar()).then(f)]).then((function(){o();n.onReadyBeingFired=[];return Re.resolve(ir((function(){return e.on.ready.fire(e.vip)}))).then((function t(){if(n.onReadyBeingFired.length>0){var r=n.onReadyBeingFired.reduce(de,ae);n.onReadyBeingFired=[];return Re.resolve(ir((function(){return r(e.vip)}))).then(t)}}))}))["finally"]((function(){if(n.openCanceller===r){n.onReadyBeingFired=null;n.isBeingOpened=false}}))["catch"]((function(t){n.dbOpenError=t;try{s&&s.abort()}catch(e){}if(r===n.openCanceller){e._close()}return bn(t)}))["finally"]((function(){n.openComplete=true;u()})).then((function(){if(c){var n={};e.tables.forEach((function(t){t.schema.indexes.forEach((function(r){if(r.name)n["idb://".concat(e.name,"/").concat(t.name,"/").concat(r.name)]=new sr(-Infinity,[[[]]])}));n["idb://".concat(e.name,"/").concat(t.name,"/")]=n["idb://".concat(e.name,"/").concat(t.name,"/:dels")]=new sr(-Infinity,[[[]]])}));mt(pt).fire(n);_r(n,true)}return e}))}function Or(e){var n=function n(t){return e.next(t)},t=function n(t){return e["throw"](t)},r=a(n),i=a(t);function a(e){return function(n){var t=e(n),a=t.value;return t.done?a:!a||typeof a.then!=="function"?u(a)?Promise.all(a).then(r,i):r(a):a.then(r,i)}}return a(n)()}function Pr(e,n,t){var r=arguments.length;if(r<2)throw new ne.InvalidArgument("Too few arguments");var i=new Array(r-1);while(--r)i[r-1]=arguments[r];t=i.pop();var a=j(i);return[e,a,t]}function Kr(e,n,t,r,i){return Re.resolve().then((function(){var a=De.transless||De;var o=e._createTransaction(n,t,e._dbSchema,r);o.explicit=true;var u={trans:o,transless:a};if(r){o.idbtrans=r.idbtrans}else{try{o.create();o.idbtrans._explicit=true;e._state.PR1398_maxLoop=3}catch(r){if(r.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e.close({disableAutoOpen:false});return e.open().then((function(){return Kr(e,n,t,null,i)}))}return bn(r)}}var s=H(i);if(s){sn()}var c;var f=Re.follow((function(){c=i.call(o,o);if(c){if(s){var e=cn.bind(null,null);c.then(e,e)}else if(typeof c.next==="function"&&typeof c["throw"]==="function"){c=Or(c)}}}),u);return(c&&typeof c.then==="function"?Re.resolve(c).then((function(e){return o.active?e:bn(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):f.then((function(){return c}))).then((function(e){if(r)o._resolve();return o._completion.then((function(){return e}))}))["catch"]((function(e){o._reject(e);return bn(e)}))}))}function Er(e,n,t){var r=u(e)?e.slice():[e];for(var i=0;i<t;++i)r.push(n);return r}function Sr(e){return r(r({},e),{table:function n(t){var n=e.table(t);var i=n.schema;var a={};var o=[];function u(e,n,t){var i=jt(e);var s=a[i]=a[i]||[];var c=e==null?0:typeof e==="string"?1:e.length;var f=n>0;var l=r(r({},t),{name:f?"".concat(i,"(virtual-from:").concat(t.name,")"):t.name,lowLevelIndex:t,isVirtual:f,keyTail:n,keyLength:c,extractKey:Pt(e),unique:!f&&t.unique});s.push(l);if(!l.isPrimaryKey){o.push(l)}if(c>1){var h=c===2?e[0]:e.slice(0,c-1);u(h,n+1,t)}s.sort((function(e,n){return e.keyTail-n.keyTail}));return l}var s=u(i.primaryKey.keyPath,0,i.primaryKey);a[":id"]=[s];for(var c=0,f=i.indexes;c<f.length;c++){var l=f[c];u(l.keyPath,0,l)}function h(e){var n=a[jt(e)];return n&&n[0]}function d(n,t){return{type:n.type===1?2:n.type,lower:Er(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,t),lowerOpen:true,upper:Er(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,t),upperOpen:true}}function v(e){var n=e.query.index;return n.isVirtual?r(r({},e),{query:{index:n.lowLevelIndex,range:d(e.query.range,n.keyTail)}}):e}var p=r(r({},n),{schema:r(r({},i),{primaryKey:s,indexes:o,getIndexByKeyPath:h}),count:function e(t){return n.count(v(t))},query:function e(t){return n.query(v(t))},openCursor:function t(r){var i=r.query.index,a=i.keyTail,o=i.isVirtual,u=i.keyLength;if(!o)return n.openCursor(r);function s(n){function t(t){t!=null?n["continue"](Er(t,r.reverse?e.MAX_KEY:e.MIN_KEY,a)):r.unique?n["continue"](n.key.slice(0,u).concat(r.reverse?e.MIN_KEY:e.MAX_KEY,a)):n["continue"]()}var i=Object.create(n,{continue:{value:t},continuePrimaryKey:{value:function t(r,i){n.continuePrimaryKey(Er(r,e.MAX_KEY,a),i)}},primaryKey:{get:function e(){return n.primaryKey}},key:{get:function e(){var t=n.key;return u===1?t[0]:t.slice(0,u)}},value:{get:function e(){return n.value}}});return i}return n.openCursor(v(r)).then((function(e){return e&&s(e)}))}});return p}})}var jr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Sr};function Ar(e,n,t,r){t=t||{};r=r||"";o(e).forEach((function(i){if(!l(n,i)){t[r+i]=undefined}else{var a=e[i],o=n[i];if(babelHelpers["typeof"](a)==="object"&&babelHelpers["typeof"](o)==="object"&&a&&o){var u=M(a);var s=M(o);if(u!==s){t[r+i]=n[i]}else if(u==="Object"){Ar(a,o,t,r+i+".")}else if(a!==o){t[r+i]=n[i]}}else if(a!==o)t[r+i]=n[i]}}));o(n).forEach((function(i){if(!l(e,i)){t[r+i]=n[i]}}));return t}function Cr(e,n){if(n.type==="delete")return n.keys;return n.keys||n.values.map(e.extractKey)}var Ir={stack:"dbcore",name:"HooksMiddleware",level:2,create:function e(n){return r(r({},n),{table:function e(t){var a=n.table(t);var o=a.schema.primaryKey;var u=r(r({},a),{mutate:function e(n){var u=De.trans;var s=u.table(t).hook,c=s.deleting,f=s.creating,h=s.updating;switch(n.type){case"add":if(f.fire===ae)break;return u._promise("readwrite",(function(){return d(n)}),true);case"put":if(f.fire===ae&&h.fire===ae)break;return u._promise("readwrite",(function(){return d(n)}),true);case"delete":if(c.fire===ae)break;return u._promise("readwrite",(function(){return d(n)}),true);case"deleteRange":if(c.fire===ae)break;return u._promise("readwrite",(function(){return v(n)}),true)}return a.mutate(n);function d(e){var n=De.trans;var t=e.keys||Cr(o,e);if(!t)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?r(r({},e),{keys:t}):r({},e);if(e.type!=="delete")e.values=i([],e.values,true);if(e.keys)e.keys=i([],e.keys,true);return Dr(a,e,t).then((function(r){var i=t.map((function(t,i){var a=r[i];var u={onerror:null,onsuccess:null};if(e.type==="delete"){c.fire.call(u,t,a,n)}else if(e.type==="add"||a===undefined){var s=f.fire.call(u,t,e.values[i],n);if(t==null&&s!=null){t=s;e.keys[i]=t;if(!o.outbound){P(e.values[i],o.keyPath,t)}}}else{var d=Ar(a,e.values[i]);var v=h.fire.call(u,d,t,a,n);if(v){var p=e.values[i];Object.keys(v).forEach((function(e){if(l(p,e)){p[e]=v[e]}else{P(p,e,v[e])}}))}}return u}));return a.mutate(e).then((function(n){var a=n.failures,o=n.results,u=n.numFailures,s=n.lastResult;for(var c=0;c<t.length;++c){var f=o?o[c]:t[c];var l=i[c];if(f==null){l.onerror&&l.onerror(a[c])}else{l.onsuccess&&l.onsuccess(e.type==="put"&&r[c]?e.values[c]:f)}}return{failures:a,results:o,numFailures:u,lastResult:s}}))["catch"]((function(e){i.forEach((function(n){return n.onerror&&n.onerror(e)}));return Promise.reject(e)}))}))}function v(e){return p(e.trans,e.range,1e4)}function p(e,n,t){return a.query({trans:e,values:false,query:{index:o,range:n},limit:t}).then((function(i){var a=i.result;return d({type:"delete",keys:a,trans:e}).then((function(i){if(i.numFailures>0)return Promise.reject(i.failures[0]);if(a.length<t){return{failures:[],numFailures:0,lastResult:undefined}}else{return p(e,r(r({},n),{lower:a[a.length-1],lowerOpen:true}),t)}}))}))}}});return u}})}};function Dr(e,n,t){return n.type==="add"?Promise.resolve([]):e.getMany({trans:n.trans,keys:t,cache:"immutable"})}function qr(e,n,t){try{if(!n)return null;if(n.keys.length<e.length)return null;var r=[];for(var i=0,a=0;i<n.keys.length&&a<e.length;++i){if(Dn(n.keys[i],e[a])!==0)continue;r.push(t?B(n.values[i]):n.values[i]);++a}return r.length===e.length?r:null}catch(e){return null}}var Br={stack:"dbcore",level:-1,create:function e(n){return{table:function e(t){var e=n.table(t);return r(r({},e),{getMany:function n(t){if(!t.cache){return e.getMany(t)}var r=qr(t.keys,t.trans["_cache"],t.cache==="clone");if(r){return Re.resolve(r)}return e.getMany(t).then((function(e){t.trans["_cache"]={keys:t.keys,values:t.cache==="clone"?B(e):e};return e}))},mutate:function n(t){if(t.type!=="add")t.trans["_cache"]=null;return e.mutate(t)}})}}}};function Tr(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function Rr(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":return false;case"getMany":return false;case"count":return false;case"openCursor":return false}}var Mr={stack:"dbcore",level:0,name:"Observability",create:function e(n){var t=n.schema.name;var i=new sr(n.MIN_KEY,n.MAX_KEY);return r(r({},n),{transaction:function e(t,r,i){if(De.subscr&&r!=="readonly"){throw new ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier))}return n.transaction(t,r,i)},table:function e(a){var e=n.table(a);var s=e.schema;var c=s.primaryKey,f=s.indexes;var l=c.extractKey,h=c.outbound;var d=c.autoIncrement&&f.filter((function(e){return e.compound&&e.keyPath.includes(c.keyPath)}));var v=r(r({},e),{mutate:function r(o){var f,l;var h=o.trans;var v=o.mutatedParts||(o.mutatedParts={});var p=function e(n){var r="idb://".concat(t,"/").concat(a,"/").concat(n);return v[r]||(v[r]=new sr)};var y=p("");var m=p(":dels");var b=o.type;var g=o.type==="deleteRange"?[o.range]:o.type==="delete"?[o.keys]:o.values.length<50?[Cr(c,o).filter((function(e){return e})),o.values]:[],w=g[0],_=g[1];var x=o.trans["_cache"];if(u(w)){y.addKeys(w);var k=b==="delete"||w.length===_.length?qr(w,x):null;if(!k){m.addKeys(w)}if(k||_){Nr(p,s,k,_)}}else if(w){var O={from:(f=w.lower)!==null&&f!==void 0?f:n.MIN_KEY,to:(l=w.upper)!==null&&l!==void 0?l:n.MAX_KEY};m.add(O);y.add(O)}else{y.add(i);m.add(i);s.indexes.forEach((function(e){return p(e.name).add(i)}))}return e.mutate(o).then((function(e){if(w&&(o.type==="add"||o.type==="put")){y.addKeys(e.results);if(d){d.forEach((function(n){var t=o.values.map((function(e){return n.extractKey(e)}));var r=n.keyPath.findIndex((function(e){return e===c.keyPath}));e.results.forEach((function(e){return t[r]=e}));p(n.name).addKeys(t)}))}}h.mutatedParts=pr(h.mutatedParts||{},v);return e}))}});var p=function e(t){var r,i;var a=t.query,o=a.index,u=a.range;return[o,new sr((r=u.lower)!==null&&r!==void 0?r:n.MIN_KEY,(i=u.upper)!==null&&i!==void 0?i:n.MAX_KEY)]};var y={get:function e(n){return[c,new sr(n.key)]},getMany:function e(n){return[c,(new sr).addKeys(n.keys)]},count:p,query:p,openCursor:p};o(y).forEach((function(n){v[n]=function(o){var u=De.subscr;var s=!!u;var c=Tr(De,e)&&Rr(n,o);var f=c?o.obsSet={}:u;if(s){var d=function e(n){var r="idb://".concat(t,"/").concat(a,"/").concat(n);return f[r]||(f[r]=new sr)};var v=d("");var p=d(":dels");var m=y[n](o),b=m[0],g=m[1];if(n==="query"&&b.isPrimaryKey&&!o.values){p.add(g)}else{d(b.name||"").add(g)}if(!b.isPrimaryKey){if(n==="count"){p.add(i)}else{var w=n==="query"&&h&&o.values&&e.query(r(r({},o),{values:false}));return e[n].apply(this,arguments).then((function(e){if(n==="query"){if(h&&o.values){return w.then((function(n){var t=n.result;v.addKeys(t);return e}))}var t=o.values?e.result.map(l):e.result;if(o.values){v.addKeys(t)}else{p.addKeys(t)}}else if(n==="openCursor"){var r=e;var i=o.values;return r&&Object.create(r,{key:{get:function e(){p.addKey(r.primaryKey);return r.key}},primaryKey:{get:function e(){var n=r.primaryKey;p.addKey(n);return n}},value:{get:function e(){i&&v.addKey(r.primaryKey);return r.value}}})}return e}))}}}return e[n].apply(this,arguments)}}));return v}})}};function Nr(e,n,t,r){function i(n){var i=e(n.name||"");function a(e){return e!=null?n.extractKey(e):null}var o=function e(t){return n.multiEntry&&u(t)?t.forEach((function(e){return i.addKey(e)})):i.addKey(t)};(t||r).forEach((function(e,n){var i=t&&a(t[n]);var u=r&&a(r[n]);if(Dn(i,u)!==0){if(i!=null)o(i);if(u!=null)o(u)}}))}n.indexes.forEach(i)}function Fr(e,n,t){if(t.numFailures===0)return n;if(n.type==="deleteRange"){return null}var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(t.numFailures===i){return null}var a=r({},n);if(u(a.keys)){a.keys=a.keys.filter((function(e,n){return!(n in t.failures)}))}if("values"in a&&u(a.values)){a.values=a.values.filter((function(e,n){return!(n in t.failures)}))}return a}function Lr(e,n){return n.lower===undefined?true:n.lowerOpen?Dn(e,n.lower)>0:Dn(e,n.lower)>=0}function Ur(e,n){return n.upper===undefined?true:n.upperOpen?Dn(e,n.upper)<0:Dn(e,n.upper)<=0}function Vr(e,n){return Lr(e,n)&&Ur(e,n)}function Hr(e,n,t,r,i,a){if(!t||t.length===0)return e;var o=n.query.index;var s=o.multiEntry;var c=n.query.range;var f=r.schema.primaryKey;var l=f.extractKey;var h=o.extractKey;var d=(o.lowLevelIndex||o).extractKey;var v=t.reduce((function(e,t){var r=e;var i=[];if(t.type==="add"||t.type==="put"){var a=new sr;for(var o=t.values.length-1;o>=0;--o){var f=t.values[o];var d=l(f);if(a.hasKey(d))continue;var v=h(f);if(s&&u(v)?v.some((function(e){return Vr(e,c)})):Vr(v,c)){a.addKey(d);i.push(f)}}}switch(t.type){case"add":{var p=(new sr).addKeys(n.values?e.map((function(e){return l(e)})):e);r=e.concat(n.values?i.filter((function(e){var n=l(e);if(p.hasKey(n))return false;p.addKey(n);return true})):i.map((function(e){return l(e)})).filter((function(e){if(p.hasKey(e))return false;p.addKey(e);return true})));break}case"put":{var y=(new sr).addKeys(t.values.map((function(e){return l(e)})));r=e.filter((function(e){return!y.hasKey(n.values?l(e):e)})).concat(n.values?i:i.map((function(e){return l(e)})));break}case"delete":var m=(new sr).addKeys(t.keys);r=e.filter((function(e){return!m.hasKey(n.values?l(e):e)}));break;case"deleteRange":var b=t.range;r=e.filter((function(e){return!Vr(l(e),b)}));break}return r}),e);if(v===e)return e;v.sort((function(e,n){return Dn(d(e),d(n))||Dn(l(e),l(n))}));if(n.limit&&n.limit<Infinity){if(v.length>n.limit){v.length=n.limit}else if(e.length===n.limit&&v.length<n.limit){i.dirty=true}}return a?Object.freeze(v):v}function zr(e,n){return Dn(e.lower,n.lower)===0&&Dn(e.upper,n.upper)===0&&!!e.lowerOpen===!!n.lowerOpen&&!!e.upperOpen===!!n.upperOpen}function Wr(e,n,t,r){if(e===undefined)return n!==undefined?-1:0;if(n===undefined)return 1;var i=Dn(e,n);if(i===0){if(t&&r)return 0;if(t)return 1;if(r)return-1}return i}function Yr(e,n,t,r){if(e===undefined)return n!==undefined?1:0;if(n===undefined)return-1;var i=Dn(e,n);if(i===0){if(t&&r)return 0;if(t)return-1;if(r)return 1}return i}function Xr(e,n){return Wr(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&Yr(e.upper,n.upper,e.upperOpen,n.upperOpen)>=0}function $r(e,n,t,r){var i=mr["idb://".concat(e,"/").concat(n)];if(!i)return[];var a=i.queries[t];if(!a)return[null,false,i,null];var o=r.query?r.query.index.name:null;var u=a[o||""];if(!u)return[null,false,i,null];switch(t){case"query":var s=u.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&zr(e.req.query.range,r.query.range)}));if(s)return[s,true,i,u];var c=u.find((function(e){var n="limit"in e.req?e.req.limit:Infinity;return n>=r.limit&&(r.values?e.req.values:true)&&Xr(e.req.query.range,r.query.range)}));return[c,false,i,u];case"count":var f=u.find((function(e){return zr(e.req.query.range,r.query.range)}));return[f,!!f,i,u]}}function Qr(e,n,t,r){e.subscribers.add(t);r.addEventListener("abort",(function(){e.subscribers["delete"](t);if(e.subscribers.size===0){Gr(e,n)}}))}function Gr(e,n){setTimeout((function(){if(e.subscribers.size===0){L(n,e)}}),3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function e(n){var t=n.schema.name;var i=r(r({},n),{transaction:function e(r,i,a){var o=n.transaction(r,i,a);if(i==="readwrite"){var u=new AbortController;var s=u.signal;var c=function e(a){return function(){u.abort();if(i==="readwrite"){var e=new Set;for(var s=0,c=r;s<c.length;s++){var f=c[s];var l=mr["idb://".concat(t,"/").concat(f)];if(l){var h=n.table(f);var d=l.optimisticOps.filter((function(e){return e.trans===o}));if(o._explicit&&a&&o.mutatedParts){for(var v=0,p=Object.values(l.queries.query);v<p.length;v++){var y=p[v];for(var m=0,b=y.slice();m<b.length;m++){var g=b[m];if(yr(g.obsSet,o.mutatedParts)){L(y,g);g.subscribers.forEach((function(n){return e.add(n)}))}}}}else if(d.length>0){l.optimisticOps=l.optimisticOps.filter((function(e){return e.trans!==o}));for(var w=0,_=Object.values(l.queries.query);w<_.length;w++){var y=_[w];for(var x=0,k=y.slice();x<k.length;x++){var g=k[x];if(g.res!=null&&o.mutatedParts){if(a&&!g.dirty){var O=Object.isFrozen(g.res);var P=Hr(g.res,g.req,d,h,g,O);if(g.dirty){L(y,g);g.subscribers.forEach((function(n){return e.add(n)}))}else if(P!==g.res){g.res=P;g.promise=Re.resolve({result:P})}}else{if(g.dirty){L(y,g)}g.subscribers.forEach((function(n){return e.add(n)}))}}}}}}}e.forEach((function(e){return e()}))}}};o.addEventListener("abort",c(false),{signal:s});o.addEventListener("error",c(false),{signal:s});o.addEventListener("complete",c(true),{signal:s})}return o},table:function e(i){var a=n.table(i);var o=a.schema.primaryKey;var u=r(r({},a),{mutate:function e(n){var u=De.trans;if(o.outbound||u.db._options.cache==="disabled"||u.explicit||u.idbtrans.mode!=="readwrite"){return a.mutate(n)}var s=mr["idb://".concat(t,"/").concat(i)];if(!s)return a.mutate(n);var c=a.mutate(n);if((n.type==="add"||n.type==="put")&&(n.values.length>=50||Cr(o,n).some((function(e){return e==null})))){c.then((function(e){var t=r(r({},n),{values:n.values.map((function(n,t){var i;if(e.failures[t])return n;var a=((i=o.keyPath)===null||i===void 0?void 0:i.includes("."))?B(n):r({},n);P(a,o.keyPath,e.results[t]);return a}))});var i=Fr(s,t,e);s.optimisticOps.push(i);queueMicrotask((function(){return n.mutatedParts&&wr(n.mutatedParts)}))}))}else{s.optimisticOps.push(n);n.mutatedParts&&wr(n.mutatedParts);c.then((function(e){if(e.numFailures>0){L(s.optimisticOps,n);var t=Fr(s,n,e);if(t){s.optimisticOps.push(t)}n.mutatedParts&&wr(n.mutatedParts)}}));c["catch"]((function(){L(s.optimisticOps,n);n.mutatedParts&&wr(n.mutatedParts)}))}return c},query:function e(n){var r;if(!Tr(De,a)||!Rr("query",n))return a.query(n);var o=((r=De.trans)===null||r===void 0?void 0:r.db._options.cache)==="immutable";var u=De,s=u.requery,c=u.signal;var f=$r(t,i,"query",n),l=f[0],h=f[1],d=f[2],v=f[3];if(l&&h){l.obsSet=n.obsSet}else{var p=a.query(n).then((function(e){var n=e.result;if(l)l.res=n;if(o){for(var t=0,r=n.length;t<r;++t){Object.freeze(n[t])}Object.freeze(n)}else{e.result=B(n)}return e}))["catch"]((function(e){if(v&&l)L(v,l);return Promise.reject(e)}));l={obsSet:n.obsSet,promise:p,subscribers:new Set,type:"query",req:n,dirty:false};if(v){v.push(l)}else{v=[l];if(!d){d=mr["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}}d.queries.query[n.query.index.name||""]=v}}Qr(l,v,s,c);return l.promise.then((function(e){return{result:Hr(e.result,n,d===null||d===void 0?void 0:d.optimisticOps,a,l,o)}}))}});return u}});return i}};function Zr(e,n){return new Proxy(e,{get:function e(t,r,i){if(r==="db")return n;return Reflect.get(t,r,i)}})}var ei=function(){function e(n,t){var i=this;this._middlewares={};this.verno=0;var a=e.dependencies;this._options=t=r({addons:e.addons,autoOpen:true,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t);this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var o=t.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var u={dbOpenError:null,isBeingOpened:false,onReadyBeingFired:null,openComplete:false,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:true,PR1398_maxLoop:3,autoOpen:t.autoOpen};u.dbReadyPromise=new Re((function(e){u.dbReadyResolve=e}));u.openCanceller=new Re((function(e,n){u.cancelOpen=n}));this._state=u;this.name=n;this.on=Nn(this,"populate","blocked","versionchange","close",{ready:[de,ae]});this.on.ready.subscribe=w(this.on.ready.subscribe,(function(n){return function(t,r){e.vip((function(){var e=i._state;if(e.openComplete){if(!e.dbOpenError)Re.resolve().then(t);if(r)n(t)}else if(e.onReadyBeingFired){e.onReadyBeingFired.push(t);if(r)n(t)}else{n(t);var a=i;if(!r)n((function e(){a.on.ready.unsubscribe(t);a.on.ready.unsubscribe(e)}))}}))}}));this.Collection=et(this);this.Table=Ln(this);this.Transaction=gt(this);this.Version=Jt(this);this.WhereClause=ht(this);this.on("versionchange",(function(e){if(e.newVersion>0)console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade."));else console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request."));i.close({disableAutoOpen:false})}));this.on("blocked",(function(e){if(!e.newVersion||e.newVersion<e.oldVersion)console.warn("Dexie.delete('".concat(i.name,"') was blocked"));else console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}));this._maxKey=Ot(t.IDBKeyRange);this._createTransaction=function(e,n,t,r){return new i.Transaction(e,n,t,i._options.chromeTransactionDurability,r)};this._fireOnBlocked=function(e){i.on("blocked").fire(e);Pn.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(n){return n.on("versionchange").fire(e)}))};this.use(Br);this.use(Jr);this.use(Mr);this.use(jr);this.use(Ir);var s=new Proxy(this,{get:function e(n,t,r){if(t==="_vip")return true;if(t==="table")return function(e){return Zr(i.table(e),s)};var a=Reflect.get(n,t,r);if(a instanceof Mn)return Zr(a,s);if(t==="tables")return a.map((function(e){return Zr(e,s)}));if(t==="_createTransaction")return function(){var e=a.apply(this,arguments);return Zr(e,s)};return a}});this.vip=s;o.forEach((function(e){return e(i)}))}e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ne.Type("Given version is not a positive number");e=Math.round(e*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions;var t=n.filter((function(n){return n._cfg.version===e}))[0];if(t)return t;t=new this.Version(e);n.push(t);n.sort(Tt);t.stores({});this._state.autoSchema=false;return t};e.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?e():new Re((function(e,t){if(n._state.openComplete){return t(new ne.DatabaseClosed(n._state.dbOpenError))}if(!n._state.isBeingOpened){if(!n._state.autoOpen){t(new ne.DatabaseClosed);return}n.open()["catch"](ae)}n._state.dbReadyPromise.then(e,t)})).then(e)};e.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,i=e.name;if(i)this.unuse({stack:n,name:i});var a=this._middlewares[n]||(this._middlewares[n]=[]);a.push({stack:n,create:t,level:r==null?10:r,name:i});a.sort((function(e,n){return e.level-n.level}));return this};e.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;if(n&&this._middlewares[n]){this._middlewares[n]=this._middlewares[n].filter((function(e){return r?e.create!==r:t?e.name!==t:false}))}return this};e.prototype.open=function(){var e=this;return pn(Ie,(function(){return kr(e)}))};e.prototype._close=function(){var e=this._state;var n=Pn.indexOf(this);if(n>=0)Pn.splice(n,1);if(this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}if(!e.isBeingOpened){e.dbReadyPromise=new Re((function(n){e.dbReadyResolve=n}));e.openCanceller=new Re((function(n,t){e.cancelOpen=t}))}};e.prototype.close=function(e){var n=e===void 0?{disableAutoOpen:true}:e,t=n.disableAutoOpen;var r=this._state;if(t){if(r.isBeingOpened){r.cancelOpen(new ne.DatabaseClosed)}this._close();r.autoOpen=false;r.dbOpenError=new ne.DatabaseClosed}else{this._close();r.autoOpen=this._options.autoOpen||r.isBeingOpened;r.openComplete=false;r.dbOpenError=null}};e.prototype["delete"]=function(e){var n=this;if(e===void 0){e={disableAutoOpen:true}}var t=arguments.length>0&&babelHelpers["typeof"](arguments[0])!=="object";var r=this._state;return new Re((function(i,a){var o=function t(){n.close(e);var r=n._deps.indexedDB.deleteDatabase(n.name);r.onsuccess=Ze((function(){rr(n._deps,n.name);i()}));r.onerror=dt(a);r.onblocked=n._fireOnBlocked};if(t)throw new ne.InvalidArgument("Invalid closeOptions argument to db.delete()");if(r.isBeingOpened){r.dbReadyPromise.then(o)}else{o()}}))};e.prototype.backendDB=function(){return this.idbdb};e.prototype.isOpen=function(){return this.idbdb!==null};e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"};e.prototype.hasFailed=function(){return this._state.dbOpenError!==null};e.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(e.prototype,"tables",{get:function e(){var n=this;return o(this._allTables).map((function(e){return n._allTables[e]}))},enumerable:false,configurable:true});e.prototype.transaction=function(){var e=Pr.apply(this,arguments);return this._transaction.apply(this,e)};e.prototype._transaction=function(e,n,t){var r=this;var i=De.trans;if(!i||i.db!==this||e.indexOf("!")!==-1)i=null;var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var o,u;try{u=n.map((function(e){var n=e instanceof r.Table?e.name:e;if(typeof n!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n}));if(e=="r"||e===En)o=En;else if(e=="rw"||e==Sn)o=Sn;else throw new ne.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===En&&o===Sn){if(a){i=null}else throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(i){u.forEach((function(e){if(i&&i.storeNames.indexOf(e)===-1){if(a){i=null}else throw new ne.SubTransaction("Table "+e+" not included in parent transaction.")}}))}if(a&&i&&!i.active){i=null}}}catch(e){return i?i._promise(null,(function(n,t){t(e)})):bn(e)}var s=Kr.bind(null,this,o,u,i,t);return i?i._promise(o,s,"lock"):De.trans?pn(De.transless,(function(){return r._whenReady(s)})):this._whenReady(s)};e.prototype.table=function(e){if(!l(this._allTables,e)){throw new ne.InvalidTable("Table ".concat(e," does not exist"))}return this._allTables[e]};return e}();var ni=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable";var ti=function(){function e(e){this._subscribe=e}e.prototype.subscribe=function(e,n,t){return this._subscribe(!e||typeof e==="function"?{next:e,error:n,complete:t}:e)};e.prototype[ni]=function(){return this};return e}();var ri;try{ri={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(e){ri={indexedDB:null,IDBKeyRange:null}}function ii(e){var n=false;var t;var r=new ti((function(r){var i=H(e);function a(n){var t=We();try{if(i){sn()}var r=un(e,n);if(i){r=r["finally"](cn)}return r}finally{t&&Ye()}}var o=false;var u;var s={};var c={};var f={get closed(){return o},unsubscribe:function e(){if(o)return;o=true;if(u)u.abort();if(l)mt.storagemutated.unsubscribe(v)}};r.start&&r.start(f);var l=false;var h=function e(){return mn(p)};function d(){return yr(c,s)}var v=function e(n){pr(s,n);if(d()){h()}};var p=function i(){if(o||!ri.indexedDB){return}s={};var f={};if(u)u.abort();u=new AbortController;var d={subscr:f,signal:u.signal,requery:h,querier:e,trans:null};var p=a(d);Promise.resolve(p).then((function(e){n=true;t=e;if(o||d.signal.aborted){return}s={};c=f;if(!D(c)&&!l){mt(pt,v);l=true}mn((function(){return!o&&r.next&&r.next(e)}))}),(function(e){n=false;if(!["DatabaseClosedError","AbortError"].includes(e===null||e===void 0?void 0:e.name)){if(!o)mn((function(){if(o)return;r.error&&r.error(e)}))}}))};setTimeout(h,0);return f}));r.hasValue=function(){return n};r.getValue=function(){return t};return r}var ai=ei;h(ai,r(r({},ie),{delete:function e(n){var t=new ai(n,{addons:[]});return t["delete"]()},exists:function e(n){return new ai(n,{addons:[]}).open().then((function(e){e.close();return true}))["catch"]("NoSuchDatabaseError",(function(){return false}))},getDatabaseNames:function e(n){try{return nr(ai.dependencies).then(n)}catch(e){return bn(new ne.MissingAPI)}},defineClass:function e(){function n(e){s(this,e)}return n},ignoreTransaction:function e(n){return De.trans?pn(De.transless,n):n()},vip:ir,async:function e(n){return function(){try{var e=Or(n.apply(this,arguments));if(!e||typeof e.then!=="function")return Re.resolve(e);return e}catch(e){return bn(e)}}},spawn:function e(n,t,r){try{var i=Or(n.apply(r,t||[]));if(!i||typeof i.then!=="function")return Re.resolve(i);return i}catch(e){return bn(e)}},currentTransaction:{get:function e(){return De.trans||null}},waitFor:function e(n,t){var r=Re.resolve(typeof n==="function"?ai.ignoreTransaction(n):n).timeout(t||6e4);return De.trans?De.trans.waitFor(r):r},Promise:Re,debug:{get:function e(){return ve},set:function e(n){pe(n)}},derive:p,extend:s,props:h,override:w,Events:Nn,on:mt,liveQuery:ii,extendObservabilitySet:pr,getByKeyPath:O,setByKeyPath:P,delByKeyPath:K,shallowClone:E,deepClone:B,getObjectDiff:Ar,cmp:Dn,asap:x,minKey:xn,addons:[],connections:Pn,errnames:Z,dependencies:ri,cache:mr,semVer:wn,version:wn.split(".").map((function(e){return parseInt(e)})).reduce((function(e,n,t){return e+n/Math.pow(10,t*2)}))}));ai.maxKey=Ot(ai.dependencies.IDBKeyRange);if(typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"){mt(pt,(function(e){if(!ui){var n;n=new CustomEvent(yt,{detail:e});ui=true;dispatchEvent(n);ui=false}}));addEventListener(yt,(function(e){var n=e.detail;if(!ui){oi(n)}}))}function oi(e){var n=ui;try{ui=true;mt.storagemutated.fire(e);_r(e,true)}finally{ui=n}}var ui=false;var si;var ci=function e(){};if(typeof BroadcastChannel!=="undefined"){ci=function e(){si=new BroadcastChannel(yt);si.onmessage=function(e){return e.data&&oi(e.data)}};ci();if(typeof si.unref==="function"){si.unref()}mt(pt,(function(e){if(!ui){si.postMessage(e)}}))}if(typeof addEventListener!=="undefined"){addEventListener("pagehide",(function(e){if(!ei.disableBfCache&&e.persisted){if(ve)console.debug("Dexie: handling persisted pagehide");si===null||si===void 0?void 0:si.close();for(var n=0,t=Pn;n<t.length;n++){var r=t[n];r.close({disableAutoOpen:false})}}}));addEventListener("pageshow",(function(e){if(!ei.disableBfCache&&e.persisted){if(ve)console.debug("Dexie: handling persisted pageshow");ci();oi({all:new sr(-Infinity,[[]])})}}))}function fi(e){return new Gn({add:e})}function li(e){return new Gn({remove:e})}function hi(e,n){return new Gn({replacePrefix:[e,n]})}Re.rejectionMapper=re;pe(ve);window.BX.Dexie=ei;window.BX.Dexie3={Dexie:ei,liveQuery:ii,Entity:In,cmp:Dn,PropModSymbol:Qn,PropModification:Gn,replacePrefix:hi,add:fi,remove:li,RangeSet:sr,mergeRanges:fr,rangesOverlap:lr};e.Dexie=ei;e.liveQuery=ii;e.Entity=In;e.cmp=Dn;e.PropModSymbol=Qn;e.PropModification=Gn;e.replacePrefix=hi;e.add=fi;e.remove=li;e.RangeSet=sr;e.mergeRanges=fr;e.rangesOverlap=lr})(this.BX.DexieExport=this.BX.DexieExport||{});
//# sourceMappingURL=dexie.bundle.map.js