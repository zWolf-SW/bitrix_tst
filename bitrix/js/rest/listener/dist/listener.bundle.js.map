{"version":3,"file":"listener.bundle.js","sources":["../src/listener.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\nexport class Listener extends EventEmitter\n{\n\t#command: string;\n\t#handlerCommand: function;\n\t#listeningState: boolean = false;\n\n\tconstructor(command: string, handlerCommand: function)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Rest.Listener');\n\t\tthis.#command = command;\n\t\tthis.#handlerCommand = handlerCommand;\n\t}\n\n\tlisten(): void\n\t{\n\t\tif (this.#listeningState)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.PULL.subscribe({\n\t\t\ttype: BX.PullClient.SubscriptionType.Server,\n\t\t\tmoduleId: 'rest',\n\t\t\tcallback: (data) => {\n\t\t\t\tthis.#handleCommand(data);\n\t\t\t}\n\t\t});\n\t\tthis.#listeningState = true;\n\t}\n\n\t#handleCommand(data): void\n\t{\n\t\tif (data.command === this.#command)\n\t\t{\n\t\t\tthis.emit('pull');\n\t\t\tthis.#handlerCommand(data);\n\t\t}\n\t}\n}"],"names":["Listener","EventEmitter","constructor","command","handlerCommand","setEventNamespace","listen","BX","PULL","subscribe","type","PullClient","SubscriptionType","Server","moduleId","callback","data","emit"],"mappings":";;;;;CAAgD;CAAA;CAAA;CAAA;AAEhD,CAAO,MAAMA,QAAQ,SAASC,6BAAY,CAC1C;GAKCC,WAAW,CAACC,OAAe,EAAEC,cAAwB,EACrD;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAJkB;;KAK1B,IAAI,CAACC,iBAAiB,CAAC,kBAAkB,CAAC;KAC1C,4CAAI,wBAAYF,OAAO;KACvB,4CAAI,sCAAmBC,cAAc;;GAGtCE,MAAM,GACN;KACC,4CAAI,IAAI,qCACR;OACC;;KAGDC,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC;OACjBC,IAAI,EAAEH,EAAE,CAACI,UAAU,CAACC,gBAAgB,CAACC,MAAM;OAC3CC,QAAQ,EAAE,MAAM;OAChBC,QAAQ,EAAGC,IAAI,IAAK;SACnB,4CAAI,kCAAgBA,IAAI;;MAEzB,CAAC;KACF,4CAAI,sCAAmB,IAAI;;CAW7B;CAAC,yBAReA,IAAI,EACnB;GACC,IAAIA,IAAI,CAACb,OAAO,6CAAK,IAAI,qBAAS,EAClC;KACC,IAAI,CAACc,IAAI,CAAC,MAAM,CAAC;KACjB,4CAAI,oCAAiBD,IAAI;;CAE3B;;;;;;;;"}