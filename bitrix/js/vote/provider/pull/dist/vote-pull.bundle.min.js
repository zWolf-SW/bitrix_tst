this.BX=this.BX||{};this.BX.Vote=this.BX.Vote||{};(function(e){"use strict";var s=babelHelpers.classPrivateFieldLooseKey("store");var t=babelHelpers.classPrivateFieldLooseKey("updateQuestionTotalCounter");var o=babelHelpers.classPrivateFieldLooseKey("updateAnswer");class a{constructor(e){Object.defineProperty(this,o,{value:i});Object.defineProperty(this,t,{value:r});Object.defineProperty(this,s,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,s)[s]=e}getModuleId(){return"vote"}handleVoting(e){babelHelpers.classPrivateFieldLooseBase(this,t)[t](e);babelHelpers.classPrivateFieldLooseBase(this,o)[o](e)}handleUser_vote(e){this.updateCurrentUserVotes(e)}updateCurrentUserVotes(e){const{VOTE_ID:t,QUESTIONS:o,userAnswerMap:a}=e;if(Object.keys(a).length===0){babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/resetUserVoted",{voteId:t});Object.keys(o).forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/clearVotes",{questionId:e,voteId:t})}));return}Object.entries(a).forEach((([e,t])=>{const o=Object.keys(t).map(Number);babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/updateCurrentUserVotes",{questionId:e,answerIds:o})}));babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/setUserVoted",{voteId:t})}handleStop(e){babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/setVoteCompleted",{voteId:e.voteId})}}function r(e){const{QUESTIONS:t,COUNTER:o}=e;Object.keys(t).forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/updateQuestionTotalCounter",{questionId:e,totalCounter:o})}))}function i(e){const{QUESTIONS:t}=e;Object.values(t).forEach((e=>{Object.entries(e.ANSWERS).forEach((([e,t])=>{babelHelpers.classPrivateFieldLooseBase(this,s)[s].store.dispatch("vote/updateAnswer",{answerId:e,counter:t.COUNTER,percent:t.PERCENT})}))}))}e.VotePullHandler=a})(this.BX.Vote.Service=this.BX.Vote.Service||{});
//# sourceMappingURL=vote-pull.bundle.map.js