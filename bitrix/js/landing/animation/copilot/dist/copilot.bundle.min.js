this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(a,t,e,s,i,o,n,r){"use strict";var l=60;var d="5.9.6";var k=0;var c=70.628;var m=204;var h=203;var u="  Animation loader";var p=0;var g=[];var f=[{nm:"[FRAME]   Animation loader - Null / stars - Null / Vector - Null / Vector",fr:60,id:"m35r0z73r143b1j8",layers:[{ty:3,ddd:0,ind:10,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:11,hd:false,nm:"stars - Null",sr:1,parent:10,ks:{a:{a:0,k:[102,101.5]},o:{a:0,k:100},p:{a:0,k:[101.0001,101.4063]},r:{a:1,k:[{t:-16.727999999999998,s:[0],o:{x:[.5],y:[.25]},i:{x:[.15],y:[1]}},{t:0,s:[0],o:{x:[0],y:[0]},i:{x:[1],y:[1]}},{t:71.16,s:[360]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:12,hd:false,nm:"Vector - Null",sr:1,parent:11,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[165.7158,115.0313]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:4,ddd:0,ind:13,hd:false,nm:"Vector",sr:1,parent:12,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,ip:0,op:71.628,st:0,bm:0,shapes:[{ty:"gr",nm:"Group",hd:false,np:4,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[21.711,17.7266],[20.0032,19.4344],[18.2954,17.7266],[20.0032,16.0188],[21.711,17.7266],[21.711,17.7266]],i:[[0,0],[.9432,0],[0,.9432],[-.9432,0],[0,-.9432],[0,0]],o:[[0,.9431800000000017],[-.9431800000000017,0],[0,-.9431800000000017],[.9431800000000017,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[8.2246,16.7564],[9.1181,16.7569],[11.1261,11.2286],[11.4137,10.9461],[17.0367,8.9773],[17.0372,8.0985],[11.4164,6.1234],[11.1291,5.8406],[9.1273,.3101],[8.2338,.3096],[6.2258,5.8379],[5.9382,6.1204],[.3152,8.0892],[.3147,8.968],[5.9355,10.9431],[6.2228,11.2259],[8.2246,16.7564]],i:[[0,0],[-.15,.413],[0,0],[-.1341,.047],[0,0],[.4199,.1476],[0,0],[.0477,.1319],[0,0],[.15,-.413],[0,0],[.1341,-.047],[0,0],[-.4199,-.1476],[0,0],[-.0477,-.1319],[0,0]],o:[[.14954,.4131399999999985],[0,0],[.047890000000000654,-.13185000000000002],[0,0],[.4200499999999998,-.14706999999999937],[0,0],[-.13405999999999985,-.047109999999999985],[0,0],[-.14954,-.41314],[0,0],[-.047889999999999766,.13185000000000002],[0,0],[-.42005,.14706999999999937],[0,0],[.13405999999999985,.047109999999999985],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.9686274509803922,.9529411764705882,.9921568627450981,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]},{nm:"[FRAME]   Animation loader - Null / oval - Null / oval - Null / oval",fr:60,id:"m35r0z75fww0my2n",layers:[{ty:3,ddd:0,ind:14,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:15,hd:false,nm:"oval - Null",sr:1,parent:14,ks:{a:{a:0,k:[102,101.5]},o:{a:0,k:100},p:{a:0,k:[101.0001,101.4063]},r:{a:1,k:[{t:-16.727999999999998,s:[0],o:{x:[.5],y:[.25]},i:{x:[.15],y:[1]}},{t:0,s:[0],o:{x:[0],y:[0]},i:{x:[1],y:[1]}},{t:71.16,s:[360]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:16,hd:false,nm:"oval - Null",sr:1,parent:15,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[86.3242,4.293]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:4,ddd:0,ind:17,hd:false,nm:"oval",sr:1,parent:16,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,ip:0,op:71.628,st:0,bm:0,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[0,17.6186],[17.6186,0],[113.5303,95.9117],[109.5615,121.8772],[107.9487,126.3115],[105.7857,130.5003],[103.103,134.3794],[99.946,137.8856],[83.9896,141.0517],[74.4116,125.6778],[74.3986,121.9659],[74.6927,118.2672],[75.2902,114.6046],[76.1832,111.0008],[78.2931,95.9117],[17.6186,35.2372],[0,17.6186],[0,17.6186],[0,17.6186]],i:[[0,0],[-9.7305,0],[0,-52.9705],[.4658,-1.5912],[.6632,-1.5181],[.8533,-1.4202],[1.0293,-1.2996],[1.1873,-1.1574],[9.0499,3.5752],[.0584,1.304],[-.0497,1.3043],[-.1582,1.2957],[-.2627,1.2778],[-.3675,1.251],[0,7.8996],[33.5096,0],[0,9.7305],[0,0],[0,0]],o:[[0,-9.7305],[52.9705,0],[0,12.403899999999993],[-.46580000000000155,1.5912000000000006],[-.6632000000000033,1.518100000000004],[-.8533000000000044,1.4201999999999941],[-1.0293000000000063,1.299599999999998],[-1.1872999999999934,1.1573999999999955],[-9.049899999999994,-3.5751999999999953],[-.058400000000006,-1.304000000000002],[.04970000000000141,-1.3042999999999978],[.15819999999999368,-1.2956999999999965],[.26269999999999527,-1.2777999999999992],[.3675000000000068,-1.2510000000000048],[0,-33.5096],[-9.7305,0],[0,0],[0,0],[0,0]]}}},{ty:"gf",o:{a:0,k:100},g:{p:2,k:{a:0,k:[0,1,1,1,1,.5568627450980392,.3215686274509804,.9254901960784314,0,.5,1,.95]}},s:{a:0,k:[14.175785362048863,20.300787185678207]},e:{a:0,k:[81.67580974197007,132.8008054672568]},t:1,nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]},{nm:"[FRAME]   Animation loader - Null / stars / oval",fr:60,id:"m35r0z73nx81mtnw",layers:[{ty:3,ddd:0,ind:18,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ddd:0,ind:19,ty:0,nm:"stars",refId:"m35r0z73r143b1j8",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0},{ddd:0,ind:20,ty:0,nm:"oval",refId:"m35r0z75fww0my2n",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0}]}];var y=[{ddd:0,ind:1,ty:0,nm:"  Animation loader",refId:"m35r0z73nx81mtnw",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0}];var v={a:"",d:"",tc:"",g:"Aninix"};var b={fr:l,v:d,ip:k,op:c,w:m,h:h,nm:u,ddd:p,markers:g,assets:f,layers:y,meta:v};var I=60;var w="5.9.6";var D=0;var B=70.628;var C=204;var A=203;var N="  Animation loader";var T=0;var x=[];var E=[{nm:"[FRAME]   Animation loader - Null / stars - Null / Vector - Null / Vector",fr:60,id:"m35r0z73r143b1j8",layers:[{ty:3,ddd:0,ind:10,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:11,hd:false,nm:"stars - Null",sr:1,parent:10,ks:{a:{a:0,k:[102,101.5]},o:{a:0,k:100},p:{a:0,k:[101.0001,101.4063]},r:{a:1,k:[{t:-16.727999999999998,s:[0],o:{x:[.5],y:[.25]},i:{x:[.15],y:[1]}},{t:0,s:[0],o:{x:[0],y:[0]},i:{x:[1],y:[1]}},{t:71.16,s:[360]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:12,hd:false,nm:"Vector - Null",sr:1,parent:11,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[165.7158,115.0313]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:4,ddd:0,ind:13,hd:false,nm:"Vector",sr:1,parent:12,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,ip:0,op:71.628,st:0,bm:0,shapes:[{ty:"gr",nm:"Group",hd:false,np:4,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[21.711,17.7266],[20.0032,19.4344],[18.2954,17.7266],[20.0032,16.0188],[21.711,17.7266],[21.711,17.7266]],i:[[0,0],[.9432,0],[0,.9432],[-.9432,0],[0,-.9432],[0,0]],o:[[0,.9431800000000017],[-.9431800000000017,0],[0,-.9431800000000017],[.9431800000000017,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[8.2246,16.7564],[9.1181,16.7569],[11.1261,11.2286],[11.4137,10.9461],[17.0367,8.9773],[17.0372,8.0985],[11.4164,6.1234],[11.1291,5.8406],[9.1273,.3101],[8.2338,.3096],[6.2258,5.8379],[5.9382,6.1204],[.3152,8.0892],[.3147,8.968],[5.9355,10.9431],[6.2228,11.2259],[8.2246,16.7564]],i:[[0,0],[-.15,.413],[0,0],[-.1341,.047],[0,0],[.4199,.1476],[0,0],[.0477,.1319],[0,0],[.15,-.413],[0,0],[.1341,-.047],[0,0],[-.4199,-.1476],[0,0],[-.0477,-.1319],[0,0]],o:[[.14954,.4131399999999985],[0,0],[.047890000000000654,-.13185000000000002],[0,0],[.4200499999999998,-.14706999999999937],[0,0],[-.13405999999999985,-.047109999999999985],[0,0],[-.14954,-.41314],[0,0],[-.047889999999999766,.13185000000000002],[0,0],[-.42005,.14706999999999937],[0,0],[.13405999999999985,.047109999999999985],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.9686274509803922,.9529411764705882,.9921568627450981,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]},{nm:"[FRAME]   Animation loader - Null / oval - Null / oval - Null / oval",fr:60,id:"m35r0z75fww0my2n",layers:[{ty:3,ddd:0,ind:14,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:15,hd:false,nm:"oval - Null",sr:1,parent:14,ks:{a:{a:0,k:[102,101.5]},o:{a:0,k:100},p:{a:0,k:[101.0001,101.4063]},r:{a:1,k:[{t:-16.727999999999998,s:[0],o:{x:[.5],y:[.25]},i:{x:[.15],y:[1]}},{t:0,s:[0],o:{x:[0],y:[0]},i:{x:[1],y:[1]}},{t:71.16,s:[360]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:3,ddd:0,ind:16,hd:false,nm:"oval - Null",sr:1,parent:15,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[86.3242,4.293]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ty:4,ddd:0,ind:17,hd:false,nm:"oval",sr:1,parent:16,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,ip:0,op:71.628,st:0,bm:0,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[0,17.6186],[17.6186,0],[113.5303,95.9117],[109.5615,121.8772],[107.9487,126.3115],[105.7857,130.5003],[103.103,134.3794],[99.946,137.8856],[83.9896,141.0517],[74.4116,125.6778],[74.3986,121.9659],[74.6927,118.2672],[75.2902,114.6046],[76.1832,111.0008],[78.2931,95.9117],[17.6186,35.2372],[0,17.6186],[0,17.6186],[0,17.6186]],i:[[0,0],[-9.7305,0],[0,-52.9705],[.4658,-1.5912],[.6632,-1.5181],[.8533,-1.4202],[1.0293,-1.2996],[1.1873,-1.1574],[9.0499,3.5752],[.0584,1.304],[-.0497,1.3043],[-.1582,1.2957],[-.2627,1.2778],[-.3675,1.251],[0,7.8996],[33.5096,0],[0,9.7305],[0,0],[0,0]],o:[[0,-9.7305],[52.9705,0],[0,12.403899999999993],[-.46580000000000155,1.5912000000000006],[-.6632000000000033,1.518100000000004],[-.8533000000000044,1.4201999999999941],[-1.0293000000000063,1.299599999999998],[-1.1872999999999934,1.1573999999999955],[-9.049899999999994,-3.5751999999999953],[-.058400000000006,-1.304000000000002],[.04970000000000141,-1.3042999999999978],[.15819999999999368,-1.2956999999999965],[.26269999999999527,-1.2777999999999992],[.3675000000000068,-1.2510000000000048],[0,-33.5096],[-9.7305,0],[0,0],[0,0],[0,0]]}}},{ty:"gf",o:{a:0,k:100},g:{p:2,k:{a:0,k:[0,1,1,1,1,.5568627450980392,.3215686274509804,.9254901960784314,0,.5,1,.95]}},s:{a:0,k:[14.175785362048863,20.300787185678207]},e:{a:0,k:[81.67580974197007,132.8008054672568]},t:1,nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]},{nm:"[FRAME]   Animation loader - Null / stars / oval",fr:60,id:"m35r0z73nx81mtnw",layers:[{ty:3,ddd:0,ind:18,hd:false,nm:"  Animation loader - Null",sr:1,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},ao:0,ip:0,op:71.628,st:0,bm:0},{ddd:0,ind:19,ty:0,nm:"stars",refId:"m35r0z73r143b1j8",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0},{ddd:0,ind:20,ty:0,nm:"oval",refId:"m35r0z75fww0my2n",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0}]}];var L=[{ddd:0,ind:1,ty:0,nm:"  Animation loader",refId:"m35r0z73nx81mtnw",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:204,h:203,ip:0,op:71.628,st:0,hd:false,bm:0}];var S={a:"",d:"",tc:"",g:"Aninix"};var P={fr:I,v:w,ip:D,op:B,w:C,h:A,nm:N,ddd:T,markers:x,assets:E,layers:L,meta:S};let O=a=>a,_,W;class R{constructor(){this.container=null}getContainer(){if(!this.container){const a=n.Tag.render(_||(_=O`<div class="landing-ui-ai-loader__animate"></div>`));o.Lottie.loadAnimation({container:a,renderer:"svg",loop:true,autoplay:true,animationData:P});this.container=n.Tag.render(W||(W=O`
				<div class="landing-ui-ai-loader">
					<div class="landing-ui-ai-loader__animate">${0}</div>
					<div class="landing-ui-ai-loader__text">${0}</div>
				</div>
			`),a,n.Loc.getMessage("LANDING_SITE_GENERATE"))}return this.container}open(){n.Dom.append(this.getContainer(),document.body)}close(){n.Event.bind(this.getContainer(),"transitionend",(()=>{this.container=null;n.Dom.remove(this.getContainer())}));n.Dom.addClass(this.getContainer(),"--close")}}function $(a){return new Promise(((t,e)=>{const s=new Image;n.bind(s,"load",t);n.bind(s,"error",e);s.src=a}))}let j=a=>a,F,V,X;const z=300;const G=500;class M extends i.EventEmitter{constructor(){super();this.generationId=null;this.setEventNamespace("BX.Landing.Animation.Copilot");this.editorWindow=e.PageObject.getEditorWindow();this.blocksData=[];this.aiLoader=new R({});this.mainDocumentBody=window.parent.document.body;this.subscribeToPullEvents()}setBlocksData(a){this.blocksData=a;return this}setGenerationId(a){this.generationId=a;return this}getAiLoader(){return this.aiLoader}init(){this.disableEditor();if(!this.editorWindow){return}this.completedBlockIds=new Set;const a=e.PageObject.getBlocks();this.blocksData=this.blocksData.map((t=>{const e=a.get(t.id);const i={...t,element:e.content,anchor:e.anchor};s.Skeleton.initOnBlock(i.anchor,i.element);return i}));this.replaceAllImagesToDefaultImage();this.emit("init",{blocksData:this.blocksData});this.getAiLoader().open()}subscribeToPullEvents(){t.PULL.subscribe({type:t.PullClient.SubscriptionType.Server,moduleId:"landing",callback:a=>{if(a.params.generationId!==undefined&&this.generationId!==null&&a.params.generationId!==this.generationId){return}const t=a.command;if(t==="LandingCopilotGeneration:onCopilotImageCreate"){this.onImageCreate(a)}if(t==="LandingCopilotGeneration:onChangeBlockFinish"){const t=JSON.parse(a.params.params.blockData);this.animateBlock(t)}}})}onImageCreate(a){const t=parseInt(a.params.params.blockId,10);const s=a.params.params.selector;const i=a.params.params.position;const o=a.params.params.value;const r=this.blocksData.find((a=>a.id===t));if(r){r.images.forEach((a=>{if(a.nodeCode===s&&a.position===i){const{src:t="",src2x:e="",id:s="",id2x:i=""}=n.Type.isString(o)?{src:o,src2x:o,id:"",id2x:""}:o;Object.assign(a,{src:t,src2x:e,id:s,id2x:i,isSwitchedToDefault:true})}}))}if(this.completedBlockIds.has(t)){const a=e.PageObject.getBlocks().get(t);if(a){this.replaceAllDefaultImagesWithImageWithoutAnimation(a,r)}}}async start(){for(const a of this.blocksData){await this.scrollToBlock(a.element);await this.replaceDefaultImagesOnce(a.id);await s.Skeleton.removeSkeletonFromBlock(a.anchor);await this.replaceDefaultImagesRecursive(a.id);this.completedBlockIds.add(a.id);await this.delay(z)}}async stop(){var a;if((a=this.blocksData[0])!=null&&a.element){await this.scrollToBlock(this.blocksData[0].element)}this.getAiLoader().close()}scrollToBlock(a){return new Promise((t=>{const e=a.ownerDocument.defaultView;if(!e){t();return}let s=null;const i=()=>{if(s){clearTimeout(s)}s=setTimeout((()=>{n.Event.unbind(e,"scroll",i);t()}),300)};n.Event.bind(e,"scroll",i);if(a.getBoundingClientRect().top===0&&e.scrollY===0||a.getBoundingClientRect().top<5){t()}e.scroll({top:a.getBoundingClientRect().top+e.scrollY,behavior:"smooth"})}))}replaceAllImagesToDefaultImage(){this.blocksData.forEach((a=>{a.images.forEach((t=>{if(t&&t.src!==t.defaultSrc){const s=e.PageObject.getBlocks().get(a.id);if(s){this.setImageToNode(s,t,false)}Object.assign(t,{isSwitchedToDefault:true})}}))}))}setImageToNode(a,t,e=true){const s=`${t.nodeCode}@${t.position}`;a.forceInit();const i=a.nodes.getBySelector(s);if(!i){return}if(!this.setImageToStyle(i,t,e)){i.setValue(this.getImageValueObject(t,e),true)}}setImageToStyle(a,t,e=true){const s=a.node.style;const i=e?t.src:t.defaultSrc;const o=e?t.src:t.defaultSrc;if(s.getPropertyValue("--bg-url")&&i){s.setProperty("--bg-url",`url("${i}")`);if(s.getPropertyValue("--bg-url-2x")&&o){s.setProperty("--bg-url-2x",`url("${o}")`)}return true}return false}getImageValueObject(a,t=true){var e,s;if(t){var i,o;return{src:(i=a.src)!=null?i:"",src2x:(o=a.src2x)!=null?o:""}}return{src:(e=a.defaultSrc)!=null?e:"",src2x:(s=a.defaultSrc)!=null?s:""}}async processBlockImages(a){if(this.completedBlockIds.has(a)){return true}let t=true;const s=this.blocksData.find((t=>t.id===a));const i=e.PageObject.getBlocks().get(a);if(!i||!(s!=null&&s.images)){return true}i.forceInit();for(const a of s.images){if(!a||!a.src||!a.src2x){continue}const e=i.nodes.getBySelector(`${a.nodeCode}@${a.position}`);if(e&&a.isSwitchedToDefault===true&&!a.isSwitchedBackToOriginal){await this.replaceDefaultImageWithImage(a,e,i);a.isSwitchedBackToOriginal=true}if(a.src===a.defaultSrc){t=false}}return t}async replaceDefaultImagesOnce(a){await this.processBlockImages(a)}async replaceDefaultImagesRecursive(a,t=0,e=5){const s=await this.processBlockImages(a);const i=t<e;if(!s&&i){await this.delay(G*2);return this.replaceDefaultImagesRecursive(a,t+1,e)}}replaceAllDefaultImagesWithImageWithoutAnimation(a,t){a.forceInit();if(t.images){for(const e of t.images){if(e){const t=a.nodes.getBySelector(`${e.nodeCode}@${e.position}`);if(t&&e.isSwitchedToDefault===true&&!e.isSwitchedBackToOriginal){this.replaceDefaultImageWithImageWithoutAnimation(e,t,a);e.isSwitchedBackToOriginal=true}}}}}async replaceDefaultImageWithImage(a,t,e){await $(a.src);await $(a.src2x);n.Dom.addClass(t.node,"landing-animation-copilot-default-image");n.Dom.addClass(t.node,"fade-out");await this.delay(G);this.setImageToNode(e,a);n.Dom.removeClass(t.node,"fade-out");n.Dom.addClass(t.node,"fade-in");await this.delay(G);n.Dom.removeClass(t.node,"fade-in");n.Dom.removeClass(t.node,"landing-animation-copilot-default-image")}replaceDefaultImageWithImageWithoutAnimation(a,t,e){this.setImageToNode(e,a)}delay(a){return new Promise((t=>{setTimeout(t,a)}))}async showConfetti(){return new Promise((a=>{setTimeout((async()=>{r.Confetti.fire({particleCount:100,spread:70,origin:{y:.7},zIndex:99999});await this.delay(G*3);a()}),1e3)}))}showLoader(){if(!this.editorWindow){console.error("editorDocument is not defined");return}const a=this.editorWindow.document.querySelector(".landing-editor");if(!a){console.error("Element with class .landing-editor not found");return}this.loader=this.getStatusCreate();n.Dom.append(this.loader,a)}hideLoader(){if(this.loader){this.loader.remove();this.loader=null}}disableEditor(){n.Dom.addClass(this.mainDocumentBody,"landing-animating");const a=this.editorWindow.document.querySelector(".landing-editor");if(a){n.Dom.addClass(a,"landing-editor-disable")}return this}enableEditor(){n.Dom.removeClass(this.mainDocumentBody,"landing-animating");const a=this.editorWindow.document.querySelector(".landing-editor");if(a){n.Dom.removeClass(a,"landing-editor-disable")}return this}animateSite(){this.start().then((()=>{this.stop();return this.showConfetti()})).then((()=>{this.emit("onSiteFinish",{blocksData:this.blocksData});this.enableEditor()})).catch((()=>{}))}animateBlock(a){this.setBlocksData(a);const t=[];const s=e.PageObject.getBlocks();for(const a of this.blocksData){const e=s.get(a.id);if(e){t.push(e.reload())}}Promise.all(t).then((()=>{setTimeout((()=>{this.init();this.hideLoader();this.start().then((()=>{this.stop();return this.showConfetti()})).then((()=>{this.emit("onBlockFinish",{blocksData:this.blocksData});this.enableEditor()})).catch((()=>{}))}),G*6)})).catch((a=>{console.error(a)}))}getStatusCreate(){const a=n.Tag.render(F||(F=j`<div class="landing-site-copilot-status-image"></div>`));const t=n.Tag.render(V||(V=j`
			<div class="landing-site-copilot-content-text">
				${0}
			</div>
		`),n.Loc.getMessage("LANDING_BLOCK_COPILOT_CREATED_1"));o.Lottie.loadAnimation({container:a,renderer:"svg",loop:true,autoplay:true,animationData:b});let e=2;const s=6;this.interval=setInterval((()=>{if(e>s){e=1}let a=n.Loc.getMessage(`LANDING_BLOCK_COPILOT_CREATED_${e}`);if(!a){e=1;a=n.Loc.getMessage(`LANDING_BLOCK_COPILOT_CREATED_${e}`)}t.innerText=a;e++}),3e3);return n.Tag.render(X||(X=j`
			<div class="landing-site-copilot-status-wrapper">
				${0}
				${0}
			</div>
		`),a,t)}}a.Copilot=M})(this.BX.Landing.Animation=this.BX.Landing.Animation||{},BX,BX.Landing,BX.Landing.UI.Copilot,BX.Event,BX.UI,BX,BX.UI);
//# sourceMappingURL=copilot.bundle.map.js