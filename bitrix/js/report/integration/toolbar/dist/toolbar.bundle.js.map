{"version":3,"file":"toolbar.bundle.js","sources":["../src/toolbar.js"],"sourcesContent":["import { Type, Dom } from 'main.core';\n\ntype Params = {\n\ttoolbarId?: string\n};\n\n/**\n * @memberOf BX.Report.Integration\n */\nexport class Toolbar\n{\n\t#toolbar: ?BX.UI.Toolbar;\n\n\tconstructor(params: ?Params)\n\t{\n\t\tconst objectParams = Type.isPlainObject(params) ? params : {};\n\n\t\tif (Type.isStringFilled(objectParams.toolbarId))\n\t\t{\n\t\t\tthis.#toolbar = BX?.UI?.ToolbarManager?.get(objectParams.toolbarId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#toolbar = BX?.UI?.ToolbarManager?.getDefaultToolbar();\n\t\t}\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tif (!this.#toolbar)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFunction(this.#toolbar.setTitle))\n\t\t{\n\t\t\tthis.#toolbar.setTitle(title);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst pagetitle = this.#toolbar.titleContainer.querySelector('#pagetitle');\n\t\t\tif (pagetitle)\n\t\t\t{\n\t\t\t\tpagetitle.textContent = title;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetContainer(): ?HTMLElement\n\t{\n\t\tif (!this.#toolbar)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (Type.isFunction(this.#toolbar.getContainer))\n\t\t{\n\t\t\treturn this.#toolbar.getContainer();\n\t\t}\n\n\t\treturn this.#toolbar.toolbarContainer;\n\t}\n\n\tgetRightButtonsContainer(): ?HTMLElement\n\t{\n\t\tif (!this.#toolbar)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (Type.isFunction(this.#toolbar.getRightButtonsContainer))\n\t\t{\n\t\t\tthis.#toolbar.getRightButtonsContainer();\n\t\t}\n\n\t\treturn this.#toolbar.rightButtons;\n\t}\n\n\tcleanContent(): void\n\t{\n\t\tif (!this.#toolbar)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setTitle('');\n\t\tDom.clean(this.getRightButtonsContainer());\n\t}\n\n\tcreateSkeleton(): HTMLElement\n\t{\n\t\treturn Dom.create('img', {\n\t\t\tattrs: {\n\t\t\t\tsrc: '/bitrix/images/report/visualconstructor/preview/view-without-menu.svg',\n\t\t\t\theight: '1200px',\n\t\t\t\twidth: '100%',\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\t'margin-top': `-${this.getContainer()?.offsetHeight}px`,\n\t\t\t},\n\t\t});\n\t}\n}\n"],"names":["Toolbar","constructor","params","objectParams","Type","isPlainObject","isStringFilled","toolbarId","BX","UI","ToolbarManager","get","getDefaultToolbar","setTitle","title","isFunction","pagetitle","titleContainer","querySelector","textContent","getContainer","toolbarContainer","getRightButtonsContainer","rightButtons","cleanContent","Dom","clean","createSkeleton","create","attrs","src","height","width","style","offsetHeight"],"mappings":";;;;;;CAAsC;CAMtC;CACA;CACA;AACA,CAAO,MAAMA,OAAO,CACpB;GAGCC,WAAW,CAACC,MAAe,EAC3B;KAAA;OAAA;OAAA;;KACC,MAAMC,YAAY,GAAGC,cAAI,CAACC,aAAa,CAACH,MAAM,CAAC,GAAGA,MAAM,GAAG,EAAE;KAE7D,IAAIE,cAAI,CAACE,cAAc,CAACH,YAAY,CAACI,SAAS,CAAC,EAC/C;OAAA;OACC,4CAAI,+BAAYC,EAAE,+BAAF,IAAIC,EAAE,8CAAN,OAAQC,cAAc,qBAAtB,sBAAwBC,GAAG,CAACR,YAAY,CAACI,SAAS,CAAC;MACnE,MAED;OAAA;OACC,4CAAI,gCAAYC,EAAE,gCAAF,KAAIC,EAAE,8CAAN,QAAQC,cAAc,qBAAtB,sBAAwBE,iBAAiB,EAAE;;;GAI7DC,QAAQ,CAACC,KAAa,EACtB;KACC,IAAI,yCAAC,IAAI,qBAAS,EAClB;OACC;;KAGD,IAAIV,cAAI,CAACW,UAAU,CAAC,4CAAI,sBAAUF,QAAQ,CAAC,EAC3C;OACC,4CAAI,sBAAUA,QAAQ,CAACC,KAAK,CAAC;MAC7B,MAED;OACC,MAAME,SAAS,GAAG,4CAAI,sBAAUC,cAAc,CAACC,aAAa,CAAC,YAAY,CAAC;OAC1E,IAAIF,SAAS,EACb;SACCA,SAAS,CAACG,WAAW,GAAGL,KAAK;;;;GAKhCM,YAAY,GACZ;KACC,IAAI,yCAAC,IAAI,qBAAS,EAClB;OACC,OAAO,IAAI;;KAGZ,IAAIhB,cAAI,CAACW,UAAU,CAAC,4CAAI,sBAAUK,YAAY,CAAC,EAC/C;OACC,OAAO,4CAAI,sBAAUA,YAAY,EAAE;;KAGpC,OAAO,4CAAI,sBAAUC,gBAAgB;;GAGtCC,wBAAwB,GACxB;KACC,IAAI,yCAAC,IAAI,qBAAS,EAClB;OACC,OAAO,IAAI;;KAGZ,IAAIlB,cAAI,CAACW,UAAU,CAAC,4CAAI,sBAAUO,wBAAwB,CAAC,EAC3D;OACC,4CAAI,sBAAUA,wBAAwB,EAAE;;KAGzC,OAAO,4CAAI,sBAAUC,YAAY;;GAGlCC,YAAY,GACZ;KACC,IAAI,yCAAC,IAAI,qBAAS,EAClB;OACC;;KAGD,IAAI,CAACX,QAAQ,CAAC,EAAE,CAAC;KACjBY,aAAG,CAACC,KAAK,CAAC,IAAI,CAACJ,wBAAwB,EAAE,CAAC;;GAG3CK,cAAc,GACd;KAAA;KACC,OAAOF,aAAG,CAACG,MAAM,CAAC,KAAK,EAAE;OACxBC,KAAK,EAAE;SACNC,GAAG,EAAE,uEAAuE;SAC5EC,MAAM,EAAE,QAAQ;SAChBC,KAAK,EAAE;QACP;OACDC,KAAK,EAAE;SACN,YAAY,EAAG,IAAC,sBAAE,IAAI,CAACb,YAAY,EAAE,qBAAnB,mBAAqBc,YAAa;;MAErD,CAAC;;CAEJ;;;;;;;;"}