{"version":3,"file":"script.js","sources":["src/user-processes-start.js"],"sourcesContent":["import { Type, Dom, Text, Loc, ajax, Runtime, Tag, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Alert, AlertColor } from 'ui.alerts';\nimport { Router } from 'bizproc.router';\n\nimport './style.css';\n\nimport 'ui.design-tokens';\n\nexport class UserProcessesStart\n{\n\tgridId: string;\n\t#counters: Map = new Map();\n\tonElementCreatedHandler: any = null;\n\n\tconstructor(options: {\n\t\tgridId: string,\n\t\terrors: Array<{ message: string }>,\n\t})\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.gridId = options.gridId;\n\n\t\t\tif (Type.isArray(options.errors))\n\t\t\t{\n\t\t\t\tthis.showErrors(options.errors);\n\t\t\t}\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\tinit(): void\n\t{\n\t\tBX.UI.Hint.init(document);\n\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.Bizproc.Component.UserProcessesStart.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tEventEmitter.subscribe('Grid::updated', this.#onAfterGridUpdated.bind(this));\n\t\tthis.subscribeCustomEvents();\n\t}\n\n\tsubscribeCustomEvents()\n\t{\n\t\tif (this.onElementCreatedHandler === null)\n\t\t{\n\t\t\tthis.onElementCreatedHandler = this.onElementCreated.bind(this);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onElementCreatedHandler);\n\t\t}\n\t}\n\n\tunsubscribeCustomEvents()\n\t{\n\t\tif (this.onElementCreatedHandler)\n\t\t{\n\t\t\tEventEmitter.unsubscribe('SidePanel.Slider:onMessage', this.onElementCreatedHandler);\n\t\t\tthis.onElementCreatedHandler = null;\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.unsubscribeCustomEvents();\n\t}\n\n\tstatic changePin(iblockId: number, gridId: string, event: Event): void\n\t{\n\t\tconst eventData = event.getData();\n\t\tconst button = eventData.button;\n\n\t\tif (Dom.hasClass(button, BX.Grid.CellActionState.ACTIVE))\n\t\t{\n\t\t\tBX.Bizproc.Component.UserProcessesStart.#action('unpin', iblockId, gridId);\n\t\t\tDom.removeClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Bizproc.Component.UserProcessesStart.#action('pin', iblockId, gridId);\n\t\t\tDom.addClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\n\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\tif (grid)\n\t\t{\n\t\t\tBX.Bizproc.Component.UserProcessesStart.colorPinnedRows(grid);\n\t\t}\n\t}\n\n\tstatic #action(action: string, iblockId: number, gridId: string): void\n\t{\n\t\tconst component = 'bitrix:bizproc.user.processes.start';\n\n\t\tajax.runComponentAction(component, action, {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\tiblockId,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\t\t\tif (grid)\n\t\t\t\t{\n\t\t\t\t\tgrid.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t).catch(() => {});\n\t}\n\n\tstatic colorPinnedRows(grid) {\n\t\tgrid.getRows().getRows().forEach((row) => {\n\t\t\tconst node = row.getNode();\n\t\t\tif (Type.isElementNode(node.querySelector('.main-grid-cell-content-action-pin.main-grid-cell-content-action-active')))\n\t\t\t{\n\t\t\t\tDom.addClass(node, 'bizproc-user-processes-start-item-pinned');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(node, 'bizproc-user-processes-start-item-pinned');\n\t\t\t}\n\t\t});\n\t}\n\n\t#onAfterGridUpdated()\n\t{\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.UI.Hint.init(this.getGrid().getContainer());\n\t\t\tBX.Bizproc.Component.UserProcessesStart.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tthis.#counters.forEach((value, key) => {\n\t\t\tconst counter = document.querySelector(`[data-role=\"iblock-${key}-counter\"]`);\n\t\t\tif (Type.isElementNode(counter))\n\t\t\t{\n\t\t\t\tDom.clean(counter);\n\t\t\t\tDom.append(this.#renderStartedByMeNow(key), counter);\n\t\t\t}\n\t\t});\n\t}\n\n\t#renderStartedByMeNow(iblockId: number): HTMLElement\n\t{\n\t\tlet message = Text.encode(Loc.getMessage(\n\t\t\t'BIZPROC_USER_PROCESSES_START_COUNTER',\n\t\t\t{\n\t\t\t\t'#COUNTER#': this.#counters.get(iblockId),\n\t\t\t},\n\t\t));\n\n\t\tmessage = message.replace('[bold]', '<span class=\"bizproc-user-processes-start-column-start-counter\">');\n\t\tmessage = message.replace('[/bold]', '</span>');\n\n\t\treturn Tag.render`<div class=\"ui-typography-text-xs\">${message}</div>`;\n\t}\n\n\tstartWorkflow(event: PointerEvent, iBlockTypeId: string, iblockId: number, iBlockName: string)\n\t{\n\t\tevent.preventDefault();\n\n\t\tRuntime.loadExtension('lists.element.creation-guide')\n\t\t\t.then(({ CreationGuide }) => {\n\t\t\t\tCreationGuide?.open({\n\t\t\t\t\tiBlockTypeId,\n\t\t\t\t\tiBlockId: iblockId,\n\t\t\t\t\tanalyticsP1: iBlockName,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(() => {})\n\t\t\t.finally(() => {});\n\t}\n\n\tonElementCreated(event): void\n\t{\n\t\tconst [sliderEvent] = event.getCompatData();\n\n\t\tif (sliderEvent.getEventId() === 'BX.Lists.Element.CreationGuide:onElementCreated')\n\t\t{\n\t\t\tconst eventArgs = sliderEvent.getData();\n\t\t\tif (!this.#counters.has(eventArgs.iBlockId))\n\t\t\t{\n\t\t\t\tthis.#counters.set(eventArgs.iBlockId, 0);\n\t\t\t}\n\t\t\tthis.#counters.set(eventArgs.iBlockId, this.#counters.get(eventArgs.iBlockId) + 1);\n\t\t\tthis.reloadGrid();\n\t\t\tBX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.reloadGrid();\n\t\t}\n\t}\n\n\tshowErrors(errors: Array<{ message: string }>): void\n\t{\n\t\tif (!Type.isArrayFilled(errors))\n\t\t{\n\t\t\tif (!Type.isArray(errors))\n\t\t\t{\n\t\t\t\tconsole.error(errors);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorsContainer = document.getElementById('bp-user-processes-errors-container');\n\n\t\tif (errorsContainer)\n\t\t{\n\t\t\tlet errorCounter = 0;\n\t\t\tconst fixStyles = () => {\n\t\t\t\tif (errorCounter > 0)\n\t\t\t\t{\n\t\t\t\t\tDom.style(errorsContainer, { margin: '10px' });\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.style(errorsContainer, { margin: '0px' });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (const error of errors)\n\t\t\t{\n\t\t\t\terrorCounter += 1;\n\n\t\t\t\tconst alert = new Alert({\n\t\t\t\t\ttext: Text.encode(error.message),\n\t\t\t\t\tcolor: AlertColor.DANGER,\n\t\t\t\t\tcloseBtn: true,\n\t\t\t\t\tanimated: true,\n\t\t\t\t});\n\n\t\t\t\talert.renderTo(errorsContainer);\n\n\t\t\t\tif (alert.getCloseBtn())\n\t\t\t\t{\n\t\t\t\t\t// eslint-disable-next-line no-loop-func\n\t\t\t\t\talert.getCloseBtn().onclick = () => {\n\t\t\t\t\t\terrorCounter -= 1;\n\t\t\t\t\t\tfixStyles();\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfixStyles();\n\t\t}\n\t}\n\n\treloadGrid(): void\n\t{\n\t\tthis.getGrid()?.reload();\n\t}\n\n\tgetGrid(): ?BX.Main.grid\n\t{\n\t\tif (this.gridId)\n\t\t{\n\t\t\treturn BX.Main.gridManager?.getInstanceById(this.gridId);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\teditTemplate(event: Event, bizprocEditorUrl: string, canEdit: boolean): void\n\t{\n\t\tif (!canEdit)\n\t\t{\n\t\t\tthis.showNoPermissionsHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (bizprocEditorUrl.length === 0)\n\t\t{\n\t\t\tthis.showNoEditorHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\ttop.window.location.href = bizprocEditorUrl;\n\t}\n\n\teditTemplateConstants(templateId: string, signedDocumentType: string): void\n\t{\n\t\tRouter.openWorkflowChangeConstants({\n\t\t\ttemplateId,\n\t\t\tsignedDocumentType,\n\t\t});\n\t}\n\n\tshowAngleHint(node: Element, text: string): void\n\t{\n\t\tif (this.hintTimeout)\n\t\t{\n\t\t\tclearTimeout(this.hintTimeout);\n\t\t}\n\n\t\tthis.popupHint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\twidth: 334,\n\t\t\t\theight: 104,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: Dom.getPosition(node).width / 2,\n\t\t\t\t},\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.popupHint.close = function(): void\n\t\t{\n\t\t\tthis.hide();\n\t\t};\n\t\tthis.popupHint.show(node, text);\n\t\tthis.timeout = setTimeout(this.hideHint.bind(this), 5000);\n\t}\n\n\thideHint(): void\n\t{\n\t\tif (this.popupHint)\n\t\t{\n\t\t\tthis.popupHint.close();\n\t\t}\n\t\tthis.popupHint = null;\n\t}\n\n\tshowNoPermissionsHint(node: Element): void\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_USER_PROCESSES_START_TEMPLATE_RIGHTS_ERROR'));\n\t}\n\n\tshowNoEditorHint(node: Element): void\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_USER_PROCESSES_START_TEMPLATE_MODULE_ERROR'));\n\t}\n}\n"],"names":["UserProcessesStart","constructor","options","Map","onElementCreatedHandler","Type","isPlainObject","gridId","isArray","errors","showErrors","init","BX","UI","Hint","document","getGrid","Bizproc","Component","colorPinnedRows","EventEmitter","subscribe","bind","subscribeCustomEvents","onElementCreated","unsubscribeCustomEvents","unsubscribe","destroy","changePin","iblockId","event","eventData","getData","button","Dom","hasClass","Grid","CellActionState","ACTIVE","removeClass","addClass","grid","Main","gridManager","getInstanceById","getRows","forEach","row","node","getNode","isElementNode","querySelector","startWorkflow","iBlockTypeId","iBlockName","preventDefault","Runtime","loadExtension","then","CreationGuide","open","iBlockId","analyticsP1","catch","finally","sliderEvent","getCompatData","getEventId","eventArgs","has","set","get","reloadGrid","SidePanel","Instance","getSliderByWindow","window","close","isArrayFilled","console","error","errorsContainer","getElementById","errorCounter","fixStyles","style","margin","alert","Alert","text","Text","encode","message","color","AlertColor","DANGER","closeBtn","animated","renderTo","getCloseBtn","onclick","reload","editTemplate","bizprocEditorUrl","canEdit","showNoPermissionsHint","target","length","showNoEditorHint","top","location","href","editTemplateConstants","templateId","signedDocumentType","Router","openWorkflowChangeConstants","showAngleHint","hintTimeout","clearTimeout","popupHint","createInstance","popupParameters","width","height","closeByEsc","autoHide","angle","offset","getPosition","bindOptions","position","hide","show","timeout","setTimeout","hideHint","Loc","getMessage","action","component","ajax","runComponentAction","mode","data","response","getContainer","value","key","counter","clean","append","replace","Tag","render"],"mappings":"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"}