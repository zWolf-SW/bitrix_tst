{"version":3,"file":"script.js","sources":["src/components/header.js","src/components/breadcrumbs.js","src/components/buttons.js","src/components/error-notifier.js","src/single-start/helpers/show-exit-dialog.js","src/helpers/add-missing-form-data-values.js","src/helpers/is-equals-form-data.js","src/helpers/render-bp-form.js","src/single-start/steps/step.js","src/single-start/steps/step-with-errors.js","src/single-start/steps/constants-step.js","src/single-start/actions/start-workflow-action.js","src/single-start/steps/parameters-step.js","src/single-start/steps/recommendation-step.js","src/single-start/steps/success-start-step.js","src/single-start/single-start.js","src/autostart/helpers/show-cancel-dialog.js","src/autostart/autostart.js","src/edit-constants/helpers/show-cancel-dialog.js","src/edit-constants/edit-constants.js"],"sourcesContent":["import { Tag, Text, Type } from 'main.core';\nimport { Icon, Main } from 'ui.icon-set.api.core';\n\nimport '../css/components/header.css';\n\nexport class Header\n{\n\t#title: string = '';\n\t#description: string = '';\n\n\tconstructor(config: { title: string, description: string})\n\t{\n\t\tif (Type.isStringFilled(config.title))\n\t\t{\n\t\t\tthis.#title = config.title;\n\t\t}\n\n\t\tif (Type.isStringFilled(config.description))\n\t\t{\n\t\t\tthis.#description = config.description;\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__header\">\n\t\t\t\t${this.#renderIcon()}\n\t\t\t\t${this.#renderContent()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderIcon(): HTMLElement\n\t{\n\t\tconst icon = new Icon({\n\t\t\ticon: Main.BUSINESS_PROCESS_1,\n\t\t\tsize: 48,\n\t\t\tcolor: 'var(--ui-color-palette-white-base)',\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__header-icon\">\n\t\t\t\t${icon.render()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__header-content\">\n\t\t\t\t${this.#renderTitle()}\n\t\t\t\t${this.#renderInfo()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderTitle(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__header__title\">\n\t\t\t\t${Text.encode(this.#title)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderInfo(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__header__info\">\n\t\t\t\t${Text.encode(this.#description)}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Tag, Text, Type, Dom } from 'main.core';\n\nimport '../css/components/breadcrumbs.css';\n\ntype StepId = string;\n\nexport type BreadcrumbsData = {\n\titems: Array<BreadcrumbsItemData>\n};\n\nexport type BreadcrumbsItemData = {\n\tid: string,\n\ttext: string,\n\tactive: boolean,\n};\n\nexport class Breadcrumbs\n{\n\t#items: Map<StepId, BreadcrumbsItemData> = new Map();\n\t#itemsNode: Map<StepId, HTMLElement> = new Map();\n\n\t#sequenceSteps: [] = [];\n\t#currentStepId: ?StepId = null;\n\n\tconstructor(config: BreadcrumbsData = {})\n\t{\n\t\tif (!Type.isArrayFilled(config.items))\n\t\t{\n\t\t\tthrow new TypeError('BX.Bizproc.Workflow.SingleStart.Breadcrumbs: items must be filled array');\n\t\t}\n\n\t\tconfig.items.forEach((item) => {\n\t\t\tthis.#items.set(item.id, item);\n\t\t\tthis.#sequenceSteps.push(item.id);\n\t\t\tif (item.active)\n\t\t\t{\n\t\t\t\tthis.#currentStepId = item.id;\n\t\t\t}\n\t\t});\n\n\t\tif (!Type.isStringFilled(this.#currentStepId) && Type.isStringFilled(this.#sequenceSteps.at(0)))\n\t\t{\n\t\t\tthis.#currentStepId = this.#sequenceSteps.at(0);\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__breadcrumbs\">\n\t\t\t\t${[...this.#items.entries()]\n\t\t\t\t\t.map(([key, item]) => this.#renderItem(item, key))\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderItem(item: BreadcrumbsItemData, stepId: StepId): HTMLElement\n\t{\n\t\tif (!this.#itemsNode.has(stepId))\n\t\t{\n\t\t\tthis.#itemsNode.set(\n\t\t\t\tstepId,\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"bizproc__ws_start__breadcrumbs-item${item.active ? ' --active' : ''}\">\n\t\t\t\t\t\t<span>${Text.encode(item.text)}</span>\n\t\t\t\t\t\t<span class=\"ui-icon-set --chevron-right\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t);\n\t\t}\n\n\t\treturn this.#itemsNode.get(stepId);\n\t}\n\n\tnext()\n\t{\n\t\tif (this.#currentStepId)\n\t\t{\n\t\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\t\t\tif (index !== -1 && Type.isStringFilled(this.#sequenceSteps.at(index + 1)))\n\t\t\t{\n\t\t\t\tthis.#markNotActive(this.#currentStepId);\n\t\t\t\tthis.#markComplete(this.#currentStepId);\n\t\t\t\tthis.#currentStepId = this.#sequenceSteps.at(index + 1);\n\t\t\t\tthis.#markActive(this.#currentStepId);\n\t\t\t}\n\t\t}\n\t}\n\n\tback()\n\t{\n\t\tif (this.#currentStepId)\n\t\t{\n\t\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\t\t\tif (index !== -1 && index - 1 >= 0 && Type.isStringFilled(this.#sequenceSteps.at(index - 1)))\n\t\t\t{\n\t\t\t\tthis.#markNotActive(this.#currentStepId);\n\t\t\t\tthis.#currentStepId = this.#sequenceSteps.at(index - 1);\n\t\t\t\tthis.#markNotComplete(this.#currentStepId);\n\t\t\t\tthis.#markActive(this.#currentStepId);\n\t\t\t}\n\t\t}\n\t}\n\n\t#markNotActive(stepId: StepId)\n\t{\n\t\tif (this.#items.has(stepId))\n\t\t{\n\t\t\tthis.#items.get(stepId).active = false;\n\t\t\tDom.removeClass(this.#itemsNode.get(stepId), '--active');\n\t\t}\n\t}\n\n\t#markActive(stepId: StepId)\n\t{\n\t\tif (this.#items.has(stepId))\n\t\t{\n\t\t\tthis.#items.get(stepId).active = true;\n\t\t\tDom.addClass(this.#itemsNode.get(stepId), '--active');\n\t\t}\n\t}\n\n\t#markComplete(stepId: StepId)\n\t{\n\t\tif (this.#items.has(stepId))\n\t\t{\n\t\t\tDom.addClass(this.#itemsNode.get(stepId), '--complete');\n\t\t}\n\t}\n\n\t#markNotComplete(stepId: StepId)\n\t{\n\t\tif (this.#items.has(stepId))\n\t\t{\n\t\t\tDom.removeClass(this.#itemsNode.get(stepId), '--complete');\n\t\t}\n\t}\n}\n","import { Text, Loc, Type, Dom } from 'main.core';\nimport { Button, ButtonColor } from 'ui.buttons';\n\ntype ButtonId = string;\ntype StepId = string;\n\nexport type ButtonsData = {\n\tbuttons: Object<StepId, Array<Button>>,\n\twrapper: HTMLElement,\n\tcurrentStepId: ?StepId;\n};\n\nexport class Buttons\n{\n\t#buttons: Map<string, Array<Button>> = new Map();\n\t#sequenceSteps: [] = [];\n\t#currentStepId: ?StepId = null;\n\n\t#wrapper: HTMLElement;\n\n\tstatic createNextButton(action: Function): Button\n\t{\n\t\treturn new Button({\n\t\t\tid: 'next',\n\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_NEXT_BUTTON')),\n\t\t\tonclick: action,\n\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t});\n\t}\n\n\tstatic createBackButton(action: Function): Button\n\t{\n\t\treturn new Button({\n\t\t\tid: 'back',\n\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_BACK_BUTTON')),\n\t\t\tonclick: action,\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t});\n\t}\n\n\tstatic createStartButton(action: Function): Button\n\t{\n\t\treturn new Button({\n\t\t\tid: 'start',\n\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_START_BUTTON')),\n\t\t\tonclick: action,\n\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t});\n\t}\n\n\tconstructor(config: ButtonsData)\n\t{\n\t\tif (Type.isPlainObject(config.buttons))\n\t\t{\n\t\t\tObject.entries(config.buttons).forEach(([stepId, buttons]) => {\n\t\t\t\tthis.#buttons.set(stepId, buttons);\n\t\t\t\tthis.#sequenceSteps.push(stepId);\n\t\t\t});\n\n\t\t\tif (Type.isArrayFilled(this.#sequenceSteps))\n\t\t\t{\n\t\t\t\tthis.#currentStepId = config.currentStepId ?? this.#sequenceSteps.at(0);\n\t\t\t}\n\t\t}\n\n\t\tthis.#wrapper = config.wrapper;\n\t}\n\n\tnext()\n\t{\n\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\t\tif (index !== -1 && Type.isStringFilled(this.#sequenceSteps.at(index + 1)))\n\t\t{\n\t\t\tthis.#currentStepId = this.#sequenceSteps.at(index + 1);\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tback()\n\t{\n\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\t\tif (index !== -1 && index - 1 >= 0 && Type.isStringFilled(this.#sequenceSteps.at(index - 1)))\n\t\t{\n\t\t\tthis.#currentStepId = this.#sequenceSteps.at(index - 1);\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.clean(this.#wrapper);\n\n\t\tconst buttons = this.#currentStepButtons;\n\t\tif (Type.isArrayFilled(this.#currentStepButtons))\n\t\t{\n\t\t\tDom.show(this.#wrapper);\n\t\t\tbuttons.forEach((button) => {\n\t\t\t\tbutton.renderTo(this.#wrapper);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.hide(this.#wrapper);\n\t\t}\n\t}\n\n\tget #currentStepButtons(): Array<Button>\n\t{\n\t\treturn this.#buttons.has(this.#currentStepId) ? this.#buttons.get(this.#currentStepId) : [];\n\t}\n\n\tresolveEnableState(enable: Object<ButtonId, boolean>): void\n\t{\n\t\tthis.#currentStepButtons.forEach((button) => {\n\t\t\tif (Type.isBoolean(enable[button.getId()]))\n\t\t\t{\n\t\t\t\tbutton.setDisabled(!enable[button.getId()]);\n\t\t\t}\n\t\t});\n\t}\n\n\tresolveWaitingState(waiting: Object<ButtonId, boolean>): void\n\t{\n\t\tthis.#currentStepButtons.forEach((button) => {\n\t\t\tif (Type.isBoolean(waiting[button.getId()]))\n\t\t\t{\n\t\t\t\tbutton.setWaiting(waiting[button.getId()]);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Type, Tag, Dom, Text } from 'main.core';\nimport { Alert, AlertColor } from 'ui.alerts';\n\nexport class ErrorNotifier\n{\n\t#errors: [] = [];\n\t#element: HTMLElement;\n\n\tconstructor(props: { errors: []})\n\t{\n\t\tthis.errors = props.errors;\n\t}\n\n\tset errors(errors: [])\n\t{\n\t\tif (Type.isArray(errors))\n\t\t{\n\t\t\tthis.#errors = errors;\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#element = Tag.render`<div>${this.#renderErrors()}</div>`;\n\n\t\treturn this.#element;\n\t}\n\n\tshow(scrollToElement: boolean = true)\n\t{\n\t\tif (this.#element)\n\t\t{\n\t\t\tthis.clean();\n\t\t\tDom.append(this.#renderErrors(), this.#element);\n\n\t\t\tif (scrollToElement)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\tBX.scrollToNode(this.#element);\n\t\t\t}\n\t\t}\n\t}\n\n\tclean()\n\t{\n\t\tif (this.#element)\n\t\t{\n\t\t\tDom.clean(this.#element);\n\t\t}\n\t}\n\n\t#renderErrors(): ?HTMLElement\n\t{\n\t\tif (Type.isArrayFilled(this.#errors))\n\t\t{\n\t\t\tconst message = (\n\t\t\t\tthis.#errors\n\t\t\t\t\t.map((error) => Text.encode(error.message || ''))\n\t\t\t\t\t.join('<br/>')\n\t\t\t);\n\n\t\t\treturn (new Alert({ text: message, color: AlertColor.DANGER })).render();\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport function showExitDialog(onConfirm: Function, onCancel: ?Function): void\n{\n\tconst messageBox = MessageBox.confirm(\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EXIT_DIALOG_DESCRIPTION'),\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EXIT_DIALOG_TITLE'),\n\t\tonConfirm,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EXIT_DIALOG_CONFIRM'),\n\t\tType.isFunction(onCancel) ? onCancel : () => true,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EXIT_DIALOG_CANCEL'),\n\t);\n\n\tif (Type.isFunction(onCancel))\n\t{\n\t\tconst popup = messageBox.getPopupWindow();\n\t\tpopup.subscribe('onClose', onCancel);\n\t}\n}\n","export function addMissingFormDataValues(target: FormData, source: FormData): void\n{\n\tconst addedKeys = new Set();\n\tfor (const [key, value] of source.entries())\n\t{\n\t\tif (!target.has(key) || addedKeys.has(key))\n\t\t{\n\t\t\taddedKeys.add(key);\n\t\t\ttarget.append(key, value);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\n\nexport function isEqualsFormData(form1: FormData, form2: FormData): boolean\n{\n\tfor (const key of form1.keys())\n\t{\n\t\tif (!form2.has(key))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst values1 = form1.getAll(key);\n\t\tconst values2 = form2.getAll(key);\n\n\t\tif (values1.length !== values2.length)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (const singleKey of values1.keys())\n\t\t{\n\t\t\tlet value1 = values1.at(singleKey);\n\t\t\tlet value2 = values2.at(singleKey);\n\n\t\t\tif (Type.isFile(value1))\n\t\t\t{\n\t\t\t\tvalue1 = value1.name;\n\t\t\t\tvalue2 = value2.name;\n\t\t\t}\n\n\t\t\tif (value1 !== value2)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n","import { Tag, Text, Type } from 'main.core';\nimport type { Property } from '../types/property';\n\nimport 'bp_field_type';\nimport 'ui.forms';\n\nimport '../css/form.css';\n\nexport function renderBpForm(\n\tformName: string,\n\ttitle: string,\n\tfields: Array<Property>,\n\tdocumentType: [],\n\tdescription: ?string,\n\tsignedDocumentId: ?string,\n): HTMLFormElement\n{\n\tlet context = {};\n\tif (Type.isStringFilled(signedDocumentId))\n\t{\n\t\tcontext = { isStartWorkflow: true, signedDocumentId };\n\t}\n\n\tconst controls = BX.Bizproc.FieldType.renderControlCollection(\n\t\tdocumentType,\n\t\tfields.map((field) => ({\n\t\t\tproperty: field,\n\t\t\tfieldName: field.Id,\n\t\t\tvalue: field.Default,\n\t\t\tcontrolId: field.Id,\n\t\t})),\n\t\t'public',\n\t\tcontext,\n\t);\n\n\treturn Tag.render`\n\t\t<form name=\"${formName}\">\n\t\t\t<div class=\"bizproc__ws_start__content-form-title-block\">\n\t\t\t\t<div class=\"bizproc__ws_start__content-form-title\">${Text.encode(title)}</div>\n\t\t\t\t<div class=\"bizproc__ws_start__content-form-description\">${Text.encode(description)}</div>\n\t\t\t</div>\n\t\t\t\t${fields.map((property) => {\n\t\tconst control = (\n\t\t\tType.isElementNode(controls[property.Id])\n\t\t\t\t? controls[property.Id]\n\t\t\t\t: BX.Bizproc.FieldType.renderControlPublic(\n\t\t\t\t\tdocumentType,\n\t\t\t\t\tproperty,\n\t\t\t\t\tproperty.Id,\n\t\t\t\t\tproperty.Default,\n\t\t\t\t\tfalse,\n\t\t\t\t)\n\t\t);\n\n\t\treturn renderBpFieldForForm(property, control);\n\t})}\n\t\t</form>\n\t`;\n}\n\nexport function renderBpFieldForForm(property: Property, control: HTMLElement): HTMLElement\n{\n\treturn Tag.render`\n\t\t<div class=\"bizproc__ws_start__content-form-block\">\n\t\t\t<div class=\"ui-ctl-title${Text.toBoolean(property.Required) ? ' --required' : ''}\">\n\t\t\t\t${Text.encode(property.Name)}\n\t\t\t</div>\n\t\t\t${control}\n\t\t</div>\n\t`;\n}\n","import { Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport type { StepData } from '../types/step-data';\n\nimport '../../css/style.css';\n\nexport class Step extends EventEmitter\n{\n\tname: string;\n\n\tconstructor(config: StepData)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Bizproc.Component.WorkflowSingleStart.Step');\n\n\t\tif (this.constructor === Step)\n\t\t{\n\t\t\tthrow new Error('Object of Abstract Class cannot be created');\n\t\t}\n\n\t\tthis.name = config.name;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__content\">\n\t\t\t\t${this.renderHead()}\n\t\t\t\t${this.renderBody()}\n\t\t\t\t${this.renderFooter()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderHead(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__content-head\">\n\t\t\t\t<div class=\"bizproc__ws_start__content-title\">\n\t\t\t\t\t${Text.encode(this.name)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderBody(): HTMLElement\n\t{\n\t\tthrow new Error('Abstract Method has no implementation');\n\t}\n\n\trenderFooter(): ?HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\tisNextEnabled(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tonBeforeNextStep(): Promise\n\t{\n\t\treturn Promise.resolve();\n\t}\n\n\tisBackEnabled(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tonChangeStepAvailability()\n\t{\n\t\tthis.emit('onChangeStepAvailability');\n\t}\n\n\tonAfterRender(): void\n\t{}\n\n\tcanExit(): boolean\n\t{\n\t\treturn true;\n\t}\n}\n","import { Type } from 'main.core';\n\nimport { ErrorNotifier } from '../../components/error-notifier';\n\nimport { Step } from './step';\n\nexport class StepWithErrors extends Step\n{\n\terrorNotifier: ErrorNotifier;\n\n\tconstructor(config)\n\t{\n\t\tsuper(config);\n\n\t\tthis.errorNotifier = new ErrorNotifier({});\n\t}\n\n\trenderErrors(): HTMLElement\n\t{\n\t\treturn this.errorNotifier.render();\n\t}\n\n\tshowErrors(errors)\n\t{\n\t\tif (Type.isArrayFilled(errors))\n\t\t{\n\t\t\tthis.errorNotifier.errors = errors;\n\t\t\tthis.errorNotifier.show();\n\t\t}\n\t}\n\n\tcleanErrors()\n\t{\n\t\tthis.errorNotifier.errors = [];\n\t\tthis.errorNotifier.clean();\n\t}\n}\n","import { Type, Tag, Text, Loc, ajax, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Alert, AlertColor, AlertIcon } from 'ui.alerts';\nimport { Button, ButtonSize, ButtonColor } from 'ui.buttons';\n\nimport { addMissingFormDataValues } from '../../helpers/add-missing-form-data-values';\nimport { isEqualsFormData } from '../../helpers/is-equals-form-data';\nimport { renderBpForm } from '../../helpers/render-bp-form';\n\nimport { StepWithErrors } from './step-with-errors';\n\nimport type { Property } from '../../types/property';\nimport type { ConstantsStepData } from '../types/step-data';\n\nconst FORM_NAME = 'bizproc-ws-single-start-constants';\n\nimport '../../css/style.css';\nimport '../../css/form.css';\n\nexport class ConstantsStep extends StepWithErrors\n{\n\t#constants: ?Array<Property> = [];\n\t#documentType: [] = null;\n\t#signedDocumentType: string;\n\t#signedDocumentId: string;\n\t#templateId: number;\n\n\t#body: HTMLElement;\n\t#form: HTMLFormElement;\n\n\t#isConstantsTuned: boolean = false;\n\t#originalFormData: FormData = null;\n\n\tconstructor(config: ConstantsStepData)\n\t{\n\t\tsuper(config);\n\n\t\tthis.#documentType = config.documentType;\n\t\tthis.#signedDocumentType = config.signedDocumentType;\n\t\tthis.#signedDocumentId = config.signedDocumentId;\n\t\tthis.#templateId = Text.toInteger(config.templateId);\n\n\t\tif (Type.isArrayFilled(config.constants))\n\t\t{\n\t\t\tthis.#constants = config.constants;\n\t\t}\n\t}\n\n\tget #hasConstants(): boolean\n\t{\n\t\treturn Type.isArrayFilled(this.#constants);\n\t}\n\n\trenderBody(): HTMLElement\n\t{\n\t\tif (!this.#body)\n\t\t{\n\t\t\tthis.#body = Tag.render`\n\t\t\t\t<div class=\"bizproc__ws_start__content-body\">\n\t\t\t\t\t${this.#hasConstants ? this.#renderConstants() : this.#renderStub()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#body;\n\t}\n\n\tisNextEnabled(): boolean\n\t{\n\t\treturn this.#isConstantsTuned;\n\t}\n\n\t#renderStub(): HTMLElement\n\t{\n\t\treturn (\n\t\t\t(new Alert({\n\t\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_NOT_TUNING_CONSTANTS')),\n\t\t\t\tcolor: AlertColor.WARNING,\n\t\t\t\ticon: AlertIcon.INFO,\n\t\t\t}))\n\t\t\t\t.render()\n\t\t);\n\t}\n\n\t#renderConstants(): HTMLElement\n\t{\n\t\tthis.#form = renderBpForm(FORM_NAME, this.name, this.#constants, this.#documentType, null, this.#signedDocumentId);\n\t\tDom.append(this.renderErrors(), this.#form);\n\t\tDom.append(this.#renderSaveButton(), this.#form);\n\n\t\tthis.#originalFormData = new FormData(this.#form);\n\t\tthis.#subscribeOnRenderEvents();\n\n\t\treturn Tag.render`<div class=\"bizproc__ws_start__content-form\">${this.#form}</div>`;\n\t}\n\n\t#subscribeOnRenderEvents(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCustomRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCollectionRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t}\n\n\t#onAfterFieldCollectionRenderer()\n\t{\n\t\tif (this.#originalFormData && document.forms.namedItem(FORM_NAME))\n\t\t{\n\t\t\taddMissingFormDataValues(this.#originalFormData, new FormData(document.forms.namedItem(FORM_NAME)));\n\t\t}\n\t}\n\n\t#renderSaveButton(): HTMLElement\n\t{\n\t\treturn (\n\t\t\t(new Button({\n\t\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_BUTTON_SAVE')),\n\t\t\t\tsize: ButtonSize.EXTRA_SMALL,\n\t\t\t\tcolor: ButtonColor.SECONDARY,\n\t\t\t\tonclick: this.#handleSaveClick.bind(this),\n\t\t\t}))\n\t\t\t\t.render()\n\t\t);\n\t}\n\n\t#handleSaveClick(button: Button)\n\t{\n\t\tbutton.setWaiting(true);\n\t\tthis.cleanErrors();\n\n\t\tconst data = new FormData(this.#form);\n\t\tdata.set('templateId', this.#templateId);\n\t\tdata.set('signedDocumentType', this.#signedDocumentType);\n\n\t\tajax.runAction('bizproc.workflow.starter.setConstants', { data })\n\t\t\t.then(() => {\n\t\t\t\tthis.#isConstantsTuned = true;\n\t\t\t\tthis.onChangeStepAvailability();\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.showErrors(response.errors);\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t})\n\t\t;\n\t}\n\n\tcanExit(): boolean\n\t{\n\t\tif (!this.#hasConstants || !this.#originalFormData || this.#isConstantsTuned)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn isEqualsFormData(new FormData(this.#form), this.#originalFormData);\n\t}\n}\n","import { ajax } from 'main.core';\n\nexport function startWorkflowAction(data: FormData | {}): Promise\n{\n\treturn new Promise((resolve, reject) => {\n\t\tajax.runAction('bizproc.workflow.starter.startWorkflow', { data })\n\t\t\t.then((response) => {\n\t\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\t\tif (slider)\n\t\t\t\t{\n\t\t\t\t\tconst dictionary: BX.SidePanel.Dictionary = slider.getData();\n\t\t\t\t\tdictionary.set('data', { workflowId: response.data.workflowId });\n\t\t\t\t}\n\n\t\t\t\tresolve(response);\n\t\t\t})\n\t\t\t.catch(reject)\n\t\t;\n\t});\n}\n","import { Tag, Text, Type, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { addMissingFormDataValues } from '../../helpers/add-missing-form-data-values';\nimport { isEqualsFormData } from '../../helpers/is-equals-form-data';\nimport { renderBpForm } from '../../helpers/render-bp-form';\n\nimport { startWorkflowAction } from '../actions/start-workflow-action';\nimport { StepWithErrors } from './step-with-errors';\n\nimport type { Property } from '../../types/property';\nimport type { ParametersStepData } from '../types/step-data';\n\nconst FORM_NAME = 'bizproc-ws-single-start-parameters';\n\nimport '../../css/style.css';\nimport '../../css/form.css';\n\nexport class ParametersStep extends StepWithErrors\n{\n\t#parameters: ?Array<Property> = [];\n\t#documentType: [] = null;\n\t#signedDocumentId: string;\n\t#signedDocumentType: string;\n\t#templateId: number;\n\n\t#body: HTMLElement;\n\t#form: HTMLFormElement;\n\n\t#originalFormData: FormData = null;\n\t#isSent: boolean = false;\n\t#startTime: number;\n\n\tconstructor(config: ParametersStepData)\n\t{\n\t\tsuper(config);\n\n\t\tthis.#documentType = config.documentType;\n\n\t\tif (Type.isArrayFilled(config.parameters))\n\t\t{\n\t\t\tthis.#parameters = config.parameters;\n\t\t}\n\n\t\tthis.#templateId = Text.toInteger(config.templateId);\n\t\tthis.#signedDocumentType = config.signedDocumentType;\n\t\tthis.#signedDocumentId = config.signedDocumentId;\n\n\t\tthis.#startTime = Math.round(Date.now() / 1000);\n\t}\n\n\trenderBody(): HTMLElement\n\t{\n\t\tif (!this.#body)\n\t\t{\n\t\t\tthis.#body = Tag.render`\n\t\t\t\t<div class=\"bizproc__ws_start__content-body\">\n\t\t\t\t\t${this.renderErrors()}\n\t\t\t\t\t<div class=\"bizproc__ws_start__content-form\">\n\t\t\t\t\t\t${this.#renderParametersForm()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#body;\n\t}\n\n\t#renderParametersForm(): HTMLElement\n\t{\n\t\tthis.#form = renderBpForm(\n\t\t\tFORM_NAME,\n\t\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_PARAMETERS_TITLE'),\n\t\t\tthis.#parameters,\n\t\t\tthis.#documentType,\n\t\t\tnull,\n\t\t\tthis.#signedDocumentId,\n\t\t);\n\n\t\tthis.#originalFormData = new FormData(this.#form);\n\t\tthis.#subscribeOnRenderEvents();\n\n\t\treturn this.#form;\n\t}\n\n\t#subscribeOnRenderEvents(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCustomRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCollectionRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t}\n\n\t#onAfterFieldCollectionRenderer()\n\t{\n\t\tif (this.#originalFormData && document.forms.namedItem(FORM_NAME))\n\t\t{\n\t\t\taddMissingFormDataValues(this.#originalFormData, new FormData(document.forms.namedItem(FORM_NAME)));\n\t\t}\n\t}\n\n\tcanExit(): boolean\n\t{\n\t\tif (!this.#originalFormData || this.#isSent)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn isEqualsFormData(new FormData(this.#form), this.#originalFormData);\n\t}\n\n\tonBeforeNextStep(): Promise\n\t{\n\t\tthis.cleanErrors();\n\n\t\tconst data = new FormData(this.#form);\n\t\tdata.set('templateId', this.#templateId);\n\t\tdata.set('signedDocumentType', this.#signedDocumentType);\n\t\tdata.set('signedDocumentId', this.#signedDocumentId);\n\t\tdata.set('startDuration', Math.round(Date.now() / 1000) - this.#startTime);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstartWorkflowAction(data)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.#isSent = true;\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.showErrors(response.errors);\n\t\t\t\t\treject();\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n}\n","import { Tag, Type, Text, Loc, Dom, Event } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport type { RecommendationStepData } from '../types/step-data';\n\nimport { Step } from './step';\n\nimport '../../css/style.css';\nimport '../../css/single-start.css';\n\nexport class RecommendationStep extends Step\n{\n\t#body: HTMLElement;\n\n\t#recommendation: ?string = null;\n\t#recommendationElement: ?HTMLElement = null;\n\t#expandElement: ?HTMLElement = null;\n\t#freeHeight: ?number = null;\n\n\t#duration: ?number = null;\n\t#isHeightFixed: boolean = false;\n\n\tconstructor(config: RecommendationStepData)\n\t{\n\t\tsuper(config);\n\n\t\tthis.#recommendation = String(config.recommendation).trim();\n\t\tif (!Type.isNil(config.duration))\n\t\t{\n\t\t\tthis.#duration = Text.toInteger(config.duration);\n\t\t}\n\t}\n\n\tget #hasRecommendation(): boolean\n\t{\n\t\treturn Type.isStringFilled(this.#recommendation);\n\t}\n\n\tget #hasDuration(): boolean\n\t{\n\t\treturn !Type.isNil(this.#duration);\n\t}\n\n\t#getFreeHeight(): number\n\t{\n\t\tif (Type.isNil(this.#freeHeight))\n\t\t{\n\t\t\tconst slider = document.querySelector('.ui-page-slider-workarea-content-padding');\n\t\t\tthis.#freeHeight = slider ? (slider.offsetHeight - window.innerHeight) : 0;\n\t\t}\n\n\t\treturn this.#freeHeight;\n\t}\n\n\tonAfterRender()\n\t{\n\t\tif (!this.#isHeightFixed)\n\t\t{\n\t\t\tthis.#fixRecommendationHeight();\n\t\t\tthis.#isHeightFixed = true;\n\t\t}\n\t}\n\n\t#fixRecommendationHeight()\n\t{\n\t\tif (this.#recommendationElement && this.#expandElement)\n\t\t{\n\t\t\tif (this.#getFreeHeight() <= 0)\n\t\t\t{\n\t\t\t\tEvent.unbindAll(this.#expandElement, 'click');\n\t\t\t\tDom.remove(this.#expandElement);\n\t\t\t\tthis.#expandElement = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#toggleRecommendation();\n\t\t\t}\n\t\t}\n\t}\n\n\trenderBody(): HTMLElement\n\t{\n\t\tif (!this.#body)\n\t\t{\n\t\t\tthis.#body = Tag.render`\n\t\t\t\t<div class=\"bizproc__ws_start__content-body\">\n\t\t\t\t\t${this.#renderRecommendation()}\n\t\t\t\t\t${this.#renderExpandElement()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#body;\n\t}\n\n\t#renderRecommendation(): HTMLElement\n\t{\n\t\tconst recommendation = (\n\t\t\tthis.#hasRecommendation\n\t\t\t\t? BX.util.nl2br(Text.encode(this.#recommendation))\n\t\t\t\t: this.#renderEmptyRecommendation()\n\t\t);\n\n\t\tthis.#recommendationElement = Tag.render`\n\t\t\t<div class=\"bizproc__ws_single-start__content-wrapper\">\n\t\t\t\t${recommendation}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#recommendationElement;\n\t}\n\n\t#renderEmptyRecommendation(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_single-start__empty-recommendation\">\n\t\t\t\t<svg width=\"172\" height=\"172\" viewBox=\"0 0 172 172\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path opacity=\"0.5\" d=\"M137.617 121.056C137.617 123.661 135.505 125.773 132.899 125.773C130.294 125.773 128.182 123.661 128.182 121.056C128.182 118.45 130.294 116.338 132.899 116.338C135.505 116.338 137.617 118.45 137.617 121.056Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path opacity=\"0.2\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M152.713 121.056C152.713 132 143.842 140.871 132.899 140.871C123.946 140.871 116.38 134.933 113.924 126.78H117.91C120.215 132.812 126.057 137.096 132.899 137.096C141.758 137.096 148.939 129.915 148.939 121.056C148.939 112.198 141.758 105.016 132.899 105.016C126.057 105.016 120.215 109.3 117.91 115.333H113.924C116.38 107.18 123.946 101.242 132.899 101.242C143.842 101.242 152.713 110.113 152.713 121.056Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path opacity=\"0.3\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M145.164 121.057C145.164 127.831 139.673 133.323 132.898 133.323C128.191 133.323 124.103 130.672 122.047 126.781H126.626C128.178 128.482 130.414 129.549 132.898 129.549C137.588 129.549 141.39 125.747 141.39 121.057C141.39 116.367 137.588 112.565 132.898 112.565C130.414 112.565 128.178 113.632 126.625 115.333H122.047C124.104 111.442 128.191 108.791 132.898 108.791C139.673 108.791 145.164 114.283 145.164 121.057Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<g opacity=\"0.3\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M135.652 51.1387L133.678 51.1387V49.6387L135.652 49.6387C136.431 49.6387 137.175 49.7937 137.854 50.0753L137.279 51.4609C136.779 51.2535 136.23 51.1387 135.652 51.1387ZM129.73 51.1387L125.781 51.1387V49.6387L129.73 49.6387V51.1387ZM121.833 51.1387L117.884 51.1387V49.6387L121.833 49.6387V51.1387ZM113.936 51.1387L109.988 51.1387V49.6387L113.936 49.6387V51.1387ZM106.039 51.1387L102.091 51.1387L102.091 49.6387L106.039 49.6387L106.039 51.1387ZM98.1422 51.1387L96.168 51.1387C95.7538 51.1387 95.418 50.8029 95.418 50.3887C95.418 49.9745 95.7538 49.6387 96.168 49.6387L98.1422 49.6387L98.1422 51.1387ZM139.902 55.3887C139.902 54.811 139.788 54.2621 139.58 53.762L140.966 53.1874C141.247 53.8665 141.402 54.6104 141.402 55.3887V57.2499H139.902V55.3887ZM139.902 64.6948V60.9724H141.402V64.6948H139.902ZM139.902 72.1397V68.4173H141.402V72.1397H139.902ZM139.902 77.7234V75.8622H141.402V77.7234C141.402 78.3068 141.345 78.8776 141.236 79.4303L139.764 79.1392C139.855 78.6819 139.902 78.2086 139.902 77.7234ZM136.68 83.7527C137.471 83.2232 138.152 82.542 138.682 81.7511L139.928 82.5856C139.29 83.5395 138.469 84.3606 137.515 84.9992L136.68 83.7527ZM132.652 84.9734C133.138 84.9734 133.611 84.9259 134.068 84.8354L134.359 86.3069C133.807 86.4162 133.236 86.4734 132.652 86.4734H131.026V84.9734H132.652ZM119.64 84.9734H121.267V86.4734H119.64V84.9734ZM124.52 84.9734H127.773V86.4734H124.52V84.9734Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t\t<path d=\"M98.1719 50.3926C98.1719 51.4971 97.2764 52.3926 96.1719 52.3926C95.0673 52.3926 94.1719 51.4971 94.1719 50.3926C94.1719 49.288 95.0673 48.3926 96.1719 48.3926C97.2764 48.3926 98.1719 49.288 98.1719 50.3926Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M24.7566 108.84V106.95H26.2566V108.84H24.7566ZM24.7566 103.171V99.3921H26.2566V103.171H24.7566ZM24.7566 95.613V93.7235C24.7566 93.14 24.8138 92.5692 24.9232 92.0166L26.3947 92.3077C26.3042 92.765 26.2566 93.2383 26.2566 93.7235V95.613H24.7566ZM26.2309 88.8613C26.8695 87.9074 27.6906 87.0863 28.6445 86.4477L29.479 87.6942C28.688 88.2237 28.0069 88.9048 27.4773 89.6958L26.2309 88.8613ZM31.7998 85.14C32.3524 85.0307 32.9232 84.9735 33.5066 84.9735H36.0597V86.4735H33.5066C33.0215 86.4735 32.5482 86.521 32.0909 86.6115L31.7998 85.14ZM41.1657 84.9735H43.7188V86.4735H41.1657V84.9735Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t\t<path d=\"M41.8867 85.7227C41.8867 86.8272 40.9913 87.7227 39.8867 87.7227C38.7821 87.7227 37.8867 86.8272 37.8867 85.7227C37.8867 84.6181 38.7821 83.7227 39.8867 83.7227C40.9913 83.7227 41.8867 84.6181 41.8867 85.7227Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t\t<path d=\"M126.154 83.1855C126.154 82.347 125.184 81.8808 124.53 82.4046L121.357 84.9425C120.857 85.3428 120.857 86.1039 121.357 86.5042L124.53 89.0421C125.184 89.566 126.154 89.0998 126.154 88.2613V83.1855Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t\t<path d=\"M28.0841 104.461C28.9226 104.461 29.3887 105.431 28.8649 106.086L26.327 109.258C25.9267 109.758 25.1656 109.758 24.7653 109.258L22.2274 106.086C21.7036 105.431 22.1697 104.461 23.0083 104.461L28.0841 104.461Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M121.136 123.595C121.136 124.434 122.105 124.9 122.76 124.376L125.933 121.838C126.433 121.438 126.433 120.677 125.933 120.276L122.76 117.739C122.105 117.215 121.136 117.681 121.136 118.519V120.307L119.401 120.307L119.401 121.807L121.136 121.807V123.595ZM115.499 121.807L111.596 121.807L111.596 120.307L115.499 120.307V121.807ZM107.694 121.807L103.792 121.807L103.792 120.307L107.694 120.307L107.694 121.807ZM98.0226 120.307C97.726 119.574 97.0073 119.057 96.168 119.057C95.0634 119.057 94.168 119.953 94.168 121.057C94.168 122.162 95.0634 123.057 96.168 123.057C97.0073 123.057 97.7258 122.54 98.0226 121.807L99.8894 121.807L99.8894 120.307L98.0226 120.307Z\" fill=\"url(#paint0_linear_5779_78783)\"/>\n\t\t\t\t\t<g filter=\"url(#filter0_d_5779_78783)\">\n\t\t\t\t\t\t<path d=\"M18.8066 44.6914C18.8066 41.3777 21.4929 38.6914 24.8066 38.6914H90.167C93.4807 38.6914 96.167 41.3777 96.167 44.6914V56.7393C96.167 60.053 93.4807 62.7393 90.167 62.7393H24.8066C21.4929 62.7393 18.8066 60.053 18.8066 56.7393V44.6914Z\" fill=\"white\"/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M90.167 39.6914H24.8066C22.0452 39.6914 19.8066 41.93 19.8066 44.6914V56.7393C19.8066 59.5007 22.0452 61.7393 24.8066 61.7393H90.167C92.9284 61.7393 95.167 59.5007 95.167 56.7393V44.6914C95.167 41.93 92.9284 39.6914 90.167 39.6914ZM24.8066 38.6914C21.4929 38.6914 18.8066 41.3777 18.8066 44.6914V56.7393C18.8066 60.053 21.4929 62.7393 24.8066 62.7393H90.167C93.4807 62.7393 96.167 60.053 96.167 56.7393V44.6914C96.167 41.3777 93.4807 38.6914 90.167 38.6914H24.8066Z\" fill=\"#1EC6FA\"/>\n\t\t\t\t\t<path opacity=\"0.3\" d=\"M44.293 50.8101C44.293 49.8535 45.0684 49.0781 46.0249 49.0781H76.0454C77.0019 49.0781 77.7773 49.8535 77.7773 50.8101C77.7773 51.7666 77.0019 52.542 76.0454 52.542H46.0249C45.0684 52.542 44.293 51.7666 44.293 50.8101Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path opacity=\"0.56\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M33.1615 56.9988C36.5795 56.9988 39.3503 54.2279 39.3503 50.8099C39.3503 47.3919 36.5795 44.6211 33.1615 44.6211C29.7435 44.6211 26.9727 47.3919 26.9727 50.8099C26.9727 54.2279 29.7435 56.9988 33.1615 56.9988ZM36.2499 48.4132C35.9788 48.1421 35.5392 48.1421 35.2681 48.4132L32.2547 51.4267L31.0536 50.2256C30.7827 49.9547 30.3435 49.9547 30.0726 50.2256C29.8017 50.4965 29.8017 50.9357 30.0726 51.2066L31.7648 52.8987C32.0357 53.1696 32.4749 53.1696 32.7458 52.8987L36.2499 49.395C36.521 49.1239 36.521 48.6843 36.2499 48.4132Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<g filter=\"url(#filter1_d_5779_78783)\">\n\t\t\t\t\t\t<path d=\"M45.3302 74.8923C46.2308 73.3741 47.8652 72.4434 49.6304 72.4434H111.547C113.328 72.4434 114.975 73.3907 115.87 74.9304L120.39 82.7061C121.474 84.5704 121.474 86.8729 120.39 88.7372L115.87 96.5129C114.975 98.0526 113.328 98.9999 111.547 98.9999H49.6542C47.8762 98.9999 46.232 98.0557 45.3358 96.5202L40.1566 87.6458C39.4244 86.3912 39.43 84.8382 40.1711 83.5888L45.3302 74.8923Z\" fill=\"white\"/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M111.547 73.4434H49.6304C48.2183 73.4434 46.9107 74.188 46.1902 75.4025L41.0312 84.099C40.4753 85.036 40.4711 86.2008 41.0203 87.1418L46.1995 96.0161C46.9164 97.2446 48.2318 97.9999 49.6542 97.9999H111.547C112.972 97.9999 114.289 97.242 115.005 96.0103L119.526 88.2346C120.429 86.681 120.429 84.7622 119.526 83.2086L115.005 75.433C114.289 74.2012 112.972 73.4434 111.547 73.4434ZM49.6304 72.4434C47.8652 72.4434 46.2308 73.3741 45.3302 74.8923L40.1711 83.5888C39.43 84.8382 39.4244 86.3912 40.1566 87.6458L45.3358 96.5202C46.232 98.0557 47.8762 98.9999 49.6542 98.9999H111.547C113.328 98.9999 114.975 98.0526 115.87 96.5129L120.39 88.7372C121.474 86.8729 121.474 84.5704 120.39 82.7061L115.87 74.9304C114.975 73.3907 113.328 72.4434 111.547 72.4434H49.6304Z\" fill=\"#1EC6FA\"/>\n\t\t\t\t\t<path opacity=\"0.3\" d=\"M69.0293 85.7222C69.0293 84.7657 69.8047 83.9902 70.7612 83.9902H100.782C101.738 83.9902 102.514 84.7657 102.514 85.7222C102.514 86.6787 101.738 87.4541 100.782 87.4541H70.7612C69.8047 87.4541 69.0293 86.6787 69.0293 85.7222Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path opacity=\"0.56\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M57.8998 91.9109C61.3178 91.9109 64.0886 89.14 64.0886 85.722C64.0886 82.304 61.3178 79.5332 57.8998 79.5332C54.4818 79.5332 51.7109 82.304 51.7109 85.722C51.7109 89.14 54.4818 91.9109 57.8998 91.9109ZM60.9882 83.3253C60.7171 83.0542 60.2775 83.0542 60.0064 83.3253L56.993 86.3388L55.7919 85.1377C55.521 84.8668 55.0818 84.8668 54.8109 85.1377C54.54 85.4086 54.54 85.8478 54.8109 86.1187L56.5031 87.8109C56.774 88.0817 57.2132 88.0817 57.4841 87.8109L60.9882 84.3071C61.2593 84.036 61.2593 83.5965 60.9882 83.3253Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<g filter=\"url(#filter2_d_5779_78783)\">\n\t\t\t\t\t\t<path d=\"M18.8066 114.807C18.8066 111.493 21.4929 108.807 24.8066 108.807H90.167C93.4807 108.807 96.167 111.493 96.167 114.807V127.306C96.167 130.62 93.4807 133.306 90.167 133.306H24.8066C21.4929 133.306 18.8066 130.62 18.8066 127.306V114.807Z\" fill=\"white\"/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M90.167 109.807H24.8066C22.0452 109.807 19.8066 112.045 19.8066 114.807V127.306C19.8066 130.067 22.0452 132.306 24.8066 132.306H90.167C92.9284 132.306 95.167 130.067 95.167 127.306V114.807C95.167 112.045 92.9284 109.807 90.167 109.807ZM24.8066 108.807C21.4929 108.807 18.8066 111.493 18.8066 114.807V127.306C18.8066 130.62 21.4929 133.306 24.8066 133.306H90.167C93.4807 133.306 96.167 130.62 96.167 127.306V114.807C96.167 111.493 93.4807 108.807 90.167 108.807H24.8066Z\" fill=\"#1EC6FA\"/>\n\t\t\t\t\t<path opacity=\"0.3\" d=\"M44.209 121.056C44.209 120.1 44.9844 119.324 45.9409 119.324H75.9614C76.9179 119.324 77.6933 120.1 77.6933 121.056C77.6933 122.013 76.9179 122.788 75.9614 122.788H45.9409C44.9844 122.788 44.209 122.013 44.209 121.056Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path opacity=\"0.56\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M33.0775 127.245C36.4955 127.245 39.2663 124.474 39.2663 121.056C39.2663 117.638 36.4955 114.867 33.0775 114.867C29.6595 114.867 26.8887 117.638 26.8887 121.056C26.8887 124.474 29.6595 127.245 33.0775 127.245ZM36.1659 118.659C35.8948 118.388 35.4553 118.388 35.1841 118.659L32.1707 121.673L30.9696 120.472C30.6987 120.201 30.2595 120.201 29.9886 120.472C29.7178 120.743 29.7178 121.182 29.9886 121.453L31.6808 123.145C31.9517 123.416 32.3909 123.416 32.6618 123.145L36.1659 119.641C36.4371 119.37 36.4371 118.93 36.1659 118.659Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<path d=\"M114.498 51.8009C113.717 51.0199 113.717 49.7536 114.498 48.9725L120.728 42.7429C121.509 41.9619 122.775 41.9619 123.556 42.7429L129.786 48.9725C130.567 49.7536 130.567 51.0199 129.786 51.8009L123.556 58.0305C122.775 58.8115 121.509 58.8115 120.728 58.0305L114.498 51.8009Z\" fill=\"#2FC6F6\"/>\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<filter id=\"filter0_d_5779_78783\" x=\"15.8066\" y=\"36.6914\" width=\"83.3613\" height=\"30.0469\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n\t\t\t\t\t\t\t<feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\n\t\t\t\t\t\t\t<feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result=\"hardAlpha\"/>\n\t\t\t\t\t\t\t<feOffset dy=\"1\"/>\n\t\t\t\t\t\t\t<feGaussianBlur stdDeviation=\"1.5\"/>\n\t\t\t\t\t\t\t<feComposite in2=\"hardAlpha\" operator=\"out\"/>\n\t\t\t\t\t\t\t<feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0.294033 0 0 0 0 0.3875 0 0 0 0.09 0\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_5779_78783\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow_5779_78783\" result=\"shape\"/>\n\t\t\t\t\t\t</filter>\n\t\t\t\t\t\t<filter id=\"filter1_d_5779_78783\" x=\"36.6113\" y=\"70.4434\" width=\"87.5918\" height=\"32.5566\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n\t\t\t\t\t\t\t<feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\n\t\t\t\t\t\t\t<feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result=\"hardAlpha\"/>\n\t\t\t\t\t\t\t<feOffset dy=\"1\"/>\n\t\t\t\t\t\t\t<feGaussianBlur stdDeviation=\"1.5\"/>\n\t\t\t\t\t\t\t<feComposite in2=\"hardAlpha\" operator=\"out\"/>\n\t\t\t\t\t\t\t<feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0.294033 0 0 0 0 0.3875 0 0 0 0.09 0\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_5779_78783\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow_5779_78783\" result=\"shape\"/>\n\t\t\t\t\t\t</filter>\n\t\t\t\t\t\t<filter id=\"filter2_d_5779_78783\" x=\"15.8066\" y=\"106.807\" width=\"83.3613\" height=\"30.5\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n\t\t\t\t\t\t\t<feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\n\t\t\t\t\t\t\t<feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result=\"hardAlpha\"/>\n\t\t\t\t\t\t\t<feOffset dy=\"1\"/>\n\t\t\t\t\t\t\t<feGaussianBlur stdDeviation=\"1.5\"/>\n\t\t\t\t\t\t\t<feComposite in2=\"hardAlpha\" operator=\"out\"/>\n\t\t\t\t\t\t\t<feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0.294033 0 0 0 0 0.3875 0 0 0 0.09 0\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_5779_78783\"/>\n\t\t\t\t\t\t\t<feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow_5779_78783\" result=\"shape\"/>\n\t\t\t\t\t\t</filter>\n\t\t\t\t\t\t<linearGradient id=\"paint0_linear_5779_78783\" x1=\"93.418\" y1=\"121.057\" x2=\"129.388\" y2=\"121.057\" gradientUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t\t<stop stop-color=\"#2FC6F6\" stop-opacity=\"0.3\"/>\n\t\t\t\t\t\t\t<stop offset=\"1\" stop-color=\"#2FC6F6\"/>\n\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t</defs>\n\t\t\t\t</svg>\n\t\t\t\t<span class=\"bizproc__ws_single-start__text-empty\">\n\t\t\t\t\t${Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EMPTY_RECOMMENDATION_1'))}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderExpandElement(): ?HTMLElement\n\t{\n\t\tif (!this.#hasRecommendation)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.#expandElement = Tag.render`\n\t\t\t<div class=\"bizproc__ws_single-start__content-open --expanded\">\n\t\t\t\t${Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_COLLAPSE_RECOMMENDATION'))}\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(this.#expandElement, 'click', this.#toggleRecommendation.bind(this));\n\n\t\treturn this.#expandElement;\n\t}\n\n\t#toggleRecommendation()\n\t{\n\t\tif (this.#recommendationElement && this.#expandElement)\n\t\t{\n\t\t\tDom.toggleClass(this.#expandElement, ['--expanded', '--collapsed']);\n\t\t\tthis.#expandElement.innerText = Loc.getMessage(\n\t\t\t\tDom.hasClass(this.#expandElement, '--expanded')\n\t\t\t\t\t? 'BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_COLLAPSE_RECOMMENDATION'\n\t\t\t\t\t: 'BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EXPAND_RECOMMENDATION',\n\t\t\t);\n\n\t\t\tDom.toggleClass(this.#recommendationElement, ['--hide']);\n\n\t\t\tif (this.#getFreeHeight() > 0)\n\t\t\t{\n\t\t\t\tconst height = (\n\t\t\t\t\tDom.hasClass(this.#expandElement, '--expanded')\n\t\t\t\t\t\t? `${this.#recommendationElement.scrollHeight}px`\n\t\t\t\t\t\t: `${this.#recommendationElement.offsetHeight - this.#getFreeHeight()}px`\n\t\t\t\t);\n\t\t\t\tDom.style(this.#recommendationElement, 'height', height);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderFooter(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_single-start__informer\">\n\t\t\t\t<div class=\"bizproc__ws_single-start__informer-header\">\n\t\t\t\t\t<div class=\"bizproc__ws_single-start__informer-title\">\n\t\t\t\t\t\t${Text.encode(\n\t\t\t\t\t\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_AVERAGE_DURATION_TITLE'),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#renderDuration()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bizproc__ws_single-start__informer-message\">\n\t\t\t\t\t${Text.encode(\n\t\t\t\t\t\tLoc.getMessage(\n\t\t\t\t\t\t\tthis.#hasDuration\n\t\t\t\t\t\t\t\t? 'BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_DURATION_DESCRIPTION'\n\t\t\t\t\t\t\t\t: 'BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_DURATION_UNDEFINED_DESCRIPTION',\n\t\t\t\t\t\t),\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bizproc__ws_single-start__informer-bottom\">\n\t\t\t\t\t${this.#hasDuration ? this.#renderLinkToArticle() : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderDuration(): HTMLElement\n\t{\n\t\tif (this.#hasDuration)\n\t\t{\n\t\t\tlet formattedDuration = Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_ZERO_DURATION');\n\t\t\tif (this.#duration > 0)\n\t\t\t{\n\t\t\t\tformattedDuration = DateTimeFormat.format(\n\t\t\t\t\t[['s', 'sdiff'], ['i', 'idiff'], ['H', 'Hdiff'], ['d', 'ddiff'], ['m', 'mdiff'], ['Y', 'Ydiff']],\n\t\t\t\t\t0,\n\t\t\t\t\tthis.#duration,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"bizproc__ws_single-start__informer-time\">\n\t\t\t\t\t<span>${Text.encode(formattedDuration)}</span>\n\t\t\t\t\t<div class=\"ui-icon-set --time-picker\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_single-start__informer-time\">\n\t\t\t\t<span class=\"bizproc__ws_single-start__text-empty\">\n\t\t\t\t\t${Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_EMPTY_DURATION'))}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderLinkToArticle(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<a class=\"bizproc__ws_single-start__link\" href=\"#\" onclick=\"top.BX.Helper.show('redirect=detail&code=18783714')\">\n\t\t\t\t${Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_AVERAGE_DURATION_HINT'))}\n\t\t\t</a>\n\t\t`;\n\t}\n}\n","import { Tag, Loc } from 'main.core';\nimport { Step } from './step';\n\nimport 'sidepanel';\n\nconst CLOSE_SLIDER_AFTER_SECONDS = 1;\n\nexport class SuccessStartStep extends Step\n{\n\trenderHead(): ?HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\trenderBody(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"bizproc-workflow-start__slider\">\n\t\t\t\t\t<div class=\"bizproc-workflow-start__slider-logo\">\n\t\t\t\t\t\t<div class=\"bizproc-workflow-start__slider-logo-animated\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bizproc-workflow-start__slider-content\">\n\t\t\t\t\t\t<div class=\"bizproc-workflow-start__slider-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_FINAL_TEXT_STARTED')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonAfterRender()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tif (BX.SidePanel.Instance.getSliderByWindow(window))\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t\t}\n\t\t}, CLOSE_SLIDER_AFTER_SECONDS * 1000);\n\t}\n}\n","import { Tag, Loc, Type, Dom, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button } from 'ui.buttons';\nimport 'sidepanel';\n\nimport { Header } from '../components/header';\nimport { Breadcrumbs } from '../components/breadcrumbs';\nimport { Buttons } from '../components/buttons';\nimport { ErrorNotifier } from '../components/error-notifier';\n\nimport { showExitDialog } from './helpers/show-exit-dialog';\nimport { ConstantsStep } from './steps/constants-step';\nimport { ParametersStep } from './steps/parameters-step';\nimport { RecommendationStep } from './steps/recommendation-step';\nimport { SuccessStartStep } from './steps/success-start-step';\n\nimport { startWorkflowAction } from './actions/start-workflow-action';\n\nimport type { Step } from './steps/step';\nimport type { BreadcrumbsItemData } from '../components/breadcrumbs';\nimport type { SingleStartData, StepId } from './types/single-start-data';\n\nimport '../css/style.css';\nimport '../css/single-start.css';\n\nconst HTML_ELEMENT_ID = 'bizproc-workflow-start-single-start';\n\nexport class SingleStart\n{\n\t#header: Header;\n\t#breadcrumbs: Breadcrumbs;\n\t#errorNotifier: ErrorNotifier;\n\t#steps: Map<StepId, Step> = new Map();\n\t#buttons: Buttons;\n\n\t#sequenceSteps: [] = [];\n\t#currentStepId: string;\n\t#content: HTMLElement;\n\n\t#canExit: boolean = false;\n\t#isExitInProcess: boolean = false;\n\n\t#templateId: number;\n\t#signedDocumentType: string;\n\t#signedDocumentId: string;\n\n\t#startTime: number;\n\n\tconstructor(config: SingleStartData)\n\t{\n\t\tthis.#startTime = Math.round(Date.now() / 1000);\n\t\tconst composedData = this.#composeData(config);\n\n\t\tthis.#header = new Header({\n\t\t\ttitle: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_TITLE'),\n\t\t\tdescription: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_DESCRIPTION'),\n\t\t});\n\n\t\tthis.#breadcrumbs = new Breadcrumbs({\n\t\t\titems: Object.values(composedData)\n\t\t\t\t.map((data) => data.breadcrumbs)\n\t\t\t,\n\t\t});\n\n\t\tthis.#errorNotifier = new ErrorNotifier({});\n\t\tif (config.errors)\n\t\t{\n\t\t\tthis.#errorNotifier.errors = config.errors;\n\t\t\tthis.#errorNotifier.show();\n\t\t}\n\n\t\tObject.entries(composedData)\n\t\t\t.forEach(([key, data]) => {\n\t\t\t\tthis.#steps.set(key, data.step);\n\t\t\t\tdata.step.subscribe(\n\t\t\t\t\t'onChangeStepAvailability',\n\t\t\t\t\tthis.#resolveButtonsEnableState.bind(this),\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t\tthis.#sequenceSteps = Object.keys(composedData);\n\t\tthis.#currentStepId = config.workflowId ? this.#sequenceSteps.at(-1) : this.#sequenceSteps.at(0);\n\n\t\tif (config.workflowId)\n\t\t{\n\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\tif (slider)\n\t\t\t{\n\t\t\t\tconst dictionary: BX.SidePanel.Dictionary = slider.getData();\n\t\t\t\tdictionary.set('data', { workflowId: config.workflowId });\n\t\t\t}\n\n\t\t\tthis.#canExit = true;\n\t\t}\n\n\t\tthis.#buttons = new Buttons({\n\t\t\tbuttons: Object.fromEntries(\n\t\t\t\tObject.entries(composedData).map(([key, data]) => [key, data.buttons]),\n\t\t\t),\n\t\t\twrapper: document.getElementById(`${HTML_ELEMENT_ID}-buttons`).querySelector('.ui-button-panel'),\n\t\t\tcurrentStepId: this.#currentStepId,\n\t\t});\n\n\t\tthis.#signedDocumentType = config.signedDocumentType;\n\t\tthis.#signedDocumentId = config.signedDocumentId;\n\t\tthis.#templateId = Text.toInteger(config.id);\n\n\t\tthis.#subscribeOnSliderClose();\n\t}\n\n\t#resolveButtonsEnableState()\n\t{\n\t\tthis.#buttons.resolveEnableState({\n\t\t\tnext: this.#steps.get(this.#currentStepId).isNextEnabled(),\n\t\t\tback: this.#steps.get(this.#currentStepId).isBackEnabled(),\n\t\t\tstart: this.#steps.get(this.#currentStepId).isNextEnabled(),\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#content = this.#renderContent();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start\">\n\t\t\t\t${this.#header.render()}\n\t\t\t\t<div class=\"bizproc__ws_start__body\">\n\t\t\t\t\t${this.#breadcrumbs.render()}\n\t\t\t\t\t${this.#content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start__container\">\n\t\t\t\t${this.#errorNotifier.render()}\n\t\t\t\t${this.#steps.has(this.#currentStepId) ? this.#steps.get(this.#currentStepId).render() : null}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#updateContent(): void\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\tconst content = this.#renderContent();\n\t\t\tDom.replace(this.#content, content);\n\t\t\tthis.#content = content;\n\n\t\t\tif (this.#steps.has(this.#currentStepId))\n\t\t\t{\n\t\t\t\tthis.#steps.get(this.#currentStepId).onAfterRender();\n\t\t\t}\n\t\t}\n\t}\n\n\tonAfterRender()\n\t{\n\t\tif (this.#steps.has('recommendation'))\n\t\t{\n\t\t\tthis.#steps.get('recommendation').onAfterRender();\n\t\t}\n\n\t\tif (this.#currentStepId === 'start')\n\t\t{\n\t\t\tthis.#steps.get('start').onAfterRender();\n\t\t}\n\n\t\tthis.#buttons.show();\n\t}\n\n\t#next()\n\t{\n\t\tthis.#cleanErrors();\n\t\tif (this.#isNextStepEnable())\n\t\t{\n\t\t\tthis.#markButtonsOnBeforeNextStep();\n\n\t\t\tthis.#steps.get(this.#currentStepId).onBeforeNextStep()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.#breadcrumbs.next();\n\n\t\t\t\t\tthis.#currentStepId = (\n\t\t\t\t\t\tthis.#sequenceSteps.at(this.#sequenceSteps.indexOf(this.#currentStepId) + 1)\n\t\t\t\t\t);\n\t\t\t\t\tthis.#updateContent();\n\n\t\t\t\t\tthis.#buttons.next();\n\t\t\t\t\tthis.#resolveButtonsEnableState();\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.#resolveButtonsEnableState();\n\t\t\t\t\tif (error)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\t#back()\n\t{\n\t\tthis.#cleanErrors();\n\n\t\tif (this.#isPreviousStepEnable())\n\t\t{\n\t\t\tthis.#breadcrumbs.back();\n\n\t\t\tthis.#currentStepId = this.#sequenceSteps.at(this.#sequenceSteps.indexOf(this.#currentStepId) - 1);\n\t\t\tthis.#updateContent();\n\n\t\t\tthis.#buttons.back();\n\t\t\tthis.#resolveButtonsEnableState();\n\t\t}\n\t}\n\n\t#fastStart()\n\t{\n\t\tthis.#cleanErrors();\n\t\tif (this.#isNextStepEnable())\n\t\t{\n\t\t\tthis.#markButtonsOnBeforeNextStep();\n\n\t\t\tconst data = {\n\t\t\t\ttemplateId: this.#templateId,\n\t\t\t\tsignedDocumentType: this.#signedDocumentType,\n\t\t\t\tsignedDocumentId: this.#signedDocumentId,\n\t\t\t\tstartDuration: Math.round(Date.now() / 1000) - this.#startTime,\n\t\t\t};\n\n\t\t\tstartWorkflowAction(data)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.#canExit = true;\n\t\t\t\t\tthis.#next();\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.#errorNotifier.errors = response.errors;\n\t\t\t\t\tthis.#errorNotifier.show();\n\t\t\t\t\tthis.#resolveButtonsEnableState();\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\t#markButtonsOnBeforeNextStep()\n\t{\n\t\tthis.#buttons.resolveWaitingState({ start: true, next: true });\n\t\tthis.#buttons.resolveEnableState({ back: false });\n\t}\n\n\t#cleanErrors(): void\n\t{\n\t\tthis.#errorNotifier.errors = [];\n\t\tthis.#errorNotifier.clean();\n\t}\n\n\t#isNextStepEnable(): boolean\n\t{\n\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\n\t\treturn (\n\t\t\tindex !== -1\n\t\t\t&& Type.isStringFilled(this.#sequenceSteps.at(index + 1))\n\t\t\t&& this.#steps.get(this.#currentStepId).isNextEnabled()\n\t\t);\n\t}\n\n\t#isPreviousStepEnable(): boolean\n\t{\n\t\tconst index = this.#sequenceSteps.indexOf(this.#currentStepId);\n\n\t\treturn (\n\t\t\tindex !== -1\n\t\t\t&& index - 1 >= 0\n\t\t\t&& Type.isStringFilled(this.#sequenceSteps.at(index - 1))\n\t\t\t&& this.#steps.get(this.#currentStepId).isBackEnabled()\n\t\t);\n\t}\n\n\t#exit()\n\t{\n\t\tif (BX.SidePanel.Instance.getSliderByWindow(window))\n\t\t{\n\t\t\tBX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t}\n\t}\n\n\t#composeData(\n\t\tconfig: SingleStartData,\n\t): Object<string, { breadcrumbs: BreadcrumbsItemData, step: Step, buttons: Array<Button> }>\n\t{\n\t\tconst data = {\n\t\t\trecommendation: this.#getRecommendationData(config),\n\t\t};\n\n\t\tif (!config.isConstantsTuned)\n\t\t{\n\t\t\tdata.constants = this.#getConstantsData(config);\n\t\t}\n\n\t\tif (config.hasParameters)\n\t\t{\n\t\t\tdata.parameters = this.#getParametersData(config);\n\t\t}\n\n\t\tdata.start = this.#getStartData(config);\n\n\t\treturn data;\n\t}\n\n\t#getRecommendationData(config: SingleStartData): {}\n\t{\n\t\tconst isFastStart = config.isConstantsTuned && !config.hasParameters;\n\n\t\treturn {\n\t\t\tbreadcrumbs: {\n\t\t\t\tid: 'recommendation',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_STEP_RECOMMENDATION'),\n\t\t\t\tactive: true,\n\t\t\t},\n\t\t\tstep: new RecommendationStep({\n\t\t\t\tname: config.name,\n\t\t\t\trecommendation: config.description,\n\t\t\t\tduration: config.duration,\n\t\t\t}),\n\t\t\tbuttons: [\n\t\t\t\tButtons.createBackButton(this.#exit.bind(this)),\n\t\t\t\t(\n\t\t\t\t\tisFastStart\n\t\t\t\t\t\t? Buttons.createStartButton(this.#fastStart.bind(this))\n\t\t\t\t\t\t: Buttons.createNextButton(this.#next.bind(this))\n\t\t\t\t),\n\t\t\t],\n\t\t};\n\t}\n\n\t#getConstantsData(config: SingleStartData): {}\n\t{\n\t\treturn {\n\t\t\tbreadcrumbs: {\n\t\t\t\tid: 'constants',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_STEP_CONSTANTS'),\n\t\t\t\tactive: false,\n\t\t\t},\n\t\t\tstep: new ConstantsStep({\n\t\t\t\tname: config.name,\n\t\t\t\ttemplateId: config.id,\n\t\t\t\tconstants: config.constants,\n\t\t\t\tdocumentType: config.documentType,\n\t\t\t\tsignedDocumentType: config.signedDocumentType,\n\t\t\t\tsignedDocumentId: config.signedDocumentId,\n\t\t\t}),\n\t\t\tbuttons: [\n\t\t\t\tButtons.createBackButton(this.#back.bind(this)),\n\t\t\t\t(\n\t\t\t\t\tconfig.hasParameters\n\t\t\t\t\t\t? Buttons.createNextButton(this.#next.bind(this))\n\t\t\t\t\t\t: Buttons.createStartButton(this.#fastStart.bind(this))\n\t\t\t\t),\n\t\t\t],\n\t\t};\n\t}\n\n\t#getParametersData(config: SingleStartData): {}\n\t{\n\t\treturn {\n\t\t\tbreadcrumbs: {\n\t\t\t\tid: 'parameters',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_STEP_PARAMETERS'),\n\t\t\t\tactive: false,\n\t\t\t},\n\t\t\tstep: new ParametersStep({\n\t\t\t\tname: config.name,\n\t\t\t\ttemplateId: config.id,\n\t\t\t\tparameters: config.parameters,\n\t\t\t\tdocumentType: config.documentType,\n\t\t\t\tsignedDocumentId: config.signedDocumentId,\n\t\t\t\tsignedDocumentType: config.signedDocumentType,\n\t\t\t}),\n\t\t\tbuttons: [\n\t\t\t\tButtons.createBackButton(this.#back.bind(this)),\n\t\t\t\tButtons.createStartButton(this.#next.bind(this)), // slow start\n\t\t\t],\n\t\t};\n\t}\n\n\t#getStartData(config: SingleStartData): {}\n\t{\n\t\treturn {\n\t\t\tbreadcrumbs: {\n\t\t\t\tid: 'start',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_STEP_START'),\n\t\t\t\tactive: false,\n\t\t\t},\n\t\t\tstep: new SuccessStartStep({ name: config.name }),\n\t\t\tbuttons: [],\n\t\t};\n\t}\n\n\t#subscribeOnSliderClose()\n\t{\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tif (slider)\n\t\t{\n\t\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tif (!this.#canExit)\n\t\t\t\t{\n\t\t\t\t\tconst canExit = (\n\t\t\t\t\t\t[...this.#steps.values()].every((step) => (step ? step.canExit() : true))\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!canExit)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.getCompatData()[0].denyAction();\n\t\t\t\t\t\tif (!this.#isExitInProcess)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#isExitInProcess = true;\n\t\t\t\t\t\t\tshowExitDialog(\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tthis.#canExit = true;\n\t\t\t\t\t\t\t\t\tslider.close();\n\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tthis.#isExitInProcess = false;\n\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport function showCancelDialog(onConfirm: Function, onCancel: ?Function): void\n{\n\tconst messageBox = MessageBox.confirm(\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_EXIT_DIALOG_DESCRIPTION'),\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_EXIT_DIALOG_TITLE'),\n\t\tonConfirm,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_EXIT_DIALOG_CONFIRM'),\n\t\tType.isFunction(onCancel) ? onCancel : () => true,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_EXIT_DIALOG_CANCEL'),\n\t);\n\n\tif (Type.isFunction(onCancel))\n\t{\n\t\tconst popup = messageBox.getPopupWindow();\n\t\tpopup.subscribe('onClose', onCancel);\n\t}\n}\n","import { Tag, Loc, Type, Text, ajax } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button, ButtonColor } from 'ui.buttons';\n\nimport { Breadcrumbs } from '../components/breadcrumbs';\nimport { ErrorNotifier } from '../components/error-notifier';\nimport { Header } from '../components/header';\nimport { Buttons } from '../components/buttons';\n\nimport { addMissingFormDataValues } from '../helpers/add-missing-form-data-values';\nimport { renderBpForm } from '../helpers/render-bp-form';\n\nimport { showCancelDialog } from './helpers/show-cancel-dialog';\n\nimport type { AutostartData, TemplateData } from './types/autostart-data';\n\nimport '../css/style.css';\nimport '../css/form.css';\n\nconst FORM_NAME = 'bizproc-ws-autostart';\nconst HTML_ELEMENT_ID = 'bizproc-workflow-start-autostart';\n\nexport class Autostart\n{\n\t#header: Header;\n\t#breadcrumbs: Breadcrumbs;\n\t#buttons: Buttons;\n\t#errorNotifier: ErrorNotifier;\n\n\t#templates: Array<TemplateData>;\n\t#documentType: [];\n\t#signedDocumentType: string;\n\t#signedDocumentId: ?string;\n\t#autoExecute: number;\n\n\t#forms: [] = [];\n\t#canExit: boolean = false;\n\t#isExitInProcess: boolean = false;\n\n\tconstructor(config: AutostartData)\n\t{\n\t\tthis.#header = new Header({\n\t\t\ttitle: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_TITLE'),\n\t\t\tdescription: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_DESCRIPTION'),\n\t\t});\n\n\t\tthis.#breadcrumbs = new Breadcrumbs({\n\t\t\titems: [{\n\t\t\t\tid: 'autostart',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_AUTOSTART_STEP_AUTOSTART_TITLE'),\n\t\t\t\tactive: true,\n\t\t\t}],\n\t\t});\n\n\t\tthis.#buttons = new Buttons({\n\t\t\tbuttons: {\n\t\t\t\tautostart: [\n\t\t\t\t\tButtons.createBackButton(this.#exit.bind(this)),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\tid: 'save',\n\t\t\t\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_BUTTON_SAVE')),\n\t\t\t\t\t\tonclick: this.#save.bind(this),\n\t\t\t\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t},\n\t\t\twrapper: document.getElementById(`${HTML_ELEMENT_ID}-buttons`).querySelector('.ui-button-panel'),\n\t\t});\n\n\t\tthis.#errorNotifier = new ErrorNotifier({});\n\n\t\tif (Type.isArrayFilled(config.templates))\n\t\t{\n\t\t\tthis.#templates = config.templates;\n\t\t}\n\n\t\tthis.#documentType = config.documentType;\n\t\tthis.#signedDocumentType = config.signedDocumentType;\n\t\tthis.#signedDocumentId = config.signedDocumentId || null;\n\t\tthis.#autoExecute = Text.toInteger(config.autoExecuteType);\n\n\t\tthis.#subscribeOnSliderClose();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start\">\n\t\t\t\t${this.#header.render()}\n\t\t\t\t<div class=\"bizproc__ws_start__body\">\n\t\t\t\t\t${this.#breadcrumbs.render()}\n\t\t\t\t\t<div class=\"bizproc__ws_start__container\">\n\t\t\t\t\t\t${this.#errorNotifier.render()}\n\t\t\t\t\t\t<div class=\"bizproc__ws_start__content\">\n\t\t\t\t\t\t\t<div class=\"bizproc__ws_start__content-body\">\n\t\t\t\t\t\t\t\t${this.#templates.map((template) => this.#renderForm(template))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonAfterRender()\n\t{\n\t\tthis.#buttons.show();\n\t}\n\n\t#renderForm(template: TemplateData): HTMLElement\n\t{\n\t\tconst form = renderBpForm(\n\t\t\t`${FORM_NAME}_${template.id}`,\n\t\t\ttemplate.name,\n\t\t\ttemplate.parameters,\n\t\t\tthis.#documentType,\n\t\t\ttemplate.description,\n\t\t);\n\n\t\tthis.#forms.push(form);\n\n\t\treturn Tag.render`<div class=\"bizproc__ws_start__content-form\">${form}</div>`;\n\t}\n\n\t#exit()\n\t{\n\t\tif (BX.SidePanel.Instance.getSliderByWindow(window))\n\t\t{\n\t\t\tBX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t}\n\t}\n\n\t#save()\n\t{\n\t\tthis.#buttons.resolveWaitingState({ save: true });\n\n\t\tconst data = new FormData();\n\t\tthis.#forms.forEach((form) => {\n\t\t\taddMissingFormDataValues(data, new FormData(form));\n\t\t});\n\t\tdata.set('signedDocumentType', this.#signedDocumentType);\n\t\tif (this.#signedDocumentId)\n\t\t{\n\t\t\tdata.set('signedDocumentId', this.#signedDocumentId);\n\t\t}\n\t\tdata.set('autoExecuteType', this.#autoExecute);\n\n\t\tajax.runAction('bizproc.workflow.starter.checkParameters', { data })\n\t\t\t.then((response) => {\n\t\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\t\tif (slider)\n\t\t\t\t{\n\t\t\t\t\tconst dictionary: BX.SidePanel.Dictionary = slider.getData();\n\t\t\t\t\tdictionary.set('data', { signedParameters: response.data.parameters });\n\t\t\t\t}\n\n\t\t\t\tthis.#canExit = true;\n\t\t\t\tthis.#exit();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.#errorNotifier.errors = response.errors;\n\t\t\t\tthis.#errorNotifier.show();\n\t\t\t\tthis.#buttons.resolveWaitingState({ save: false });\n\t\t\t})\n\t\t;\n\t}\n\n\t#subscribeOnSliderClose()\n\t{\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tif (slider)\n\t\t{\n\t\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tif (!this.#canExit)\n\t\t\t\t{\n\t\t\t\t\tevent.getCompatData()[0].denyAction();\n\n\t\t\t\t\tif (!this.#isExitInProcess)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#isExitInProcess = true;\n\t\t\t\t\t\tshowCancelDialog(\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.#canExit = true;\n\t\t\t\t\t\t\t\tslider.close();\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.#isExitInProcess = false;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport function showCancelDialog(onConfirm: Function, onCancel: ?Function): void\n{\n\tconst messageBox = MessageBox.confirm(\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_EXIT_DIALOG_DESCRIPTION'),\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_EXIT_DIALOG_TITLE'),\n\t\tonConfirm,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_EXIT_DIALOG_CONFIRM'),\n\t\tType.isFunction(onCancel) ? onCancel : () => true,\n\t\tLoc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_EXIT_DIALOG_CANCEL'),\n\t);\n\n\tif (Type.isFunction(onCancel))\n\t{\n\t\tconst popup = messageBox.getPopupWindow();\n\t\tpopup.subscribe('onClose', onCancel);\n\t}\n}\n","import { Tag, Loc, Text, ajax, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button, ButtonColor } from 'ui.buttons';\n\nimport { Breadcrumbs } from '../components/breadcrumbs';\nimport { ErrorNotifier } from '../components/error-notifier';\nimport { Header } from '../components/header';\nimport { Buttons } from '../components/buttons';\n\nimport { addMissingFormDataValues } from '../helpers/add-missing-form-data-values';\nimport { isEqualsFormData } from '../helpers/is-equals-form-data';\nimport { renderBpForm } from '../helpers/render-bp-form';\nimport type { Property } from '../types/property';\n\nimport { showCancelDialog } from './helpers/show-cancel-dialog';\n\nimport type { EditConstantsData } from './types/edit-constants-data';\n\nimport '../css/style.css';\nimport '../css/form.css';\n\nconst FORM_NAME = 'bizproc-ws-edit-constants';\nconst HTML_ELEMENT_ID = 'bizproc-workflow-start-edit-constants';\n\nexport class EditConstants\n{\n\t#header: Header;\n\t#breadcrumbs: Breadcrumbs;\n\t#buttons: Buttons;\n\t#errorNotifier: ErrorNotifier;\n\n\t#constants: Array<Property>;\n\t#documentType: [] = null;\n\t#signedDocumentType: string;\n\t#templateId: number;\n\t#templateName: string;\n\n\t#form: HTMLFormElement;\n\t#canExit: boolean = false;\n\t#isExitInProcess: boolean = false;\n\n\t#originalFormData: FormData = null;\n\n\tconstructor(config: EditConstantsData)\n\t{\n\t\tthis.#header = new Header({\n\t\t\ttitle: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_TITLE'),\n\t\t\tdescription: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_DESCRIPTION'),\n\t\t});\n\n\t\tthis.#breadcrumbs = new Breadcrumbs({\n\t\t\titems: [{\n\t\t\t\tid: 'edit-constants',\n\t\t\t\ttext: Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_EDIT_CONSTANTS_STEP_AUTOSTART_TITLE'),\n\t\t\t\tactive: true,\n\t\t\t}],\n\t\t});\n\n\t\tthis.#buttons = new Buttons({\n\t\t\tbuttons: {\n\t\t\t\tedit: [\n\t\t\t\t\tButtons.createBackButton(this.#exit.bind(this)),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\tid: 'save',\n\t\t\t\t\t\ttext: Text.encode(Loc.getMessage('BIZPROC_CMP_WORKFLOW_START_TMP_SINGLE_START_BUTTON_SAVE')),\n\t\t\t\t\t\tonclick: this.#handleSaveClick.bind(this),\n\t\t\t\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t},\n\t\t\twrapper: document.getElementById(`${HTML_ELEMENT_ID}-buttons`).querySelector('.ui-button-panel'),\n\t\t});\n\t\tthis.#buttons.show();\n\n\t\tthis.#errorNotifier = new ErrorNotifier({});\n\n\t\tthis.#documentType = config.documentType;\n\t\tthis.#signedDocumentType = config.signedDocumentType;\n\t\tthis.#templateId = Text.toInteger(config.templateId);\n\t\tthis.#templateName = config.templateName;\n\t\tthis.#constants = config.constants;\n\n\t\tthis.#subscribeOnSliderClose();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bizproc__ws_start\">\n\t\t\t\t${this.#header.render()}\n\t\t\t\t<div class=\"bizproc__ws_start__body\">\n\t\t\t\t\t${this.#breadcrumbs.render()}\n\t\t\t\t\t<div class=\"bizproc__ws_start__container\">\n\t\t\t\t\t\t${this.#errorNotifier.render()}\n\t\t\t\t\t\t<div class=\"bizproc__ws_start__content\">\n\t\t\t\t\t\t\t<div class=\"bizproc__ws_start__content-body\">\n\t\t\t\t\t\t\t\t${this.#renderConstants()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderConstants(): HTMLElement\n\t{\n\t\tthis.#form = renderBpForm(\n\t\t\tFORM_NAME,\n\t\t\tthis.#templateName,\n\t\t\tthis.#constants,\n\t\t\tthis.#documentType,\n\t\t\tnull,\n\t\t\tnull,\n\t\t);\n\t\tDom.append(this.#renderErrors(), this.#form);\n\n\t\tthis.#originalFormData = new FormData(this.#form);\n\t\tthis.#subscribeOnRenderEvents();\n\n\t\treturn Tag.render`<div class=\"bizproc__ws_start__content-form\">${this.#form}</div>`;\n\t}\n\n\t#renderErrors(): HTMLElement\n\t{\n\t\treturn this.#errorNotifier.render();\n\t}\n\n\t#subscribeOnRenderEvents(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCustomRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Bizproc.FieldType.onCollectionRenderControlFinished',\n\t\t\tthis.#onAfterFieldCollectionRenderer.bind(this),\n\t\t);\n\t}\n\n\t#onAfterFieldCollectionRenderer()\n\t{\n\t\tif (this.#originalFormData && document.forms.namedItem(FORM_NAME))\n\t\t{\n\t\t\taddMissingFormDataValues(this.#originalFormData, new FormData(document.forms.namedItem(FORM_NAME)));\n\t\t}\n\t}\n\n\t#handleSaveClick(button: Button)\n\t{\n\t\tbutton.setWaiting(true);\n\t\tthis.#errorNotifier.clean();\n\n\t\tconst data = new FormData(this.#form);\n\t\tdata.set('templateId', this.#templateId);\n\t\tdata.set('signedDocumentType', this.#signedDocumentType);\n\n\t\tajax.runAction('bizproc.workflow.starter.setConstants', { data })\n\t\t\t.then(() => {\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t\tthis.#canExit = true;\n\t\t\t\tthis.#exit();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.#errorNotifier.errors = response.errors;\n\t\t\t\tthis.#errorNotifier.show();\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t})\n\t\t;\n\t}\n\n\t#exit()\n\t{\n\t\tif (BX.SidePanel.Instance.getSliderByWindow(window))\n\t\t{\n\t\t\tBX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t}\n\t}\n\n\t#subscribeOnSliderClose()\n\t{\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tif (slider)\n\t\t{\n\t\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onClose', (event) => {\n\t\t\t\tif (!this.#canExit && this.#isChangedConstants())\n\t\t\t\t{\n\t\t\t\t\tevent.getCompatData()[0].denyAction();\n\n\t\t\t\t\tif (!this.#isExitInProcess)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#isExitInProcess = true;\n\t\t\t\t\t\tshowCancelDialog(\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.#canExit = true;\n\t\t\t\t\t\t\t\tslider.close();\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.#isExitInProcess = false;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t#isChangedConstants(): boolean\n\t{\n\t\tif (!this.#originalFormData)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !isEqualsFormData(new FormData(this.#form), this.#originalFormData);\n\t}\n}\n"],"names":["Header","constructor","config","Type","isStringFilled","title","description","render","Tag","icon","Icon","Main","BUSINESS_PROCESS_1","size","color","Text","encode","Breadcrumbs","Map","isArrayFilled","items","TypeError","forEach","item","set","id","push","active","at","entries","map","key","next","index","indexOf","back","stepId","has","text","get","Dom","removeClass","addClass","Buttons","createNextButton","action","Button","Loc","getMessage","onclick","ButtonColor","PRIMARY","createBackButton","LIGHT_BORDER","createStartButton","isPlainObject","buttons","Object","currentStepId","wrapper","show","clean","button","renderTo","hide","resolveEnableState","enable","isBoolean","getId","setDisabled","resolveWaitingState","waiting","setWaiting","ErrorNotifier","props","errors","isArray","scrollToElement","append","BX","scrollToNode","message","error","join","Alert","AlertColor","DANGER","showExitDialog","onConfirm","onCancel","messageBox","MessageBox","confirm","isFunction","popup","getPopupWindow","subscribe","addMissingFormDataValues","target","source","addedKeys","Set","value","add","isEqualsFormData","form1","form2","keys","values1","getAll","values2","length","singleKey","value1","value2","isFile","name","renderBpForm","formName","fields","documentType","signedDocumentId","context","isStartWorkflow","controls","Bizproc","FieldType","renderControlCollection","field","property","fieldName","Id","Default","controlId","control","isElementNode","renderControlPublic","renderBpFieldForForm","toBoolean","Required","Name","Step","EventEmitter","setEventNamespace","Error","renderHead","renderBody","renderFooter","isNextEnabled","onBeforeNextStep","Promise","resolve","isBackEnabled","onChangeStepAvailability","emit","onAfterRender","canExit","StepWithErrors","errorNotifier","renderErrors","showErrors","cleanErrors","FORM_NAME","ConstantsStep","signedDocumentType","toInteger","templateId","constants","FormData","WARNING","AlertIcon","INFO","bind","document","forms","namedItem","ButtonSize","EXTRA_SMALL","SECONDARY","data","ajax","runAction","then","catch","response","startWorkflowAction","reject","slider","SidePanel","Instance","getSliderByWindow","window","dictionary","getData","workflowId","ParametersStep","parameters","Math","round","Date","now","RecommendationStep","String","recommendation","trim","isNil","duration","querySelector","offsetHeight","innerHeight","Event","unbindAll","remove","util","nl2br","toggleClass","innerText","hasClass","height","scrollHeight","style","formattedDuration","DateTimeFormat","format","CLOSE_SLIDER_AFTER_SECONDS","SuccessStartStep","setTimeout","close","HTML_ELEMENT_ID","SingleStart","composedData","values","breadcrumbs","step","fromEntries","getElementById","start","content","replace","console","startDuration","isConstantsTuned","hasParameters","isFastStart","event","every","getCompatData","denyAction","showCancelDialog","Autostart","autostart","templates","autoExecuteType","template","form","save","signedParameters","EditConstants","edit","templateName"],"mappings":"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"}