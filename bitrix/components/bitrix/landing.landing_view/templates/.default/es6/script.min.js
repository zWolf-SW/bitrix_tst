this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,t,i,a,n,l,r,s,o,c,d,u){"use strict";var h=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"loadMessages",value:function t(i){e.messages=i}},{key:"getMessage",value:function t(i){return e.messages[i]}}]);return e}();var v={defaultDevice:{tablet:"iphone14pro",mobile:"iphone14pro"},devices:{delimiter1:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_MOBILES"},iphone14pro:{name:"iPhone 14 Pro",code:"iphone14pro",className:"--iphone-14-pro",width:393,height:852},iPhoneXR:{name:"iPhone XR",code:"iPhoneXR",className:"--iphone-xr",width:414,height:896},iPhoneSE:{name:"iPhone SE",code:"iPhoneSE",className:"--iphone-se",width:375,height:667},SamsungGalaxyNote10:{name:"Samsung Galaxy Note10",code:"SamsungGalaxyNote10",className:"--samsung-galaxy-note10",width:412,height:896},SamsungGalaxyS8:{name:"Samsung Galaxy S8+",code:"SamsungGalaxyS8",className:"--samsung-galaxy-s8-plus",width:360,height:740},GooglePixel4:{name:"Google Pixel 4",code:"GooglePixel4",className:"--google-pixel-4",width:353,height:745},delimiter2:{code:"delimiter",langCode:"LANDING_PREVIEW_DEVICE_TABLETS"},iPad:{name:"iPad",code:"iPad",className:"--ipad",width:810,height:1080},iPadMini:{name:"iPad Mini",code:"iPadMini",className:"--ipad-mini",width:744,height:1133},SamsungGalaxyTabS8:{name:"Samsung Galaxy Tab S8",code:"SamsungGalaxyTabS8",className:"--samsung-galaxy-tab-s8",width:800,height:1280}}};var p,b,f;var g=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"getPreview",value:function t(i){if(i.messages){e.messages=i.messages}if(!localStorage.getItem("deviceOrientation")){localStorage.setItem("deviceOrientation","portrait")}var n=function e(){if(localStorage.getItem("deviceOrientation")==="portrait"){localStorage.setItem("deviceOrientation","landscape")}else{localStorage.setItem("deviceOrientation","portrait")}a.Dom.style(r.wrapper,"width","".concat(r.wrapper.offsetHeight,"px"));a.Dom.style(r.wrapper,"height","".concat(r.wrapper.offsetWidth,"px"));a.Dom.style(r.frame,"width","".concat(r.frame.offsetHeight,"px"));a.Dom.style(r.frame,"height","".concat(r.frame.offsetWidth,"px"));r.wrapper.querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation")};var l=localStorage.getItem("deviceHidden")==="true";var r={wrapper:null,rotate:a.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['<div class="landing-device-rotate" onclick="','" data-role="landing-device-rotate"></div>'])),n),frame:a.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['<iframe data-role="landing-device-preview-iframe" src="','"></iframe>'])),i.frameUrl)};r.wrapper=a.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-device-wrapper','">\n\t\t\t\t<div class="landing-device-name" onclick="','">\n\t\t\t\t\t<span data-role="device-name">Device</span>\n\t\t\t\t\t<span data-role="device-orientation" class="landing-device-orientation">Orientation</span>\n\t\t\t\t</div>\n\t\t\t\t','\n\t\t\t\t<div class="landing-device-preview" data-role="landing-device-preview">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),l?" landing-device-wrapper-hidden":"",i.clickHandler,r.rotate,r.frame);return r.wrapper}},{key:"openDeviceMenu",value:function i(a,n,l){var r="device_selector";var s=t.MenuManager.getMenuById(r);if(s){s.show();return}var o=[];n.forEach((function(i){if(i.code==="delimiter"){o.push(new t.MenuItem({delimiter:true,text:i.langCode?e.messages[i.langCode]:""}));return}o.push(new t.MenuItem({id:i.className,html:String(i.name),onclick:function e(){t.MenuManager.getMenuById(r).close();l(i)}}))}));var c=a.parentNode||document.body;s=t.MenuManager.create({id:r,bindElement:c,className:"landing-ui-block-actions-popup",items:o,offsetTop:0,offsetLeft:40,minWidth:c.offsetWidth,animation:"fading-slide",events:{onPopupShow:function e(){s.getPopupWindow().setMinWidth(c.offsetWidth)}}});s.show()}}]);return e}();var m;function y(e,t){k(e,t);t.add(e)}function w(e,t,i){k(e,t);t.set(e,i)}function k(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function P(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var H=new WeakMap;var C=new WeakMap;var S=new WeakMap;var T=new WeakMap;var F=new WeakMap;var G=new WeakMap;var E=new WeakMap;var I=new WeakMap;var L=new WeakMap;var B=new WeakMap;var _=new WeakSet;var M=new WeakSet;var x=new WeakSet;var N=new WeakSet;var O=new WeakSet;var D=new WeakSet;var W=new WeakSet;var A=new WeakSet;var j=new WeakSet;var X=new WeakSet;var z=new WeakSet;var U=new WeakSet;var R=new WeakSet;var V=new WeakSet;var q=function e(t){babelHelpers.classCallCheck(this,e);y(this,V);y(this,R);y(this,U);y(this,z);y(this,X);y(this,j);y(this,A);y(this,W);y(this,D);y(this,O);y(this,N);y(this,x);y(this,M);y(this,_);w(this,H,{writable:true,value:void 0});w(this,C,{writable:true,value:void 0});w(this,S,{writable:true,value:void 0});w(this,T,{writable:true,value:void 0});w(this,F,{writable:true,value:void 0});w(this,G,{writable:true,value:void 0});w(this,E,{writable:true,value:null});w(this,I,{writable:true,value:false});w(this,L,{writable:true,value:false});w(this,B,{writable:true,value:["Landing::upBlock","Landing::downBlock","Landing::showBlock","Landing::hideBlock","Landing::markDeletedBlock","Landing::addBlock","Landing::copyBlock","Landing::moveBlock","Block::changeNodeName","Block::updateContent","Block::getContent","Landing\\Block::addCard","Landing\\Block::cloneCard","Landing\\Block::removeCard","Landing\\Block::updateNodes","Landing\\Block::updateStyles","Landing\\Block::saveForm"]});this.target=t.target||document.body;babelHelpers.classPrivateFieldSet(this,C,t.frameUrl);babelHelpers.classPrivateFieldSet(this,S,t.editorFrameWrapper);babelHelpers.classPrivateFieldSet(this,H,t);P(this,_,K).call(this,t);P(this,z,ne).call(this,t);P(this,R,re).call(this);P(this,j,ie).call(this,P(this,O,Q).call(this,"mobile"))};function K(e){var t=this;BX.addCustomEvent("BX.Landing.Main:editorSizeChange",(function(e){P(t,j,ie).call(t,P(t,O,Q).call(t,e))}));window.addEventListener("message",(function(e){var i=e.data||{};if(i.action==="editorenable"){if(!!i.payload.enable){babelHelpers.classPrivateFieldSet(t,I,true)}else{if(babelHelpers.classPrivateFieldGet(t,L)){P(t,x,$).call(t)}babelHelpers.classPrivateFieldSet(t,I,false);babelHelpers.classPrivateFieldSet(t,L,false)}}else if(i.action==="backendaction"){P(t,M,Y).call(t,i.payload)}}))}function Y(e){if(babelHelpers.classPrivateFieldGet(this,B).includes(e.action)){if(babelHelpers.classPrivateFieldGet(this,I)){babelHelpers.classPrivateFieldSet(this,L,true)}else{var t,i,a,n;var l=null;if((t=e.data)!==null&&t!==void 0&&t.block){var r;l=(r=e.data)===null||r===void 0?void 0:r.block}if((i=e.data)!==null&&i!==void 0&&(a=i.updateNodes)!==null&&a!==void 0&&(n=a.data)!==null&&n!==void 0&&n.block){var s,o,c;l=(s=e.data)===null||s===void 0?void 0:(o=s.updateNodes)===null||o===void 0?void 0:(c=o.data)===null||c===void 0?void 0:c.block}P(this,x,$).call(this,l)}}}function $(e){if(babelHelpers.classPrivateFieldGet(this,F)){var t="editor";var i=Date.now();babelHelpers.classPrivateFieldGet(this,F).location.href=babelHelpers.classPrivateFieldGet(this,C)+"?ts="+i+"&scrollTo="+t+e}}function J(e){if(babelHelpers.classPrivateFieldGet(this,F)){var t=babelHelpers.classPrivateFieldGet(this,F).document;var i=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight);babelHelpers.classPrivateFieldGet(this,F).scroll(0,i*e/100)}}function Q(e){var t;var i=localStorage.getItem("deviceCode");if(i&&v.devices[i]){return v.devices[i]}i=(t=v.defaultDevice)===null||t===void 0?void 0:t[e];if(!i){return}return v.devices[i]}function Z(){if(!babelHelpers.classPrivateFieldGet(this,G)){h.loadMessages(babelHelpers.classPrivateFieldGet(this,H).messages);babelHelpers.classPrivateFieldSet(this,G,a.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-device-loader">\n\t\t\t\t\t<div class="landing-device-loader-icon"></div>\n\t\t\t\t\t<div class="landing-device-loader-text">',"</div>\n\t\t\t\t</div>\n\t\t\t"])),h.getMessage("LANDING_TPL_PREVIEW_LOADING")))}return babelHelpers.classPrivateFieldGet(this,G)}function ee(e){if(!e){return}a.Dom.append(P(this,D,Z).call(this),e)}function te(){var e=this;a.Dom.addClass(P(this,D,Z).call(this),"--hide");a.Event.bind(P(this,D,Z).call(this),"transitionend",(function(){a.Dom.remove(P(e,D,Z).call(e))}))}function ie(e){var t=this;if(!e){return}localStorage.setItem("deviceCode",e.code);if(babelHelpers.classPrivateFieldGet(this,E)){a.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,T),babelHelpers.classPrivateFieldGet(this,E).className);babelHelpers.classPrivateFieldGet(this,T).style.removeProperty("top")}babelHelpers.classPrivateFieldSet(this,E,e);babelHelpers.classPrivateFieldGet(this,T).querySelector('[data-role="device-name"]').innerHTML=e.name;babelHelpers.classPrivateFieldGet(this,T).querySelector('[data-role="device-orientation"]').innerHTML=localStorage.getItem("deviceOrientation");var i=babelHelpers.classPrivateFieldGet(this,T).querySelector('[data-role="landing-device-preview-iframe"]');var n=babelHelpers.classPrivateFieldGet(this,T).querySelector('[data-role="landing-device-preview"]');i.onload=function(){return P(t,A,te).call(t)};if(i&&n&&babelHelpers.classPrivateFieldGet(this,E).width&&babelHelpers.classPrivateFieldGet(this,E).height){var l=window.innerHeight/(babelHelpers.classPrivateFieldGet(this,E).height+300);var r=parseInt(window.getComputedStyle(n).padding);var s=babelHelpers.classPrivateFieldGet(this,E).width;var o=babelHelpers.classPrivateFieldGet(this,E).height;if(localStorage.getItem("deviceOrientation")==="landscape"){s=babelHelpers.classPrivateFieldGet(this,E).height;o=babelHelpers.classPrivateFieldGet(this,E).width}i.style.setProperty("width","".concat(s,"px"));i.style.setProperty("height","".concat(o,"px"));n.style.setProperty("transform","scale(".concat(l,")"));babelHelpers.classPrivateFieldGet(this,T).style.setProperty("width","".concat((s+r*2)*l,"px"));babelHelpers.classPrivateFieldGet(this,T).style.setProperty("height","".concat((o+r*2)*l,"px"))}a.Dom.addClass(babelHelpers.classPrivateFieldGet(this,T),babelHelpers.classPrivateFieldGet(this,E).className)}function ae(){var e=babelHelpers.classPrivateFieldGet(this,S).querySelector("iframe").contentWindow.document;var t=Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight);var i=e.documentElement.scrollTop||e.body.scrollTop;P(this,N,J).call(this,i/t*100)}function ne(e){if(!babelHelpers.classPrivateFieldGet(this,T)){babelHelpers.classPrivateFieldSet(this,T,g.getPreview({frameUrl:e.frameUrl,clickHandler:P(this,U,le).bind(this),messages:e.messages}));a.Dom.hide(babelHelpers.classPrivateFieldGet(this,T));this.target.appendChild(babelHelpers.classPrivateFieldGet(this,T));if(!babelHelpers.classPrivateFieldGet(this,F)){babelHelpers.classPrivateFieldSet(this,F,babelHelpers.classPrivateFieldGet(this,T).querySelector("iframe").contentWindow);var t=babelHelpers.classPrivateFieldGet(this,T).querySelector("iframe").contentWindow.document;a.Dom.removeClass(t.querySelector("html"),"bx-no-touch");a.Dom.addClass(t.querySelector("html"),"bx-touch")}P(this,X,ae).call(this)}}function le(){g.openDeviceMenu(babelHelpers.classPrivateFieldGet(this,T).querySelector('[data-role="device-name"]'),Object.values(v.devices),P(this,j,ie).bind(this))}function re(){a.Dom.show(babelHelpers.classPrivateFieldGet(this,T));P(this,W,ee).call(this,babelHelpers.classPrivateFieldGet(this,T))}function se(e,t){ce(e,t);t.add(e)}function oe(e,t,i){ce(e,t);t.set(e,i)}function ce(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function de(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ue=new WeakMap;var he=new WeakSet;var ve=function(){function e(t){babelHelpers.classCallCheck(this,e);se(this,he);oe(this,ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ue,t.iframe);if(!a.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,ue))){throw new Error("Missed 'frame' option as iFrame Element.")}}babelHelpers.createClass(e,[{key:"onDesignerBlockClick",value:function e(t){de(this,he,pe).call(this,"onDesignerBlockClick",{blockId:t})}},{key:"onStyleBlockClick",value:function e(t){de(this,he,pe).call(this,"onStyleBlockClick",{blockId:t})}},{key:"onEditBlockClick",value:function e(t){de(this,he,pe).call(this,"onEditBlockClick",{blockId:t})}},{key:"onSortDownBlockClick",value:function e(t){de(this,he,pe).call(this,"onSortDownBlockClick",{blockId:t})}},{key:"onSortUpBlockClick",value:function e(t){de(this,he,pe).call(this,"onSortUpBlockClick",{blockId:t})}},{key:"onRemoveBlockClick",value:function e(t){de(this,he,pe).call(this,"onRemoveBlockClick",{blockId:t})}},{key:"onChangeStateBlockClick",value:function e(t){de(this,he,pe).call(this,"onChangeStateBlockClick",{blockId:t})}},{key:"onCutBlockClick",value:function e(t){de(this,he,pe).call(this,"onCutBlockClick",{blockId:t})}},{key:"onCopyBlockClick",value:function e(t){de(this,he,pe).call(this,"onCopyBlockClick",{blockId:t})}},{key:"onPasteBlockClick",value:function e(t){de(this,he,pe).call(this,"onPasteBlockClick",{blockId:t})}},{key:"onFeedbackClick",value:function e(t){de(this,he,pe).call(this,"onFeedbackClick",{blockId:t})}},{key:"onSaveInLibraryClick",value:function e(t){de(this,he,pe).call(this,"onSaveInLibraryClick",{blockId:t})}},{key:"onHideEditorPanel",value:function e(){de(this,he,pe).call(this,"onHideEditorPanel")}}]);return e}();function pe(e,t){babelHelpers.classPrivateFieldGet(this,ue).contentWindow.postMessage({action:e,payload:t},window.location.origin)}var be,fe,ge,me,ye,we,ke,Pe,He;var Ce=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"setPendingMenuItemValue",value:function t(i,a,n,l){if(!e.pendingMenuItems[i]){e.pendingMenuItems[i]={}}if(!e.pendingMenuItems[i][a]){e.pendingMenuItems[i][a]={}}e.pendingMenuItems[i][a][n]=l}},{key:"getPendingMenuItemValue",value:function t(i,a,n){if(e.pendingMenuItems[i]&&e.pendingMenuItems[i][a]){return e.pendingMenuItems[i][a][n]||null}return null}},{key:"getDesignerBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_DESIGNER_BLOCK");var n=a.Tag.render(be||(be=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",i,i);if(t){a.Event.bind(n,"click",t)}return n}},{key:"getStyleBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK");var n=h.getMessage("LANDING_TPL_EXT_BUTTON_STYLE_BLOCK_TITLE");var l=a.Tag.render(fe||(fe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",n,i);if(t){a.Event.bind(l,"click",t)}return l}},{key:"getEditBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK");var n=h.getMessage("LANDING_TPL_EXT_BUTTON_EDIT_BLOCK_TITLE");var l=a.Tag.render(ge||(ge=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action --separate','" type="button" title="','" data-id="content">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),t?"":" landing-ui-disabled",n,i);if(t){a.Event.bind(l,"click",t)}return l}},{key:"getLeftContainer",value:function t(i){return a.Tag.render(me||(me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-left-container">\n\t\t\t\t<div class="landing-ui-external-left-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-left-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getDesignerBlockButton(i.designerBlockClick),e.getStyleBlockButton(i.styleBlockClick),e.getEditBlockButton(i.editBlockClick))}},{key:"getSortDownBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_DOWN_BLOCK");var n=a.Tag.render(ye||(ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="down" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){a.Event.bind(n,"click",t)}return n}},{key:"getSortUpBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_UP_BLOCK");var n=a.Tag.render(we||(we=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="up" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){a.Event.bind(n,"click",t)}return n}},{key:"getBlockAdditionalMenu",value:function e(i){return t.MenuManager.getMenuById("block_actions_"+i)}},{key:"closeBlockAdditionalMenu",value:function t(i){var a=e.getBlockAdditionalMenu(i);if(a){a.close()}}},{key:"changeStateMenuItem",value:function t(i,a){var n=e.getBlockAdditionalMenu(i);var l=h.getMessage(!a?"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW":"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE");if(n){BX.Landing.Utils.setTextContent(n.getMenuItem("show_hide").getLayout()["text"],l)}else{e.setPendingMenuItemValue(i,"show_hide","state",a)}}},{key:"changePasteMenuItem",value:function t(i,a){var n=e.getBlockAdditionalMenu(i);if(n){var l=n.getMenuItem("paste");if(l){if(a){l.enable()}else{l.disable()}}}else{e.setPendingMenuItemValue(i,"paste","disabled",!a)}}},{key:"getActionsList",value:function i(n,l){var r=h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK");var s=h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_BLOCK_TITLE");var o=a.Tag.render(ke||(ke=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action" type="button" data-id="actions" title="','">\n\t\t\t\t<span class="landing-ui-button-text">',"</span>\n\t\t\t</button>\n\t\t"])),s,r);a.Event.bind(o,"click",(function(i){if(l.onOpenAdditionalMenu){l.onOpenAdditionalMenu(n);i.stopPropagation()}var a=e.getBlockAdditionalMenu(n);if(a){a.show();return}t.MenuManager.create({id:"block_actions_"+n,bindElement:o,className:"landing-ui-block-actions-popup",angle:{position:"top",offset:95},offsetTop:-6,offsetLeft:-26,items:[new t.MenuItem({id:"show_hide",disabled:!l.changeStateClick,text:h.getMessage(l.state||e.getPendingMenuItemValue(n,"show_hide","state")?"LANDING_TPL_EXT_BUTTON_ACTIONS_HIDE":"LANDING_TPL_EXT_BUTTON_ACTIONS_SHOW"),onclick:function e(){l.changeStateClick()}}),new t.MenuItem({id:"cut",disabled:!l.cutClick,text:h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_CUT"),onclick:function e(){l.cutClick()}}),new t.MenuItem({id:"copy",disabled:!l.copyClick,text:h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_COPY"),onclick:function e(){l.copyClick()}}),new t.MenuItem({id:"paste",disabled:!l.pasteClick||e.getPendingMenuItemValue(n,"paste","disabled"),text:h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_PASTE"),onclick:function e(){l.pasteClick()}}),new t.MenuItem({id:"feedback",disabled:!l.feedbackClick,text:h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_FEEDBACK"),onclick:function e(){l.feedbackClick()}}),l.saveInLibrary?new t.MenuItem({delimiter:true}):null,new t.MenuItem({id:"save_in_library",disabled:!l.saveInLibrary,text:h.getMessage("LANDING_TPL_EXT_BUTTON_ACTIONS_SAVE_IN_LIBRARY"),onclick:function e(){l.saveInLibrary()}})]}).show()}));return o}},{key:"getRemoveBlockButton",value:function e(t){var i=h.getMessage("LANDING_TPL_EXT_BUTTON_REMOVE_BLOCK");var n=a.Tag.render(Pe||(Pe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="landing-ui-button landing-ui-button-action','" type="button" data-id="remove" title="','"><span class="landing-ui-button-text">&nbsp;</span></button>\n\t\t'])),t?"":" landing-ui-disabled",i);if(t){a.Event.bind(n,"click",t)}return n}},{key:"getRightContainer",value:function t(i){return a.Tag.render(He||(He=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-external-right-container">\n\t\t\t\t<div class="landing-ui-external-right-top-hr"></div>\n\t\t\t\t<div class="landing-ui-external-body">\n\t\t\t\t\t<div class="landing-ui-external-panel">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="landing-ui-external-right-bottom-hr"></div>\n\t\t\t</div>\n\t\t'])),e.getSortDownBlockButton(i.sortDownBlockClick),e.getSortUpBlockButton(i.sortUpBlockClick),e.getActionsList(i.blockId,i),e.getRemoveBlockButton(i.removeBlockClick))}}]);return e}();babelHelpers.defineProperty(Ce,"pendingMenuItems",{});function Se(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Se(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Fe(e,t){Ee(e,t);t.add(e)}function Ge(e,t,i){Ee(e,t);t.set(e,i)}function Ee(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ie(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Le=new WeakMap;var Be=new WeakMap;var _e=new WeakMap;var Me=new WeakMap;var xe=new WeakMap;var Ne=new WeakMap;var Oe=new WeakSet;var De=new WeakSet;var We=new WeakSet;var Ae=new WeakSet;var je=new WeakSet;var Xe=new WeakSet;var ze=new WeakSet;var Ue=new WeakSet;var Re=new WeakSet;var Ve=new WeakSet;var qe=function e(t){var i=this;babelHelpers.classCallCheck(this,e);Fe(this,Ve);Fe(this,Re);Fe(this,Ue);Fe(this,ze);Fe(this,Xe);Fe(this,je);Fe(this,Ae);Fe(this,We);Fe(this,De);Fe(this,Oe);Ge(this,Le,{writable:true,value:void 0});Ge(this,Be,{writable:true,value:void 0});Ge(this,_e,{writable:true,value:void 0});Ge(this,Me,{writable:true,value:void 0});Ge(this,xe,{writable:true,value:void 0});Ge(this,Ne,{writable:true,value:void 0});t=t||{};babelHelpers.classPrivateFieldSet(this,_e,t.container);babelHelpers.classPrivateFieldSet(this,Me,t.iframeWrapper);if(!a.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,_e))){throw new Error("Missed 'container' option as Dom Node.")}if(!a.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,Me))){throw new Error("Missed 'iframe' option as Dom Node.")}babelHelpers.classPrivateFieldSet(this,Be,new Map);babelHelpers.classPrivateFieldSet(this,Le,new ve({iframe:babelHelpers.classPrivateFieldGet(this,Me).querySelector("iframe")}));h.loadMessages(t.messages);window.addEventListener("message",Ie(this,Oe,Ke).bind(this));babelHelpers.classPrivateFieldGet(this,_e).addEventListener("click",(function(e){babelHelpers.classPrivateFieldGet(i,Le).onHideEditorPanel()}));window.addEventListener("storage",Ie(this,De,Ye).bind(this))};function Ke(e){var t=e.data||{};if(!t.payload){return}if(t.action==="register"){Ie(this,We,$e).call(this,t.payload.blocks)}else if(t.action==="showcontrols"){Ie(this,Ue,tt).call(this,t.payload.blockId,t.payload.top,t.payload.height)}else if(t.action==="changestate"){Ie(this,Xe,Ze).call(this,t.payload.blockId,t.payload.state)}else if(t.action==="mode"){Ie(this,Ve,at).call(this,t.payload)}else if(t.action==="hideall"){Ie(this,ze,et).call(this)}else if(t.action==="showblockcontrols"){Ie(this,ze,et).call(this);Ie(this,Re,it).call(this,t.payload.blockId)}}function Ye(){var e=babelHelpers.classPrivateFieldGet(this,Be).values();var t=!!window.localStorage.getItem("landingBlockId");for(var i=0,a=babelHelpers.classPrivateFieldGet(this,Be).size;i<a;i++){var n=e.next().value;Ce.changePasteMenuItem(n.id,t);Ie(this,je,Qe).call(this,n.id,Te(Te({},n),{},{permissions:Te(Te({},n.permissions),{},{allowPaste:t})}))}}function $e(e){var t=this;e.map((function(e){var i=e.id;e.leftContainer=Ce.getLeftContainer({designerBlockClick:e.permissions.allowDesignBlock?function(){babelHelpers.classPrivateFieldGet(t,Le).onDesignerBlockClick(i)}:null,styleBlockClick:e.permissions.allowModifyStyles?function(){babelHelpers.classPrivateFieldGet(t,Le).onStyleBlockClick(i)}:null,editBlockClick:e.permissions.allowEditContent?function(){babelHelpers.classPrivateFieldGet(t,Le).onEditBlockClick(i)}:null});e.rightContainer=Ce.getRightContainer({blockId:i,state:e.state,sortDownBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(t,Le).onSortDownBlockClick(i);Ie(t,ze,et).call(t)}:null,sortUpBlockClick:e.permissions.allowSorting?function(){babelHelpers.classPrivateFieldGet(t,Le).onSortUpBlockClick(i);Ie(t,ze,et).call(t)}:null,removeBlockClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(t,Le).onRemoveBlockClick(i);Ie(t,ze,et).call(t)}:null,onOpenAdditionalMenu:function e(i){babelHelpers.classPrivateFieldSet(t,Ne,i);setTimeout((function(){babelHelpers.classPrivateFieldGet(t,Le).onHideEditorPanel()}),0)},changeStateClick:e.permissions.allowChangeState?function(){Ce.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Le).onChangeStateBlockClick(i);Ie(t,Re,it).call(t,i)}:null,cutClick:e.permissions.allowRemove?function(){babelHelpers.classPrivateFieldGet(t,Le).onCutBlockClick(i);Ie(t,ze,et).call(t)}:null,copyClick:function e(){Ce.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Le).onCopyBlockClick(i);Ie(t,Re,it).call(t,i)},pasteClick:function e(){Ce.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Le).onPasteBlockClick(i);Ie(t,Re,it).call(t,i)},feedbackClick:function e(){Ce.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Le).onFeedbackClick(i)},saveInLibrary:e.permissions.allowSaveInLibrary?function(){Ce.closeBlockAdditionalMenu(i);babelHelpers.classPrivateFieldGet(t,Le).onSaveInLibraryClick(i)}:null});a.Dom.append(e.leftContainer,babelHelpers.classPrivateFieldGet(t,_e));a.Dom.append(e.rightContainer,babelHelpers.classPrivateFieldGet(t,_e));a.Dom.hide(e.leftContainer);a.Dom.hide(e.rightContainer);babelHelpers.classPrivateFieldGet(t,Be).set(i,e)}))}function Je(e){return babelHelpers.classPrivateFieldGet(this,Be).get(parseInt(e))}function Qe(e,t){babelHelpers.classPrivateFieldGet(this,Be).set(parseInt(e),t)}function Ze(e,t){var i=Ie(this,Ae,Je).call(this,e);if(i){Ce.changeStateMenuItem(e,t);Ie(this,je,Qe).call(this,e,Te(Te({},i),{},{state:t}))}}function et(){if(babelHelpers.classPrivateFieldGet(this,xe)){var e=babelHelpers.classPrivateFieldGet(this,Be).get(babelHelpers.classPrivateFieldGet(this,xe));a.Dom.hide(e.leftContainer);a.Dom.hide(e.rightContainer)}else{var t=babelHelpers.classPrivateFieldGet(this,Be).values();for(var i=0,n=babelHelpers.classPrivateFieldGet(this,Be).size;i<n;i++){var l=t.next().value;a.Dom.hide(l.leftContainer);a.Dom.hide(l.rightContainer)}}if(babelHelpers.classPrivateFieldGet(this,Ne)){Ce.closeBlockAdditionalMenu(babelHelpers.classPrivateFieldGet(this,Ne));babelHelpers.classPrivateFieldSet(this,Ne,null)}}function tt(e,t,i){var n=Ie(this,Ae,Je).call(this,e);if(!n){return}var l=babelHelpers.classPrivateFieldGet(this,Me).getBoundingClientRect();Ie(this,ze,et).call(this);babelHelpers.classPrivateFieldSet(this,xe,n.id);babelHelpers.classPrivateFieldGet(this,Le).onHideEditorPanel();t=parseInt(t);if(t<0&&i+t>50){i=i+t;t=0;a.Dom.addClass(n.leftContainer,"hide-top");a.Dom.addClass(n.rightContainer,"hide-top")}else{a.Dom.removeClass(n.leftContainer,"hide-top");a.Dom.removeClass(n.rightContainer,"hide-top")}a.Dom.show(n.leftContainer);a.Dom.show(n.rightContainer);n.leftContainer.style.width=l.left+"px";n.leftContainer.style.top=t+"px";n.leftContainer.style.height=i+"px";n.rightContainer.style.width=l.left+"px";n.rightContainer.style.left=l.left+l.width+"px";n.rightContainer.style.top=t+"px";n.rightContainer.style.height=i+"px"}function it(e){var t=this;var i=Ie(this,Ae,Je).call(this,e);if(i){babelHelpers.classPrivateFieldSet(this,xe,null);a.Dom.hide(i.leftContainer);a.Dom.hide(i.rightContainer);setTimeout((function(){babelHelpers.classPrivateFieldSet(t,xe,i.id);a.Dom.show(i.leftContainer);a.Dom.show(i.rightContainer)}),500)}}function at(e){if(e.type==="internal"){Ie(this,ze,et).call(this)}}function nt(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=lt(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=true,r=false,s;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();l=t.done;return t},e:function e(t){r=true;s=t},f:function e(){try{if(!l&&i["return"]!=null)i["return"]()}finally{if(r)throw s}}}}function lt(e,t){if(!e)return;if(typeof e==="string")return rt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rt(e,t)}function rt(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function st(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */st=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,n){var l=t&&t.prototype instanceof h?t:h,r=Object.create(l.prototype),s=new S(n||[]);return a(r,"_invoke",{value:k(e,i,s)}),r}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function h(){}function v(){}function p(){}var b={};o(b,l,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(T([])));g&&g!==t&&i.call(g,l)&&(b=g);var m=p.prototype=h.prototype=Object.create(b);function y(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,l,r,s){var o=d(e[a],e,l);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(u).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(o.arg)}var l;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){n(i,a,e,t)}))}return l=l?l.then(r,r):r()}})}function k(e,t,i){var a="suspendedStart";return function(n,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw l;return F()}for(i.method=n,i.arg=l;;){var r=i.delegate;if(r){var s=P(r,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=d(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var l=n.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function H(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(H,this),this.reset(!0)}function T(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:F}}function F(){return{value:undefined,done:!0}}return v.prototype=p,a(m,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:v,configurable:!0}),v.displayName=o(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(w.prototype),o(w.prototype,r,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,a,n,l){void 0===l&&(l=Promise);var r=new w(c(t,i,a,n),l);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(m),o(m,s,"Generator"),o(m,l,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(C),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function n(e,i){return s.type="throw",s.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function e(t,a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&i.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=a,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(s)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),C(a),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var l=n.arg;C(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:T(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),u}},e}function ot(e,t){dt(e,t);t.add(e)}function ct(e,t,i){dt(e,t);t.set(e,i)}function dt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ut(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ht=new WeakMap;var vt=new WeakMap;var pt=new WeakMap;var bt=new WeakMap;var ft=new WeakMap;var gt=new WeakMap;var mt=new WeakMap;var yt=new WeakMap;var wt=new WeakMap;var kt=new WeakMap;var Pt=new WeakMap;var Ht=new WeakMap;var Ct=new WeakMap;var St=new WeakMap;var Tt=new WeakSet;var Ft=new WeakSet;var Gt=new WeakSet;var Et=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"create",value:function(){var e=babelHelpers.asyncToGenerator(st().mark((function e(i){var a;return st().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:if(!(!i.copilotChat||!i.chatId)){n.next=2;break}return n.abrupt("return",null);case 2:a=new t(i);n.next=5;return a.init();case 5:return n.abrupt("return",a);case 6:case"end":return n.stop()}}),e)})));function i(t){return e.apply(this,arguments)}return i}()}]);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ot(babelHelpers.assertThisInitialized(i),Gt);ot(babelHelpers.assertThisInitialized(i),Ft);ot(babelHelpers.assertThisInitialized(i),Tt);ct(babelHelpers.assertThisInitialized(i),ht,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),vt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),pt,{writable:true,value:null});ct(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),ft,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),gt,{writable:true,value:null});ct(babelHelpers.assertThisInitialized(i),mt,{writable:true,value:false});ct(babelHelpers.assertThisInitialized(i),yt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),wt,{writable:true,value:false});ct(babelHelpers.assertThisInitialized(i),kt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),Pt,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),Ht,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),Ct,{writable:true,value:void 0});ct(babelHelpers.assertThisInitialized(i),St,{writable:true,value:void 0});i.setEventNamespace("BX.Landing.View.BlockGenerator");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),yt,new Map);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),kt,null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Pt,false);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ct,(new s.Highlight).setBorder(t.highlightColor,t.highlightWidth).setBackground("transparent").setSingleMode());babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),St,(new s.Highlight).setBorder(t.highlightColor,0).setBackground(t.highlightBackground).setSingleMode());babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ht,e.chatId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vt,e.copilotChat);i.onBlockMouseEnter=i.onBlockMouseEnter.bind(babelHelpers.assertThisInitialized(i));i.onBlockClick=i.onBlockClick.bind(babelHelpers.assertThisInitialized(i));i.onChatMessage=i.onChatMessage.bind(babelHelpers.assertThisInitialized(i));i.onEditorLoad=i.onEditorLoad.bind(babelHelpers.assertThisInitialized(i));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ht,r.PageObject.getEditorWindow());if(!babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ht)){console.error("Can not load editor window")}if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ht).document.readyState==="complete"){i.onEditorLoad()}else{a.Event.bind(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Ht),"load",i.onEditorLoad)}return i}babelHelpers.createClass(t,[{key:"init",value:function(){var e=babelHelpers.asyncToGenerator(st().mark((function e(){var t;return st().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return a.Runtime.loadExtension("landing.copilot.chat");case 2:t=i.sent;babelHelpers.classPrivateFieldSet(this,bt,t.CopilotChatEvents);babelHelpers.classPrivateFieldSet(this,ft,t.CopilotChatMessageType);case 5:case"end":return i.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onEditorLoad",value:function e(){var t=this;var i=r.PageObject.getBlocks();i.forEach((function(e){babelHelpers.classPrivateFieldGet(t,yt).set(e.id,{id:e.id,anchor:e.anchor,content:e.content})}));babelHelpers.classPrivateFieldGet(this,Ht).BX.addCustomEvent(babelHelpers.classPrivateFieldGet(this,Ht),"BX.Landing.Block:init",(function(e){t.onBlockAdd(e.blockId,e.block.id,e.content)}));if(babelHelpers.classPrivateFieldGet(this,wt)){ut(this,Ft,Lt).call(this)}}},{key:"onBlockAdd",value:function e(t,i,a){babelHelpers.classPrivateFieldGet(this,yt).set(t,{id:t,anchor:i,content:a});if(babelHelpers.classPrivateFieldGet(this,wt)){ut(this,Ft,Lt).call(this)}}},{key:"onBlockClick",value:function e(t){var i=this;var n=t.currentTarget;var l=null;var r=nt(babelHelpers.classPrivateFieldGet(this,yt).values()),s;try{for(r.s();!(s=r.n()).done;){var o=s.value;if(n===o.content){l=o}}}catch(e){r.e(e)}finally{r.f()}var c=babelHelpers.classPrivateFieldGet(this,ht);if(l===null){return}if(babelHelpers.classPrivateFieldGet(this,kt)!==null&&babelHelpers.classPrivateFieldGet(this,kt).id===l.id){return}babelHelpers.classPrivateFieldSet(this,kt,l);a.ajax.runAction("landing.api.copilot.checkBlockGeneratable",{data:{blockId:l.id,chatId:c}}).then((function(e){if(e.data){babelHelpers.classPrivateFieldSet(i,Pt,true);babelHelpers.classPrivateFieldGet(i,St).show(babelHelpers.classPrivateFieldGet(i,kt).content)}else{babelHelpers.classPrivateFieldSet(i,Pt,false);babelHelpers.classPrivateFieldGet(i,St).hide()}}))["catch"]((function(){babelHelpers.classPrivateFieldSet(i,Pt,false);babelHelpers.classPrivateFieldGet(i,St).hide()}))}},{key:"onChatMessage",value:function e(t){var i,n=this;var l=(i=t.getData())===null||i===void 0?void 0:i.message;if(l&&(l.authorId||0)>0&&l.type===babelHelpers.classPrivateFieldGet(this,ft).DEFAULT){if(babelHelpers.classPrivateFieldGet(this,kt)===null){a.ajax.runAction("landing.api.copilot.sendBlockGenerationNeedSelectMessage",{data:{siteId:c.Env.getInstance().getSiteId()}});return}if(!babelHelpers.classPrivateFieldGet(this,Pt)){a.ajax.runAction("landing.api.copilot.sendBlockGenerationWrongSelectMessage",{data:{siteId:c.Env.getInstance().getSiteId()}});return}var s=Promise.resolve();if(!babelHelpers.classPrivateFieldGet(this,pt)){var o=r.PageObject.getEditorWindow();s=o.BX.Runtime.loadExtension("landing.animation.copilot").then((function(e){babelHelpers.classPrivateFieldSet(n,pt,new e.Copilot);babelHelpers.classPrivateFieldGet(n,pt).subscribe("onBlockFinish",n.onBlockAnimateFinish.bind(n));ut(n,Tt,It).call(n)}))}s.then((function(){return a.ajax.runAction("landing.api.copilot.executeBlockGeneration",{data:{siteId:c.Env.getInstance().getSiteId(),blockId:babelHelpers.classPrivateFieldGet(n,kt).id,wishes:l.content}})})).then((function(e){if(e.status==="success"){babelHelpers.classPrivateFieldSet(n,gt,e.data);babelHelpers.classPrivateFieldGet(n,pt).setBlocksData([{id:babelHelpers.classPrivateFieldGet(n,kt).id,anchor:babelHelpers.classPrivateFieldGet(n,kt).anchor,element:babelHelpers.classPrivateFieldGet(n,kt).content,images:[]}]).disableEditor().showLoader();n.onBlockGenerationStart()}}))["catch"]((function(e){console.error("Error while execute block generation",e)}))}}},{key:"onBlockGenerationStart",value:function e(){var t=this;babelHelpers.classPrivateFieldSet(this,mt,true);setTimeout((function(){if(babelHelpers.classPrivateFieldGet(t,mt)){t.emit("onGenerationStart")}}),3e3)}},{key:"onBlockAnimateFinish",value:function e(){var t=this;babelHelpers.classPrivateFieldSet(this,mt,false);setTimeout((function(){t.emit("onGenerationFinish")}),3e3)}},{key:"setSelectMode",value:function e(){var t=u.StylePanel.getInstance();if(t.isShown()){t.hide()}if(babelHelpers.classPrivateFieldGet(this,wt)){return}babelHelpers.classPrivateFieldSet(this,wt,true);ut(this,Ft,Lt).call(this);if(babelHelpers.classPrivateFieldGet(this,vt)&&babelHelpers.classPrivateFieldGet(this,bt)&&babelHelpers.classPrivateFieldGet(this,ft)){babelHelpers.classPrivateFieldGet(this,vt).subscribe(babelHelpers.classPrivateFieldGet(this,bt).NEW_MESSAGE,this.onChatMessage)}this.disableEditor()}},{key:"disableEditor",value:function e(){a.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Ht).document.body,t.selectModeClass)}},{key:"unsetSelectMode",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,wt)){return}babelHelpers.classPrivateFieldSet(this,wt,false);ut(this,Gt,Bt).call(this);babelHelpers.classPrivateFieldGet(this,Ct).hide();babelHelpers.classPrivateFieldGet(this,St).hide();if(babelHelpers.classPrivateFieldGet(this,vt)&&babelHelpers.classPrivateFieldGet(this,bt)){babelHelpers.classPrivateFieldGet(this,vt).unsubscribe(babelHelpers.classPrivateFieldGet(this,bt).NEW_MESSAGE,this.onChatMessage)}this.enableEditor()}},{key:"enableEditor",value:function e(){a.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Ht).document.body,t.selectModeClass)}},{key:"onBlockMouseEnter",value:function e(t){babelHelpers.classPrivateFieldGet(this,Ct).show(t.currentTarget)}}]);return t}(n.EventEmitter);function It(){var e=this;l.PULL.subscribe({type:l.PullClient.SubscriptionType.Server,moduleId:"landing",callback:function t(i){if(!babelHelpers.classPrivateFieldGet(e,mt)){return}if(i.params.generationId!==undefined&&babelHelpers.classPrivateFieldGet(e,gt)!==null&&i.params.generationId!==babelHelpers.classPrivateFieldGet(e,gt)){return}var a=i.command;if(a==="LandingCopilotGeneration:onGenerationFinish"){d.History.getInstance().push()}if(a==="LandingCopilotGeneration:onGenerationError"){babelHelpers.classPrivateFieldGet(e,pt).stop();babelHelpers.classPrivateFieldGet(e,pt).hideLoader();babelHelpers.classPrivateFieldGet(e,pt).enableEditor();e.onBlockAnimateFinish()}}})}function Lt(){var e=nt(babelHelpers.classPrivateFieldGet(this,yt).values()),t;try{for(e.s();!(t=e.n()).done;){var i=t.value;var n=i.content;a.Event.bind(n,"mouseenter",this.onBlockMouseEnter);a.Event.bind(n,"click",this.onBlockClick)}}catch(t){e.e(t)}finally{e.f()}}function Bt(){var e=nt(babelHelpers.classPrivateFieldGet(this,yt).values()),t;try{for(e.s();!(t=e.n()).done;){var i=t.value;var n=i.content;a.Event.unbind(n,"mouseenter",this.onBlockMouseEnter);a.Event.unbind(n,"click",this.onBlockClick)}}catch(t){e.e(t)}finally{e.f()}}babelHelpers.defineProperty(Et,"selectModeClass","landing-copilot-generation");babelHelpers.defineProperty(Et,"highlightColor","#8e52ec");babelHelpers.defineProperty(Et,"highlightWidth",4);babelHelpers.defineProperty(Et,"highlightBackground","rgba(142, 82, 236, 0.4)");var _t,Mt,xt,Nt,Ot,Dt,Wt,At;function jt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jt=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,n){var l=t&&t.prototype instanceof h?t:h,r=Object.create(l.prototype),s=new S(n||[]);return a(r,"_invoke",{value:k(e,i,s)}),r}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function h(){}function v(){}function p(){}var b={};o(b,l,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(T([])));g&&g!==t&&i.call(g,l)&&(b=g);var m=p.prototype=h.prototype=Object.create(b);function y(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,l,r,s){var o=d(e[a],e,l);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(u).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(o.arg)}var l;a(this,"_invoke",{value:function e(i,a){function r(){return new t((function(e,t){n(i,a,e,t)}))}return l=l?l.then(r,r):r()}})}function k(e,t,i){var a="suspendedStart";return function(n,l){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw l;return F()}for(i.method=n,i.arg=l;;){var r=i.delegate;if(r){var s=P(r,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=d(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var l=n.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function H(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(H,this),this.reset(!0)}function T(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:F}}function F(){return{value:undefined,done:!0}}return v.prototype=p,a(m,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:v,configurable:!0}),v.displayName=o(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(w.prototype),o(w.prototype,r,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,a,n,l){void 0===l&&(l=Promise);var r=new w(c(t,i,a,n),l);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(m),o(m,s,"Generator"),o(m,l,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(C),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function n(e,i){return s.type="throw",s.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function e(t,a){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&i.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=a&&a<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=a,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(s)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),C(a),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var l=n.arg;C(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:T(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),u}},e}function Xt(e,t){Ut(e,t);t.add(e)}function zt(e,t,i){Ut(e,t);t.set(e,i)}function Ut(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Rt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Vt=new WeakMap;var qt=new WeakMap;var Kt=new WeakMap;var Yt=new WeakSet;var $t=function(){function e(t){babelHelpers.classCallCheck(this,e);Xt(this,Yt);zt(this,Vt,{writable:true,value:void 0});zt(this,qt,{writable:true,value:void 0});zt(this,Kt,{writable:true,value:void 0});this.layout={container:null,pulse:null,close:null,switcherPreview:null,switcherChat:null,chat:null,preview:null};this.switchers=[];babelHelpers.classPrivateFieldSet(this,qt,t.copilotChatOptions);this.init()}babelHelpers.createClass(e,[{key:"getSwitcherChat",value:function e(){var t=this;if(!this.layout.switcherChat){this.layout.switcherChat=a.Tag.render(_t||(_t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --chat">\n\t\t\t\t\t<div class="ui-icon-set --copilot-ai"></div>\n\t\t\t\t</div>\n\t\t\t'])));this.switchers.push(this.layout.switcherChat);a.Event.bind(this.layout.switcherChat,"click",(function(){t.showChat();t.hidePreview();t.adjustSwitcher(t.layout.switcherChat)}))}return this.layout.switcherChat}},{key:"getSwitcherPreview",value:function e(){var t=this;if(!this.layout.switcherPreview){this.layout.switcherPreview=a.Tag.render(Mt||(Mt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --preview">\n\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t</div>\n\t\t\t'])));this.switchers.push(this.layout.switcherPreview);a.Event.bind(this.layout.switcherPreview,"click",(function(){t.showPreview();t.hideChat();t.adjustSwitcher(t.layout.switcherPreview)}))}return this.layout.switcherPreview}},{key:"showChat",value:function(){var e=babelHelpers.asyncToGenerator(jt().mark((function e(){var t=this;var i,n;return jt().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:i=null;if(!babelHelpers.classPrivateFieldGet(this,qt).isCopilotFeatureEnabled){i=babelHelpers.classPrivateFieldGet(this,qt).copilotFeatureEnabledSlider}else if(!babelHelpers.classPrivateFieldGet(this,qt).isCopilotActive){i=babelHelpers.classPrivateFieldGet(this,qt).copilotUnactiveSlider}if(!i){l.next=5;break}BX.UI.InfoHelper.show(i);return l.abrupt("return");case 5:l.prev=5;if(babelHelpers.classPrivateFieldGet(this,Vt)){l.next=14;break}l.t0=babelHelpers;l.t1=this;l.t2=Vt;l.next=12;return Rt(this,Yt,Jt).call(this);case 12:l.t3=l.sent;l.t0.classPrivateFieldSet.call(l.t0,l.t1,l.t2,l.t3);case 14:if(!(!babelHelpers.classPrivateFieldGet(this,Kt)&&babelHelpers.classPrivateFieldGet(this,Vt))){l.next=23;break}l.t4=babelHelpers;l.t5=this;l.t6=Kt;l.next=20;return Et.create({chatId:babelHelpers.classPrivateFieldGet(this,qt).chatId||null,copilotChat:babelHelpers.classPrivateFieldGet(this,Vt)});case 20:l.t7=l.sent;l.t4.classPrivateFieldSet.call(l.t4,l.t5,l.t6,l.t7);if(babelHelpers.classPrivateFieldGet(this,Kt)){babelHelpers.classPrivateFieldGet(this,Kt).subscribe("onGenerationStart",(function(){t.hide()}));babelHelpers.classPrivateFieldGet(this,Kt).subscribe("onGenerationFinish",(function(){t.show();t.showChat();t.adjustSwitcher(t.layout.switcherChat)}))}case 23:if(babelHelpers.classPrivateFieldGet(this,Vt).isShown()===false){babelHelpers.classPrivateFieldGet(this,Vt).show()}(n=babelHelpers.classPrivateFieldGet(this,Kt))===null||n===void 0?void 0:n.setSelectMode();a.Dom.addClass(this.getChatContainer(),"--show");l.next=31;break;case 28:l.prev=28;l.t8=l["catch"](5);console.error(l.t8);case 31:case"end":return l.stop()}}),e,this,[[5,28]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"hideChat",value:function e(){var t,i;(t=babelHelpers.classPrivateFieldGet(this,Vt))===null||t===void 0?void 0:t.hide();(i=babelHelpers.classPrivateFieldGet(this,Kt))===null||i===void 0?void 0:i.unsetSelectMode();a.Dom.removeClass(this.getChatContainer(),"--show")}},{key:"showPreview",value:function e(){a.Dom.addClass(this.getPreviewContainer(),"--show")}},{key:"hidePreview",value:function e(){a.Dom.removeClass(this.getPreviewContainer(),"--show")}},{key:"getClose",value:function e(){var t=this;if(!this.layout.close){this.layout.close=a.Tag.render(xt||(xt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__navigation-item --close">\n\t\t\t\t\t<div class="ui-icon-set --cross-45"></div>\n\t\t\t\t</div>\n\t\t\t'])));a.Event.bind(this.layout.close,"click",(function(){return t.hide()}))}return this.layout.close}},{key:"getPulse",value:function e(){var t=this;if(!this.layout.pulse){if(babelHelpers.classPrivateFieldGet(this,qt).isCopilotFeatureAvailable){this.layout.pulse=a.Tag.render(Nt||(Nt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="landing-slide-panel__navigation-item --pulse --animate">\n\t\t\t\t\t\t<div class="ui-icon-set --copilot-ai"></div>\n\t\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])))}else{this.layout.pulse=a.Tag.render(Ot||(Ot=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="landing-slide-panel__navigation-item --pulse">\n\t\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t</div>\n\t\t\t\t'])))}a.Event.bind(this.layout.pulse,"click",(function(){return t.show()}))}return this.layout.pulse}},{key:"getChatContainer",value:function e(){if(!this.layout.chat){this.layout.chat=a.Tag.render(Dt||(Dt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__container-item --chat"></div>\n\t\t\t'])))}return this.layout.chat}},{key:"getPreviewContainer",value:function e(){if(!this.layout.preview){this.layout.preview=a.Tag.render(Wt||(Wt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel__container-item --preview"></div>\n\t\t\t'])))}return this.layout.preview}},{key:"getContainer",value:function e(){if(!this.layout.container){this.layout.container=a.Tag.render(At||(At=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-slide-panel">\n\t\t\t\t\t<div class="landing-slide-panel-inner">\t\t\t\t\t\n\t\t\t\t\t\t<div class="landing-slide-panel__container">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="landing-slide-panel__navigation">\n\t\t\t\t\t\t \t',"\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),this.getChatContainer(),this.getPreviewContainer(),babelHelpers.classPrivateFieldGet(this,qt).isCopilotFeatureAvailable?this.getSwitcherChat():"",this.getSwitcherPreview(),this.getClose(),this.getPulse())}return this.layout.container}},{key:"adjustSwitcher",value:function e(t){this.switchers.forEach((function(e){return a.Dom.removeClass(e,"--active")}));if(a.Type.isDomNode(t)){a.Dom.addClass(t,"--active")}}},{key:"show",value:function e(){a.Dom.addClass(this.getContainer(),"--open")}},{key:"hide",value:function e(){a.Dom.removeClass(this.getContainer(),"--open");this.hideChat();this.hidePreview();this.adjustSwitcher()}},{key:"init",value:function e(){a.Dom.append(this.getContainer(),document.body)}}]);return e}();function Jt(){return Qt.apply(this,arguments)}function Qt(){Qt=babelHelpers.asyncToGenerator(jt().mark((function e(){var t,i,n,l,r,s,o=this;var c,d,u;return jt().wrap((function e(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return a.Runtime.loadExtension("landing.copilot.chat");case 2:c=h.sent;d=c.Chat;this.copilotChatEvents=c.CopilotChatEvents;this.copilotChatMessageType=c.CopilotChatMessageType;h.next=8;return d.getCopilotChatInstance({entityId:(t=babelHelpers.classPrivateFieldGet(this,qt))===null||t===void 0?void 0:t.entityId,chatId:(i=babelHelpers.classPrivateFieldGet(this,qt))===null||i===void 0?void 0:i.chatId,scenario:"site_with_ai_change_block",showChatButtonElement:(n=this.layout.switcherChat)!==null&&n!==void 0?n:null,isSiteEditChat:((l=babelHelpers.classPrivateFieldGet(this,qt))===null||l===void 0?void 0:l.isSiteEditChat)===true});case 8:u=h.sent;if(!((r=babelHelpers.classPrivateFieldGet(this,qt))!==null&&r!==void 0&&r.chatId)&&(s=babelHelpers.classPrivateFieldGet(this,qt))!==null&&s!==void 0&&s.onChatCreate){u.subscribe(this.copilotChatEvents.INIT_CHAT,(function(e){babelHelpers.classPrivateFieldGet(o,qt).onChatCreate(e.getData());babelHelpers.classPrivateFieldGet(o,qt).chatId=e.getData().chatId}))}return h.abrupt("return",u);case 11:case"end":return h.stop()}}),e,this)})));return Qt.apply(this,arguments)}e.Device=q;e.ExternalControls=qe;e.SlidePanel=$t})(this.BX.Landing.View=this.BX.Landing.View||{},BX.Main,BX,BX,BX.Event,BX,BX.Landing,BX.Landing.UI,BX.Landing.Animation,BX.Landing,BX.Landing,BX.Landing.UI.Panel);
//# sourceMappingURL=script.map.js