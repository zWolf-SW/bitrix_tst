(function(){BX.namespace("BX.Sender");if(BX.Sender.TriggerEditor){return}const t=BX.Sender.Page;const e=BX.Sender.Helper;function i(){this.context=null;this.editor=null}i.prototype.init=function(i){this.toolbarId=i.toolbarId;this.isFrame=i.isFrame||false;this.isSaved=i.isSaved||false;this.triggers=i.triggers;this.prettyDateFormat=i.prettyDateFormat;this.mess=i.mess||{};this.campaignTile=i.campaignTile||{};this.context=BX(i.containerId);this.uiToolbar=BX.UI.ToolbarManager.get(this.toolbarId);this.titleNode=e.getNode("campaign-title",this.context);this.initUi();t.initButtons();e.hint.init(this.context)};i.prototype.initUi=function(){this.ui={title:this.titleNode};if(!this.ui.title.value.trim()){this.ui.title.value=e.replace(this.mess.patternTitle,{name:this.mess.newTitle,date:BX.date.format(this.prettyDateFormat)})}if(this.isFrame&&this.isSaved){if(top.BX.Sender.Page){top.BX.Sender.Page.reloadGrid()}top.BX.onCustomEvent(top,"sender-campaign-edit-change",[this.campaignTile]);BX.Sender.Page.slider.close()}if(this.uiToolbar&&this.isFrame){this.uiToolbar.subscribe(BX.UI.ToolbarEvents.finishEditing,(t=>{const e=t.getData().updatedTitle;if(e&&this.titleNode){this.titleNode.value=e}}))}};i.prototype.setTrigger=function(t,e){var i="START";if(t){i="END"}var s=BX("ENDPOINT_"+i+"_MODULE_ID");var a=BX("ENDPOINT_"+i+"_CODE");var r=BX("ENDPOINT_"+i+"_FORM");var n=BX("ENDPOINT_"+i+"_IS_CLOSED_TRIGGER");var l=BX("ENDPOINT_"+i+"_CLOSED_TRIGGER_TIME");var o=BX("ENDPOINT_"+i+"_RUN_FOR_OLD_DATA_FORM");var d=BX("ENDPOINT_"+i+"_CLOSED_FORM");var h=BX("ENDPOINT_"+i+"_SETTINGS");if(e&&this.triggers[i][e]){s.value=this.triggers[i][e].MODULE_ID;a.value=this.triggers[i][e].CODE;r.innerHTML=this.triggers[i][e].FORM;n.value=this.triggers[i][e].IS_CLOSED_TRIGGER;l.value=this.triggers[i][e].CLOSED_TRIGGER_TIME;var g=this.triggers[i][e].CAN_RUN_FOR_OLD_DATA;if(n.value==="Y")d.style.display="";else d.style.display="none";if(n.value==="Y"||r.innerHTML.length>0)h.style.display="";else h.style.display="none";if(o){if(g==="Y")o.style.display="";else o.style.display="none"}}else{s.value="";a.value="";r.innerHTML="";n.value="N";d.style.display="none";h.style.display="none"}};BX.Sender.TriggerEditor=new i})(window);
//# sourceMappingURL=script.map.js