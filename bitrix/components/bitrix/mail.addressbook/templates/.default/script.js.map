{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nconst namespace = Reflection.namespace('BX.Mail.AddressBook');\nconst gridId = 'MAIL_ADDRESSBOOK_LIST';\n\nimport { Avatar } from 'mail.avatar';\n\nBX.ready(function()\n{\n\tconst addContactButton = document.getElementsByClassName('mail-address-book-add-button')[0];\n\n\taddContactButton.onclick = () => {\n\t\ttop.BX.Runtime.loadExtension('mail.dialogeditcontact').then(\n\t\t\t() => top.BX.Mail.AddressBook.DialogEditContact.openCreateDialog(),\n\t\t);\n\t};\n\n\tnamespace.openEditDialog = function(attributes) {\n\t\ttop.BX.Runtime.loadExtension('mail.dialogeditcontact').then(\n\t\t\t() => top.BX.Mail.AddressBook.DialogEditContact.openEditDialog(attributes),\n\t\t);\n\t};\n\n\tnamespace.openRemoveDialog = function(configContact) {\n\t\ttop.BX.Runtime.loadExtension('mail.dialogeditcontact').then(\n\t\t\t() => {\n\t\t\t\ttop.BX.Mail.AddressBook.DialogEditContact.openRemoveDialog(configContact).then(\n\t\t\t\t\t() => reloadGrid(gridId),\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\t};\n\n\tfunction reloadGrid(gridID)\n\t{\n\t\tconst gridObject = BX.Main.gridManager.getById(gridID);\n\n\t\tif (gridObject.hasOwnProperty('instance'))\n\t\t{\n\t\t\tgridObject.instance.reloadTable('POST');\n\t\t}\n\t}\n\n\tAvatar.replaceTagsWithAvatars({\n\t\tclassName: 'mail-ui-avatar',\n\t});\n\n\tEventEmitter.subscribe('SidePanel.Slider:onMessage', (event) => {\n\t\tconst [messageEvent] = event.getCompatData();\n\n\t\tif(messageEvent.getEventId() === 'dialogEditContact::reloadList')\n\t\t{\n\t\t\treloadGrid(gridId);\n\t\t}\n\t});\n\n\tEventEmitter.subscribe('Grid::updated', (event) => {\n\t\tconst [messageEvent] = event.getCompatData();\n\n\t\tif (messageEvent.containerId === gridId)\n\t\t{\n\t\t\tAvatar.replaceTagsWithAvatars({\n\t\t\t\tclassName: 'mail-ui-avatar',\n\t\t\t});\n\t\t}\n\t});\n});"],"names":["namespace","Reflection","gridId","BX","ready","addContactButton","document","getElementsByClassName","onclick","top","Runtime","loadExtension","then","Mail","AddressBook","DialogEditContact","openCreateDialog","openEditDialog","attributes","openRemoveDialog","configContact","reloadGrid","gridID","gridObject","Main","gridManager","getById","hasOwnProperty","instance","reloadTable","Avatar","replaceTagsWithAvatars","className","EventEmitter","subscribe","event","getCompatData","messageEvent","getEventId","containerId"],"mappings":";;;;CAGA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,qBAAqB,CAAC;CAC7D,IAAME,MAAM,GAAG,uBAAuB;AAEtC,CAEAC,EAAE,CAACC,KAAK,CAAC,YACT;GACC,IAAMC,gBAAgB,GAAGC,QAAQ,CAACC,sBAAsB,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC;GAE3FF,gBAAgB,CAACG,OAAO,GAAG,YAAM;KAChCC,GAAG,CAACN,EAAE,CAACO,OAAO,CAACC,aAAa,CAAC,wBAAwB,CAAC,CAACC,IAAI,CAC1D;OAAA,OAAMH,GAAG,CAACN,EAAE,CAACU,IAAI,CAACC,WAAW,CAACC,iBAAiB,CAACC,gBAAgB,EAAE;OAClE;IACD;GAEDhB,SAAS,CAACiB,cAAc,GAAG,UAASC,UAAU,EAAE;KAC/CT,GAAG,CAACN,EAAE,CAACO,OAAO,CAACC,aAAa,CAAC,wBAAwB,CAAC,CAACC,IAAI,CAC1D;OAAA,OAAMH,GAAG,CAACN,EAAE,CAACU,IAAI,CAACC,WAAW,CAACC,iBAAiB,CAACE,cAAc,CAACC,UAAU,CAAC;OAC1E;IACD;GAEDlB,SAAS,CAACmB,gBAAgB,GAAG,UAASC,aAAa,EAAE;KACpDX,GAAG,CAACN,EAAE,CAACO,OAAO,CAACC,aAAa,CAAC,wBAAwB,CAAC,CAACC,IAAI,CAC1D,YAAM;OACLH,GAAG,CAACN,EAAE,CAACU,IAAI,CAACC,WAAW,CAACC,iBAAiB,CAACI,gBAAgB,CAACC,aAAa,CAAC,CAACR,IAAI,CAC7E;SAAA,OAAMS,UAAU,CAACnB,MAAM,CAAC;SACxB;MACD,CACD;IACD;GAED,SAASmB,UAAU,CAACC,MAAM,EAC1B;KACC,IAAMC,UAAU,GAAGpB,EAAE,CAACqB,IAAI,CAACC,WAAW,CAACC,OAAO,CAACJ,MAAM,CAAC;KAEtD,IAAIC,UAAU,CAACI,cAAc,CAAC,UAAU,CAAC,EACzC;OACCJ,UAAU,CAACK,QAAQ,CAACC,WAAW,CAAC,MAAM,CAAC;;;GAIzCC,kBAAM,CAACC,sBAAsB,CAAC;KAC7BC,SAAS,EAAE;IACX,CAAC;GAEFC,6BAAY,CAACC,SAAS,CAAC,4BAA4B,EAAE,UAACC,KAAK,EAAK;KAC/D,2BAAuBA,KAAK,CAACC,aAAa,EAAE;OAAA;OAArCC,YAAY;KAEnB,IAAGA,YAAY,CAACC,UAAU,EAAE,KAAK,+BAA+B,EAChE;OACCjB,UAAU,CAACnB,MAAM,CAAC;;IAEnB,CAAC;GAEF+B,6BAAY,CAACC,SAAS,CAAC,eAAe,EAAE,UAACC,KAAK,EAAK;KAClD,4BAAuBA,KAAK,CAACC,aAAa,EAAE;OAAA;OAArCC,YAAY;KAEnB,IAAIA,YAAY,CAACE,WAAW,KAAKrC,MAAM,EACvC;OACC4B,kBAAM,CAACC,sBAAsB,CAAC;SAC7BC,SAAS,EAAE;QACX,CAAC;;IAEH,CAAC;CACH,CAAC,CAAC;;;;"}